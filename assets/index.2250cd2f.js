var $P=Object.defineProperty,jP=Object.defineProperties;var qP=Object.getOwnPropertyDescriptors;var _w=Object.getOwnPropertySymbols;var KP=Object.prototype.hasOwnProperty,XP=Object.prototype.propertyIsEnumerable;var yg=(e,t,n)=>t in e?$P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sn=(e,t)=>{for(var n in t||(t={}))KP.call(t,n)&&yg(e,n,t[n]);if(_w)for(var n of _w(t))XP.call(t,n)&&yg(e,n,t[n]);return e},Fo=(e,t)=>jP(e,qP(t));var Bo=(e,t,n)=>(yg(e,typeof t!="symbol"?t+"":t,n),n);const YP=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}};YP();function O0(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const ZP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",JP=O0(ZP);function A1(e){return!!e||e===""}function Ba(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=ln(i)?tN(i):Ba(i);if(r)for(const s in r)t[s]=r[s]}return t}else{if(ln(e))return e;if(fn(e))return e}}const QP=/;(?![^(]*\))/g,eN=/:(.+)/;function tN(e){const t={};return e.split(QP).forEach(n=>{if(n){const i=n.split(eN);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function kt(e){let t="";if(ln(e))t=e;else if(ot(e))for(let n=0;n<e.length;n++){const i=kt(e[n]);i&&(t+=i+" ")}else if(fn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Je=e=>ln(e)?e:e==null?"":ot(e)||fn(e)&&(e.toString===L1||!dt(e.toString))?JSON.stringify(e,C1,2):String(e),C1=(e,t)=>t&&t.__v_isRef?C1(e,t.value):Vl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:I1(t)?{[`Set(${t.size})`]:[...t.values()]}:fn(t)&&!ot(t)&&!P1(t)?String(t):t,Bt={},Bl=[],yr=()=>{},nN=()=>!1,iN=/^on[^a-z]/,Bp=e=>iN.test(e),D0=e=>e.startsWith("onUpdate:"),An=Object.assign,F0=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},rN=Object.prototype.hasOwnProperty,St=(e,t)=>rN.call(e,t),ot=Array.isArray,Vl=e=>Vp(e)==="[object Map]",I1=e=>Vp(e)==="[object Set]",dt=e=>typeof e=="function",ln=e=>typeof e=="string",B0=e=>typeof e=="symbol",fn=e=>e!==null&&typeof e=="object",R1=e=>fn(e)&&dt(e.then)&&dt(e.catch),L1=Object.prototype.toString,Vp=e=>L1.call(e),sN=e=>Vp(e).slice(8,-1),P1=e=>Vp(e)==="[object Object]",V0=e=>ln(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ff=O0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Up=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},oN=/-(\w)/g,Gr=Up(e=>e.replace(oN,(t,n)=>n?n.toUpperCase():"")),aN=/\B([A-Z])/g,yc=Up(e=>e.replace(aN,"-$1").toLowerCase()),zp=Up(e=>e.charAt(0).toUpperCase()+e.slice(1)),_g=Up(e=>e?`on${zp(e)}`:""),Nu=(e,t)=>!Object.is(e,t),pf=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Nf=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},kf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let bw;const lN=()=>bw||(bw=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Nr;class cN{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Nr&&(this.parent=Nr,this.index=(Nr.scopes||(Nr.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Nr;try{return Nr=this,t()}finally{Nr=n}}}on(){Nr=this}off(){Nr=this.parent}stop(t){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function uN(e,t=Nr){t&&t.active&&t.effects.push(e)}const U0=e=>{const t=new Set(e);return t.w=0,t.n=0,t},N1=e=>(e.w&vo)>0,k1=e=>(e.n&vo)>0,hN=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=vo},dN=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];N1(r)&&!k1(r)?r.delete(e):t[n++]=r,r.w&=~vo,r.n&=~vo}t.length=n}},Wv=new WeakMap;let nu=0,vo=1;const Gv=30;let gr;const la=Symbol(""),$v=Symbol("");class z0{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,uN(this,i)}run(){if(!this.active)return this.fn();let t=gr,n=fo;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=gr,gr=this,fo=!0,vo=1<<++nu,nu<=Gv?hN(this):ww(this),this.fn()}finally{nu<=Gv&&dN(this),vo=1<<--nu,gr=this.parent,fo=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){gr===this?this.deferStop=!0:this.active&&(ww(this),this.onStop&&this.onStop(),this.active=!1)}}function ww(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let fo=!0;const O1=[];function Va(){O1.push(fo),fo=!1}function Ua(){const e=O1.pop();fo=e===void 0?!0:e}function Gi(e,t,n){if(fo&&gr){let i=Wv.get(e);i||Wv.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=U0()),D1(r)}}function D1(e,t){let n=!1;nu<=Gv?k1(e)||(e.n|=vo,n=!N1(e)):n=!e.has(gr),n&&(e.add(gr),gr.deps.push(e))}function xs(e,t,n,i,r,s){const o=Wv.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&ot(e))o.forEach((l,c)=>{(c==="length"||c>=i)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),t){case"add":ot(e)?V0(n)&&a.push(o.get("length")):(a.push(o.get(la)),Vl(e)&&a.push(o.get($v)));break;case"delete":ot(e)||(a.push(o.get(la)),Vl(e)&&a.push(o.get($v)));break;case"set":Vl(e)&&a.push(o.get(la));break}if(a.length===1)a[0]&&jv(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);jv(U0(l))}}function jv(e,t){const n=ot(e)?e:[...e];for(const i of n)i.computed&&xw(i);for(const i of n)i.computed||xw(i)}function xw(e,t){(e!==gr||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const fN=O0("__proto__,__v_isRef,__isVue"),F1=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(B0)),pN=H0(),mN=H0(!1,!0),gN=H0(!0),Ew=vN();function vN(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=Mt(this);for(let s=0,o=this.length;s<o;s++)Gi(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(Mt)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Va();const i=Mt(this)[t].apply(this,n);return Ua(),i}}),e}function H0(e=!1,t=!1){return function(i,r,s){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&s===(e?t?NN:H1:t?z1:U1).get(i))return i;const o=ot(i);if(!e&&o&&St(Ew,r))return Reflect.get(Ew,r,s);const a=Reflect.get(i,r,s);return(B0(r)?F1.has(r):fN(r))||(e||Gi(i,"get",r),t)?a:tn(a)?o&&V0(r)?a:a.value:fn(a)?e?Of(a):ur(a):a}}const yN=B1(),_N=B1(!0);function B1(e=!1){return function(n,i,r,s){let o=n[i];if(ku(o)&&tn(o)&&!tn(r))return!1;if(!e&&!ku(r)&&(qv(r)||(r=Mt(r),o=Mt(o)),!ot(n)&&tn(o)&&!tn(r)))return o.value=r,!0;const a=ot(n)&&V0(i)?Number(i)<n.length:St(n,i),l=Reflect.set(n,i,r,s);return n===Mt(s)&&(a?Nu(r,o)&&xs(n,"set",i,r):xs(n,"add",i,r)),l}}function bN(e,t){const n=St(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&xs(e,"delete",t,void 0),i}function wN(e,t){const n=Reflect.has(e,t);return(!B0(t)||!F1.has(t))&&Gi(e,"has",t),n}function xN(e){return Gi(e,"iterate",ot(e)?"length":la),Reflect.ownKeys(e)}const V1={get:pN,set:yN,deleteProperty:bN,has:wN,ownKeys:xN},EN={get:gN,set(e,t){return!0},deleteProperty(e,t){return!0}},SN=An({},V1,{get:mN,set:_N}),W0=e=>e,Hp=e=>Reflect.getPrototypeOf(e);function fd(e,t,n=!1,i=!1){e=e.__v_raw;const r=Mt(e),s=Mt(t);n||(t!==s&&Gi(r,"get",t),Gi(r,"get",s));const{has:o}=Hp(r),a=i?W0:n?q0:Ou;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function pd(e,t=!1){const n=this.__v_raw,i=Mt(n),r=Mt(e);return t||(e!==r&&Gi(i,"has",e),Gi(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function md(e,t=!1){return e=e.__v_raw,!t&&Gi(Mt(e),"iterate",la),Reflect.get(e,"size",e)}function Sw(e){e=Mt(e);const t=Mt(this);return Hp(t).has.call(t,e)||(t.add(e),xs(t,"add",e,e)),this}function Tw(e,t){t=Mt(t);const n=Mt(this),{has:i,get:r}=Hp(n);let s=i.call(n,e);s||(e=Mt(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?Nu(t,o)&&xs(n,"set",e,t):xs(n,"add",e,t),this}function Mw(e){const t=Mt(this),{has:n,get:i}=Hp(t);let r=n.call(t,e);r||(e=Mt(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&xs(t,"delete",e,void 0),s}function Aw(){const e=Mt(this),t=e.size!==0,n=e.clear();return t&&xs(e,"clear",void 0,void 0),n}function gd(e,t){return function(i,r){const s=this,o=s.__v_raw,a=Mt(o),l=t?W0:e?q0:Ou;return!e&&Gi(a,"iterate",la),o.forEach((c,h)=>i.call(r,l(c),l(h),s))}}function vd(e,t,n){return function(...i){const r=this.__v_raw,s=Mt(r),o=Vl(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),h=n?W0:t?q0:Ou;return!t&&Gi(s,"iterate",l?$v:la),{next(){const{value:u,done:d}=c.next();return d?{value:u,done:d}:{value:a?[h(u[0]),h(u[1])]:h(u),done:d}},[Symbol.iterator](){return this}}}}function Us(e){return function(...t){return e==="delete"?!1:this}}function TN(){const e={get(s){return fd(this,s)},get size(){return md(this)},has:pd,add:Sw,set:Tw,delete:Mw,clear:Aw,forEach:gd(!1,!1)},t={get(s){return fd(this,s,!1,!0)},get size(){return md(this)},has:pd,add:Sw,set:Tw,delete:Mw,clear:Aw,forEach:gd(!1,!0)},n={get(s){return fd(this,s,!0)},get size(){return md(this,!0)},has(s){return pd.call(this,s,!0)},add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear"),forEach:gd(!0,!1)},i={get(s){return fd(this,s,!0,!0)},get size(){return md(this,!0)},has(s){return pd.call(this,s,!0)},add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear"),forEach:gd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=vd(s,!1,!1),n[s]=vd(s,!0,!1),t[s]=vd(s,!1,!0),i[s]=vd(s,!0,!0)}),[e,n,t,i]}const[MN,AN,CN,IN]=TN();function G0(e,t){const n=t?e?IN:CN:e?AN:MN;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(St(n,r)&&r in i?n:i,r,s)}const RN={get:G0(!1,!1)},LN={get:G0(!1,!0)},PN={get:G0(!0,!1)},U1=new WeakMap,z1=new WeakMap,H1=new WeakMap,NN=new WeakMap;function kN(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ON(e){return e.__v_skip||!Object.isExtensible(e)?0:kN(sN(e))}function ur(e){return ku(e)?e:$0(e,!1,V1,RN,U1)}function DN(e){return $0(e,!1,SN,LN,z1)}function Of(e){return $0(e,!0,EN,PN,H1)}function $0(e,t,n,i,r){if(!fn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=ON(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function Ul(e){return ku(e)?Ul(e.__v_raw):!!(e&&e.__v_isReactive)}function ku(e){return!!(e&&e.__v_isReadonly)}function qv(e){return!!(e&&e.__v_isShallow)}function j0(e){return Ul(e)||ku(e)}function Mt(e){const t=e&&e.__v_raw;return t?Mt(t):e}function ca(e){return Nf(e,"__v_skip",!0),e}const Ou=e=>fn(e)?ur(e):e,q0=e=>fn(e)?Of(e):e;function W1(e){fo&&gr&&(e=Mt(e),D1(e.dep||(e.dep=U0())))}function G1(e,t){e=Mt(e),e.dep&&jv(e.dep)}function tn(e){return!!(e&&e.__v_isRef===!0)}function st(e){return $1(e,!1)}function FN(e){return $1(e,!0)}function $1(e,t){return tn(e)?e:new BN(e,t)}class BN{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Mt(t),this._value=n?t:Ou(t)}get value(){return W1(this),this._value}set value(t){t=this.__v_isShallow?t:Mt(t),Nu(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Ou(t),G1(this))}}function $e(e){return tn(e)?e.value:e}const VN={get:(e,t,n)=>$e(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return tn(r)&&!tn(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function j1(e){return Ul(e)?e:new Proxy(e,VN)}function UN(e){const t=ot(e)?new Array(e.length):{};for(const n in e)t[n]=fs(e,n);return t}class zN{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function fs(e,t,n){const i=e[t];return tn(i)?i:new zN(e,t,n)}class HN{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new z0(t,()=>{this._dirty||(this._dirty=!0,G1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=Mt(this);return W1(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function WN(e,t,n=!1){let i,r;const s=dt(e);return s?(i=e,r=yr):(i=e.get,r=e.set),new HN(i,r,s||!r,n)}const hu=[];function q1(e,...t){Va();const n=hu.length?hu[hu.length-1].component:null,i=n&&n.appContext.config.warnHandler,r=GN();if(i)ys(i,n,11,[e+t.join(""),n&&n.proxy,r.map(({vnode:s})=>`at <${SM(n,s.type)}>`).join(`
`),r]);else{const s=[`[Vue warn]: ${e}`,...t];r.length&&s.push(`
`,...$N(r)),console.warn(...s)}Ua()}function GN(){let e=hu[hu.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function $N(e){const t=[];return e.forEach((n,i)=>{t.push(...i===0?[]:[`
`],...jN(n))}),t}function jN({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,r=` at <${SM(e.component,e.type,i)}`,s=">"+n;return e.props?[r,...qN(e.props),s]:[r+s]}function qN(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(i=>{t.push(...K1(i,e[i]))}),n.length>3&&t.push(" ..."),t}function K1(e,t,n){return ln(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:tn(t)?(t=K1(e,Mt(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):dt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Mt(t),n?t:[`${e}=`,t])}function ys(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){Wp(s,t,n)}return r}function ir(e,t,n,i){if(dt(e)){const s=ys(e,t,n,i);return s&&R1(s)&&s.catch(o=>{Wp(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(ir(e[s],t,n,i));return r}function Wp(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){ys(l,null,10,[e,o,a]);return}}KN(e,n,r,i)}function KN(e,t,n,i=!0){console.error(e)}let Df=!1,Kv=!1;const ki=[];let ps=0;const du=[];let iu=null,yl=0;const fu=[];let eo=null,_l=0;const X1=Promise.resolve();let K0=null,Xv=null;function ia(e){const t=K0||X1;return e?t.then(this?e.bind(this):e):t}function XN(e){let t=ps+1,n=ki.length;for(;t<n;){const i=t+n>>>1;Du(ki[i])<e?t=i+1:n=i}return t}function Y1(e){(!ki.length||!ki.includes(e,Df&&e.allowRecurse?ps+1:ps))&&e!==Xv&&(e.id==null?ki.push(e):ki.splice(XN(e.id),0,e),Z1())}function Z1(){!Df&&!Kv&&(Kv=!0,K0=X1.then(eM))}function YN(e){const t=ki.indexOf(e);t>ps&&ki.splice(t,1)}function J1(e,t,n,i){ot(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&n.push(e),Z1()}function ZN(e){J1(e,iu,du,yl)}function JN(e){J1(e,eo,fu,_l)}function Gp(e,t=null){if(du.length){for(Xv=t,iu=[...new Set(du)],du.length=0,yl=0;yl<iu.length;yl++)iu[yl]();iu=null,yl=0,Xv=null,Gp(e,t)}}function Q1(e){if(Gp(),fu.length){const t=[...new Set(fu)];if(fu.length=0,eo){eo.push(...t);return}for(eo=t,eo.sort((n,i)=>Du(n)-Du(i)),_l=0;_l<eo.length;_l++)eo[_l]();eo=null,_l=0}}const Du=e=>e.id==null?1/0:e.id;function eM(e){Kv=!1,Df=!0,Gp(e),ki.sort((n,i)=>Du(n)-Du(i));const t=yr;try{for(ps=0;ps<ki.length;ps++){const n=ki[ps];n&&n.active!==!1&&ys(n,null,14)}}finally{ps=0,ki.length=0,Q1(),Df=!1,K0=null,(ki.length||du.length||fu.length)&&eM(e)}}function QN(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Bt;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:d}=i[h]||Bt;d&&(r=n.map(f=>f.trim())),u&&(r=n.map(kf))}let a,l=i[a=_g(t)]||i[a=_g(Gr(t))];!l&&s&&(l=i[a=_g(yc(t))]),l&&ir(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ir(c,e,6,r)}}function tM(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!dt(e)){const l=c=>{const h=tM(c,t,!0);h&&(a=!0,An(o,h))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(i.set(e,null),null):(ot(s)?s.forEach(l=>o[l]=null):An(o,s),i.set(e,o),o)}function $p(e,t){return!e||!Bp(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,yc(t))||St(e,t))}let Xn=null,jp=null;function Ff(e){const t=Xn;return Xn=e,jp=e&&e.type.__scopeId||null,t}function ek(e){jp=e}function tk(){jp=null}function Rt(e,t=Xn,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Vw(-1);const s=Ff(t),o=e(...r);return Ff(s),i._d&&Vw(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function bg(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:h,renderCache:u,data:d,setupState:f,ctx:p,inheritAttrs:y}=e;let v,m;const g=Ff(e);try{if(n.shapeFlag&4){const b=r||i;v=Or(h.call(b,b,u,s,f,d,p)),m=l}else{const b=t;v=Or(b.length>1?b(s,{attrs:l,slots:a,emit:c}):b(s,null)),m=t.props?l:nk(l)}}catch(b){gu.length=0,Wp(b,e,1),v=tt(Vi)}let w=v;if(m&&y!==!1){const b=Object.keys(m),{shapeFlag:E}=w;b.length&&E&7&&(o&&b.some(D0)&&(m=ik(m,o)),w=yo(w,m))}return n.dirs&&(w=yo(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),v=w,Ff(g),v}const nk=e=>{let t;for(const n in e)(n==="class"||n==="style"||Bp(n))&&((t||(t={}))[n]=e[n]);return t},ik=(e,t)=>{const n={};for(const i in e)(!D0(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function rk(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Cw(i,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let u=0;u<h.length;u++){const d=h[u];if(o[d]!==i[d]&&!$p(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Cw(i,o,c):!0:!!o;return!1}function Cw(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!$p(n,s))return!0}return!1}function sk({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const ok=e=>e.__isSuspense;function ak(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):JN(e)}function zl(e,t){if(Tn){let n=Tn.provides;const i=Tn.parent&&Tn.parent.provides;i===n&&(n=Tn.provides=Object.create(i)),n[e]=t}}function Jn(e,t,n=!1){const i=Tn||Xn;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&dt(t)?t.call(i.proxy):t}}function _c(e,t){return X0(e,null,t)}const Iw={};function dn(e,t,n){return X0(e,t,n)}function X0(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=Bt){const a=Tn;let l,c=!1,h=!1;if(tn(e)?(l=()=>e.value,c=qv(e)):Ul(e)?(l=()=>e,i=!0):ot(e)?(h=!0,c=e.some(m=>Ul(m)||qv(m)),l=()=>e.map(m=>{if(tn(m))return m.value;if(Ul(m))return ra(m);if(dt(m))return ys(m,a,2)})):dt(e)?t?l=()=>ys(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return u&&u(),ir(e,a,3,[d])}:l=yr,t&&i){const m=l;l=()=>ra(m())}let u,d=m=>{u=v.onStop=()=>{ys(m,a,4)}};if(zu)return d=yr,t?n&&ir(t,a,3,[l(),h?[]:void 0,d]):l(),yr;let f=h?[]:Iw;const p=()=>{if(!!v.active)if(t){const m=v.run();(i||c||(h?m.some((g,w)=>Nu(g,f[w])):Nu(m,f)))&&(u&&u(),ir(t,a,3,[m,f===Iw?void 0:f,d]),f=m)}else v.run()};p.allowRecurse=!!t;let y;r==="sync"?y=p:r==="post"?y=()=>wi(p,a&&a.suspense):y=()=>ZN(p);const v=new z0(l,y);return t?n?p():f=v.run():r==="post"?wi(v.run.bind(v),a&&a.suspense):v.run(),()=>{v.stop(),a&&a.scope&&F0(a.scope.effects,v)}}function lk(e,t,n){const i=this.proxy,r=ln(e)?e.includes(".")?nM(i,e):()=>i[e]:e.bind(i,i);let s;dt(t)?s=t:(s=t.handler,n=t);const o=Tn;Kl(this);const a=X0(r,s.bind(i),n);return o?Kl(o):ua(),a}function nM(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function ra(e,t){if(!fn(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),tn(e))ra(e.value,t);else if(ot(e))for(let n=0;n<e.length;n++)ra(e[n],t);else if(I1(e)||Vl(e))e.forEach(n=>{ra(n,t)});else if(P1(e))for(const n in e)ra(e[n],t);return e}function iM(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tr(()=>{e.isMounted=!0}),Ph(()=>{e.isUnmounting=!0}),e}const Qi=[Function,Array],ck={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qi,onEnter:Qi,onAfterEnter:Qi,onEnterCancelled:Qi,onBeforeLeave:Qi,onLeave:Qi,onAfterLeave:Qi,onLeaveCancelled:Qi,onBeforeAppear:Qi,onAppear:Qi,onAfterAppear:Qi,onAppearCancelled:Qi},setup(e,{slots:t}){const n=ks(),i=iM();let r;return()=>{const s=t.default&&Y0(t.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const y of s)if(y.type!==Vi){o=y;break}}const a=Mt(e),{mode:l}=a;if(i.isLeaving)return wg(o);const c=Rw(o);if(!c)return wg(o);const h=Fu(c,a,i,n);Bu(c,h);const u=n.subTree,d=u&&Rw(u);let f=!1;const{getTransitionKey:p}=c.type;if(p){const y=p();r===void 0?r=y:y!==r&&(r=y,f=!0)}if(d&&d.type!==Vi&&(!ta(c,d)||f)){const y=Fu(d,a,i,n);if(Bu(d,y),l==="out-in")return i.isLeaving=!0,y.afterLeave=()=>{i.isLeaving=!1,n.update()},wg(o);l==="in-out"&&c.type!==Vi&&(y.delayLeave=(v,m,g)=>{const w=sM(i,d);w[String(d.key)]=d,v._leaveCb=()=>{m(),v._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=g})}return o}}},rM=ck;function sM(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Fu(e,t,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:u,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:y,onAppear:v,onAfterAppear:m,onAppearCancelled:g}=t,w=String(e.key),b=sM(n,e),E=(O,W)=>{O&&ir(O,i,9,W)},S=(O,W)=>{const U=W[1];E(O,W),ot(O)?O.every(L=>L.length<=1)&&U():O.length<=1&&U()},k={mode:s,persisted:o,beforeEnter(O){let W=a;if(!n.isMounted)if(r)W=y||a;else return;O._leaveCb&&O._leaveCb(!0);const U=b[w];U&&ta(e,U)&&U.el._leaveCb&&U.el._leaveCb(),E(W,[O])},enter(O){let W=l,U=c,L=h;if(!n.isMounted)if(r)W=v||l,U=m||c,L=g||h;else return;let D=!1;const V=O._enterCb=ee=>{D||(D=!0,ee?E(L,[O]):E(U,[O]),k.delayedLeave&&k.delayedLeave(),O._enterCb=void 0)};W?S(W,[O,V]):V()},leave(O,W){const U=String(e.key);if(O._enterCb&&O._enterCb(!0),n.isUnmounting)return W();E(u,[O]);let L=!1;const D=O._leaveCb=V=>{L||(L=!0,W(),V?E(p,[O]):E(f,[O]),O._leaveCb=void 0,b[U]===e&&delete b[U])};b[U]=e,d?S(d,[O,D]):D()},clone(O){return Fu(O,t,n,i)}};return k}function wg(e){if(qp(e))return e=yo(e),e.children=null,e}function Rw(e){return qp(e)?e.children?e.children[0]:void 0:e}function Bu(e,t){e.shapeFlag&6&&e.component?Bu(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Y0(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===It?(o.patchFlag&128&&r++,i=i.concat(Y0(o.children,t,a))):(t||o.type!==Vi)&&i.push(a!=null?yo(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Ao(e){return dt(e)?{setup:e,name:e.name}:e}const pu=e=>!!e.type.__asyncLoader,qp=e=>e.type.__isKeepAlive;function uk(e,t){oM(e,"a",t)}function hk(e,t){oM(e,"da",t)}function oM(e,t,n=Tn){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Kp(t,i,n),n){let r=n.parent;for(;r&&r.parent;)qp(r.parent.vnode)&&dk(i,t,n,r),r=r.parent}}function dk(e,t,n,i){const r=Kp(t,e,i,!0);Xp(()=>{F0(i[t],r)},n)}function Kp(e,t,n=Tn,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Va(),Kl(n);const a=ir(t,n,e,o);return ua(),Ua(),a});return i?r.unshift(s):r.push(s),s}}const Ns=e=>(t,n=Tn)=>(!zu||e==="sp")&&Kp(e,t,n),aM=Ns("bm"),Tr=Ns("m"),fk=Ns("bu"),lM=Ns("u"),Ph=Ns("bum"),Xp=Ns("um"),pk=Ns("sp"),mk=Ns("rtg"),gk=Ns("rtc");function vk(e,t=Tn){Kp("ec",e,t)}function Mi(e,t){const n=Xn;if(n===null)return e;const i=Jp(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=Bt]=t[s];dt(o)&&(o={mounted:o,updated:o}),o.deep&&ra(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c})}return e}function Vo(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Va(),ir(l,n,8,[e.el,a,e,t]),Ua())}}const Z0="components",yk="directives";function nt(e,t){return J0(Z0,e,!0,t)||e}const cM=Symbol();function Es(e){return ln(e)?J0(Z0,e,!1)||e:e||cM}function Nh(e){return J0(yk,e)}function J0(e,t,n=!0,i=!1){const r=Xn||Tn;if(r){const s=r.type;if(e===Z0){const a=EM(s);if(a&&(a===t||a===Gr(t)||a===zp(Gr(t))))return s}const o=Lw(r[e]||s[e],t)||Lw(r.appContext[e],t);return!o&&i?s:o}}function Lw(e,t){return e&&(e[t]||e[Gr(t)]||e[zp(Gr(t))])}function Ur(e,t,n,i){let r;const s=n&&n[i];if(ot(e)||ln(e)){r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,s&&s[o])}else if(fn(e))if(e[Symbol.iterator])r=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=t(e[c],c,a,s&&s[a])}}else r=[];return n&&(n[i]=r),r}function On(e,t,n={},i,r){if(Xn.isCE||Xn.parent&&pu(Xn.parent)&&Xn.parent.isCE)return tt("slot",t==="default"?null:{name:t},i&&i());let s=e[t];s&&s._c&&(s._d=!1),we();const o=s&&uM(s(n)),a=bt(It,{key:n.key||`_${t}`},o||(i?i():[]),o&&e._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function uM(e){return e.some(t=>Uf(t)?!(t.type===Vi||t.type===It&&!uM(t.children)):!0)?e:null}const Yv=e=>e?wM(e)?Jp(e)||e.proxy:Yv(e.parent):null,Bf=An(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Yv(e.parent),$root:e=>Yv(e.root),$emit:e=>e.emit,$options:e=>dM(e),$forceUpdate:e=>e.f||(e.f=()=>Y1(e.update)),$nextTick:e=>e.n||(e.n=ia.bind(e.proxy)),$watch:e=>lk.bind(e)}),_k={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(i!==Bt&&St(i,t))return o[t]=1,i[t];if(r!==Bt&&St(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&St(c,t))return o[t]=3,s[t];if(n!==Bt&&St(n,t))return o[t]=4,n[t];Zv&&(o[t]=0)}}const h=Bf[t];let u,d;if(h)return t==="$attrs"&&Gi(e,"get",t),h(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(n!==Bt&&St(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,St(d,t))return d[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return r!==Bt&&St(r,t)?(r[t]=n,!0):i!==Bt&&St(i,t)?(i[t]=n,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==Bt&&St(e,o)||t!==Bt&&St(t,o)||(a=s[0])&&St(a,o)||St(i,o)||St(Bf,o)||St(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:St(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Zv=!0;function bk(e){const t=dM(e),n=e.proxy,i=e.ctx;Zv=!1,t.beforeCreate&&Pw(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:y,deactivated:v,beforeDestroy:m,beforeUnmount:g,destroyed:w,unmounted:b,render:E,renderTracked:S,renderTriggered:k,errorCaptured:O,serverPrefetch:W,expose:U,inheritAttrs:L,components:D,directives:V,filters:ee}=t;if(c&&wk(c,i,null,e.appContext.config.unwrapInjectedRef),o)for(const H in o){const B=o[H];dt(B)&&(i[H]=B.bind(n))}if(r){const H=r.call(n,n);fn(H)&&(e.data=ur(H))}if(Zv=!0,s)for(const H in s){const B=s[H],te=dt(B)?B.bind(n,n):dt(B.get)?B.get.bind(n,n):yr,ae=!dt(B)&&dt(B.set)?B.set.bind(n):yr,G=Qe({get:te,set:ae});Object.defineProperty(i,H,{enumerable:!0,configurable:!0,get:()=>G.value,set:le=>G.value=le})}if(a)for(const H in a)hM(a[H],i,n,H);if(l){const H=dt(l)?l.call(n):l;Reflect.ownKeys(H).forEach(B=>{zl(B,H[B])})}h&&Pw(h,e,"c");function Z(H,B){ot(B)?B.forEach(te=>H(te.bind(n))):B&&H(B.bind(n))}if(Z(aM,u),Z(Tr,d),Z(fk,f),Z(lM,p),Z(uk,y),Z(hk,v),Z(vk,O),Z(gk,S),Z(mk,k),Z(Ph,g),Z(Xp,b),Z(pk,W),ot(U))if(U.length){const H=e.exposed||(e.exposed={});U.forEach(B=>{Object.defineProperty(H,B,{get:()=>n[B],set:te=>n[B]=te})})}else e.exposed||(e.exposed={});E&&e.render===yr&&(e.render=E),L!=null&&(e.inheritAttrs=L),D&&(e.components=D),V&&(e.directives=V)}function wk(e,t,n=yr,i=!1){ot(e)&&(e=Jv(e));for(const r in e){const s=e[r];let o;fn(s)?"default"in s?o=Jn(s.from||r,s.default,!0):o=Jn(s.from||r):o=Jn(s),tn(o)&&i?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[r]=o}}function Pw(e,t,n){ir(ot(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function hM(e,t,n,i){const r=i.includes(".")?nM(n,i):()=>n[i];if(ln(e)){const s=t[e];dt(s)&&dn(r,s)}else if(dt(e))dn(r,e.bind(n));else if(fn(e))if(ot(e))e.forEach(s=>hM(s,t,n,i));else{const s=dt(e.handler)?e.handler.bind(n):t[e.handler];dt(s)&&dn(r,s,e)}}function dM(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>Vf(l,c,o,!0)),Vf(l,t,o)),s.set(t,l),l}function Vf(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&Vf(e,s,n,!0),r&&r.forEach(o=>Vf(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=xk[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const xk={data:Nw,props:qo,emits:qo,methods:qo,computed:qo,beforeCreate:ai,created:ai,beforeMount:ai,mounted:ai,beforeUpdate:ai,updated:ai,beforeDestroy:ai,beforeUnmount:ai,destroyed:ai,unmounted:ai,activated:ai,deactivated:ai,errorCaptured:ai,serverPrefetch:ai,components:qo,directives:qo,watch:Sk,provide:Nw,inject:Ek};function Nw(e,t){return t?e?function(){return An(dt(e)?e.call(this,this):e,dt(t)?t.call(this,this):t)}:t:e}function Ek(e,t){return qo(Jv(e),Jv(t))}function Jv(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ai(e,t){return e?[...new Set([].concat(e,t))]:t}function qo(e,t){return e?An(An(Object.create(null),e),t):t}function Sk(e,t){if(!e)return t;if(!t)return e;const n=An(Object.create(null),e);for(const i in t)n[i]=ai(e[i],t[i]);return n}function Tk(e,t,n,i=!1){const r={},s={};Nf(s,Zp,1),e.propsDefaults=Object.create(null),fM(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:DN(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function Mk(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Mt(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let u=0;u<h.length;u++){let d=h[u];if($p(e.emitsOptions,d))continue;const f=t[d];if(l)if(St(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=Gr(d);r[p]=Qv(l,a,p,f,e,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{fM(e,t,r,s)&&(c=!0);let h;for(const u in a)(!t||!St(t,u)&&((h=yc(u))===u||!St(t,h)))&&(l?n&&(n[u]!==void 0||n[h]!==void 0)&&(r[u]=Qv(l,a,u,void 0,e,!0)):delete r[u]);if(s!==a)for(const u in s)(!t||!St(t,u)&&!0)&&(delete s[u],c=!0)}c&&xs(e,"set","$attrs")}function fM(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(ff(l))continue;const c=t[l];let h;r&&St(r,h=Gr(l))?!s||!s.includes(h)?n[h]=c:(a||(a={}))[h]=c:$p(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Mt(n),c=a||Bt;for(let h=0;h<s.length;h++){const u=s[h];n[u]=Qv(r,l,u,c[u],e,!St(c,u))}}return o}function Qv(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=St(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&dt(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(Kl(r),i=c[n]=l.call(null,t),ua())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===yc(n))&&(i=!0))}return i}function pM(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!dt(e)){const h=u=>{l=!0;const[d,f]=pM(u,t,!0);An(o,d),f&&a.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!l)return i.set(e,Bl),Bl;if(ot(s))for(let h=0;h<s.length;h++){const u=Gr(s[h]);kw(u)&&(o[u]=Bt)}else if(s)for(const h in s){const u=Gr(h);if(kw(u)){const d=s[h],f=o[u]=ot(d)||dt(d)?{type:d}:d;if(f){const p=Fw(Boolean,f.type),y=Fw(String,f.type);f[0]=p>-1,f[1]=y<0||p<y,(p>-1||St(f,"default"))&&a.push(u)}}}const c=[o,a];return i.set(e,c),c}function kw(e){return e[0]!=="$"}function Ow(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Dw(e,t){return Ow(e)===Ow(t)}function Fw(e,t){return ot(t)?t.findIndex(n=>Dw(n,e)):dt(t)&&Dw(t,e)?0:-1}const mM=e=>e[0]==="_"||e==="$stable",Q0=e=>ot(e)?e.map(Or):[Or(e)],Ak=(e,t,n)=>{if(t._n)return t;const i=Rt((...r)=>Q0(t(...r)),n);return i._c=!1,i},gM=(e,t,n)=>{const i=e._ctx;for(const r in e){if(mM(r))continue;const s=e[r];if(dt(s))t[r]=Ak(r,s,i);else if(s!=null){const o=Q0(s);t[r]=()=>o}}},vM=(e,t)=>{const n=Q0(t);e.slots.default=()=>n},Ck=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Mt(t),Nf(t,"_",n)):gM(t,e.slots={})}else e.slots={},t&&vM(e,t);Nf(e.slots,Zp,1)},Ik=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=Bt;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(An(r,t),!n&&a===1&&delete r._):(s=!t.$stable,gM(t,r)),o=t}else t&&(vM(e,t),o={default:1});if(s)for(const a in r)!mM(a)&&!(a in o)&&delete r[a]};function yM(){return{app:null,config:{isNativeTag:nN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rk=0;function Lk(e,t){return function(i,r=null){dt(i)||(i=Object.assign({},i)),r!=null&&!fn(r)&&(r=null);const s=yM(),o=new Set;let a=!1;const l=s.app={_uid:Rk++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Zk,get config(){return s.config},set config(c){},use(c,...h){return o.has(c)||(c&&dt(c.install)?(o.add(c),c.install(l,...h)):dt(c)&&(o.add(c),c(l,...h))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,h){return h?(s.components[c]=h,l):s.components[c]},directive(c,h){return h?(s.directives[c]=h,l):s.directives[c]},mount(c,h,u){if(!a){const d=tt(i,r);return d.appContext=s,h&&t?t(d,c):e(d,c,u),a=!0,l._container=c,c.__vue_app__=l,Jp(d.component)||d.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,h){return s.provides[c]=h,l}};return l}}function ey(e,t,n,i,r=!1){if(ot(e)){e.forEach((d,f)=>ey(d,t&&(ot(t)?t[f]:t),n,i,r));return}if(pu(i)&&!r)return;const s=i.shapeFlag&4?Jp(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,h=a.refs===Bt?a.refs={}:a.refs,u=a.setupState;if(c!=null&&c!==l&&(ln(c)?(h[c]=null,St(u,c)&&(u[c]=null)):tn(c)&&(c.value=null)),dt(l))ys(l,a,12,[o,h]);else{const d=ln(l),f=tn(l);if(d||f){const p=()=>{if(e.f){const y=d?h[l]:l.value;r?ot(y)&&F0(y,s):ot(y)?y.includes(s)||y.push(s):d?(h[l]=[s],St(u,l)&&(u[l]=h[l])):(l.value=[s],e.k&&(h[e.k]=l.value))}else d?(h[l]=o,St(u,l)&&(u[l]=o)):tn(l)&&(l.value=o,e.k&&(h[e.k]=o))};o?(p.id=-1,wi(p,n)):p()}}}const wi=ak;function Pk(e){return Nk(e)}function Nk(e,t){const n=lN();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:u,nextSibling:d,setScopeId:f=yr,cloneNode:p,insertStaticContent:y}=e,v=(x,M,N,F=null,R=null,C=null,ce=!1,Y=null,I=!!M.dynamicChildren)=>{if(x===M)return;x&&!ta(x,M)&&(F=oe(x),X(x,R,C,!0),x=null),M.patchFlag===-2&&(I=!1,M.dynamicChildren=null);const{type:z,ref:de,shapeFlag:pe}=M;switch(z){case Vu:m(x,M,N,F);break;case Vi:g(x,M,N,F);break;case xg:x==null&&w(M,N,F,ce);break;case It:V(x,M,N,F,R,C,ce,Y,I);break;default:pe&1?S(x,M,N,F,R,C,ce,Y,I):pe&6?ee(x,M,N,F,R,C,ce,Y,I):(pe&64||pe&128)&&z.process(x,M,N,F,R,C,ce,Y,I,$)}de!=null&&R&&ey(de,x&&x.ref,C,M||x,!M)},m=(x,M,N,F)=>{if(x==null)i(M.el=a(M.children),N,F);else{const R=M.el=x.el;M.children!==x.children&&c(R,M.children)}},g=(x,M,N,F)=>{x==null?i(M.el=l(M.children||""),N,F):M.el=x.el},w=(x,M,N,F)=>{[x.el,x.anchor]=y(x.children,M,N,F,x.el,x.anchor)},b=({el:x,anchor:M},N,F)=>{let R;for(;x&&x!==M;)R=d(x),i(x,N,F),x=R;i(M,N,F)},E=({el:x,anchor:M})=>{let N;for(;x&&x!==M;)N=d(x),r(x),x=N;r(M)},S=(x,M,N,F,R,C,ce,Y,I)=>{ce=ce||M.type==="svg",x==null?k(M,N,F,R,C,ce,Y,I):U(x,M,R,C,ce,Y,I)},k=(x,M,N,F,R,C,ce,Y)=>{let I,z;const{type:de,props:pe,shapeFlag:fe,transition:ve,patchFlag:ye,dirs:Ne}=x;if(x.el&&p!==void 0&&ye===-1)I=x.el=p(x.el);else{if(I=x.el=o(x.type,C,pe&&pe.is,pe),fe&8?h(I,x.children):fe&16&&W(x.children,I,null,F,R,C&&de!=="foreignObject",ce,Y),Ne&&Vo(x,null,F,"created"),pe){for(const Oe in pe)Oe!=="value"&&!ff(Oe)&&s(I,Oe,null,pe[Oe],C,x.children,F,R,Q);"value"in pe&&s(I,"value",null,pe.value),(z=pe.onVnodeBeforeMount)&&Cr(z,F,x)}O(I,x,x.scopeId,ce,F)}Ne&&Vo(x,null,F,"beforeMount");const Ae=(!R||R&&!R.pendingBranch)&&ve&&!ve.persisted;Ae&&ve.beforeEnter(I),i(I,M,N),((z=pe&&pe.onVnodeMounted)||Ae||Ne)&&wi(()=>{z&&Cr(z,F,x),Ae&&ve.enter(I),Ne&&Vo(x,null,F,"mounted")},R)},O=(x,M,N,F,R)=>{if(N&&f(x,N),F)for(let C=0;C<F.length;C++)f(x,F[C]);if(R){let C=R.subTree;if(M===C){const ce=R.vnode;O(x,ce,ce.scopeId,ce.slotScopeIds,R.parent)}}},W=(x,M,N,F,R,C,ce,Y,I=0)=>{for(let z=I;z<x.length;z++){const de=x[z]=Y?io(x[z]):Or(x[z]);v(null,de,M,N,F,R,C,ce,Y)}},U=(x,M,N,F,R,C,ce)=>{const Y=M.el=x.el;let{patchFlag:I,dynamicChildren:z,dirs:de}=M;I|=x.patchFlag&16;const pe=x.props||Bt,fe=M.props||Bt;let ve;N&&Uo(N,!1),(ve=fe.onVnodeBeforeUpdate)&&Cr(ve,N,M,x),de&&Vo(M,x,N,"beforeUpdate"),N&&Uo(N,!0);const ye=R&&M.type!=="foreignObject";if(z?L(x.dynamicChildren,z,Y,N,F,ye,C):ce||te(x,M,Y,null,N,F,ye,C,!1),I>0){if(I&16)D(Y,M,pe,fe,N,F,R);else if(I&2&&pe.class!==fe.class&&s(Y,"class",null,fe.class,R),I&4&&s(Y,"style",pe.style,fe.style,R),I&8){const Ne=M.dynamicProps;for(let Ae=0;Ae<Ne.length;Ae++){const Oe=Ne[Ae],ht=pe[Oe],At=fe[Oe];(At!==ht||Oe==="value")&&s(Y,Oe,ht,At,R,x.children,N,F,Q)}}I&1&&x.children!==M.children&&h(Y,M.children)}else!ce&&z==null&&D(Y,M,pe,fe,N,F,R);((ve=fe.onVnodeUpdated)||de)&&wi(()=>{ve&&Cr(ve,N,M,x),de&&Vo(M,x,N,"updated")},F)},L=(x,M,N,F,R,C,ce)=>{for(let Y=0;Y<M.length;Y++){const I=x[Y],z=M[Y],de=I.el&&(I.type===It||!ta(I,z)||I.shapeFlag&70)?u(I.el):N;v(I,z,de,null,F,R,C,ce,!0)}},D=(x,M,N,F,R,C,ce)=>{if(N!==F){for(const Y in F){if(ff(Y))continue;const I=F[Y],z=N[Y];I!==z&&Y!=="value"&&s(x,Y,z,I,ce,M.children,R,C,Q)}if(N!==Bt)for(const Y in N)!ff(Y)&&!(Y in F)&&s(x,Y,N[Y],null,ce,M.children,R,C,Q);"value"in F&&s(x,"value",N.value,F.value)}},V=(x,M,N,F,R,C,ce,Y,I)=>{const z=M.el=x?x.el:a(""),de=M.anchor=x?x.anchor:a("");let{patchFlag:pe,dynamicChildren:fe,slotScopeIds:ve}=M;ve&&(Y=Y?Y.concat(ve):ve),x==null?(i(z,N,F),i(de,N,F),W(M.children,N,de,R,C,ce,Y,I)):pe>0&&pe&64&&fe&&x.dynamicChildren?(L(x.dynamicChildren,fe,N,R,C,ce,Y),(M.key!=null||R&&M===R.subTree)&&e_(x,M,!0)):te(x,M,N,de,R,C,ce,Y,I)},ee=(x,M,N,F,R,C,ce,Y,I)=>{M.slotScopeIds=Y,x==null?M.shapeFlag&512?R.ctx.activate(M,N,F,ce,I):K(M,N,F,R,C,ce,I):Z(x,M,I)},K=(x,M,N,F,R,C,ce)=>{const Y=x.component=Wk(x,F,R);if(qp(x)&&(Y.ctx.renderer=$),Gk(Y),Y.asyncDep){if(R&&R.registerDep(Y,H),!x.el){const I=Y.subTree=tt(Vi);g(null,I,M,N)}return}H(Y,x,M,N,R,C,ce)},Z=(x,M,N)=>{const F=M.component=x.component;if(rk(x,M,N))if(F.asyncDep&&!F.asyncResolved){B(F,M,N);return}else F.next=M,YN(F.update),F.update();else M.el=x.el,F.vnode=M},H=(x,M,N,F,R,C,ce)=>{const Y=()=>{if(x.isMounted){let{next:de,bu:pe,u:fe,parent:ve,vnode:ye}=x,Ne=de,Ae;Uo(x,!1),de?(de.el=ye.el,B(x,de,ce)):de=ye,pe&&pf(pe),(Ae=de.props&&de.props.onVnodeBeforeUpdate)&&Cr(Ae,ve,de,ye),Uo(x,!0);const Oe=bg(x),ht=x.subTree;x.subTree=Oe,v(ht,Oe,u(ht.el),oe(ht),x,R,C),de.el=Oe.el,Ne===null&&sk(x,Oe.el),fe&&wi(fe,R),(Ae=de.props&&de.props.onVnodeUpdated)&&wi(()=>Cr(Ae,ve,de,ye),R)}else{let de;const{el:pe,props:fe}=M,{bm:ve,m:ye,parent:Ne}=x,Ae=pu(M);if(Uo(x,!1),ve&&pf(ve),!Ae&&(de=fe&&fe.onVnodeBeforeMount)&&Cr(de,Ne,M),Uo(x,!0),pe&&P){const Oe=()=>{x.subTree=bg(x),P(pe,x.subTree,x,R,null)};Ae?M.type.__asyncLoader().then(()=>!x.isUnmounted&&Oe()):Oe()}else{const Oe=x.subTree=bg(x);v(null,Oe,N,F,x,R,C),M.el=Oe.el}if(ye&&wi(ye,R),!Ae&&(de=fe&&fe.onVnodeMounted)){const Oe=M;wi(()=>Cr(de,Ne,Oe),R)}(M.shapeFlag&256||Ne&&pu(Ne.vnode)&&Ne.vnode.shapeFlag&256)&&x.a&&wi(x.a,R),x.isMounted=!0,M=N=F=null}},I=x.effect=new z0(Y,()=>Y1(z),x.scope),z=x.update=()=>I.run();z.id=x.uid,Uo(x,!0),z()},B=(x,M,N)=>{M.component=x;const F=x.vnode.props;x.vnode=M,x.next=null,Mk(x,M.props,F,N),Ik(x,M.children,N),Va(),Gp(void 0,x.update),Ua()},te=(x,M,N,F,R,C,ce,Y,I=!1)=>{const z=x&&x.children,de=x?x.shapeFlag:0,pe=M.children,{patchFlag:fe,shapeFlag:ve}=M;if(fe>0){if(fe&128){G(z,pe,N,F,R,C,ce,Y,I);return}else if(fe&256){ae(z,pe,N,F,R,C,ce,Y,I);return}}ve&8?(de&16&&Q(z,R,C),pe!==z&&h(N,pe)):de&16?ve&16?G(z,pe,N,F,R,C,ce,Y,I):Q(z,R,C,!0):(de&8&&h(N,""),ve&16&&W(pe,N,F,R,C,ce,Y,I))},ae=(x,M,N,F,R,C,ce,Y,I)=>{x=x||Bl,M=M||Bl;const z=x.length,de=M.length,pe=Math.min(z,de);let fe;for(fe=0;fe<pe;fe++){const ve=M[fe]=I?io(M[fe]):Or(M[fe]);v(x[fe],ve,N,null,R,C,ce,Y,I)}z>de?Q(x,R,C,!0,!1,pe):W(M,N,F,R,C,ce,Y,I,pe)},G=(x,M,N,F,R,C,ce,Y,I)=>{let z=0;const de=M.length;let pe=x.length-1,fe=de-1;for(;z<=pe&&z<=fe;){const ve=x[z],ye=M[z]=I?io(M[z]):Or(M[z]);if(ta(ve,ye))v(ve,ye,N,null,R,C,ce,Y,I);else break;z++}for(;z<=pe&&z<=fe;){const ve=x[pe],ye=M[fe]=I?io(M[fe]):Or(M[fe]);if(ta(ve,ye))v(ve,ye,N,null,R,C,ce,Y,I);else break;pe--,fe--}if(z>pe){if(z<=fe){const ve=fe+1,ye=ve<de?M[ve].el:F;for(;z<=fe;)v(null,M[z]=I?io(M[z]):Or(M[z]),N,ye,R,C,ce,Y,I),z++}}else if(z>fe)for(;z<=pe;)X(x[z],R,C,!0),z++;else{const ve=z,ye=z,Ne=new Map;for(z=ye;z<=fe;z++){const Xt=M[z]=I?io(M[z]):Or(M[z]);Xt.key!=null&&Ne.set(Xt.key,z)}let Ae,Oe=0;const ht=fe-ye+1;let At=!1,yn=0;const cn=new Array(ht);for(z=0;z<ht;z++)cn[z]=0;for(z=ve;z<=pe;z++){const Xt=x[z];if(Oe>=ht){X(Xt,R,C,!0);continue}let jt;if(Xt.key!=null)jt=Ne.get(Xt.key);else for(Ae=ye;Ae<=fe;Ae++)if(cn[Ae-ye]===0&&ta(Xt,M[Ae])){jt=Ae;break}jt===void 0?X(Xt,R,C,!0):(cn[jt-ye]=z+1,jt>=yn?yn=jt:At=!0,v(Xt,M[jt],N,null,R,C,ce,Y,I),Oe++)}const Ii=At?kk(cn):Bl;for(Ae=Ii.length-1,z=ht-1;z>=0;z--){const Xt=ye+z,jt=M[Xt],Hn=Xt+1<de?M[Xt+1].el:F;cn[z]===0?v(null,jt,N,Hn,R,C,ce,Y,I):At&&(Ae<0||z!==Ii[Ae]?le(jt,N,Hn,2):Ae--)}}},le=(x,M,N,F,R=null)=>{const{el:C,type:ce,transition:Y,children:I,shapeFlag:z}=x;if(z&6){le(x.component.subTree,M,N,F);return}if(z&128){x.suspense.move(M,N,F);return}if(z&64){ce.move(x,M,N,$);return}if(ce===It){i(C,M,N);for(let pe=0;pe<I.length;pe++)le(I[pe],M,N,F);i(x.anchor,M,N);return}if(ce===xg){b(x,M,N);return}if(F!==2&&z&1&&Y)if(F===0)Y.beforeEnter(C),i(C,M,N),wi(()=>Y.enter(C),R);else{const{leave:pe,delayLeave:fe,afterLeave:ve}=Y,ye=()=>i(C,M,N),Ne=()=>{pe(C,()=>{ye(),ve&&ve()})};fe?fe(C,ye,Ne):Ne()}else i(C,M,N)},X=(x,M,N,F=!1,R=!1)=>{const{type:C,props:ce,ref:Y,children:I,dynamicChildren:z,shapeFlag:de,patchFlag:pe,dirs:fe}=x;if(Y!=null&&ey(Y,null,N,x,!0),de&256){M.ctx.deactivate(x);return}const ve=de&1&&fe,ye=!pu(x);let Ne;if(ye&&(Ne=ce&&ce.onVnodeBeforeUnmount)&&Cr(Ne,M,x),de&6)ne(x.component,N,F);else{if(de&128){x.suspense.unmount(N,F);return}ve&&Vo(x,null,M,"beforeUnmount"),de&64?x.type.remove(x,M,N,R,$,F):z&&(C!==It||pe>0&&pe&64)?Q(z,M,N,!1,!0):(C===It&&pe&384||!R&&de&16)&&Q(I,M,N),F&&J(x)}(ye&&(Ne=ce&&ce.onVnodeUnmounted)||ve)&&wi(()=>{Ne&&Cr(Ne,M,x),ve&&Vo(x,null,M,"unmounted")},N)},J=x=>{const{type:M,el:N,anchor:F,transition:R}=x;if(M===It){T(N,F);return}if(M===xg){E(x);return}const C=()=>{r(N),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(x.shapeFlag&1&&R&&!R.persisted){const{leave:ce,delayLeave:Y}=R,I=()=>ce(N,C);Y?Y(x.el,C,I):I()}else C()},T=(x,M)=>{let N;for(;x!==M;)N=d(x),r(x),x=N;r(M)},ne=(x,M,N)=>{const{bum:F,scope:R,update:C,subTree:ce,um:Y}=x;F&&pf(F),R.stop(),C&&(C.active=!1,X(ce,x,M,N)),Y&&wi(Y,M),wi(()=>{x.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Q=(x,M,N,F=!1,R=!1,C=0)=>{for(let ce=C;ce<x.length;ce++)X(x[ce],M,N,F,R)},oe=x=>x.shapeFlag&6?oe(x.component.subTree):x.shapeFlag&128?x.suspense.next():d(x.anchor||x.el),ie=(x,M,N)=>{x==null?M._vnode&&X(M._vnode,null,null,!0):v(M._vnode||null,x,M,null,null,null,N),Q1(),M._vnode=x},$={p:v,um:X,m:le,r:J,mt:K,mc:W,pc:te,pbc:L,n:oe,o:e};let A,P;return t&&([A,P]=t($)),{render:ie,hydrate:A,createApp:Lk(ie,A)}}function Uo({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function e_(e,t,n=!1){const i=e.children,r=t.children;if(ot(i)&&ot(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=io(r[s]),a.el=o.el),n||e_(o,a))}}function kk(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const Ok=e=>e.__isTeleport,mu=e=>e&&(e.disabled||e.disabled===""),Bw=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,ty=(e,t)=>{const n=e&&e.to;return ln(n)?t?t(n):null:n},Dk={__isTeleport:!0,process(e,t,n,i,r,s,o,a,l,c){const{mc:h,pc:u,pbc:d,o:{insert:f,querySelector:p,createText:y,createComment:v}}=c,m=mu(t.props);let{shapeFlag:g,children:w,dynamicChildren:b}=t;if(e==null){const E=t.el=y(""),S=t.anchor=y("");f(E,n,i),f(S,n,i);const k=t.target=ty(t.props,p),O=t.targetAnchor=y("");k&&(f(O,k),o=o||Bw(k));const W=(U,L)=>{g&16&&h(w,U,L,r,s,o,a,l)};m?W(n,S):k&&W(k,O)}else{t.el=e.el;const E=t.anchor=e.anchor,S=t.target=e.target,k=t.targetAnchor=e.targetAnchor,O=mu(e.props),W=O?n:S,U=O?E:k;if(o=o||Bw(S),b?(d(e.dynamicChildren,b,W,r,s,o,a),e_(e,t,!0)):l||u(e,t,W,U,r,s,o,a,!1),m)O||yd(t,n,E,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const L=t.target=ty(t.props,p);L&&yd(t,L,null,c,0)}else O&&yd(t,S,k,c,1)}},remove(e,t,n,i,{um:r,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:h,target:u,props:d}=e;if(u&&s(h),(o||!mu(d))&&(s(c),a&16))for(let f=0;f<l.length;f++){const p=l[f];r(p,t,n,!0,!!p.dynamicChildren)}},move:yd,hydrate:Fk};function yd(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:h}=e,u=s===2;if(u&&i(o,t,n),(!u||mu(h))&&l&16)for(let d=0;d<c.length;d++)r(c[d],t,n,2);u&&i(a,t,n)}function Fk(e,t,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const h=t.target=ty(t.props,l);if(h){const u=h._lpa||h.firstChild;if(t.shapeFlag&16)if(mu(t.props))t.anchor=c(o(e),t,a(e),n,i,r,s),t.targetAnchor=u;else{t.anchor=o(e);let d=u;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){t.targetAnchor=d,h._lpa=t.targetAnchor&&o(t.targetAnchor);break}c(u,t,h,n,i,r,s)}}return t.anchor&&o(t.anchor)}const Yp=Dk,It=Symbol(void 0),Vu=Symbol(void 0),Vi=Symbol(void 0),xg=Symbol(void 0),gu=[];let vr=null;function we(e=!1){gu.push(vr=e?null:[])}function Bk(){gu.pop(),vr=gu[gu.length-1]||null}let Uu=1;function Vw(e){Uu+=e}function _M(e){return e.dynamicChildren=Uu>0?vr||Bl:null,Bk(),Uu>0&&vr&&vr.push(e),e}function De(e,t,n,i,r,s){return _M(Ee(e,t,n,i,r,s,!0))}function bt(e,t,n,i,r){return _M(tt(e,t,n,i,r,!0))}function Uf(e){return e?e.__v_isVNode===!0:!1}function ta(e,t){return e.type===t.type&&e.key===t.key}const Zp="__vInternal",bM=({key:e})=>e!=null?e:null,mf=({ref:e,ref_key:t,ref_for:n})=>e!=null?ln(e)||tn(e)||dt(e)?{i:Xn,r:e,k:t,f:!!n}:e:null;function Ee(e,t=null,n=null,i=0,r=null,s=e===It?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&bM(t),ref:t&&mf(t),scopeId:jp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(t_(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ln(n)?8:16),Uu>0&&!o&&vr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&vr.push(l),l}const tt=Vk;function Vk(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===cM)&&(e=Vi),Uf(e)){const a=yo(e,t,!0);return n&&t_(a,n),Uu>0&&!s&&vr&&(a.shapeFlag&6?vr[vr.indexOf(e)]=a:vr.push(a)),a.patchFlag|=-2,a}if(Yk(e)&&(e=e.__vccOpts),t){t=Uk(t);let{class:a,style:l}=t;a&&!ln(a)&&(t.class=kt(a)),fn(l)&&(j0(l)&&!ot(l)&&(l=An({},l)),t.style=Ba(l))}const o=ln(e)?1:ok(e)?128:Ok(e)?64:fn(e)?4:dt(e)?2:0;return Ee(e,t,n,i,r,o,s,!0)}function Uk(e){return e?j0(e)||Zp in e?An({},e):e:null}function yo(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?Co(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&bM(a),ref:t&&t.ref?n&&r?ot(r)?r.concat(mf(t)):[r,mf(t)]:mf(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==It?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&yo(e.ssContent),ssFallback:e.ssFallback&&yo(e.ssFallback),el:e.el,anchor:e.anchor}}function Ki(e=" ",t=0){return tt(Vu,null,e,t)}function _t(e="",t=!1){return t?(we(),bt(Vi,null,e)):tt(Vi,null,e)}function Or(e){return e==null||typeof e=="boolean"?tt(Vi):ot(e)?tt(It,null,e.slice()):typeof e=="object"?io(e):tt(Vu,null,String(e))}function io(e){return e.el===null||e.memo?e:yo(e)}function t_(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(ot(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),t_(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Zp in t)?t._ctx=Xn:r===3&&Xn&&(Xn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:Xn},n=32):(t=String(t),i&64?(n=16,t=[Ki(t)]):n=8);e.children=t,e.shapeFlag|=n}function Co(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=kt([t.class,i.class]));else if(r==="style")t.style=Ba([t.style,i.style]);else if(Bp(r)){const s=t[r],o=i[r];o&&s!==o&&!(ot(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Cr(e,t,n,i=null){ir(e,t,7,[n,i])}const zk=yM();let Hk=0;function Wk(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||zk,s={uid:Hk++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new cN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pM(i,r),emitsOptions:tM(i,r),emit:null,emitted:null,propsDefaults:Bt,inheritAttrs:i.inheritAttrs,ctx:Bt,data:Bt,props:Bt,attrs:Bt,slots:Bt,refs:Bt,setupState:Bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=QN.bind(null,s),e.ce&&e.ce(s),s}let Tn=null;const ks=()=>Tn||Xn,Kl=e=>{Tn=e,e.scope.on()},ua=()=>{Tn&&Tn.scope.off(),Tn=null};function wM(e){return e.vnode.shapeFlag&4}let zu=!1;function Gk(e,t=!1){zu=t;const{props:n,children:i}=e.vnode,r=wM(e);Tk(e,n,r,t),Ck(e,i);const s=r?$k(e,t):void 0;return zu=!1,s}function $k(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ca(new Proxy(e.ctx,_k));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?qk(e):null;Kl(e),Va();const s=ys(i,e,0,[e.props,r]);if(Ua(),ua(),R1(s)){if(s.then(ua,ua),t)return s.then(o=>{Uw(e,o,t)}).catch(o=>{Wp(o,e,0)});e.asyncDep=s}else Uw(e,s,t)}else xM(e,t)}function Uw(e,t,n){dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fn(t)&&(e.setupState=j1(t)),xM(e,n)}let zw;function xM(e,t,n){const i=e.type;if(!e.render){if(!t&&zw&&!i.render){const r=i.template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=An(An({isCustomElement:s,delimiters:a},o),l);i.render=zw(r,c)}}e.render=i.render||yr}Kl(e),Va(),bk(e),Ua(),ua()}function jk(e){return new Proxy(e.attrs,{get(t,n){return Gi(e,"get","$attrs"),t[n]}})}function qk(e){const t=i=>{e.exposed=i||{}};let n;return{get attrs(){return n||(n=jk(e))},slots:e.slots,emit:e.emit,expose:t}}function Jp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(j1(ca(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Bf)return Bf[n](e)}}))}const Kk=/(?:^|[-_])(\w)/g,Xk=e=>e.replace(Kk,t=>t.toUpperCase()).replace(/[-_]/g,"");function EM(e){return dt(e)&&e.displayName||e.name}function SM(e,t,n=!1){let i=EM(t);if(!i&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(i=r[1])}if(!i&&e&&e.parent){const r=s=>{for(const o in s)if(s[o]===t)return o};i=r(e.components||e.parent.type.components)||r(e.appContext.components)}return i?Xk(i):n?"App":"Anonymous"}function Yk(e){return dt(e)&&"__vccOpts"in e}const Qe=(e,t)=>WN(e,t,zu);function Qn(e,t,n){const i=arguments.length;return i===2?fn(t)&&!ot(t)?Uf(t)?tt(e,null,[t]):tt(e,t):tt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Uf(n)&&(n=[n]),tt(e,t,n))}const Zk="3.2.36",Jk="http://www.w3.org/2000/svg",na=typeof document!="undefined"?document:null,Hw=na&&na.createElement("template"),Qk={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?na.createElementNS(Jk,e):na.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>na.createTextNode(e),createComment:e=>na.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>na.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Hw.innerHTML=i?`<svg>${e}</svg>`:e;const a=Hw.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function eO(e,t,n){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function tO(e,t,n){const i=e.style,r=ln(n);if(n&&!r){for(const s in n)ny(i,s,n[s]);if(t&&!ln(t))for(const s in t)n[s]==null&&ny(i,s,"")}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const Ww=/\s*!important$/;function ny(e,t,n){if(ot(n))n.forEach(i=>ny(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=nO(e,t);Ww.test(n)?e.setProperty(yc(i),n.replace(Ww,""),"important"):e[i]=n}}const Gw=["Webkit","Moz","ms"],Eg={};function nO(e,t){const n=Eg[t];if(n)return n;let i=Gr(t);if(i!=="filter"&&i in e)return Eg[t]=i;i=zp(i);for(let r=0;r<Gw.length;r++){const s=Gw[r]+i;if(s in e)return Eg[t]=s}return t}const $w="http://www.w3.org/1999/xlink";function iO(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS($w,t.slice(6,t.length)):e.setAttributeNS($w,t,n);else{const s=JP(t);n==null||s&&!A1(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function rO(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=A1(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}const[TM,sO]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let iy=0;const oO=Promise.resolve(),aO=()=>{iy=0},lO=()=>iy||(oO.then(aO),iy=TM());function bl(e,t,n,i){e.addEventListener(t,n,i)}function cO(e,t,n,i){e.removeEventListener(t,n,i)}function uO(e,t,n,i,r=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=hO(t);if(i){const c=s[t]=dO(i,r);bl(e,a,c,l)}else o&&(cO(e,a,o,l),s[t]=void 0)}}const jw=/(?:Once|Passive|Capture)$/;function hO(e){let t;if(jw.test(e)){t={};let n;for(;n=e.match(jw);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[yc(e.slice(2)),t]}function dO(e,t){const n=i=>{const r=i.timeStamp||TM();(sO||r>=n.attached-1)&&ir(fO(i,n.value),t,5,[i])};return n.value=e,n.attached=lO(),n}function fO(e,t){if(ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const qw=/^on[a-z]/,pO=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?eO(e,i,r):t==="style"?tO(e,n,i):Bp(t)?D0(t)||uO(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):mO(e,t,i,r))?rO(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),iO(e,t,i,r))};function mO(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&qw.test(t)&&dt(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||qw.test(t)&&ln(n)?!1:t in e}const zs="transition",Fc="animation",n_=(e,{slots:t})=>Qn(rM,AM(e),t);n_.displayName="Transition";const MM={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gO=n_.props=An({},rM.props,MM),zo=(e,t=[])=>{ot(e)?e.forEach(n=>n(...t)):e&&e(...t)},Kw=e=>e?ot(e)?e.some(t=>t.length>1):e.length>1:!1;function AM(e){const t={};for(const D in e)D in MM||(t[D]=e[D]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,p=vO(r),y=p&&p[0],v=p&&p[1],{onBeforeEnter:m,onEnter:g,onEnterCancelled:w,onLeave:b,onLeaveCancelled:E,onBeforeAppear:S=m,onAppear:k=g,onAppearCancelled:O=w}=t,W=(D,V,ee)=>{to(D,V?h:a),to(D,V?c:o),ee&&ee()},U=(D,V)=>{D._isLeaving=!1,to(D,u),to(D,f),to(D,d),V&&V()},L=D=>(V,ee)=>{const K=D?k:g,Z=()=>W(V,D,ee);zo(K,[V,Z]),Xw(()=>{to(V,D?l:s),cs(V,D?h:a),Kw(K)||Yw(V,i,y,Z)})};return An(t,{onBeforeEnter(D){zo(m,[D]),cs(D,s),cs(D,o)},onBeforeAppear(D){zo(S,[D]),cs(D,l),cs(D,c)},onEnter:L(!1),onAppear:L(!0),onLeave(D,V){D._isLeaving=!0;const ee=()=>U(D,V);cs(D,u),IM(),cs(D,d),Xw(()=>{!D._isLeaving||(to(D,u),cs(D,f),Kw(b)||Yw(D,i,v,ee))}),zo(b,[D,ee])},onEnterCancelled(D){W(D,!1),zo(w,[D])},onAppearCancelled(D){W(D,!0),zo(O,[D])},onLeaveCancelled(D){U(D),zo(E,[D])}})}function vO(e){if(e==null)return null;if(fn(e))return[Sg(e.enter),Sg(e.leave)];{const t=Sg(e);return[t,t]}}function Sg(e){return kf(e)}function cs(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function to(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Xw(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let yO=0;function Yw(e,t,n,i){const r=e._endId=++yO,s=()=>{r===e._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=CM(e,t);if(!o)return i();const c=o+"end";let h=0;const u=()=>{e.removeEventListener(c,d),s()},d=f=>{f.target===e&&++h>=l&&u()};setTimeout(()=>{h<l&&u()},a+1),e.addEventListener(c,d)}function CM(e,t){const n=window.getComputedStyle(e),i=p=>(n[p]||"").split(", "),r=i(zs+"Delay"),s=i(zs+"Duration"),o=Zw(r,s),a=i(Fc+"Delay"),l=i(Fc+"Duration"),c=Zw(a,l);let h=null,u=0,d=0;t===zs?o>0&&(h=zs,u=o,d=s.length):t===Fc?c>0&&(h=Fc,u=c,d=l.length):(u=Math.max(o,c),h=u>0?o>c?zs:Fc:null,d=h?h===zs?s.length:l.length:0);const f=h===zs&&/\b(transform|all)(,|$)/.test(n[zs+"Property"]);return{type:h,timeout:u,propCount:d,hasTransform:f}}function Zw(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Jw(n)+Jw(e[i])))}function Jw(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function IM(){return document.body.offsetHeight}const RM=new WeakMap,LM=new WeakMap,_O={name:"TransitionGroup",props:An({},gO,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=ks(),i=iM();let r,s;return lM(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!SO(r[0].el,n.vnode.el,o))return;r.forEach(wO),r.forEach(xO);const a=r.filter(EO);IM(),a.forEach(l=>{const c=l.el,h=c.style;cs(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const u=c._moveCb=d=>{d&&d.target!==c||(!d||/transform$/.test(d.propertyName))&&(c.removeEventListener("transitionend",u),c._moveCb=null,to(c,o))};c.addEventListener("transitionend",u)})}),()=>{const o=Mt(e),a=AM(o);let l=o.tag||It;r=s,s=t.default?Y0(t.default()):[];for(let c=0;c<s.length;c++){const h=s[c];h.key!=null&&Bu(h,Fu(h,a,i,n))}if(r)for(let c=0;c<r.length;c++){const h=r[c];Bu(h,Fu(h,a,i,n)),RM.set(h,h.el.getBoundingClientRect())}return tt(l,null,s)}}},bO=_O;function wO(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function xO(e){LM.set(e,e.el.getBoundingClientRect())}function EO(e){const t=RM.get(e),n=LM.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",e}}function SO(e,t,n){const i=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(i);const{hasTransform:s}=CM(i);return r.removeChild(i),s}const Qw=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?n=>pf(t,n):t};function TO(e){e.target.composing=!0}function ex(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Hu={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e._assign=Qw(r);const s=i||r.props&&r.props.type==="number";bl(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=kf(a)),e._assign(a)}),n&&bl(e,"change",()=>{e.value=e.value.trim()}),t||(bl(e,"compositionstart",TO),bl(e,"compositionend",ex),bl(e,"change",ex))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e._assign=Qw(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||i&&e.value.trim()===t||(r||e.type==="number")&&kf(e.value)===t))return;const o=t==null?"":t;e.value!==o&&(e.value=o)}},MO=["ctrl","shift","alt","meta"],AO={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>MO.some(n=>e[`${n}Key`]&&!t.includes(n))},i_=(e,t)=>(n,...i)=>{for(let r=0;r<t.length;r++){const s=AO[t[r]];if(s&&s(n,t))return}return e(n,...i)},PM={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Bc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Bc(e,!0),i.enter(e)):i.leave(e,()=>{Bc(e,!1)}):Bc(e,t))},beforeUnmount(e,{value:t}){Bc(e,t)}};function Bc(e,t){e.style.display=t?e._vod:"none"}const CO=An({patchProp:pO},Qk);let tx;function IO(){return tx||(tx=Pk(CO))}const RO=(...e)=>{const t=IO().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=LO(i);if(!r)return;const s=t._component;!dt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function LO(e){return ln(e)?document.querySelector(e):e}function PO(){return NM().__VUE_DEVTOOLS_GLOBAL_HOOK__}function NM(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const NO=typeof Proxy=="function",kO="devtools-plugin:setup",OO="plugin:settings:set";class DO{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const i={};if(t.settings)for(const o in t.settings){const a=t.settings[o];i[o]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(r),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o}},n&&n.on(OO,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function FO(e,t){const n=NM(),i=PO(),r=NO&&e.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))i.emit(kO,e,t);else{const s=r?new DO(e,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:e,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const kM=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",bc=e=>kM?Symbol(e):"_vr_"+e,BO=bc("rvlm"),nx=bc("rvd"),Qp=bc("r"),r_=bc("rl"),ry=bc("rvl"),wl=typeof window!="undefined";function VO(e){return e.__esModule||kM&&e[Symbol.toStringTag]==="Module"}const Ft=Object.assign;function Tg(e,t){const n={};for(const i in t){const r=t[i];n[i]=Array.isArray(r)?r.map(e):e(r)}return n}const vu=()=>{},UO=/\/$/,zO=e=>e.replace(UO,"");function Mg(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(i=t.slice(0,a),s=t.slice(a+1,l>-1?l:t.length),r=e(s)),l>-1&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=$O(i!=null?i:t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function HO(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ix(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function WO(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&Xl(t.matched[i],n.matched[r])&&OM(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Xl(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function OM(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!GO(e[n],t[n]))return!1;return!0}function GO(e,t){return Array.isArray(e)?rx(e,t):Array.isArray(t)?rx(t,e):e===t}function rx(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function $O(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/");let r=n.length-1,s,o;for(s=0;s<i.length;s++)if(o=i[s],!(r===1||o==="."))if(o==="..")r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var Wu;(function(e){e.pop="pop",e.push="push"})(Wu||(Wu={}));var yu;(function(e){e.back="back",e.forward="forward",e.unknown=""})(yu||(yu={}));function jO(e){if(!e)if(wl){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),zO(e)}const qO=/^[^#]+#/;function KO(e,t){return e.replace(qO,"#")+t}function XO(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const em=()=>({left:window.pageXOffset,top:window.pageYOffset});function YO(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=XO(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function sx(e,t){return(history.state?history.state.position-t:-1)+e}const sy=new Map;function ZO(e,t){sy.set(e,t)}function JO(e){const t=sy.get(e);return sy.delete(e),t}let QO=()=>location.protocol+"//"+location.host;function DM(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),ix(l,"")}return ix(n,e)+i+r}function eD(e,t,n,i){let r=[],s=[],o=null;const a=({state:d})=>{const f=DM(e,location),p=n.value,y=t.value;let v=0;if(d){if(n.value=f,t.value=d,o&&o===p){o=null;return}v=y?d.position-y.position:0}else i(f);r.forEach(m=>{m(n.value,p,{delta:v,type:Wu.pop,direction:v?v>0?yu.forward:yu.back:yu.unknown})})};function l(){o=n.value}function c(d){r.push(d);const f=()=>{const p=r.indexOf(d);p>-1&&r.splice(p,1)};return s.push(f),f}function h(){const{history:d}=window;!d.state||d.replaceState(Ft({},d.state,{scroll:em()}),"")}function u(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:c,destroy:u}}function ox(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?em():null}}function tD(e){const{history:t,location:n}=window,i={value:DM(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const u=e.indexOf("#"),d=u>-1?(n.host&&document.querySelector("base")?e:e.slice(u))+l:QO()+e+l;try{t[h?"replaceState":"pushState"](c,"",d),r.value=c}catch(f){console.error(f),n[h?"replace":"assign"](d)}}function o(l,c){const h=Ft({},t.state,ox(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,h,!0),i.value=l}function a(l,c){const h=Ft({},r.value,t.state,{forward:l,scroll:em()});s(h.current,h,!0);const u=Ft({},ox(i.value,l,null),{position:h.position+1},c);s(l,u,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function nD(e){e=jO(e);const t=tD(e),n=eD(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=Ft({location:"",base:e,go:i,createHref:KO.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function iD(e){return typeof e=="string"||e&&typeof e=="object"}function FM(e){return typeof e=="string"||typeof e=="symbol"}const Hs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},BM=bc("nf");var ax;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ax||(ax={}));function Yl(e,t){return Ft(new Error,{type:e,[BM]:!0},t)}function Ho(e,t){return e instanceof Error&&BM in e&&(t==null||!!(e.type&t))}const lx="[^/]+?",rD={sensitive:!1,strict:!1,start:!0,end:!0},sD=/[.+*?^${}()[\]/\\]/g;function oD(e,t){const n=Ft({},rD,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const h=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let u=0;u<c.length;u++){const d=c[u];let f=40+(n.sensitive?.25:0);if(d.type===0)u||(r+="/"),r+=d.value.replace(sD,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:y,optional:v,regexp:m}=d;s.push({name:p,repeatable:y,optional:v});const g=m||lx;if(g!==lx){f+=10;try{new RegExp(`(${g})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${g}): `+b.message)}}let w=y?`((?:${g})(?:/(?:${g}))*)`:`(${g})`;u||(w=v&&c.length<2?`(?:/${w})`:"/"+w),v&&(w+="?"),r+=w,f+=20,v&&(f+=-8),y&&(f+=-20),g===".*"&&(f+=-50)}h.push(f)}i.push(h)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const h=c.match(o),u={};if(!h)return null;for(let d=1;d<h.length;d++){const f=h[d]||"",p=s[d-1];u[p.name]=f&&p.repeatable?f.split("/"):f}return u}function l(c){let h="",u=!1;for(const d of e){(!u||!h.endsWith("/"))&&(h+="/"),u=!1;for(const f of d)if(f.type===0)h+=f.value;else if(f.type===1){const{value:p,repeatable:y,optional:v}=f,m=p in c?c[p]:"";if(Array.isArray(m)&&!y)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const g=Array.isArray(m)?m.join("/"):m;if(!g)if(v)d.length<2&&(h.endsWith("/")?h=h.slice(0,-1):u=!0);else throw new Error(`Missing required param "${p}"`);h+=g}}return h}return{re:o,score:i,keys:s,parse:a,stringify:l}}function aD(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function lD(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=aD(i[n],r[n]);if(s)return s;n++}return r.length-i.length}const cD={type:0,value:""},uD=/[a-zA-Z0-9_]/;function hD(e){if(!e)return[[]];if(e==="/")return[[cD]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",h="";function u(){!c||(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&u(),o()):l===":"?(u(),n=1):d();break;case 4:d(),n=i;break;case 1:l==="("?n=2:uD.test(l)?d():(u(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:u(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),u(),o(),r}function dD(e,t,n){const i=oD(hD(e.path),n),r=Ft(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function fD(e,t){const n=[],i=new Map;t=ux({strict:!1,end:!0,sensitive:!1},t);function r(h){return i.get(h)}function s(h,u,d){const f=!d,p=mD(h);p.aliasOf=d&&d.record;const y=ux(t,h),v=[p];if("alias"in h){const w=typeof h.alias=="string"?[h.alias]:h.alias;for(const b of w)v.push(Ft({},p,{components:d?d.record.components:p.components,path:b,aliasOf:d?d.record:p}))}let m,g;for(const w of v){const{path:b}=w;if(u&&b[0]!=="/"){const E=u.record.path,S=E[E.length-1]==="/"?"":"/";w.path=u.record.path+(b&&S+b)}if(m=dD(w,u,y),d?d.alias.push(m):(g=g||m,g!==m&&g.alias.push(m),f&&h.name&&!cx(m)&&o(h.name)),"children"in p){const E=p.children;for(let S=0;S<E.length;S++)s(E[S],m,d&&d.children[S])}d=d||m,l(m)}return g?()=>{o(g)}:vu}function o(h){if(FM(h)){const u=i.get(h);u&&(i.delete(h),n.splice(n.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=n.indexOf(h);u>-1&&(n.splice(u,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){let u=0;for(;u<n.length&&lD(h,n[u])>=0;)u++;n.splice(u,0,h),h.record.name&&!cx(h)&&i.set(h.record.name,h)}function c(h,u){let d,f={},p,y;if("name"in h&&h.name){if(d=i.get(h.name),!d)throw Yl(1,{location:h});y=d.record.name,f=Ft(pD(u.params,d.keys.filter(g=>!g.optional).map(g=>g.name)),h.params),p=d.stringify(f)}else if("path"in h)p=h.path,d=n.find(g=>g.re.test(p)),d&&(f=d.parse(p),y=d.record.name);else{if(d=u.name?i.get(u.name):n.find(g=>g.re.test(u.path)),!d)throw Yl(1,{location:h,currentLocation:u});y=d.record.name,f=Ft({},u.params,h.params),p=d.stringify(f)}const v=[];let m=d;for(;m;)v.unshift(m.record),m=m.parent;return{name:y,path:p,params:f,matched:v,meta:vD(v)}}return e.forEach(h=>s(h)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function pD(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function mD(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:gD(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function gD(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="boolean"?n:n[i];return t}function cx(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function vD(e){return e.reduce((t,n)=>Ft(t,n.meta),{})}function ux(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}const VM=/#/g,yD=/&/g,_D=/\//g,bD=/=/g,wD=/\?/g,UM=/\+/g,xD=/%5B/g,ED=/%5D/g,zM=/%5E/g,SD=/%60/g,HM=/%7B/g,TD=/%7C/g,WM=/%7D/g,MD=/%20/g;function s_(e){return encodeURI(""+e).replace(TD,"|").replace(xD,"[").replace(ED,"]")}function AD(e){return s_(e).replace(HM,"{").replace(WM,"}").replace(zM,"^")}function oy(e){return s_(e).replace(UM,"%2B").replace(MD,"+").replace(VM,"%23").replace(yD,"%26").replace(SD,"`").replace(HM,"{").replace(WM,"}").replace(zM,"^")}function CD(e){return oy(e).replace(bD,"%3D")}function ID(e){return s_(e).replace(VM,"%23").replace(wD,"%3F")}function RD(e){return e==null?"":ID(e).replace(_D,"%2F")}function zf(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function LD(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(UM," "),o=s.indexOf("="),a=zf(o<0?s:s.slice(0,o)),l=o<0?null:zf(s.slice(o+1));if(a in t){let c=t[a];Array.isArray(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function hx(e){let t="";for(let n in e){const i=e[n];if(n=CD(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(i)?i.map(s=>s&&oy(s)):[i&&oy(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function PD(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=Array.isArray(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}function Vc(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function ro(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=u=>{u===!1?a(Yl(4,{from:n,to:t})):u instanceof Error?a(u):iD(u)?a(Yl(2,{from:t,to:u})):(s&&i.enterCallbacks[r]===s&&typeof u=="function"&&s.push(u),o())},c=e.call(i&&i.instances[r],t,n,l);let h=Promise.resolve(c);e.length<3&&(h=h.then(l)),h.catch(u=>a(u))})}function Ag(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(ND(a)){const c=(a.__vccOpts||a)[t];c&&r.push(ro(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const h=VO(c)?c.default:c;s.components[o]=h;const d=(h.__vccOpts||h)[t];return d&&ro(d,n,i,s,o)()}))}}return r}function ND(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function dx(e){const t=Jn(Qp),n=Jn(r_),i=Qe(()=>t.resolve($e(e.to))),r=Qe(()=>{const{matched:l}=i.value,{length:c}=l,h=l[c-1],u=n.matched;if(!h||!u.length)return-1;const d=u.findIndex(Xl.bind(null,h));if(d>-1)return d;const f=fx(l[c-2]);return c>1&&fx(h)===f&&u[u.length-1].path!==f?u.findIndex(Xl.bind(null,l[c-2])):d}),s=Qe(()=>r.value>-1&&FD(n.params,i.value.params)),o=Qe(()=>r.value>-1&&r.value===n.matched.length-1&&OM(n.params,i.value.params));function a(l={}){return DD(l)?t[$e(e.replace)?"replace":"push"]($e(e.to)).catch(vu):Promise.resolve()}return{route:i,href:Qe(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const kD=Ao({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:dx,setup(e,{slots:t}){const n=ur(dx(e)),{options:i}=Jn(Qp),r=Qe(()=>({[px(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[px(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Qn("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),OD=kD;function DD(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function FD(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!Array.isArray(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function fx(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const px=(e,t,n)=>e!=null?e:t!=null?t:n,BD=Ao({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const i=Jn(ry),r=Qe(()=>e.route||i.value),s=Jn(nx,0),o=Qe(()=>r.value.matched[s]);zl(nx,s+1),zl(BO,o),zl(ry,r);const a=st();return dn(()=>[a.value,o.value,e.name],([l,c,h],[u,d,f])=>{c&&(c.instances[h]=l,d&&d!==c&&l&&l===u&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),l&&c&&(!d||!Xl(c,d)||!u)&&(c.enterCallbacks[h]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=r.value,c=o.value,h=c&&c.components[e.name],u=e.name;if(!h)return mx(n.default,{Component:h,route:l});const d=c.props[e.name],f=d?d===!0?l.params:typeof d=="function"?d(l):d:null,y=Qn(h,Ft({},f,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(c.instances[u]=null)},ref:a}));return mx(n.default,{Component:y,route:l})||y}}});function mx(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const VD=BD;function UD(e){const t=fD(e.routes,e),n=e.parseQuery||LD,i=e.stringifyQuery||hx,r=e.history,s=Vc(),o=Vc(),a=Vc(),l=FN(Hs);let c=Hs;wl&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Tg.bind(null,T=>""+T),u=Tg.bind(null,RD),d=Tg.bind(null,zf);function f(T,ne){let Q,oe;return FM(T)?(Q=t.getRecordMatcher(T),oe=ne):oe=T,t.addRoute(oe,Q)}function p(T){const ne=t.getRecordMatcher(T);ne&&t.removeRoute(ne)}function y(){return t.getRoutes().map(T=>T.record)}function v(T){return!!t.getRecordMatcher(T)}function m(T,ne){if(ne=Ft({},ne||l.value),typeof T=="string"){const P=Mg(n,T,ne.path),x=t.resolve({path:P.path},ne),M=r.createHref(P.fullPath);return Ft(P,x,{params:d(x.params),hash:zf(P.hash),redirectedFrom:void 0,href:M})}let Q;if("path"in T)Q=Ft({},T,{path:Mg(n,T.path,ne.path).path});else{const P=Ft({},T.params);for(const x in P)P[x]==null&&delete P[x];Q=Ft({},T,{params:u(T.params)}),ne.params=u(ne.params)}const oe=t.resolve(Q,ne),ie=T.hash||"";oe.params=h(d(oe.params));const $=HO(i,Ft({},T,{hash:AD(ie),path:oe.path})),A=r.createHref($);return Ft({fullPath:$,hash:ie,query:i===hx?PD(T.query):T.query||{}},oe,{redirectedFrom:void 0,href:A})}function g(T){return typeof T=="string"?Mg(n,T,l.value.path):Ft({},T)}function w(T,ne){if(c!==T)return Yl(8,{from:ne,to:T})}function b(T){return k(T)}function E(T){return b(Ft(g(T),{replace:!0}))}function S(T){const ne=T.matched[T.matched.length-1];if(ne&&ne.redirect){const{redirect:Q}=ne;let oe=typeof Q=="function"?Q(T):Q;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=g(oe):{path:oe},oe.params={}),Ft({query:T.query,hash:T.hash,params:T.params},oe)}}function k(T,ne){const Q=c=m(T),oe=l.value,ie=T.state,$=T.force,A=T.replace===!0,P=S(Q);if(P)return k(Ft(g(P),{state:ie,force:$,replace:A}),ne||Q);const x=Q;x.redirectedFrom=ne;let M;return!$&&WO(i,oe,Q)&&(M=Yl(16,{to:x,from:oe}),ae(oe,oe,!0,!1)),(M?Promise.resolve(M):W(x,oe)).catch(N=>Ho(N)?N:H(N,x,oe)).then(N=>{if(N){if(Ho(N,2))return k(Ft(g(N.to),{state:ie,force:$,replace:A}),ne||x)}else N=L(x,oe,!0,A,ie);return U(x,oe,N),N})}function O(T,ne){const Q=w(T,ne);return Q?Promise.reject(Q):Promise.resolve()}function W(T,ne){let Q;const[oe,ie,$]=zD(T,ne);Q=Ag(oe.reverse(),"beforeRouteLeave",T,ne);for(const P of oe)P.leaveGuards.forEach(x=>{Q.push(ro(x,T,ne))});const A=O.bind(null,T,ne);return Q.push(A),Ja(Q).then(()=>{Q=[];for(const P of s.list())Q.push(ro(P,T,ne));return Q.push(A),Ja(Q)}).then(()=>{Q=Ag(ie,"beforeRouteUpdate",T,ne);for(const P of ie)P.updateGuards.forEach(x=>{Q.push(ro(x,T,ne))});return Q.push(A),Ja(Q)}).then(()=>{Q=[];for(const P of T.matched)if(P.beforeEnter&&!ne.matched.includes(P))if(Array.isArray(P.beforeEnter))for(const x of P.beforeEnter)Q.push(ro(x,T,ne));else Q.push(ro(P.beforeEnter,T,ne));return Q.push(A),Ja(Q)}).then(()=>(T.matched.forEach(P=>P.enterCallbacks={}),Q=Ag($,"beforeRouteEnter",T,ne),Q.push(A),Ja(Q))).then(()=>{Q=[];for(const P of o.list())Q.push(ro(P,T,ne));return Q.push(A),Ja(Q)}).catch(P=>Ho(P,8)?P:Promise.reject(P))}function U(T,ne,Q){for(const oe of a.list())oe(T,ne,Q)}function L(T,ne,Q,oe,ie){const $=w(T,ne);if($)return $;const A=ne===Hs,P=wl?history.state:{};Q&&(oe||A?r.replace(T.fullPath,Ft({scroll:A&&P&&P.scroll},ie)):r.push(T.fullPath,ie)),l.value=T,ae(T,ne,Q,A),te()}let D;function V(){D=r.listen((T,ne,Q)=>{const oe=m(T),ie=S(oe);if(ie){k(Ft(ie,{replace:!0}),oe).catch(vu);return}c=oe;const $=l.value;wl&&ZO(sx($.fullPath,Q.delta),em()),W(oe,$).catch(A=>Ho(A,12)?A:Ho(A,2)?(k(A.to,oe).then(P=>{Ho(P,20)&&!Q.delta&&Q.type===Wu.pop&&r.go(-1,!1)}).catch(vu),Promise.reject()):(Q.delta&&r.go(-Q.delta,!1),H(A,oe,$))).then(A=>{A=A||L(oe,$,!1),A&&(Q.delta?r.go(-Q.delta,!1):Q.type===Wu.pop&&Ho(A,20)&&r.go(-1,!1)),U(oe,$,A)}).catch(vu)})}let ee=Vc(),K=Vc(),Z;function H(T,ne,Q){te(T);const oe=K.list();return oe.length?oe.forEach(ie=>ie(T,ne,Q)):console.error(T),Promise.reject(T)}function B(){return Z&&l.value!==Hs?Promise.resolve():new Promise((T,ne)=>{ee.add([T,ne])})}function te(T){Z||(Z=!0,V(),ee.list().forEach(([ne,Q])=>T?Q(T):ne()),ee.reset())}function ae(T,ne,Q,oe){const{scrollBehavior:ie}=e;if(!wl||!ie)return Promise.resolve();const $=!Q&&JO(sx(T.fullPath,0))||(oe||!Q)&&history.state&&history.state.scroll||null;return ia().then(()=>ie(T,ne,$)).then(A=>A&&YO(A)).catch(A=>H(A,T,ne))}const G=T=>r.go(T);let le;const X=new Set;return{currentRoute:l,addRoute:f,removeRoute:p,hasRoute:v,getRoutes:y,resolve:m,options:e,push:b,replace:E,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:K.add,isReady:B,install(T){const ne=this;T.component("RouterLink",OD),T.component("RouterView",VD),T.config.globalProperties.$router=ne,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),wl&&!le&&l.value===Hs&&(le=!0,b(r.location).catch(ie=>{}));const Q={};for(const ie in Hs)Q[ie]=Qe(()=>l.value[ie]);T.provide(Qp,ne),T.provide(r_,ur(Q)),T.provide(ry,l);const oe=T.unmount;X.add(T),T.unmount=function(){X.delete(T),X.size<1&&(c=Hs,D&&D(),l.value=Hs,le=!1,Z=!1),oe()}}}}function Ja(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function zD(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>Xl(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Xl(c,l))||r.push(l))}return[n,i,r]}function GM(){return Jn(Qp)}function $M(){return Jn(r_)}/*!
  * @intlify/shared v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const HD=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Os=e=>HD?Symbol(e):e,WD=(e,t,n)=>GD({l:e,k:t,s:n}),GD=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Dn=e=>typeof e=="number"&&isFinite(e),$D=e=>a_(e)==="[object Date]",Hf=e=>a_(e)==="[object RegExp]",tm=e=>Tt(e)&&Object.keys(e).length===0;function jD(e,t){typeof console!="undefined"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Fn=Object.assign;let gx;const o_=()=>gx||(gx=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function vx(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const qD=Object.prototype.hasOwnProperty;function jM(e,t){return qD.call(e,t)}const Yn=Array.isArray,hi=e=>typeof e=="function",je=e=>typeof e=="string",vn=e=>typeof e=="boolean",mi=e=>e!==null&&typeof e=="object",qM=Object.prototype.toString,a_=e=>qM.call(e),Tt=e=>a_(e)==="[object Object]",KD=e=>e==null?"":Yn(e)||Tt(e)&&e.toString===qM?JSON.stringify(e,null,2):String(e);/*!
  * @intlify/message-resolver v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const XD=Object.prototype.hasOwnProperty;function YD(e,t){return XD.call(e,t)}const gf=e=>e!==null&&typeof e=="object",Io=[];Io[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Io[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Io[2]={w:[2],i:[3,0],[0]:[3,0]};Io[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Io[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Io[5]={["'"]:[4,0],o:8,l:[5,0]};Io[6]={['"']:[4,0],o:8,l:[6,0]};const ZD=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function JD(e){return ZD.test(e)}function QD(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function e2(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function t2(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:JD(t)?QD(t):"*"+t}function n2(e){const t=[];let n=-1,i=0,r=0,s,o,a,l,c,h,u;const d=[];d[0]=()=>{o===void 0?o=a:o+=a},d[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},d[2]=()=>{d[0](),r++},d[3]=()=>{if(r>0)r--,i=4,d[0]();else{if(r=0,o===void 0||(o=t2(o),o===!1))return!1;d[1]()}};function f(){const p=e[n+1];if(i===5&&p==="'"||i===6&&p==='"')return n++,a="\\"+p,d[0](),!0}for(;i!==null;)if(n++,s=e[n],!(s==="\\"&&f())){if(l=e2(s),u=Io[i],c=u[l]||u.l||8,c===8||(i=c[0],c[1]!==void 0&&(h=d[c[1]],h&&(a=s,h()===!1))))return;if(i===7)return t}}const yx=new Map;function Wf(e,t){if(!gf(e))return null;let n=yx.get(t);if(n||(n=n2(t),n&&yx.set(t,n)),!n)return null;const i=n.length;let r=e,s=0;for(;s<i;){const o=r[n[s]];if(o===void 0)return null;r=o,s++}return r}function ay(e){if(!gf(e))return e;for(const t in e)if(!!YD(e,t))if(!t.includes("."))gf(e[t])&&ay(e[t]);else{const n=t.split("."),i=n.length-1;let r=e;for(let s=0;s<i;s++)n[s]in r||(r[n[s]]={}),r=r[n[s]];r[n[i]]=e[t],delete e[t],gf(r[n[i]])&&ay(r[n[i]])}return e}/*!
  * @intlify/runtime v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const i2=e=>e,r2=e=>"",s2="text",o2=e=>e.length===0?"":e.join(""),a2=KD;function _x(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function l2(e){const t=Dn(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Dn(e.named.count)||Dn(e.named.n))?Dn(e.named.count)?e.named.count:Dn(e.named.n)?e.named.n:t:t}function c2(e,t){t.count||(t.count=e),t.n||(t.n=e)}function u2(e={}){const t=e.locale,n=l2(e),i=mi(e.pluralRules)&&je(t)&&hi(e.pluralRules[t])?e.pluralRules[t]:_x,r=mi(e.pluralRules)&&je(t)&&hi(e.pluralRules[t])?_x:void 0,s=v=>v[i(n,v.length,r)],o=e.list||[],a=v=>o[v],l=e.named||{};Dn(e.pluralIndex)&&c2(n,l);const c=v=>l[v];function h(v){const m=hi(e.messages)?e.messages(v):mi(e.messages)?e.messages[v]:!1;return m||(e.parent?e.parent.message(v):r2)}const u=v=>e.modifiers?e.modifiers[v]:i2,d=Tt(e.processor)&&hi(e.processor.normalize)?e.processor.normalize:o2,f=Tt(e.processor)&&hi(e.processor.interpolate)?e.processor.interpolate:a2,p=Tt(e.processor)&&je(e.processor.type)?e.processor.type:s2,y={list:a,named:c,plural:s,linked:(v,m)=>{const g=h(v)(y);return je(m)?u(m)(g):g},message:h,type:p,interpolate:f,normalize:d};return y}/*!
  * @intlify/message-compiler v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */function nm(e,t,n={}){const{domain:i,messages:r,args:s}=n,o=e,a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=i,a}function h2(e){throw e}function d2(e,t,n){return{line:e,column:t,offset:n}}function ly(e,t,n){const i={start:e,end:t};return n!=null&&(i.source=n),i}const is=" ",f2="\r",li=`
`,p2=String.fromCharCode(8232),m2=String.fromCharCode(8233);function g2(e){const t=e;let n=0,i=1,r=1,s=0;const o=k=>t[k]===f2&&t[k+1]===li,a=k=>t[k]===li,l=k=>t[k]===m2,c=k=>t[k]===p2,h=k=>o(k)||a(k)||l(k)||c(k),u=()=>n,d=()=>i,f=()=>r,p=()=>s,y=k=>o(k)||l(k)||c(k)?li:t[k],v=()=>y(n),m=()=>y(n+s);function g(){return s=0,h(n)&&(i++,r=0),o(n)&&n++,n++,r++,t[n]}function w(){return o(n+s)&&s++,s++,t[n+s]}function b(){n=0,i=1,r=1,s=0}function E(k=0){s=k}function S(){const k=n+s;for(;k!==n;)g();s=0}return{index:u,line:d,column:f,peekOffset:p,charAt:y,currentChar:v,currentPeek:m,next:g,peek:w,reset:b,resetPeek:E,skipToPeek:S}}const Ws=void 0,bx="'",v2="tokenizer";function y2(e,t={}){const n=t.location!==!1,i=g2(e),r=()=>i.index(),s=()=>d2(i.line(),i.column(),i.index()),o=s(),a=r(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:h}=t;function u(A,P,x,...M){const N=c();if(P.column+=x,P.offset+=x,h){const F=ly(N.startLoc,P),R=nm(A,F,{domain:v2,args:M});h(R)}}function d(A,P,x){A.endLoc=s(),A.currentType=P;const M={type:P};return n&&(M.loc=ly(A.startLoc,A.endLoc)),x!=null&&(M.value=x),M}const f=A=>d(A,14);function p(A,P){return A.currentChar()===P?(A.next(),P):(u(0,s(),0,P),"")}function y(A){let P="";for(;A.currentPeek()===is||A.currentPeek()===li;)P+=A.currentPeek(),A.peek();return P}function v(A){const P=y(A);return A.skipToPeek(),P}function m(A){if(A===Ws)return!1;const P=A.charCodeAt(0);return P>=97&&P<=122||P>=65&&P<=90||P===95}function g(A){if(A===Ws)return!1;const P=A.charCodeAt(0);return P>=48&&P<=57}function w(A,P){const{currentType:x}=P;if(x!==2)return!1;y(A);const M=m(A.currentPeek());return A.resetPeek(),M}function b(A,P){const{currentType:x}=P;if(x!==2)return!1;y(A);const M=A.currentPeek()==="-"?A.peek():A.currentPeek(),N=g(M);return A.resetPeek(),N}function E(A,P){const{currentType:x}=P;if(x!==2)return!1;y(A);const M=A.currentPeek()===bx;return A.resetPeek(),M}function S(A,P){const{currentType:x}=P;if(x!==8)return!1;y(A);const M=A.currentPeek()===".";return A.resetPeek(),M}function k(A,P){const{currentType:x}=P;if(x!==9)return!1;y(A);const M=m(A.currentPeek());return A.resetPeek(),M}function O(A,P){const{currentType:x}=P;if(!(x===8||x===12))return!1;y(A);const M=A.currentPeek()===":";return A.resetPeek(),M}function W(A,P){const{currentType:x}=P;if(x!==10)return!1;const M=()=>{const F=A.currentPeek();return F==="{"?m(A.peek()):F==="@"||F==="%"||F==="|"||F===":"||F==="."||F===is||!F?!1:F===li?(A.peek(),M()):m(F)},N=M();return A.resetPeek(),N}function U(A){y(A);const P=A.currentPeek()==="|";return A.resetPeek(),P}function L(A,P=!0){const x=(N=!1,F="",R=!1)=>{const C=A.currentPeek();return C==="{"?F==="%"?!1:N:C==="@"||!C?F==="%"?!0:N:C==="%"?(A.peek(),x(N,"%",!0)):C==="|"?F==="%"||R?!0:!(F===is||F===li):C===is?(A.peek(),x(!0,is,R)):C===li?(A.peek(),x(!0,li,R)):!0},M=x();return P&&A.resetPeek(),M}function D(A,P){const x=A.currentChar();return x===Ws?Ws:P(x)?(A.next(),x):null}function V(A){return D(A,x=>{const M=x.charCodeAt(0);return M>=97&&M<=122||M>=65&&M<=90||M>=48&&M<=57||M===95||M===36})}function ee(A){return D(A,x=>{const M=x.charCodeAt(0);return M>=48&&M<=57})}function K(A){return D(A,x=>{const M=x.charCodeAt(0);return M>=48&&M<=57||M>=65&&M<=70||M>=97&&M<=102})}function Z(A){let P="",x="";for(;P=ee(A);)x+=P;return x}function H(A){let P="";for(;;){const x=A.currentChar();if(x==="{"||x==="}"||x==="@"||x==="|"||!x)break;if(x==="%")if(L(A))P+=x,A.next();else break;else if(x===is||x===li)if(L(A))P+=x,A.next();else{if(U(A))break;P+=x,A.next()}else P+=x,A.next()}return P}function B(A){v(A);let P="",x="";for(;P=V(A);)x+=P;return A.currentChar()===Ws&&u(6,s(),0),x}function te(A){v(A);let P="";return A.currentChar()==="-"?(A.next(),P+=`-${Z(A)}`):P+=Z(A),A.currentChar()===Ws&&u(6,s(),0),P}function ae(A){v(A),p(A,"'");let P="",x="";const M=F=>F!==bx&&F!==li;for(;P=D(A,M);)P==="\\"?x+=G(A):x+=P;const N=A.currentChar();return N===li||N===Ws?(u(2,s(),0),N===li&&(A.next(),p(A,"'")),x):(p(A,"'"),x)}function G(A){const P=A.currentChar();switch(P){case"\\":case"'":return A.next(),`\\${P}`;case"u":return le(A,P,4);case"U":return le(A,P,6);default:return u(3,s(),0,P),""}}function le(A,P,x){p(A,P);let M="";for(let N=0;N<x;N++){const F=K(A);if(!F){u(4,s(),0,`\\${P}${M}${A.currentChar()}`);break}M+=F}return`\\${P}${M}`}function X(A){v(A);let P="",x="";const M=N=>N!=="{"&&N!=="}"&&N!==is&&N!==li;for(;P=D(A,M);)x+=P;return x}function J(A){let P="",x="";for(;P=V(A);)x+=P;return x}function T(A){const P=(x=!1,M)=>{const N=A.currentChar();return N==="{"||N==="%"||N==="@"||N==="|"||!N||N===is?M:N===li?(M+=N,A.next(),P(x,M)):(M+=N,A.next(),P(!0,M))};return P(!1,"")}function ne(A){v(A);const P=p(A,"|");return v(A),P}function Q(A,P){let x=null;switch(A.currentChar()){case"{":return P.braceNest>=1&&u(8,s(),0),A.next(),x=d(P,2,"{"),v(A),P.braceNest++,x;case"}":return P.braceNest>0&&P.currentType===2&&u(7,s(),0),A.next(),x=d(P,3,"}"),P.braceNest--,P.braceNest>0&&v(A),P.inLinked&&P.braceNest===0&&(P.inLinked=!1),x;case"@":return P.braceNest>0&&u(6,s(),0),x=oe(A,P)||f(P),P.braceNest=0,x;default:let N=!0,F=!0,R=!0;if(U(A))return P.braceNest>0&&u(6,s(),0),x=d(P,1,ne(A)),P.braceNest=0,P.inLinked=!1,x;if(P.braceNest>0&&(P.currentType===5||P.currentType===6||P.currentType===7))return u(6,s(),0),P.braceNest=0,ie(A,P);if(N=w(A,P))return x=d(P,5,B(A)),v(A),x;if(F=b(A,P))return x=d(P,6,te(A)),v(A),x;if(R=E(A,P))return x=d(P,7,ae(A)),v(A),x;if(!N&&!F&&!R)return x=d(P,13,X(A)),u(1,s(),0,x.value),v(A),x;break}return x}function oe(A,P){const{currentType:x}=P;let M=null;const N=A.currentChar();switch((x===8||x===9||x===12||x===10)&&(N===li||N===is)&&u(9,s(),0),N){case"@":return A.next(),M=d(P,8,"@"),P.inLinked=!0,M;case".":return v(A),A.next(),d(P,9,".");case":":return v(A),A.next(),d(P,10,":");default:return U(A)?(M=d(P,1,ne(A)),P.braceNest=0,P.inLinked=!1,M):S(A,P)||O(A,P)?(v(A),oe(A,P)):k(A,P)?(v(A),d(P,12,J(A))):W(A,P)?(v(A),N==="{"?Q(A,P)||M:d(P,11,T(A))):(x===8&&u(9,s(),0),P.braceNest=0,P.inLinked=!1,ie(A,P))}}function ie(A,P){let x={type:14};if(P.braceNest>0)return Q(A,P)||f(P);if(P.inLinked)return oe(A,P)||f(P);const M=A.currentChar();switch(M){case"{":return Q(A,P)||f(P);case"}":return u(5,s(),0),A.next(),d(P,3,"}");case"@":return oe(A,P)||f(P);default:if(U(A))return x=d(P,1,ne(A)),P.braceNest=0,P.inLinked=!1,x;if(L(A))return d(P,0,H(A));if(M==="%")return A.next(),d(P,4,"%");break}return x}function $(){const{currentType:A,offset:P,startLoc:x,endLoc:M}=l;return l.lastType=A,l.lastOffset=P,l.lastStartLoc=x,l.lastEndLoc=M,l.offset=r(),l.startLoc=s(),i.currentChar()===Ws?d(l,14):ie(i,l)}return{nextToken:$,currentOffset:r,currentPosition:s,context:c}}const _2="parser",b2=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function w2(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(t||n,16);return i<=55295||i>=57344?String.fromCodePoint(i):"\uFFFD"}}}function x2(e={}){const t=e.location!==!1,{onError:n}=e;function i(m,g,w,b,...E){const S=m.currentPosition();if(S.offset+=b,S.column+=b,n){const k=ly(w,S),O=nm(g,k,{domain:_2,args:E});n(O)}}function r(m,g,w){const b={type:m,start:g,end:g};return t&&(b.loc={start:w,end:w}),b}function s(m,g,w,b){m.end=g,b&&(m.type=b),t&&m.loc&&(m.loc.end=w)}function o(m,g){const w=m.context(),b=r(3,w.offset,w.startLoc);return b.value=g,s(b,m.currentOffset(),m.currentPosition()),b}function a(m,g){const w=m.context(),{lastOffset:b,lastStartLoc:E}=w,S=r(5,b,E);return S.index=parseInt(g,10),m.nextToken(),s(S,m.currentOffset(),m.currentPosition()),S}function l(m,g){const w=m.context(),{lastOffset:b,lastStartLoc:E}=w,S=r(4,b,E);return S.key=g,m.nextToken(),s(S,m.currentOffset(),m.currentPosition()),S}function c(m,g){const w=m.context(),{lastOffset:b,lastStartLoc:E}=w,S=r(9,b,E);return S.value=g.replace(b2,w2),m.nextToken(),s(S,m.currentOffset(),m.currentPosition()),S}function h(m){const g=m.nextToken(),w=m.context(),{lastOffset:b,lastStartLoc:E}=w,S=r(8,b,E);return g.type!==12?(i(m,11,w.lastStartLoc,0),S.value="",s(S,b,E),{nextConsumeToken:g,node:S}):(g.value==null&&i(m,13,w.lastStartLoc,0,Ir(g)),S.value=g.value||"",s(S,m.currentOffset(),m.currentPosition()),{node:S})}function u(m,g){const w=m.context(),b=r(7,w.offset,w.startLoc);return b.value=g,s(b,m.currentOffset(),m.currentPosition()),b}function d(m){const g=m.context(),w=r(6,g.offset,g.startLoc);let b=m.nextToken();if(b.type===9){const E=h(m);w.modifier=E.node,b=E.nextConsumeToken||m.nextToken()}switch(b.type!==10&&i(m,13,g.lastStartLoc,0,Ir(b)),b=m.nextToken(),b.type===2&&(b=m.nextToken()),b.type){case 11:b.value==null&&i(m,13,g.lastStartLoc,0,Ir(b)),w.key=u(m,b.value||"");break;case 5:b.value==null&&i(m,13,g.lastStartLoc,0,Ir(b)),w.key=l(m,b.value||"");break;case 6:b.value==null&&i(m,13,g.lastStartLoc,0,Ir(b)),w.key=a(m,b.value||"");break;case 7:b.value==null&&i(m,13,g.lastStartLoc,0,Ir(b)),w.key=c(m,b.value||"");break;default:i(m,12,g.lastStartLoc,0);const E=m.context(),S=r(7,E.offset,E.startLoc);return S.value="",s(S,E.offset,E.startLoc),w.key=S,s(w,E.offset,E.startLoc),{nextConsumeToken:b,node:w}}return s(w,m.currentOffset(),m.currentPosition()),{node:w}}function f(m){const g=m.context(),w=g.currentType===1?m.currentOffset():g.offset,b=g.currentType===1?g.endLoc:g.startLoc,E=r(2,w,b);E.items=[];let S=null;do{const W=S||m.nextToken();switch(S=null,W.type){case 0:W.value==null&&i(m,13,g.lastStartLoc,0,Ir(W)),E.items.push(o(m,W.value||""));break;case 6:W.value==null&&i(m,13,g.lastStartLoc,0,Ir(W)),E.items.push(a(m,W.value||""));break;case 5:W.value==null&&i(m,13,g.lastStartLoc,0,Ir(W)),E.items.push(l(m,W.value||""));break;case 7:W.value==null&&i(m,13,g.lastStartLoc,0,Ir(W)),E.items.push(c(m,W.value||""));break;case 8:const U=d(m);E.items.push(U.node),S=U.nextConsumeToken||null;break}}while(g.currentType!==14&&g.currentType!==1);const k=g.currentType===1?g.lastOffset:m.currentOffset(),O=g.currentType===1?g.lastEndLoc:m.currentPosition();return s(E,k,O),E}function p(m,g,w,b){const E=m.context();let S=b.items.length===0;const k=r(1,g,w);k.cases=[],k.cases.push(b);do{const O=f(m);S||(S=O.items.length===0),k.cases.push(O)}while(E.currentType!==14);return S&&i(m,10,w,0),s(k,m.currentOffset(),m.currentPosition()),k}function y(m){const g=m.context(),{offset:w,startLoc:b}=g,E=f(m);return g.currentType===14?E:p(m,w,b,E)}function v(m){const g=y2(m,Fn({},e)),w=g.context(),b=r(0,w.offset,w.startLoc);return t&&b.loc&&(b.loc.source=m),b.body=y(g),w.currentType!==14&&i(g,13,w.lastStartLoc,0,m[w.offset]||""),s(b,g.currentOffset(),g.currentPosition()),b}return{parse:v}}function Ir(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"\u2026":t}function E2(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:s=>(n.helpers.add(s),s)}}function wx(e,t){for(let n=0;n<e.length;n++)l_(e[n],t)}function l_(e,t){switch(e.type){case 1:wx(e.cases,t),t.helper("plural");break;case 2:wx(e.items,t);break;case 6:l_(e.key,t),t.helper("linked");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function S2(e,t={}){const n=E2(e);n.helper("normalize"),e.body&&l_(e.body,n);const i=n.context();e.helpers=Array.from(i.helpers)}function T2(e,t){const{sourceMap:n,filename:i,breakLineCode:r,needIndent:s}=t,o={source:e.loc.source,filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0},a=()=>o;function l(y,v){o.code+=y}function c(y,v=!0){const m=v?r:"";l(s?m+"  ".repeat(y):m)}function h(y=!0){const v=++o.indentLevel;y&&c(v)}function u(y=!0){const v=--o.indentLevel;y&&c(v)}function d(){c(o.indentLevel)}return{context:a,push:l,indent:h,deindent:u,newline:d,helper:y=>`_${y}`,needIndent:()=>o.needIndent}}function M2(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Zl(e,t.key),t.modifier&&(e.push(", "),Zl(e,t.modifier)),e.push(")")}function A2(e,t){const{helper:n,needIndent:i}=e;e.push(`${n("normalize")}([`),e.indent(i());const r=t.items.length;for(let s=0;s<r&&(Zl(e,t.items[s]),s!==r-1);s++)e.push(", ");e.deindent(i()),e.push("])")}function C2(e,t){const{helper:n,needIndent:i}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(i());const r=t.cases.length;for(let s=0;s<r&&(Zl(e,t.cases[s]),s!==r-1);s++)e.push(", ");e.deindent(i()),e.push("])")}}function I2(e,t){t.body?Zl(e,t.body):e.push("null")}function Zl(e,t){const{helper:n}=e;switch(t.type){case 0:I2(e,t);break;case 1:C2(e,t);break;case 2:A2(e,t);break;case 6:M2(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break}}const R2=(e,t={})=>{const n=je(t.mode)?t.mode:"normal",i=je(t.filename)?t.filename:"message.intl",r=!!t.sourceMap,s=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,o=t.needIndent?t.needIndent:n!=="arrow",a=e.helpers||[],l=T2(e,{mode:n,filename:i,sourceMap:r,breakLineCode:s,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(u=>`${u}: _${u}`).join(", ")} } = ctx`),l.newline()),l.push("return "),Zl(l,e),l.deindent(o),l.push("}");const{code:c,map:h}=l.context();return{ast:e,code:c,map:h?h.toJSON():void 0}};function L2(e,t={}){const n=Fn({},t),r=x2(n).parse(e);return S2(r,n),R2(r,n)}/*!
  * @intlify/devtools-if v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const KM={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * @intlify/core-base v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */let Gu=null;function P2(e){Gu=e}function N2(e,t,n){Gu&&Gu.emit(KM.I18nInit,{timestamp:Date.now(),i18n:e,version:t,meta:n})}const k2=O2(KM.FunctionTranslate);function O2(e){return t=>Gu&&Gu.emit(e,t)}const D2="9.1.10",im=-1,xx="";function F2(){return{upper:e=>je(e)?e.toUpperCase():e,lower:e=>je(e)?e.toLowerCase():e,capitalize:e=>je(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}let XM;function B2(e){XM=e}let YM=null;const Ex=e=>{YM=e},V2=()=>YM;let Sx=0;function U2(e={}){const t=je(e.version)?e.version:D2,n=je(e.locale)?e.locale:"en-US",i=Yn(e.fallbackLocale)||Tt(e.fallbackLocale)||je(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n,r=Tt(e.messages)?e.messages:{[n]:{}},s=Tt(e.datetimeFormats)?e.datetimeFormats:{[n]:{}},o=Tt(e.numberFormats)?e.numberFormats:{[n]:{}},a=Fn({},e.modifiers||{},F2()),l=e.pluralRules||{},c=hi(e.missing)?e.missing:null,h=vn(e.missingWarn)||Hf(e.missingWarn)?e.missingWarn:!0,u=vn(e.fallbackWarn)||Hf(e.fallbackWarn)?e.fallbackWarn:!0,d=!!e.fallbackFormat,f=!!e.unresolving,p=hi(e.postTranslation)?e.postTranslation:null,y=Tt(e.processor)?e.processor:null,v=vn(e.warnHtmlMessage)?e.warnHtmlMessage:!0,m=!!e.escapeParameter,g=hi(e.messageCompiler)?e.messageCompiler:XM,w=hi(e.onWarn)?e.onWarn:jD,b=e,E=mi(b.__datetimeFormatters)?b.__datetimeFormatters:new Map,S=mi(b.__numberFormatters)?b.__numberFormatters:new Map,k=mi(b.__meta)?b.__meta:{};Sx++;const O={version:t,cid:Sx,locale:n,fallbackLocale:i,messages:r,datetimeFormats:s,numberFormats:o,modifiers:a,pluralRules:l,missing:c,missingWarn:h,fallbackWarn:u,fallbackFormat:d,unresolving:f,postTranslation:p,processor:y,warnHtmlMessage:v,escapeParameter:m,messageCompiler:g,onWarn:w,__datetimeFormatters:E,__numberFormatters:S,__meta:k};return __INTLIFY_PROD_DEVTOOLS__&&N2(O,t,k),O}function c_(e,t,n,i,r){const{missing:s,onWarn:o}=e;if(s!==null){const a=s(e,n,t,r);return je(a)?a:t}else return t}function kh(e,t,n){const i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let r=i.__localeChainCache.get(n);if(!r){r=[];let s=[n];for(;Yn(s);)s=Tx(r,s,t);const o=Yn(t)?t:Tt(t)?t.default?t.default:null:t;s=je(o)?[o]:o,Yn(s)&&Tx(r,s,!1),i.__localeChainCache.set(n,r)}return r}function Tx(e,t,n){let i=!0;for(let r=0;r<t.length&&vn(i);r++){const s=t[r];je(s)&&(i=z2(e,t[r],n))}return i}function z2(e,t,n){let i;const r=t.split("-");do{const s=r.join("-");i=H2(e,s,n),r.splice(-1,1)}while(r.length&&i===!0);return i}function H2(e,t,n){let i=!1;if(!e.includes(t)&&(i=!0,t)){i=t[t.length-1]!=="!";const r=t.replace(/!/g,"");e.push(r),(Yn(n)||Tt(n))&&n[r]&&(i=n[r])}return i}function Uc(e,t,n){const i=e;i.__localeChainCache=new Map,kh(e,n,t)}const W2=e=>e;let Mx=Object.create(null);function G2(e,t={}){{const i=(t.onCacheKey||W2)(e),r=Mx[i];if(r)return r;let s=!1;const o=t.onError||h2;t.onError=c=>{s=!0,o(c)};const{code:a}=L2(e,t),l=new Function(`return ${a}`)();return s?l:Mx[i]=l}}function Al(e){return nm(e,null,void 0)}const Ax=()=>"",Dr=e=>hi(e);function Cx(e,...t){const{fallbackFormat:n,postTranslation:i,unresolving:r,fallbackLocale:s,messages:o}=e,[a,l]=cy(...t),c=vn(l.missingWarn)?l.missingWarn:e.missingWarn,h=vn(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,u=vn(l.escapeParameter)?l.escapeParameter:e.escapeParameter,d=!!l.resolvedMessage,f=je(l.default)||vn(l.default)?vn(l.default)?a:l.default:n?a:"",p=n||f!=="",y=je(l.locale)?l.locale:e.locale;u&&$2(l);let[v,m,g]=d?[a,y,o[y]||{}]:j2(e,a,y,s,h,c),w=a;if(!d&&!(je(v)||Dr(v))&&p&&(v=f,w=v),!d&&(!(je(v)||Dr(v))||!je(m)))return r?im:a;let b=!1;const E=()=>{b=!0},S=Dr(v)?v:ZM(e,a,m,v,w,E);if(b)return v;const k=X2(e,m,g,l),O=u2(k),W=q2(e,S,O),U=i?i(W):W;if(__INTLIFY_PROD_DEVTOOLS__){const L={timestamp:Date.now(),key:je(a)?a:Dr(v)?v.key:"",locale:m||(Dr(v)?v.locale:""),format:je(v)?v:Dr(v)?v.source:"",message:U};L.meta=Fn({},e.__meta,V2()||{}),k2(L)}return U}function $2(e){Yn(e.list)?e.list=e.list.map(t=>je(t)?vx(t):t):mi(e.named)&&Object.keys(e.named).forEach(t=>{je(e.named[t])&&(e.named[t]=vx(e.named[t]))})}function j2(e,t,n,i,r,s){const{messages:o,onWarn:a}=e,l=kh(e,i,n);let c={},h,u=null;const d="translate";for(let f=0;f<l.length&&(h=l[f],c=o[h]||{},(u=Wf(c,t))===null&&(u=c[t]),!(je(u)||hi(u)));f++){const p=c_(e,t,h,s,d);p!==t&&(u=p)}return[u,h,c]}function ZM(e,t,n,i,r,s){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Dr(i)){const c=i;return c.locale=c.locale||n,c.key=c.key||t,c}const l=o(i,K2(e,n,r,i,a,s));return l.locale=n,l.key=t,l.source=i,l}function q2(e,t,n){return t(n)}function cy(...e){const[t,n,i]=e,r={};if(!je(t)&&!Dn(t)&&!Dr(t))throw Al(14);const s=Dn(t)?String(t):(Dr(t),t);return Dn(n)?r.plural=n:je(n)?r.default=n:Tt(n)&&!tm(n)?r.named=n:Yn(n)&&(r.list=n),Dn(i)?r.plural=i:je(i)?r.default=i:Tt(i)&&Fn(r,i),[s,r]}function K2(e,t,n,i,r,s){return{warnHtmlMessage:r,onError:o=>{throw s&&s(o),o},onCacheKey:o=>WD(t,n,o)}}function X2(e,t,n,i){const{modifiers:r,pluralRules:s}=e,a={locale:t,modifiers:r,pluralRules:s,messages:l=>{const c=Wf(n,l);if(je(c)){let h=!1;const d=ZM(e,l,t,c,l,()=>{h=!0});return h?Ax:d}else return Dr(c)?c:Ax}};return e.processor&&(a.processor=e.processor),i.list&&(a.list=i.list),i.named&&(a.named=i.named),Dn(i.plural)&&(a.pluralIndex=i.plural),a}function Ix(e,...t){const{datetimeFormats:n,unresolving:i,fallbackLocale:r,onWarn:s}=e,{__datetimeFormatters:o}=e,[a,l,c,h]=uy(...t),u=vn(c.missingWarn)?c.missingWarn:e.missingWarn;vn(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const d=!!c.part,f=je(c.locale)?c.locale:e.locale,p=kh(e,r,f);if(!je(a)||a==="")return new Intl.DateTimeFormat(f).format(l);let y={},v,m=null;const g="datetime format";for(let E=0;E<p.length&&(v=p[E],y=n[v]||{},m=y[a],!Tt(m));E++)c_(e,a,v,u,g);if(!Tt(m)||!je(v))return i?im:a;let w=`${v}__${a}`;tm(h)||(w=`${w}__${JSON.stringify(h)}`);let b=o.get(w);return b||(b=new Intl.DateTimeFormat(v,Fn({},m,h)),o.set(w,b)),d?b.formatToParts(l):b.format(l)}function uy(...e){const[t,n,i,r]=e;let s={},o={},a;if(je(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw Al(16);a=new Date(t);try{a.toISOString()}catch{throw Al(16)}}else if($D(t)){if(isNaN(t.getTime()))throw Al(15);a=t}else if(Dn(t))a=t;else throw Al(14);return je(n)?s.key=n:Tt(n)&&(s=n),je(i)?s.locale=i:Tt(i)&&(o=i),Tt(r)&&(o=r),[s.key||"",a,s,o]}function Rx(e,t,n){const i=e;for(const r in n){const s=`${t}__${r}`;!i.__datetimeFormatters.has(s)||i.__datetimeFormatters.delete(s)}}function Lx(e,...t){const{numberFormats:n,unresolving:i,fallbackLocale:r,onWarn:s}=e,{__numberFormatters:o}=e,[a,l,c,h]=hy(...t),u=vn(c.missingWarn)?c.missingWarn:e.missingWarn;vn(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const d=!!c.part,f=je(c.locale)?c.locale:e.locale,p=kh(e,r,f);if(!je(a)||a==="")return new Intl.NumberFormat(f).format(l);let y={},v,m=null;const g="number format";for(let E=0;E<p.length&&(v=p[E],y=n[v]||{},m=y[a],!Tt(m));E++)c_(e,a,v,u,g);if(!Tt(m)||!je(v))return i?im:a;let w=`${v}__${a}`;tm(h)||(w=`${w}__${JSON.stringify(h)}`);let b=o.get(w);return b||(b=new Intl.NumberFormat(v,Fn({},m,h)),o.set(w,b)),d?b.formatToParts(l):b.format(l)}function hy(...e){const[t,n,i,r]=e;let s={},o={};if(!Dn(t))throw Al(14);const a=t;return je(n)?s.key=n:Tt(n)&&(s=n),je(i)?s.locale=i:Tt(i)&&(o=i),Tt(r)&&(o=r),[s.key||"",a,s,o]}function Px(e,t,n){const i=e;for(const r in n){const s=`${t}__${r}`;!i.__numberFormatters.has(s)||i.__numberFormatters.delete(s)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(o_().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.1.10
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const Y2="9.1.10";function Z2(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(o_().__INTLIFY_PROD_DEVTOOLS__=!1)}function tr(e,...t){return nm(e,null,void 0)}const Cg="__INTLIFY_META__",dy=Os("__transrateVNode"),fy=Os("__datetimeParts"),py=Os("__numberParts");Os("__enableEmitter");Os("__disableEmitter");const J2=Os("__setPluralRules");Os("__intlifyMeta");const JM=Os("__injectWithOption");let Nx=0;function kx(e){return(t,n,i,r)=>e(n,i,ks()||void 0,r)}function QM(e,t){const{messages:n,__i18n:i}=t,r=Tt(n)?n:Yn(i)?{}:{[e]:{}};if(Yn(i)&&i.forEach(({locale:s,resource:o})=>{s?(r[s]=r[s]||{},Gf(o,r[s])):Gf(o,r)}),t.flatJson)for(const s in r)jM(r,s)&&ay(r[s]);return r}const _d=e=>!mi(e)||Yn(e);function Gf(e,t){if(_d(e)||_d(t))throw tr(20);for(const n in e)jM(e,n)&&(_d(e[n])||_d(t[n])?t[n]=e[n]:Gf(e[n],t[n]))}const Q2=()=>{const e=ks();return e&&e.type[Cg]?{[Cg]:e.type[Cg]}:null};function eA(e={}){const{__root:t}=e,n=t===void 0;let i=vn(e.inheritLocale)?e.inheritLocale:!0;const r=st(t&&i?t.locale.value:je(e.locale)?e.locale:"en-US"),s=st(t&&i?t.fallbackLocale.value:je(e.fallbackLocale)||Yn(e.fallbackLocale)||Tt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r.value),o=st(QM(r.value,e)),a=st(Tt(e.datetimeFormats)?e.datetimeFormats:{[r.value]:{}}),l=st(Tt(e.numberFormats)?e.numberFormats:{[r.value]:{}});let c=t?t.missingWarn:vn(e.missingWarn)||Hf(e.missingWarn)?e.missingWarn:!0,h=t?t.fallbackWarn:vn(e.fallbackWarn)||Hf(e.fallbackWarn)?e.fallbackWarn:!0,u=t?t.fallbackRoot:vn(e.fallbackRoot)?e.fallbackRoot:!0,d=!!e.fallbackFormat,f=hi(e.missing)?e.missing:null,p=hi(e.missing)?kx(e.missing):null,y=hi(e.postTranslation)?e.postTranslation:null,v=vn(e.warnHtmlMessage)?e.warnHtmlMessage:!0,m=!!e.escapeParameter;const g=t?t.modifiers:Tt(e.modifiers)?e.modifiers:{};let w=e.pluralRules||t&&t.pluralRules,b;function E(){return U2({version:Y2,locale:r.value,fallbackLocale:s.value,messages:o.value,datetimeFormats:a.value,numberFormats:l.value,modifiers:g,pluralRules:w,missing:p===null?void 0:p,missingWarn:c,fallbackWarn:h,fallbackFormat:d,unresolving:!0,postTranslation:y===null?void 0:y,warnHtmlMessage:v,escapeParameter:m,__datetimeFormatters:Tt(b)?b.__datetimeFormatters:void 0,__numberFormatters:Tt(b)?b.__numberFormatters:void 0,__v_emitter:Tt(b)?b.__v_emitter:void 0,__meta:{framework:"vue"}})}b=E(),Uc(b,r.value,s.value);function S(){return[r.value,s.value,o.value,a.value,l.value]}const k=Qe({get:()=>r.value,set:I=>{r.value=I,b.locale=r.value}}),O=Qe({get:()=>s.value,set:I=>{s.value=I,b.fallbackLocale=s.value,Uc(b,r.value,I)}}),W=Qe(()=>o.value),U=Qe(()=>a.value),L=Qe(()=>l.value);function D(){return hi(y)?y:null}function V(I){y=I,b.postTranslation=I}function ee(){return f}function K(I){I!==null&&(p=kx(I)),f=I,b.missing=p}function Z(I,z,de,pe,fe,ve){S();let ye;if(__INTLIFY_PROD_DEVTOOLS__)try{Ex(Q2()),ye=I(b)}finally{Ex(null)}else ye=I(b);if(Dn(ye)&&ye===im){const[Ne,Ae]=z();return t&&u?pe(t):fe(Ne)}else{if(ve(ye))return ye;throw tr(14)}}function H(...I){return Z(z=>Cx(z,...I),()=>cy(...I),"translate",z=>z.t(...I),z=>z,z=>je(z))}function B(...I){const[z,de,pe]=I;if(pe&&!mi(pe))throw tr(15);return H(z,de,Fn({resolvedMessage:!0},pe||{}))}function te(...I){return Z(z=>Ix(z,...I),()=>uy(...I),"datetime format",z=>z.d(...I),()=>xx,z=>je(z))}function ae(...I){return Z(z=>Lx(z,...I),()=>hy(...I),"number format",z=>z.n(...I),()=>xx,z=>je(z))}function G(I){return I.map(z=>je(z)?tt(Vu,null,z,0):z)}const X={normalize:G,interpolate:I=>I,type:"vnode"};function J(...I){return Z(z=>{let de;const pe=z;try{pe.processor=X,de=Cx(pe,...I)}finally{pe.processor=null}return de},()=>cy(...I),"translate",z=>z[dy](...I),z=>[tt(Vu,null,z,0)],z=>Yn(z))}function T(...I){return Z(z=>Lx(z,...I),()=>hy(...I),"number format",z=>z[py](...I),()=>[],z=>je(z)||Yn(z))}function ne(...I){return Z(z=>Ix(z,...I),()=>uy(...I),"datetime format",z=>z[fy](...I),()=>[],z=>je(z)||Yn(z))}function Q(I){w=I,b.pluralRules=w}function oe(I,z){const de=je(z)?z:r.value,pe=A(de);return Wf(pe,I)!==null}function ie(I){let z=null;const de=kh(b,s.value,r.value);for(let pe=0;pe<de.length;pe++){const fe=o.value[de[pe]]||{},ve=Wf(fe,I);if(ve!=null){z=ve;break}}return z}function $(I){const z=ie(I);return z!=null?z:t?t.tm(I)||{}:{}}function A(I){return o.value[I]||{}}function P(I,z){o.value[I]=z,b.messages=o.value}function x(I,z){o.value[I]=o.value[I]||{},Gf(z,o.value[I]),b.messages=o.value}function M(I){return a.value[I]||{}}function N(I,z){a.value[I]=z,b.datetimeFormats=a.value,Rx(b,I,z)}function F(I,z){a.value[I]=Fn(a.value[I]||{},z),b.datetimeFormats=a.value,Rx(b,I,z)}function R(I){return l.value[I]||{}}function C(I,z){l.value[I]=z,b.numberFormats=l.value,Px(b,I,z)}function ce(I,z){l.value[I]=Fn(l.value[I]||{},z),b.numberFormats=l.value,Px(b,I,z)}return Nx++,t&&(dn(t.locale,I=>{i&&(r.value=I,b.locale=I,Uc(b,r.value,s.value))}),dn(t.fallbackLocale,I=>{i&&(s.value=I,b.fallbackLocale=I,Uc(b,r.value,s.value))})),{id:Nx,locale:k,fallbackLocale:O,get inheritLocale(){return i},set inheritLocale(I){i=I,I&&t&&(r.value=t.locale.value,s.value=t.fallbackLocale.value,Uc(b,r.value,s.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:W,datetimeFormats:U,numberFormats:L,get modifiers(){return g},get pluralRules(){return w||{}},get isGlobal(){return n},get missingWarn(){return c},set missingWarn(I){c=I,b.missingWarn=c},get fallbackWarn(){return h},set fallbackWarn(I){h=I,b.fallbackWarn=h},get fallbackRoot(){return u},set fallbackRoot(I){u=I},get fallbackFormat(){return d},set fallbackFormat(I){d=I,b.fallbackFormat=d},get warnHtmlMessage(){return v},set warnHtmlMessage(I){v=I,b.warnHtmlMessage=I},get escapeParameter(){return m},set escapeParameter(I){m=I,b.escapeParameter=I},t:H,rt:B,d:te,n:ae,te:oe,tm:$,getLocaleMessage:A,setLocaleMessage:P,mergeLocaleMessage:x,getDateTimeFormat:M,setDateTimeFormat:N,mergeDateTimeFormat:F,getNumberFormat:R,setNumberFormat:C,mergeNumberFormat:ce,getPostTranslationHandler:D,setPostTranslationHandler:V,getMissingHandler:ee,setMissingHandler:K,[dy]:J,[py]:T,[fy]:ne,[J2]:Q,[JM]:e.__injectWithOption}}const u_={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}},Ox={name:"i18n-t",props:Fn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Dn(e)||!isNaN(e)}},u_),setup(e,t){const{slots:n,attrs:i}=t,r=e.i18n||Oh({useScope:e.scope,__useComponent:!0}),s=Object.keys(n).filter(o=>o!=="_");return()=>{const o={};e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=je(e.plural)?+e.plural:e.plural);const a=eF(t,s),l=r[dy](e.keypath,a,o),c=Fn({},i);return je(e.tag)||mi(e.tag)?Qn(e.tag,c,l):Qn(It,c,l)}}};function eF({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((n,i)=>{const r=e[i];return r&&(n[i]=r()),n},{})}function tA(e,t,n,i){const{slots:r,attrs:s}=t;return()=>{const o={part:!0};let a={};e.locale&&(o.locale=e.locale),je(e.format)?o.key=e.format:mi(e.format)&&(je(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((u,d)=>n.includes(d)?Fn({},u,{[d]:e.format[d]}):u,{}));const l=i(e.value,o,a);let c=[o.key];Yn(l)?c=l.map((u,d)=>{const f=r[u.type];return f?f({[u.type]:u.value,index:d,parts:l}):[u.value]}):je(l)&&(c=[l]);const h=Fn({},s);return je(e.tag)||mi(e.tag)?Qn(e.tag,h,c):Qn(It,h,c)}}const tF=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],Dx={name:"i18n-n",props:Fn({value:{type:Number,required:!0},format:{type:[String,Object]}},u_),setup(e,t){const n=e.i18n||Oh({useScope:"parent",__useComponent:!0});return tA(e,t,tF,(...i)=>n[py](...i))}},nF=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],Fx={name:"i18n-d",props:Fn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},u_),setup(e,t){const n=e.i18n||Oh({useScope:"parent",__useComponent:!0});return tA(e,t,nF,(...i)=>n[fy](...i))}};function iF(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const i=n.__getInstance(t);return i!=null?i.__composer:e.global.__composer}}function rF(e){const t=(n,{instance:i,value:r,modifiers:s})=>{if(!i||!i.$)throw tr(22);const o=iF(e,i.$),a=sF(r);n.textContent=o.t(...oF(a))};return{beforeMount:t,beforeUpdate:t}}function sF(e){if(je(e))return{path:e};if(Tt(e)){if(!("path"in e))throw tr(19,"path");return e}else throw tr(20)}function oF(e){const{path:t,locale:n,args:i,choice:r,plural:s}=e,o={},a=i||{};return je(n)&&(o.locale=n),Dn(r)&&(o.plural=r),Dn(s)&&(o.plural=s),[t,a,o]}function aF(e,t,...n){const i=Tt(n[0])?n[0]:{},r=!!i.useI18nComponentName;(vn(i.globalInstall)?i.globalInstall:!0)&&(e.component(r?"i18n":Ox.name,Ox),e.component(Dx.name,Dx),e.component(Fx.name,Fx)),e.directive("t",rF(t))}function lF(e={}){const t=!!e.globalInjection,n=new Map,i=eA(e),r=Os(""),s={get mode(){return"composition"},async install(o,...a){o.__VUE_I18N_SYMBOL__=r,o.provide(o.__VUE_I18N_SYMBOL__,s),t&&fF(o,s.global),aF(o,s,...a)},get global(){return i},__instances:n,__getInstance(o){return n.get(o)||null},__setInstance(o,a){n.set(o,a)},__deleteInstance(o){n.delete(o)}};return s}function Oh(e={}){const t=ks();if(t==null)throw tr(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw tr(17);const n=Jn(t.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw tr(22);const i=n.mode==="composition"?n.global:n.global.__composer,r=tm(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(r==="global"){let a=mi(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(a=QM(i.locale.value,{messages:a,__i18n:t.type.__i18nGlobal}));const l=Object.keys(a);if(l.length&&l.forEach(c=>{i.mergeLocaleMessage(c,a[c])}),mi(e.datetimeFormats)){const c=Object.keys(e.datetimeFormats);c.length&&c.forEach(h=>{i.mergeDateTimeFormat(h,e.datetimeFormats[h])})}if(mi(e.numberFormats)){const c=Object.keys(e.numberFormats);c.length&&c.forEach(h=>{i.mergeNumberFormat(h,e.numberFormats[h])})}return i}if(r==="parent"){let a=cF(n,t,e.__useComponent);return a==null&&(a=i),a}if(n.mode==="legacy")throw tr(18);const s=n;let o=s.__getInstance(t);if(o==null){const a=t.type,l=Fn({},e);a.__i18n&&(l.__i18n=a.__i18n),i&&(l.__root=i),o=eA(l),uF(s,t),s.__setInstance(t,o)}return o}function cF(e,t,n=!1){let i=null;const r=t.root;let s=t.parent;for(;s!=null;){const o=e;if(e.mode==="composition")i=o.__getInstance(s);else{const a=o.__getInstance(s);a!=null&&(i=a.__composer),n&&i&&!i[JM]&&(i=null)}if(i!=null||r===s)break;s=s.parent}return i}function uF(e,t,n){Tr(()=>{},t),Xp(()=>{e.__deleteInstance(t)},t)}const hF=["locale","fallbackLocale","availableLocales"],dF=["t","rt","d","n","tm"];function fF(e,t){const n=Object.create(null);hF.forEach(i=>{const r=Object.getOwnPropertyDescriptor(t,i);if(!r)throw tr(22);const s=tn(r.value)?{get(){return r.value.value},set(o){r.value.value=o}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,i,s)}),e.config.globalProperties.$i18n=n,dF.forEach(i=>{const r=Object.getOwnPropertyDescriptor(t,i);if(!r||!r.value)throw tr(22);Object.defineProperty(e.config.globalProperties,`$${i}`,r)})}B2(G2);Z2();if(__INTLIFY_PROD_DEVTOOLS__){const e=o_();e.__INTLIFY__=!0,P2(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}/**
 * vue-meta v3.0.0-alpha.10
 * (c) 2022
 * - Pim (@pimlie)
 * - All the amazing contributors
 * @license MIT
 */const pF=(e,t)=>(n,i)=>{let r=-1;if(i.reduce((s,o,a)=>{const l=e(s,o);return l!==s?(r=a,l):s},t),r>-1)return n[r]},mF=e=>{let t=0;if(e.vm){let{vm:n}=e;do n.parent&&(t++,n=n.parent);while(n&&n.parent&&n!==n.root)}e.depth=t},gF=pF((e,t)=>{const{depth:n}=t;return!e||n>e?n:e});var vF=Object.freeze({__proto__:null,setup:mF,resolve:gF});const yF={body:{tag:"script",to:"body"},base:{valueAttribute:"href"},charset:{tag:"meta",nameless:!0,valueAttribute:"charset"},description:{tag:"meta"},og:{group:!0,namespacedAttribute:!0,tag:"meta",keyAttribute:"property"},twitter:{group:!0,namespacedAttribute:!0,tag:"meta"},htmlAttrs:{attributesFor:"html"},headAttrs:{attributesFor:"head"},bodyAttrs:{attributesFor:"body"}},_F={title:{attributes:!1},base:{contentAsAttribute:!0,attributes:["href","target"]},meta:{contentAsAttribute:!0,keyAttribute:"name",attributes:["content","name","http-equiv","charset"]},link:{contentAsAttribute:!0,attributes:["href","crossorigin","rel","media","integrity","hreflang","type","referrerpolicy","sizes","imagesrcset","imagesizes","as","color"]},style:{attributes:["media"]},script:{attributes:["src","type","nomodule","async","defer","crossorigin","integrity","referrerpolicy"]},noscript:{attributes:!1}};function bF(e,t){for(const n of e){const i=_F[n];if(n&&i)return i[t]}}Object.freeze({});Object.freeze([]);const rr=Array.isArray,vf=e=>typeof e=="function",Bx=e=>typeof e=="string",rm=e=>e!==null&&typeof e=="object",wF=Object.prototype.toString,xF=e=>wF.call(e),_u=e=>xF(e)==="[object Object]",Vx=Symbol("kIsProxy"),EF=Symbol("kProxySources"),nA=Symbol("kProxyTarget"),xl=Symbol("kResolveContext");function $u(e){if(rr(e))return e.map($u);if(rm(e)){const t={};for(const n in e)n==="context"?t[n]=e[n]:t[n]=$u(e[n]);return t}return e}const yf=(e,t,n)=>{const i=[];for(const r of e)r&&t in r&&(i.push(r[t]),n&&n(r));return i},SF=(e,...t)=>{const n=e?Object.keys(e):[];if(t){for(const i of t)if(!(!i||!rm(i)))for(const r in i)n.includes(r)||n.push(r)}return n},$f=(e,t=[],n,i)=>{if(!n&&!i&&({active:n,sources:i}=e,t.length))for(let a=0;a<t.length;a++){const l=t[a];if(!n||!n[l]){console.error(`recompute: segment ${l} not found on target`,t,n);return}n=n[l],i=i.map(c=>c[l]).filter(Boolean)}if(!n||!i)return;const s=SF(...i),o=Object.keys(n);for(const a of o)s.includes(a)||delete n[a];for(const a of s){let l=!1;for(let d=0;d<i.length;d++){const f=i[d];if(f&&a in f&&f[a]!==void 0){l=_u(f[a]);break}}if(l){n[a]||(n[a]={});const d=[];for(const f of i)a in f&&d.push(f[a]);$f(e,[...t,a],n[a],d);continue}!n[a]&&rr(i[0][a])&&(n[a]=[]);const c=[],h=yf(i,a,d=>c.push(d[xl]));let u=e.resolve(h,c,n[a],a,t);_u(u)&&(u=$u(u)),n[a]=u}},iA=(e,t,n,i=[])=>{const r=TF(e,n,i),s=ca(new Proxy(t,r));return!i.length&&e.sources&&e.sources.push(s),s},TF=(e,t,n=[])=>({get:(i,r,s)=>{if(r===Vx)return!0;if(r===EF)return e.sources;if(r===nA)return i;if(r===xl)return t;let o=Reflect.get(i,r,s);if(!rm(o))return o;if(!o[Vx]){const a=[...n,r];o=iA(e,o,t,a),Reflect.set(i,r,o)}return o},set:(i,r,s)=>{const o=Reflect.set(i,r,s);if(o){const a=rr(i);let l=!1,{sources:c,active:h}=e,u,d=0;for(const v of n){if(c=yf(c,v),a&&d===n.length-1){u=v;break}rr(h)&&(l=!0),h=h[v],d++}if(l)return $f(e),o;if(_u(s))return $f(e,n),o;let f=[],p;a?(p=c,f=c.map(v=>v[xl])):p=yf(c,r,v=>f.push(v[xl]));let y=e.resolve(p,f,h,r,n);_u(y)&&(y=$u(y)),a&&u?h[u]=y:h[r]=y}return o},deleteProperty:(i,r)=>{const s=Reflect.deleteProperty(i,r);if(s){const o=rr(i);let a,l=e.sources,c=e.active,h=0;for(const u of n){if(l=l.map(d=>d&&d[u]),o&&h===n.length-1){a=u;break}c=c[u],h++}if(l.some(u=>u&&r in u)){let u=[],d;o?(d=l,u=l.map(p=>p[xl])):d=yf(l,r,p=>u.push(p[xl]));let f=e.resolve(d,u,c,r,n);_u(f)&&(f=$u(f)),o&&a?c[a]=f:c[r]=f}else delete c[r]}return s}}),MF=(e,t)=>{const n=[],i={active:t,resolve:e,sources:n},r=()=>$f(i);return{context:i,compute:r,addSource:(s,o,a=!1)=>{const l=iA(i,s,o||{});return a&&r(),l},delSource:(s,o=!0)=>{const a=n.findIndex(l=>l===s||l[nA]===s);return a>-1?(n.splice(a,1),o&&r(),!0):!1}}},Ig={};function AF(e,t,n,i){return"attributesFor"in i?IF(e,t,n,i):"group"in i?CF(e,t,n,i):jf(e,t,n,i)}function CF(e,t,n,i){return rr(n)?(console.warn("Specifying an array for group properties isnt supported"),[]):Object.keys(n).map(r=>{const s={group:t,data:n};if(i.namespaced)s.tagNamespace=i.namespaced===!0?t:i.namespaced;else if(i.namespacedAttribute){const o=i.namespacedAttribute===!0?t:i.namespacedAttribute;s.fullName=`${o}:${r}`,s.slotName=`${o}(${r})`}return jf(e,t,n[r],i,s)}).filter(Boolean).flat()}function jf(e,t,n,i={},r){const s=["content","json","rawContent"],o=v=>bF([a,i.tag],v);if(rr(n))return n.map(v=>jf(e,t,v,i,r)).filter(Boolean).flat();const{tag:a=i.tag||t}=n;let l="",c=!1,h=!1;if(Bx(n))l=n;else if(n.children&&rr(n.children))c=!0,l=n.children.map(v=>{const m=jf(e,t,v,i,r);return rr(m)?m.map(({vnode:g})=>g):m&&m.vnode});else{let v=0;for(const m of s){if(!l&&n[m]){v===1?l=JSON.stringify(n[m]):l=n[m],h=v>1;break}v++}}const u=r&&r.fullName||t,d=r&&r.slotName||t;let{attrs:f}=n;if(!f&&typeof n=="object"){f=sn({},n),delete f.tag,delete f.children,delete f.to;for(const v of s)delete f[v]}else f||(f={});if(c)l=_f(e,d,l,n);else{const v=!!o("contentAsAttribute");let{valueAttribute:m}=i;if(!m&&v){const[g]=o("attributes");m=Bx(v)?v:g}if(!m)l=_f(e,d,l,n);else{const{nameless:g}=i;if(!g){const w=i.keyAttribute||o("keyAttribute");w&&(f[w]=u)}f[m]=_f(e,d,f[m]||l,r),l=""}}const p=r&&r.tagNamespace?`${r.tagNamespace}:${a}`:a;if(p==="title"&&!e.isSSR){document.title=l;return}h&&l&&(f.innerHTML=l);const y=Qn(p,f,l||void 0);return{to:n.to,vnode:y}}function IF(e,t,n,i){const{attributesFor:r}=i;if(!r||!n)return;if(e.isSSR)return{to:"",vnode:Qn(`ssr-${r}`,n)};if(!Ig[r]){const[l,c]=Array.from(document.querySelectorAll(r));if(!l){console.error("Could not find element for selector",r,", won't render attributes");return}c&&console.warn("Found multiple elements for selector",r),Ig[r]={el:l,attrs:[]}}const{el:s,attrs:o}=Ig[r];for(const l in n){let c=_f(e,`${t}(${l})`,n[l],n);rr(c)&&(c=c.join(",")),s.setAttribute(l,c||""),o.includes(l)||o.push(l)}const a=o.filter(l=>!n[l]);for(const l of a)s.removeAttribute(l)}function _f({metainfo:e,slots:t},n,i,r){const s=t&&t[n];if(!s||!vf(s))return i;const o={content:i,metainfo:e};if(r&&r.group){const{group:l,data:c}=r;o[l]=c}const a=s(o);if(a&&a.length){const{children:l}=a[0];return l?l.toString():""}return i}const RF=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",LF=e=>RF?Symbol("[vue-meta]: "+e):"[vue-meta]: "+e,PF=LF("meta_active");function rA(e,t,n){for(const i in t){if(!(i in n)){e[i]=t[i];continue}if(rm(e[i])){rA(e[i],t[i],n[i]);continue}t[i]!==n[i]&&(e[i]=t[i])}for(const i in n)(!t||!(i in t))&&delete e[i]}function sA(e){if(e||(e=ks()||void 0),!!e)return e.appContext.config.globalProperties.$metaManager}function NF(e,t){const n=ks()||void 0;if(!t&&n&&(t=sA(n)),!t)throw new Error("No manager or current instance");j0(e)&&(dn(e,(r,s)=>{rA(i.meta,r,s)}),e=e.value);const i=t.addMeta(e,n);return i}const kF=Ao({name:"Metainfo",inheritAttrs:!1,setup(e,{slots:t}){return()=>{const n=sA();if(!!n)return n.render({slots:t})}}}),OF=kF,oA="data-vm-ssr";function Ux(e,t,n,i){const r=rr(i)?i:[i];e?n.endsWith("Attrs")||r.forEach(s=>{s.props||(s.props={}),s.props[oA]=!0}):r.forEach((s,o)=>{s.type===Vi&&r.splice(o,1)}),t[n]||(t[n]=[]),t[n].push(...r)}const DF=(e=!1,t,n)=>bf.create(e,t||yF,n||vF),yw=class{constructor(t,n,i,r){Bo(this,"isSSR",!1);Bo(this,"config");Bo(this,"target");Bo(this,"resolver");Bo(this,"ssrCleanedUp",!1);this.isSSR=t,this.config=n,this.target=i,r&&"setup"in r&&vf(r.setup)&&(this.resolver=r)}install(t){t.component("Metainfo",OF),t.config.globalProperties.$metaManager=this,t.provide(PF,this.target.context.active)}addMeta(t,n){n||(n=ks()||void 0);const i={removed:[]},r={vm:n},{resolver:s}=this;s&&s.setup&&s.setup(r);const o=this.target.addSource(t,r,!0),a=c=>i.removed.push(c),l=c=>this.unmount(!!c,o,i,n);return n&&Xp(l),{meta:o,onRemoved:a,unmount:l}}unmount(t,n,i,r){if(r){const{$el:s}=r.proxy;if(s&&s.offsetParent){let o=new MutationObserver(a=>{for(const{removedNodes:l}of a)!l||l.forEach(c=>{c===s&&o&&(o.disconnect(),o=void 0,this.reallyUnmount(t,n,i))})});o.observe(s.parentNode,{childList:!0});return}}this.reallyUnmount(t,n,i)}async reallyUnmount(t,n,i){this.target.delSource(n),!t&&i&&await Promise.all(i.removed.map(r=>r()))}render({slots:t}={}){const n=this.target.context.active,{isSSR:i}=this;if(!i&&!this.ssrCleanedUp){this.ssrCleanedUp=!0;const s=()=>{const o=document.querySelectorAll(`[${oA}]`);o&&o.length&&o.forEach(a=>a.parentNode&&a.parentNode.removeChild(a))};document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s,{once:!0}):s()}const r={};for(const s in n){const o=this.config[s]||{};let a=AF({isSSR:i,metainfo:n,slots:t},s,n[s],o);if(!a)continue;rr(a)||(a=[a]);let l=s!=="base"&&n[s].to;!l&&"to"in o&&(l=o.to),!l&&"attributesFor"in o&&(l=s);for(const{to:c,vnode:h}of a)Ux(this.isSSR,r,c||l||"head",h)}if(t)for(const s in t){const o=s==="default"?"head":s;if(o!=="head"&&o!=="body")continue;const a=t[s];vf(a)&&Ux(this.isSSR,r,o,a({metainfo:n}))}return Object.keys(r).map(s=>{const o=r[s];return Qn(Yp,{to:s},o)})}};let bf=yw;Bo(bf,"create",(t,n,i)=>{const r=(l,c,h,u,d)=>vf(i)?i(l,c,h,u,d):i.resolve(l,c,h,u,d),s=ur({}),o=MF(r,s);return new yw(t,n,o,i)});/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var aA="store";function Xi(e){return e===void 0&&(e=null),Jn(e!==null?e:aA)}function wc(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function FF(e){return e!==null&&typeof e=="object"}function BF(e){return e&&typeof e.then=="function"}function VF(e,t){return function(){return e(t)}}function lA(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function cA(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;sm(e,n,[],e._modules.root,!0),h_(e,n,t)}function h_(e,t,n){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={};wc(r,function(o,a){s[a]=VF(o,e),Object.defineProperty(e.getters,a,{get:function(){return s[a]()},enumerable:!0})}),e._state=ur({data:t}),e.strict&&GF(e),i&&n&&e._withCommit(function(){i.data=null})}function sm(e,t,n,i,r){var s=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!s&&!r){var a=d_(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){a[l]=i.state})}var c=i.context=UF(e,o,n);i.forEachMutation(function(h,u){var d=o+u;zF(e,d,h,c)}),i.forEachAction(function(h,u){var d=h.root?u:o+u,f=h.handler||h;HF(e,d,f,c)}),i.forEachGetter(function(h,u){var d=o+u;WF(e,d,h,c)}),i.forEachChild(function(h,u){sm(e,t,n.concat(u),h,r)})}function UF(e,t,n){var i=t==="",r={dispatch:i?e.dispatch:function(s,o,a){var l=qf(s,o,a),c=l.payload,h=l.options,u=l.type;return(!h||!h.root)&&(u=t+u),e.dispatch(u,c)},commit:i?e.commit:function(s,o,a){var l=qf(s,o,a),c=l.payload,h=l.options,u=l.type;(!h||!h.root)&&(u=t+u),e.commit(u,c,h)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return uA(e,t)}},state:{get:function(){return d_(e.state,n)}}}),r}function uA(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach(function(r){if(r.slice(0,i)===t){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return e.getters[r]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function zF(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push(function(o){n.call(e,i.state,o)})}function HF(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push(function(o){var a=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},o);return BF(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function WF(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(i.state,i.getters,s.state,s.getters)})}function GF(e){dn(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function d_(e,t){return t.reduce(function(n,i){return n[i]},e)}function qf(e,t,n){return FF(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var $F="vuex bindings",zx="vuex:mutations",Rg="vuex:actions",Qa="vuex",jF=0;function qF(e,t){FO({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[$F]},function(n){n.addTimelineLayer({id:zx,label:"Vuex Mutations",color:Hx}),n.addTimelineLayer({id:Rg,label:"Vuex Actions",color:Hx}),n.addInspector({id:Qa,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===e&&i.inspectorId===Qa)if(i.filter){var r=[];pA(r,t._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[fA(t._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===e&&i.inspectorId===Qa){var r=i.nodeId;uA(t,r),i.state=YF(JF(t._modules,r),r==="root"?t.getters:t._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===e&&i.inspectorId===Qa){var r=i.nodeId,s=i.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),t._withCommit(function(){i.set(t._state.data,s,i.state.value)})}}),t.subscribe(function(i,r){var s={};i.payload&&(s.payload=i.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(Qa),n.sendInspectorState(Qa),n.addTimelineEvent({layerId:zx,event:{time:Date.now(),title:i.type,data:s}})}),t.subscribeAction({before:function(i,r){var s={};i.payload&&(s.payload=i.payload),i._id=jF++,i._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:Rg,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,r){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=r,n.addTimelineEvent({layerId:Rg,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var Hx=8702998,KF=6710886,XF=16777215,hA={label:"namespaced",textColor:XF,backgroundColor:KF};function dA(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function fA(e,t){return{id:t||"root",label:dA(t),tags:e.namespaced?[hA]:[],children:Object.keys(e._children).map(function(n){return fA(e._children[n],t+n+"/")})}}function pA(e,t,n,i){i.includes(n)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[hA]:[]}),Object.keys(t._children).forEach(function(r){pA(e,t._children[r],n,i+r+"/")})}function YF(e,t,n){t=n==="root"?t:t[n];var i=Object.keys(t),r={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(i.length){var s=ZF(t);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?dA(o):o,editable:!1,value:my(function(){return s[o]})}})}return r}function ZF(e){var t={};return Object.keys(e).forEach(function(n){var i=n.split("/");if(i.length>1){var r=t,s=i.pop();i.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=my(function(){return e[n]})}else t[n]=my(function(){return e[n]})}),t}function JF(e,t){var n=t.split("/").filter(function(i){return i});return n.reduce(function(i,r,s){var o=i[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+t+'".');return s===n.length-1?o:o._children},t==="root"?e:e.root._children)}function my(e){try{return e()}catch(t){return t}}var Mr=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},mA={namespaced:{configurable:!0}};mA.namespaced.get=function(){return!!this._rawModule.namespaced};Mr.prototype.addChild=function(t,n){this._children[t]=n};Mr.prototype.removeChild=function(t){delete this._children[t]};Mr.prototype.getChild=function(t){return this._children[t]};Mr.prototype.hasChild=function(t){return t in this._children};Mr.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Mr.prototype.forEachChild=function(t){wc(this._children,t)};Mr.prototype.forEachGetter=function(t){this._rawModule.getters&&wc(this._rawModule.getters,t)};Mr.prototype.forEachAction=function(t){this._rawModule.actions&&wc(this._rawModule.actions,t)};Mr.prototype.forEachMutation=function(t){this._rawModule.mutations&&wc(this._rawModule.mutations,t)};Object.defineProperties(Mr.prototype,mA);var za=function(t){this.register([],t,!1)};za.prototype.get=function(t){return t.reduce(function(n,i){return n.getChild(i)},this.root)};za.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};za.prototype.update=function(t){gA([],this.root,t)};za.prototype.register=function(t,n,i){var r=this;i===void 0&&(i=!0);var s=new Mr(n,i);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}n.modules&&wc(n.modules,function(a,l){r.register(t.concat(l),a,i)})};za.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1],r=n.getChild(i);!r||!r.runtime||n.removeChild(i)};za.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),i=t[t.length-1];return n?n.hasChild(i):!1};function gA(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return;gA(e.concat(i),t.getChild(i),n.modules[i])}}function QF(e){return new Ci(e)}var Ci=function(t){var n=this;t===void 0&&(t={});var i=t.plugins;i===void 0&&(i=[]);var r=t.strict;r===void 0&&(r=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new za(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(d,f){return l.call(o,d,f)},this.commit=function(d,f,p){return c.call(o,d,f,p)},this.strict=r;var h=this._modules.root.state;sm(this,h,[],this._modules.root),h_(this,h),i.forEach(function(u){return u(n)})},f_={state:{configurable:!0}};Ci.prototype.install=function(t,n){t.provide(n||aA,this),t.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&qF(t,this)};f_.state.get=function(){return this._state.data};f_.state.set=function(e){};Ci.prototype.commit=function(t,n,i){var r=this,s=qf(t,n,i),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];!c||(this._withCommit(function(){c.forEach(function(u){u(a)})}),this._subscribers.slice().forEach(function(h){return h(l,r.state)}))};Ci.prototype.dispatch=function(t,n){var i=this,r=qf(t,n),s=r.type,o=r.payload,a={type:s,payload:o},l=this._actions[s];if(!!l){try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,i.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(h){return h(o)})):l[0](o);return new Promise(function(h,u){c.then(function(d){try{i._actionSubscribers.filter(function(f){return f.after}).forEach(function(f){return f.after(a,i.state)})}catch{}h(d)},function(d){try{i._actionSubscribers.filter(function(f){return f.error}).forEach(function(f){return f.error(a,i.state,d)})}catch{}u(d)})})}};Ci.prototype.subscribe=function(t,n){return lA(t,this._subscribers,n)};Ci.prototype.subscribeAction=function(t,n){var i=typeof t=="function"?{before:t}:t;return lA(i,this._actionSubscribers,n)};Ci.prototype.watch=function(t,n,i){var r=this;return dn(function(){return t(r.state,r.getters)},n,Object.assign({},i))};Ci.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};Ci.prototype.registerModule=function(t,n,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),sm(this,this.state,t,this._modules.get(t),i.preserveState),h_(this,this.state)};Ci.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var i=d_(n.state,t.slice(0,-1));delete i[t[t.length-1]]}),cA(this)};Ci.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};Ci.prototype.hotUpdate=function(t){this._modules.update(t),cA(this,!0)};Ci.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(Ci.prototype,f_);var e3=typeof global=="object"&&global&&global.Object===Object&&global,t3=e3,n3=typeof self=="object"&&self&&self.Object===Object&&self,i3=t3||n3||Function("return this")(),om=i3,r3=om.Symbol,_o=r3,vA=Object.prototype,s3=vA.hasOwnProperty,o3=vA.toString,zc=_o?_o.toStringTag:void 0;function a3(e){var t=s3.call(e,zc),n=e[zc];try{e[zc]=void 0;var i=!0}catch{}var r=o3.call(e);return i&&(t?e[zc]=n:delete e[zc]),r}var l3=Object.prototype,c3=l3.toString;function u3(e){return c3.call(e)}var h3="[object Null]",d3="[object Undefined]",Wx=_o?_o.toStringTag:void 0;function p_(e){return e==null?e===void 0?d3:h3:Wx&&Wx in Object(e)?a3(e):u3(e)}function m_(e){return e!=null&&typeof e=="object"}var f3="[object Symbol]";function am(e){return typeof e=="symbol"||m_(e)&&p_(e)==f3}function p3(e,t){for(var n=-1,i=e==null?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}var m3=Array.isArray,Dh=m3,g3=1/0,Gx=_o?_o.prototype:void 0,$x=Gx?Gx.toString:void 0;function yA(e){if(typeof e=="string")return e;if(Dh(e))return p3(e,yA)+"";if(am(e))return $x?$x.call(e):"";var t=e+"";return t=="0"&&1/e==-g3?"-0":t}var v3=/\s/;function y3(e){for(var t=e.length;t--&&v3.test(e.charAt(t)););return t}var _3=/^\s+/;function b3(e){return e&&e.slice(0,y3(e)+1).replace(_3,"")}function pa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var jx=0/0,w3=/^[-+]0x[0-9a-f]+$/i,x3=/^0b[01]+$/i,E3=/^0o[0-7]+$/i,S3=parseInt;function qx(e){if(typeof e=="number")return e;if(am(e))return jx;if(pa(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pa(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=b3(e);var n=x3.test(e);return n||E3.test(e)?S3(e.slice(2),n?2:8):w3.test(e)?jx:+e}function _A(e){return e}var T3="[object AsyncFunction]",M3="[object Function]",A3="[object GeneratorFunction]",C3="[object Proxy]";function I3(e){if(!pa(e))return!1;var t=p_(e);return t==M3||t==A3||t==T3||t==C3}var R3=om["__core-js_shared__"],Lg=R3,Kx=function(){var e=/[^.]+$/.exec(Lg&&Lg.keys&&Lg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function L3(e){return!!Kx&&Kx in e}var P3=Function.prototype,N3=P3.toString;function k3(e){if(e!=null){try{return N3.call(e)}catch{}try{return e+""}catch{}}return""}var O3=/[\\^$.*+?()[\]{}|]/g,D3=/^\[object .+?Constructor\]$/,F3=Function.prototype,B3=Object.prototype,V3=F3.toString,U3=B3.hasOwnProperty,z3=RegExp("^"+V3.call(U3).replace(O3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function H3(e){if(!pa(e)||L3(e))return!1;var t=I3(e)?z3:D3;return t.test(k3(e))}function W3(e,t){return e==null?void 0:e[t]}function g_(e,t){var n=W3(e,t);return H3(n)?n:void 0}function G3(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var $3=800,j3=16,q3=Date.now;function K3(e){var t=0,n=0;return function(){var i=q3(),r=j3-(i-n);if(n=i,r>0){if(++t>=$3)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function X3(e){return function(){return e}}var Y3=function(){try{var e=g_(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Kf=Y3,Z3=Kf?function(e,t){return Kf(e,"toString",{configurable:!0,enumerable:!1,value:X3(t),writable:!0})}:_A,J3=Z3,Q3=K3(J3),eB=Q3,tB=9007199254740991,nB=/^(?:0|[1-9]\d*)$/;function bA(e,t){var n=typeof e;return t=t==null?tB:t,!!t&&(n=="number"||n!="symbol"&&nB.test(e))&&e>-1&&e%1==0&&e<t}function iB(e,t,n){t=="__proto__"&&Kf?Kf(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function wA(e,t){return e===t||e!==e&&t!==t}var rB=Object.prototype,sB=rB.hasOwnProperty;function oB(e,t,n){var i=e[t];(!(sB.call(e,t)&&wA(i,n))||n===void 0&&!(t in e))&&iB(e,t,n)}var Xx=Math.max;function aB(e,t,n){return t=Xx(t===void 0?e.length-1:t,0),function(){for(var i=arguments,r=-1,s=Xx(i.length-t,0),o=Array(s);++r<s;)o[r]=i[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=i[r];return a[t]=n(o),G3(e,this,a)}}var lB=9007199254740991;function cB(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lB}var uB="[object Arguments]";function Yx(e){return m_(e)&&p_(e)==uB}var xA=Object.prototype,hB=xA.hasOwnProperty,dB=xA.propertyIsEnumerable,fB=Yx(function(){return arguments}())?Yx:function(e){return m_(e)&&hB.call(e,"callee")&&!dB.call(e,"callee")},EA=fB,pB=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mB=/^\w*$/;function gB(e,t){if(Dh(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||am(e)?!0:mB.test(e)||!pB.test(e)||t!=null&&e in Object(t)}var vB=g_(Object,"create"),ju=vB;function yB(){this.__data__=ju?ju(null):{},this.size=0}function _B(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var bB="__lodash_hash_undefined__",wB=Object.prototype,xB=wB.hasOwnProperty;function EB(e){var t=this.__data__;if(ju){var n=t[e];return n===bB?void 0:n}return xB.call(t,e)?t[e]:void 0}var SB=Object.prototype,TB=SB.hasOwnProperty;function MB(e){var t=this.__data__;return ju?t[e]!==void 0:TB.call(t,e)}var AB="__lodash_hash_undefined__";function CB(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ju&&t===void 0?AB:t,this}function ma(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}ma.prototype.clear=yB;ma.prototype.delete=_B;ma.prototype.get=EB;ma.prototype.has=MB;ma.prototype.set=CB;function IB(){this.__data__=[],this.size=0}function lm(e,t){for(var n=e.length;n--;)if(wA(e[n][0],t))return n;return-1}var RB=Array.prototype,LB=RB.splice;function PB(e){var t=this.__data__,n=lm(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():LB.call(t,n,1),--this.size,!0}function NB(e){var t=this.__data__,n=lm(t,e);return n<0?void 0:t[n][1]}function kB(e){return lm(this.__data__,e)>-1}function OB(e,t){var n=this.__data__,i=lm(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function xc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}xc.prototype.clear=IB;xc.prototype.delete=PB;xc.prototype.get=NB;xc.prototype.has=kB;xc.prototype.set=OB;var DB=g_(om,"Map"),FB=DB;function BB(){this.size=0,this.__data__={hash:new ma,map:new(FB||xc),string:new ma}}function VB(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function cm(e,t){var n=e.__data__;return VB(t)?n[typeof t=="string"?"string":"hash"]:n.map}function UB(e){var t=cm(this,e).delete(e);return this.size-=t?1:0,t}function zB(e){return cm(this,e).get(e)}function HB(e){return cm(this,e).has(e)}function WB(e,t){var n=cm(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function Ha(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Ha.prototype.clear=BB;Ha.prototype.delete=UB;Ha.prototype.get=zB;Ha.prototype.has=HB;Ha.prototype.set=WB;var GB="Expected a function";function v_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(GB);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=e.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(v_.Cache||Ha),n}v_.Cache=Ha;var $B=500;function jB(e){var t=v_(e,function(i){return n.size===$B&&n.clear(),i}),n=t.cache;return t}var qB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,KB=/\\(\\)?/g,XB=jB(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qB,function(n,i,r,s){t.push(r?s.replace(KB,"$1"):i||n)}),t}),YB=XB;function ZB(e){return e==null?"":yA(e)}function um(e,t){return Dh(e)?e:gB(e,t)?[e]:YB(ZB(e))}var JB=1/0;function y_(e){if(typeof e=="string"||am(e))return e;var t=e+"";return t=="0"&&1/e==-JB?"-0":t}function __(e,t){t=um(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[y_(t[n++])];return n&&n==i?e:void 0}function QB(e,t,n){var i=e==null?void 0:__(e,t);return i===void 0?n:i}function eV(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var Zx=_o?_o.isConcatSpreadable:void 0;function tV(e){return Dh(e)||EA(e)||!!(Zx&&e&&e[Zx])}function SA(e,t,n,i,r){var s=-1,o=e.length;for(n||(n=tV),r||(r=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?SA(a,t-1,n,i,r):eV(r,a):i||(r[r.length]=a)}return r}function nV(e){var t=e==null?0:e.length;return t?SA(e,1):[]}function iV(e){return eB(aB(e,void 0,nV),e+"")}function rV(e,t){return e!=null&&t in Object(e)}function sV(e,t,n){t=um(t,e);for(var i=-1,r=t.length,s=!1;++i<r;){var o=y_(t[i]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++i!=r?s:(r=e==null?0:e.length,!!r&&cB(r)&&bA(o,r)&&(Dh(e)||EA(e)))}function oV(e,t){return e!=null&&sV(e,t,rV)}var aV=function(){return om.Date.now()},Pg=aV,lV="Expected a function",cV=Math.max,uV=Math.min;function TA(e,t,n){var i,r,s,o,a,l,c=0,h=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(lV);t=qx(t)||0,pa(n)&&(h=!!n.leading,u="maxWait"in n,s=u?cV(qx(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function f(S){var k=i,O=r;return i=r=void 0,c=S,o=e.apply(O,k),o}function p(S){return c=S,a=setTimeout(m,t),h?f(S):o}function y(S){var k=S-l,O=S-c,W=t-k;return u?uV(W,s-O):W}function v(S){var k=S-l,O=S-c;return l===void 0||k>=t||k<0||u&&O>=s}function m(){var S=Pg();if(v(S))return g(S);a=setTimeout(m,y(S))}function g(S){return a=void 0,d&&i?f(S):(i=r=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function b(){return a===void 0?o:g(Pg())}function E(){var S=Pg(),k=v(S);if(i=arguments,r=this,l=S,k){if(a===void 0)return p(l);if(u)return clearTimeout(a),a=setTimeout(m,t),f(l)}return a===void 0&&(a=setTimeout(m,t)),o}return E.cancel=w,E.flush=b,E}function hV(e){return typeof e=="function"?e:_A}function b_(e,t,n,i){if(!pa(e))return e;t=um(t,e);for(var r=-1,s=t.length,o=s-1,a=e;a!=null&&++r<s;){var l=y_(t[r]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(r!=o){var h=a[l];c=i?i(h,l,a):void 0,c===void 0&&(c=pa(h)?h:bA(t[r+1])?[]:{})}oB(a,l,c),a=a[l]}return e}function dV(e,t,n){for(var i=-1,r=t.length,s={};++i<r;){var o=t[i],a=__(e,o);n(a,o)&&b_(s,um(o,e),a)}return s}function fV(e,t){return dV(e,t,function(n,i){return oV(e,i)})}var pV=iV(function(e,t){return e==null?{}:fV(e,t)}),mV=pV;function gy(e,t,n){return e==null?e:b_(e,t,n)}function gV(e,t,n,i){return b_(e,t,n(__(e,t)),i)}function vV(e,t,n){return e==null?e:gV(e,t,hV(n))}const MA=[{key:"lang",path:"locale.lang"}],yV=["locale/SET_LANG"],_V=({module:e,state:t})=>{const n=xV();return n.forEach((i,r)=>{const s=MA.find(l=>l.key==r);if(!s)return;const o=AA({expectedParam:s,module:e});if(!o)return;const a=wV({expectedParam:s,query:n,state:t});gy(t,o,a)}),t},bV=({state:e,router:t})=>{const n=sn({},t.currentRoute.value.query),i={};MA.forEach(s=>{const o=AA({expectedParam:s});if(!o)return;const a=EV({expectedParam:s,state:e});let l=QB(e,o,null);l&&s.stateTransformFn&&(l=s.stateTransformFn(l,e)),l&&a?i[s.key]=l:delete n[s.key]});const r=sn(sn({},n),i);t.replace({query:r})},AA=({expectedParam:e,module:t=null})=>{let n=e.path;if(t){const[i,r]=n.split(`${t}.`);if(i)return null;n=r}return n},wV=({expectedParam:e,query:t,state:n})=>{let i=t.getAll(e.key);return e.valueType&&(i=i.map(e.valueType)),!e.isArray&&i.length===1&&(i=i[0]),e.queryTransformFn&&(i=e.queryTransformFn(i,t,n)),i},xV=()=>{const e=window.location.search;return new URLSearchParams(e)},EV=({expectedParam:e,state:t})=>{const{conditionalDisplayFn:n}=e;return n?n(t):!0},SV=()=>{const t="cs, en".split(", "),n=t[0]||"cs",i=navigator.languages;if(!i)return n;const r=o=>o.split("-")[0],s=i.find(o=>t.includes(r(o)));return s?r(s):n},TV=SV();function MV(){const e=GM(),t=Xi(),n=TA(r=>{bV({state:r,router:e})},500);function i(){t.subscribe((r,s)=>{yV.includes(r.type)&&n(s)})}return{startQuerySync:i}}var Ht=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n};const AV={setup(){const e=$M(),t=Qe(()=>{var r;return(r=e==null?void 0:e.meta)==null?void 0:r.layout}),{startQuerySync:n}=MV(),{locale:i}=Oh();return NF(Qe(()=>({htmlAttrs:{lang:i.value}}))),aM(()=>{n()}),{layout:t}}};function CV(e,t,n,i,r,s){const o=nt("metainfo"),a=nt("router-view");return we(),De(It,null,[tt(o),(we(),bt(Es(i.layout||"div"),null,{default:Rt(()=>[tt(a)]),_:1}))],64)}var IV=Ht(AV,[["render",CV]]);const RV={name:"NotFoundView"};function LV(e,t,n,i,r,s){return we(),De("h1",null,"Oops, it looks like the page you're looking for doesn't exist.")}var PV=Ht(RV,[["render",LV]]);const NV={};function kV(e,t){return we(),De("main",null,[On(e.$slots,"default")])}var OV=Ht(NV,[["render",kV]]),DV=[{path:"/:catchAll(.*)",name:"errors.not_found",component:PV,meta:{layout:OV}}],He={innerWidth(e){let t=e.offsetWidth,n=getComputedStyle(e);return t+=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),t},width(e){let t=e.offsetWidth,n=getComputedStyle(e);return t-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),t},getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)},getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)},getOuterWidth(e,t){if(e){let n=e.offsetWidth;if(t){let i=getComputedStyle(e);n+=parseFloat(i.marginLeft)+parseFloat(i.marginRight)}return n}else return 0},getOuterHeight(e,t){if(e){let n=e.offsetHeight;if(t){let i=getComputedStyle(e);n+=parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}else return 0},getClientHeight(e,t){if(e){let n=e.clientHeight;if(t){let i=getComputedStyle(e);n+=parseFloat(i.marginTop)+parseFloat(i.marginBottom)}return n}else return 0},getViewport(){let e=window,t=document,n=t.documentElement,i=t.getElementsByTagName("body")[0],r=e.innerWidth||n.clientWidth||i.clientWidth,s=e.innerHeight||n.clientHeight||i.clientHeight;return{width:r,height:s}},getOffset(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}},index(e){let t=e.parentNode.childNodes,n=0;for(var i=0;i<t.length;i++){if(t[i]===e)return n;t[i].nodeType===1&&n++}return-1},addMultipleClasses(e,t){if(e.classList){let n=t.split(" ");for(let i=0;i<n.length;i++)e.classList.add(n[i])}else{let n=t.split(" ");for(let i=0;i<n.length;i++)e.className+=" "+n[i]}},addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},hasClass(e,t){return e?e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className):!1},find(e,t){return e.querySelectorAll(t)},findSingle(e,t){return e.querySelector(t)},getHeight(e){let t=e.offsetHeight,n=getComputedStyle(e);return t-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),t},getWidth(e){let t=e.offsetWidth,n=getComputedStyle(e);return t-=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)+parseFloat(n.borderLeftWidth)+parseFloat(n.borderRightWidth),t},absolutePosition(e,t){let n=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),i=n.height,r=n.width,s=t.offsetHeight,o=t.offsetWidth,a=t.getBoundingClientRect(),l=this.getWindowScrollTop(),c=this.getWindowScrollLeft(),h=this.getViewport(),u,d;a.top+s+i>h.height?(u=a.top+l-i,e.style.transformOrigin="bottom",u<0&&(u=l)):(u=s+a.top+l,e.style.transformOrigin="top"),a.left+r>h.width?d=Math.max(0,a.left+c+o-r):d=a.left+c,e.style.top=u+"px",e.style.left=d+"px"},relativePosition(e,t){let n=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const i=t.offsetHeight,r=t.getBoundingClientRect(),s=this.getViewport();let o,a;r.top+i+n.height>s.height?(o=-1*n.height,e.style.transformOrigin="bottom",r.top+o<0&&(o=-1*r.top)):(o=i,e.style.transformOrigin="top"),n.width>s.width?a=r.left*-1:r.left+n.width>s.width?a=(r.left+n.width-s.width)*-1:a=0,e.style.top=o+"px",e.style.left=a+"px"},getParents(e,t=[]){return e.parentNode===null?t:this.getParents(e.parentNode,t.concat([e.parentNode]))},getScrollableParents(e){let t=[];if(e){let n=this.getParents(e);const i=/(auto|scroll)/,r=s=>{let o=window.getComputedStyle(s,null);return i.test(o.getPropertyValue("overflow"))||i.test(o.getPropertyValue("overflowX"))||i.test(o.getPropertyValue("overflowY"))};for(let s of n){let o=s.nodeType===1&&s.dataset.scrollselectors;if(o){let a=o.split(",");for(let l of a){let c=this.findSingle(s,l);c&&r(c)&&t.push(c)}}s.nodeType!==9&&r(s)&&t.push(s)}}return t},getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let t=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",t},getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let t=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",t},getHiddenElementDimensions(e){var t={};return e.style.visibility="hidden",e.style.display="block",t.width=e.offsetWidth,t.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",t},fadeIn(e,t){e.style.opacity=0;var n=+new Date,i=0,r=function(){i=+e.style.opacity+(new Date().getTime()-n)/t,e.style.opacity=i,n=+new Date,+i<1&&(window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16))};r()},fadeOut(e,t){var n=1,i=50,r=t,s=i/r;let o=setInterval(()=>{n-=s,n<=0&&(n=0,clearInterval(o)),e.style.opacity=n},i)},getUserAgent(){return navigator.userAgent},appendChild(e,t){if(this.isElement(t))t.appendChild(e);else if(t.el&&t.elElement)t.elElement.appendChild(e);else throw new Error("Cannot append "+t+" to "+e)},scrollInView(e,t){let n=getComputedStyle(e).getPropertyValue("borderTopWidth"),i=n?parseFloat(n):0,r=getComputedStyle(e).getPropertyValue("paddingTop"),s=r?parseFloat(r):0,o=e.getBoundingClientRect(),l=t.getBoundingClientRect().top+document.body.scrollTop-(o.top+document.body.scrollTop)-i-s,c=e.scrollTop,h=e.clientHeight,u=this.getOuterHeight(t);l<0?e.scrollTop=c+l:l+u>h&&(e.scrollTop=c+l-h+u)},clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}},calculateScrollbarWidth(){if(this.calculatedScrollbarWidth!=null)return this.calculatedScrollbarWidth;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),this.calculatedScrollbarWidth=t,t},getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser},resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),t=/(chrome)[ ]([\w.]+)/.exec(e)||/(webkit)[ ]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ ]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},isVisible(e){return e.offsetParent!=null},invokeElementMethod(e,t,n){e[t].apply(e,n)},getFocusableElements(e){let t=this.find(e,`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),
                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])`),n=[];for(let i of t)getComputedStyle(i).display!="none"&&getComputedStyle(i).visibility!="hidden"&&n.push(i);return n},getFirstFocusableElement(e){const t=this.getFocusableElements(e);return t.length>0?t[0]:null},isClickable(e){const t=e.nodeName,n=e.parentElement&&e.parentElement.nodeName;return t=="INPUT"||t=="BUTTON"||t=="A"||n=="INPUT"||n=="BUTTON"||n=="A"||this.hasClass(e,"p-button")||this.hasClass(e.parentElement,"p-button")||this.hasClass(e.parentElement,"p-checkbox")||this.hasClass(e.parentElement,"p-radiobutton")},applyStyle(e,t){if(typeof t=="string")e.style.cssText=t;else for(let n in t)e.style[n]=t[n]},isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},isAndroid(){return/(android)/i.test(navigator.userAgent)},isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},exportCSV(e,t){let n=new Blob([e],{type:"application/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(n,t+".csv");else{let i=document.createElement("a");i.download!==void 0?(i.setAttribute("href",URL.createObjectURL(n)),i.setAttribute("download",t+".csv"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)):(e="data:text/csv;charset=utf-8,"+e,window.open(encodeURI(e)))}}};class FV{constructor(t,n=()=>{}){this.element=t,this.listener=n}bindScrollListener(){this.scrollableParents=He.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}var BV={equals(e,t,n){return n?this.resolveFieldData(e,n)===this.resolveFieldData(t,n):this.deepEquals(e,t)},deepEquals(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,s,o;if(n&&i){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!this.deepEquals(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var a=e instanceof Date,l=t instanceof Date;if(a!=l)return!1;if(a&&l)return e.getTime()==t.getTime();var c=e instanceof RegExp,h=t instanceof RegExp;if(c!=h)return!1;if(c&&h)return e.toString()==t.toString();var u=Object.keys(e);if(s=u.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[r]))return!1;for(r=s;r--!==0;)if(o=u[r],!this.deepEquals(e[o],t[o]))return!1;return!0}return e!==e&&t!==t},resolveFieldData(e,t){if(e&&Object.keys(e).length&&t){if(this.isFunction(t))return t(e);if(t.indexOf(".")===-1)return e[t];{let r=t.split("."),s=e;for(var n=0,i=r.length;n<i;++n){if(s==null)return null;s=s[r[n]]}return s}}else return null},isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},filter(e,t,n){var i=[];if(e){for(let r of e)for(let s of t)if(String(this.resolveFieldData(r,s)).toLowerCase().indexOf(n.toLowerCase())>-1){i.push(r);break}}return i},reorderArray(e,t,n){let i;if(e&&t!==n){if(n>=e.length)for(i=n-e.length;i--+1;)e.push(void 0);e.splice(n,0,e.splice(t,1)[0])}},findIndexInList(e,t){let n=-1;if(t){for(let i=0;i<t.length;i++)if(t[i]===e){n=i;break}}return n},contains(e,t){if(e!=null&&t&&t.length){for(let n of t)if(this.equals(e,n))return!0}return!1},insertIntoOrderedArray(e,t,n,i){if(n.length>0){let r=!1;for(let s=0;s<n.length;s++)if(this.findIndexInList(n[s],i)>t){n.splice(s,0,e),r=!0;break}r||n.push(e)}else n.push(e)},removeAccents(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e},getVNodeProp(e,t){let n=e.props;if(n){let i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Object.prototype.hasOwnProperty.call(n,i)?i:t;return e.type.props[t].type===Boolean&&n[r]===""?!0:n[r]}return null},isEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||!(e instanceof Date)&&typeof e=="object"&&Object.keys(e).length===0},isNotEmpty(e){return!this.isEmpty(e)}};function VV(){let e=[];const t=(s,o)=>{let a=e.length>0?e[e.length-1]:{key:s,value:o},l=a.value+(a.key===s?0:o)+1;return e.push({key:s,value:l}),l},n=s=>{e=e.filter(o=>o.value!==s)},i=()=>e.length>0?e[e.length-1].value:0,r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,a)=>{o&&(o.style.zIndex=String(t(s,a)))},clear:s=>{s&&(n(r(s)),s.style.zIndex="")},getCurrent:()=>i()}}var _r=VV(),Jx=0;function qu(e="pv_id_"){return Jx++,`${e}${Jx}`}function UV(){const e=new Map;return{on(t,n){let i=e.get(t);i?i.push(n):i=[n],e.set(t,i)},off(t,n){let i=e.get(t);i&&i.splice(i.indexOf(n)>>>0,1)},emit(t,n){let i=e.get(t);i&&i.slice().map(r=>{r(n)})}}}function zV(e){e.addEventListener("mousedown",CA)}function HV(e){e.removeEventListener("mousedown",CA)}function WV(e){let t=document.createElement("span");t.className="p-ink",e.appendChild(t),t.addEventListener("animationend",IA)}function GV(e){let t=RA(e);t&&(HV(e),t.removeEventListener("animationend",IA),t.remove())}function CA(e){let t=e.currentTarget,n=RA(t);if(!n||getComputedStyle(n,null).display==="none")return;if(He.removeClass(n,"p-ink-active"),!He.getHeight(n)&&!He.getWidth(n)){let o=Math.max(He.getOuterWidth(t),He.getOuterHeight(t));n.style.height=o+"px",n.style.width=o+"px"}let i=He.getOffset(t),r=e.pageX-i.left+document.body.scrollTop-He.getWidth(n)/2,s=e.pageY-i.top+document.body.scrollLeft-He.getHeight(n)/2;n.style.top=s+"px",n.style.left=r+"px",He.addClass(n,"p-ink-active")}function IA(e){He.removeClass(e.currentTarget,"p-ink-active")}function RA(e){for(let t=0;t<e.children.length;t++)if(typeof e.children[t].className=="string"&&e.children[t].className.indexOf("p-ink")!==-1)return e.children[t];return null}const Fh={mounted(e,t){t.instance.$primevue&&t.instance.$primevue.config&&t.instance.$primevue.config.ripple&&(WV(e),zV(e))},unmounted(e){GV(e)}};var LA={name:"ToggleButton",emits:["update:modelValue","change"],props:{modelValue:Boolean,onIcon:String,offIcon:String,onLabel:String,offLabel:String,iconPos:{type:String,default:"left"}},methods:{onClick(e){this.$attrs.disabled||(this.$emit("update:modelValue",!this.modelValue),this.$emit("change",e))}},computed:{buttonClass(){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":this.hasIcon&&!this.hasLabel,"p-disabled":this.$attrs.disabled,"p-highlight":this.modelValue===!0}},iconClass(){return[this.modelValue?this.onIcon:this.offIcon,"p-button-icon",{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label}]},hasLabel(){return this.onLabel&&this.onLabel.length>0&&this.offLabel&&this.offLabel.length>0},hasIcon(){return this.onIcon&&this.onIcon.length>0&&this.offIcon&&this.offIcon.length>0},label(){return this.hasLabel?this.modelValue?this.onLabel:this.offLabel:"&nbsp;"}},directives:{ripple:Fh}};const $V=["aria-checked","tabindex"],jV={class:"p-button-label"};function qV(e,t,n,i,r,s){const o=Nh("ripple");return Mi((we(),De("div",{class:kt(s.buttonClass),onClick:t[0]||(t[0]=a=>s.onClick(a)),role:"checkbox","aria-checked":n.modelValue,tabindex:e.$attrs.disabled?null:"0"},[s.hasIcon?(we(),De("span",{key:0,class:kt(s.iconClass)},null,2)):_t("",!0),Ee("span",jV,Je(s.label),1)],10,$V)),[[o]])}LA.render=qV;var w_={name:"Badge",props:{value:null,severity:null,size:null},computed:{containerClass(){return this.$slots.default?"p-overlay-badge":this.badgeClass},badgeClass(){return["p-badge p-component",{"p-badge-no-gutter":this.value&&String(this.value).length===1,"p-badge-dot":!this.value&&!this.$slots.default,"p-badge-lg":this.size==="large","p-badge-xl":this.size==="xlarge","p-badge-info":this.severity==="info","p-badge-success":this.severity==="success","p-badge-warning":this.severity==="warning","p-badge-danger":this.severity==="danger"}]}}};function KV(e,t,n,i,r,s){return we(),De("span",{class:kt(s.badgeClass)},[On(e.$slots,"default",{},()=>[Ki(Je(n.value),1)])],2)}w_.render=KV;function kr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ds(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Jl(e){Ds(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function PA(e,t){Ds(2,arguments);var n=Jl(e),i=kr(t);return isNaN(i)?new Date(NaN):(i&&n.setDate(n.getDate()+i),n)}function XV(e,t){Ds(2,arguments);var n=Jl(e),i=kr(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var r=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+i+1,0);var o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}function Ng(e,t){if(Ds(2,arguments),!t||typeof t!="object")return new Date(NaN);var n=t.years?kr(t.years):0,i=t.months?kr(t.months):0,r=t.weeks?kr(t.weeks):0,s=t.days?kr(t.days):0,o=t.hours?kr(t.hours):0,a=t.minutes?kr(t.minutes):0,l=t.seconds?kr(t.seconds):0,c=Jl(e),h=i||n?XV(c,i+n*12):c,u=s||r?PA(h,s+r*7):h,d=a+o*60,f=l+d*60,p=f*1e3,y=new Date(u.getTime()+p);return y}function YV(e,t){Ds(2,arguments);var n=Jl(e),i=Jl(t),r=n.getTime()-i.getTime();return r<0?-1:r>0?1:r}function ZV(e){Ds(1,arguments);var t=Jl(e),n=t.getDay();return n}function JV(e,t){Ds(2,arguments);var n=kr(t);return PA(e,-n)}function QV(e,t){Ds(2,arguments);var n=ZV(e)-t;return n<=0&&(n+=7),JV(e,n)}function eU(e){return Ds(1,arguments),QV(e,0)}const NA=Symbol();function kA(){const e=Jn(NA);if(!e)throw new Error("No PrimeVue Toast provided!");return e}function hm(){const e=Xi(),t=kA(),{t:n}=Oh(),i=()=>e.dispatch("layout/startLoading"),r=()=>e.dispatch("layout/finishLoading"),s=(c,h,u=null)=>{t.add(Fo(sn({severity:h,summary:n(`requests.${c}`)},u?{detail:u}:{}),{life:4e3}))},o=(c,h="success")=>{s(c,h)},a=(c,h,u="error")=>{const d=c[h.code]||c.default||c,f=h.message;s(d,u,f)};return{makeRequest:async({actions:c,messages:h={},loading:u=!0})=>{u&&i();try{await c(),h.success&&o(h.success)}catch(d){h.error&&a(h.error,d)}u&&r()},startLoading:i,finishLoading:r,showMessage:s,showSuccess:o,showError:a}}const OA="firebase",tU="$firebase";var nU={apiKey:"AIzaSyDkC3M4GkH9G00tBnsNiCgsC1R9xGOPLe0",authDomain:"doupak-6480d.firebaseapp.com",projectId:"doupak-6480d",storageBucket:"doupak-6480d.appspot.com",messagingSenderId:"259784749271",appId:"1:259784749271:web:b7328800f91f4e28764092"};function dm(){return Jn(OA)}const no="day",El="userName",Hc="userId",Ko="isOffPlayer",Xo="isOnPlayer",Yo="isOffDm",Zo="isOnDm",Jo="canHost",so="timeLimit";function iU({defaultTime:e="17:00",minPeopleToPlay:t=4}={}){const n=Xi(),{makeRequest:i}=hm(),{db:r}=dm(),s=Qe(()=>n.state.auth.user),o=st([]),a=st({}),l=[{field:Ko,type:"toggle",label:"I can play offline"},{field:Yo,type:"toggle",label:"I can DM offline"},{field:Jo,type:"toggle",label:"I have place"},{field:Xo,type:"toggle",label:"I can play online"},{field:Zo,type:"toggle",label:"I can DM online"},{field:so,type:"time"}],c={[El]:s.value.name,[Hc]:s.value.id,[Ko]:!1,[Xo]:!1,[Yo]:!1,[Zo]:!1,[Jo]:!1,[so]:e};async function h({fromDay:f=null}={}){await i({actions:()=>{r.watchRecords(r.tables.PLANNER,p=>{o.value=[],a.value={},p.forEach(y=>{const v=r.getRecordData(y);v.id=y.id,v[no]=r.getDate(v[no]),o.value.push(v),oU(a.value,v,l,t)})},sn({},f&&{where:[no,">",f]}))},messages:{error:"error while fetching planner"},loading:!1})}async function u(f){await i({actions:async()=>{await r.addRecord(r.tables.PLANNER,{[no]:f[no],[El]:f[El],[Hc]:f[Hc],[Ko]:f[Ko],[Xo]:f[Xo],[Zo]:f[Zo],[Yo]:f[Yo],[Jo]:f[Jo],[so]:f[so]})},messages:{error:"error while saving planner"}})}async function d(f,p){await i({actions:async()=>{await r.updateRecord(r.tables.PLANNER,f,{[no]:p[no],[El]:p[El],[Hc]:p[Hc],[Ko]:p[Ko],[Xo]:p[Xo],[Zo]:p[Zo],[Yo]:p[Yo],[Jo]:p[Jo],[so]:p[so]})},messages:{error:"error while saving planner"}})}return{planner:o,plannerResults:a,plannerOptions:l,watchPlanner:h,addToPlanner:u,updatePlanner:d,defaultDayPlan:c,getDayResult:(f,p)=>{var y,v;return(v=(y=a.value)==null?void 0:y[DA(f)])==null?void 0:v[p]}}}function DA(e){return e[no].getTime()}function rU(e,t,n){const i=e[t][Ko],r=e[t][Xo],s=e[t][Yo],o=e[t][Zo],a=i.size>=n-1,l=s.size,c=e[t][Jo].size,h=r.size>=n-1,u=o.size,d=new Set([...i,...s]).size>=n,f=new Set([...r,...o]).size>=n;return{canBeOn:h&&u&&f,canBeOff:a&&l&&c&&d}}function sU(e,t,n){if(e!==so||!Object.values(t).some(s=>s===!0))return;const[i]=n,r=t[e];r<i||(n.delete(i),n.add(r))}function oU(e,t,n,i){const r=t[El].substring(0,2),s=DA(t);n.forEach(({field:l})=>{vV(e,`${s}.${l}`,(c=new Set)=>(t[l]===!0&&c.add(r),l===so&&sU(l,t,c),c))});const{canBeOn:o,canBeOff:a}=rU(e,s,i);gy(e,`${s}.onResult`,o),gy(e,`${s}.offResult`,a)}const aU={props:{disabled:{type:Boolean,default:!1},disabledLeft:{type:Boolean,default:!1},disabledRight:{type:Boolean,default:!1}},emits:["changed"]},lU={class:"swapper"};function cU(e,t,n,i,r,s){const o=nt("prime-button");return we(),De("div",lU,[tt(o,{icon:"pi pi-chevron-left",disabled:n.disabledLeft||n.disabled,onClick:t[0]||(t[0]=a=>e.$emit("changed","decrease"))},null,8,["disabled"]),Ee("div",{class:kt(["swapper-content",{disabled:n.disabled}])},[On(e.$slots,"default",{},void 0,!0)],2),tt(o,{icon:"pi pi-chevron-right",disabled:n.disabledRight||n.disabled,onClick:t[1]||(t[1]=a=>e.$emit("changed","increase"))},null,8,["disabled"])])}var FA=Ht(aU,[["render",cU],["__scopeId","data-v-5e65319e"]]);const uU={components:{DopeSwapper:FA},props:{modelValue:{type:String,default:null},disabled:{type:Boolean,default:!1},defaultTime:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){return{updateTime:i=>{const r=e.modelValue.split(":");let s=r[0],o=r[1];o=o=="00"?"30":"00",o=="00"&&i=="increase"&&(s=+s+1),o=="30"&&i=="decrease"&&(s=+s-1),t("update:modelValue",`${s}:${o}`)}}}};function hU(e,t,n,i,r,s){const o=nt("dope-swapper");return we(),bt(o,{disabled:n.disabled,class:kt(["time-swapper",{filled:n.modelValue!=n.defaultTime,disabled:n.disabled}]),onChanged:i.updateTime},{default:Rt(()=>[Ki(Je(e.$t("planner.from"))+" "+Je(n.modelValue),1)]),_:1},8,["disabled","class","onChanged"])}var dU=Ht(uU,[["render",hU],["__scopeId","data-v-028727cc"]]);const fU={components:{DopeSwapper:FA},props:{modelValue:{type:Number,default:0},displayedDays:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){return{updateDay:i=>{i=="increase"&&t("update:modelValue",e.modelValue+1),i=="decrease"&&t("update:modelValue",e.modelValue-1)}}}},pU={class:"week-swapper-content"},mU={key:0},gU={key:1},vU={key:2};function yU(e,t,n,i,r,s){const o=nt("dope-swapper");return we(),bt(o,{class:"week-swapper","disabled-left":!n.modelValue,onChanged:i.updateDay},{default:Rt(()=>[Ee("div",pU,[n.modelValue?_t("",!0):(we(),De("span",mU,Je(e.$t("planner.this weekend")),1)),n.modelValue>0?(we(),De("span",gU,Je(e.$t("planner.next weekend")),1)):_t("",!0),n.modelValue<0?(we(),De("span",vU,Je(e.$t("planner.past weekend")),1)):_t("",!0),Ee("small",null," ("+Je(e.$d(n.displayedDays[0],"short"))+" - "+Je(e.$d(n.displayedDays[n.displayedDays.length-1],"short"))+") ",1)])]),_:1},8,["disabled-left","onChanged"])}var _U=Ht(fU,[["render",yU],["__scopeId","data-v-ba914ca0"]]);const bU={components:{PrimeToggle:LA,PrimeBadge:w_,DopeTimeSwapper:dU,DopeWeekSwapper:_U},setup(){const e=Xi(),{planner:t,getDayResult:n,defaultDayPlan:i,plannerOptions:r,watchPlanner:s,addToPlanner:o,updatePlanner:a}=iU(),l=Qe(()=>e.state.auth.user),c=st(0),h=st([]),u=new Date().setHours(0,0,0,0),d=eU(u),f=Qe(()=>{const w=c.value*7,b=Ng(d,{days:5+w}),E=Ng(d,{days:6+w}),S=Ng(d,{days:7+w});return[b,E,S]}),p=Qe(()=>{const w=[];return f.value.forEach(b=>{const E=m(b);w.push(E||Fo(sn({},i),{day:b}))}),w}),y=w=>w<u,v=(w,b,E)=>{const S=m(w);if(S){const k=E!=null?E:!S[b];S[b]=k,S.toBeUpdated=!0}else{const k=E!=null?E:!i[b];h.value.push(Fo(sn({},i),{day:w,[b]:k}))}g()},m=w=>h.value.find(b=>{const E=b.userId==l.value.id,S=YV(b.day,w)==0;return E&&S}),g=TA(async()=>{for(const w of h.value)w.id?w.toBeUpdated&&a(w.id,w):o(w)},1e3);return Tr(()=>s({fromDay:d})),dn(t,w=>h.value=w),{displayedWeekdays:f,currentWeekAndUserPlan:p,updateData:v,plannerOptions:r,isLockedDate:y,displayedWeekIndex:c,getDayResult:n,defaultDayPlan:i}}},wU={class:"p-col"},xU=Ki(" \xA0 "),EU={key:0},SU={key:1},TU={class:"badges"};function MU(e,t,n,i,r,s){const o=nt("prime-badge"),a=nt("dope-time-swapper"),l=nt("prime-toggle"),c=nt("dope-week-swapper"),h=nt("prime-card");return we(),bt(h,null,{content:Rt(()=>[(we(!0),De(It,null,Ur(i.currentWeekAndUserPlan,u=>(we(),De("div",{key:u.day,class:kt(["p-grid",{disabled:i.isLockedDate(u.day)}])},[Ee("div",wU,[Ee("h3",{class:kt({"off-success":i.getDayResult(u,"offResult"),"on-success":i.getDayResult(u,"onResult")})},Je(e.$d(u.day,"planner")),3),xU,i.isLockedDate(u.day)?(we(),De("div",EU,"("+Je(e.$t("planner.closed"))+")",1)):i.getDayResult(u,"offResult")||i.getDayResult(u,"onResult")?(we(),De("div",SU," ("+Je(e.$t("planner.doupo confirmed"))+") ",1)):_t("",!0)]),(we(!0),De(It,null,Ur(i.plannerOptions,({label:d,type:f,field:p})=>(we(),De("div",{key:p,class:"p-col"},[Ee("div",TU,[(we(!0),De(It,null,Ur(i.getDayResult(u,p)||[],y=>(we(),bt(o,{key:y,value:y,severity:"warning"},null,8,["value"]))),128))]),f=="time"?(we(),bt(a,{key:0,"model-value":u[p],disabled:i.isLockedDate(u.day),"default-time":i.defaultDayPlan.timeLimit,"onUpdate:modelValue":y=>i.updateData(u.day,p,y)},null,8,["model-value","disabled","default-time","onUpdate:modelValue"])):f=="toggle"?(we(),bt(l,{key:1,"model-value":u[p],disabled:i.isLockedDate(u.day),"on-label":e.$t(`planner.${d}`),"off-label":e.$t(`planner.${d}`),"on-icon":"pi pi-check","off-icon":"pi pi-times",onChange:y=>i.updateData(u.day,p)},null,8,["model-value","disabled","on-label","off-label","onChange"])):_t("",!0)]))),128))],2))),128))]),footer:Rt(()=>[tt(c,{modelValue:i.displayedWeekIndex,"onUpdate:modelValue":t[0]||(t[0]=u=>i.displayedWeekIndex=u),"displayed-days":i.displayedWeekdays},null,8,["modelValue","displayed-days"])]),_:1})}var BA=Ht(bU,[["render",MU],["__scopeId","data-v-69008d24"]]);const AU={components:{DopePlanner:BA}};function CU(e,t,n,i,r,s){const o=nt("dope-planner");return we(),bt(o)}var IU=Ht(AU,[["render",CU]]);try{self["workbox:window:6.5.2"]&&_()}catch{}function vy(e,t){return new Promise(function(n){var i=new MessageChannel;i.port1.onmessage=function(r){n(r.data)},e.postMessage(t,[i.port2])})}function RU(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Qx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function LU(e,t){var n;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=function(r,s){if(r){if(typeof r=="string")return Qx(r,s);var o=Object.prototype.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Qx(r,s):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.5.2"]&&_()}catch{}var kg=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};function Og(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var Wc=function(e,t){this.type=e,Object.assign(this,t)};function bd(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function PU(){}var NU={type:"SKIP_WAITING"};function eE(e,t){if(!t)return e&&e.then?e.then(PU):Promise.resolve()}var kU=function(e){var t,n;function i(a,l){var c,h;return l===void 0&&(l={}),(c=e.call(this)||this).nn={},c.tn=0,c.rn=new kg,c.en=new kg,c.on=new kg,c.un=0,c.an=new Set,c.cn=function(){var u=c.fn,d=u.installing;c.tn>0||!Og(d.scriptURL,c.sn.toString())||performance.now()>c.un+6e4?(c.vn=d,u.removeEventListener("updatefound",c.cn)):(c.hn=d,c.an.add(d),c.rn.resolve(d)),++c.tn,d.addEventListener("statechange",c.ln)},c.ln=function(u){var d=c.fn,f=u.target,p=f.state,y=f===c.vn,v={sw:f,isExternal:y,originalEvent:u};!y&&c.mn&&(v.isUpdate=!0),c.dispatchEvent(new Wc(p,v)),p==="installed"?c.wn=self.setTimeout(function(){p==="installed"&&d.waiting===f&&c.dispatchEvent(new Wc("waiting",v))},200):p==="activating"&&(clearTimeout(c.wn),y||c.en.resolve(f))},c.dn=function(u){var d=c.hn,f=d!==navigator.serviceWorker.controller;c.dispatchEvent(new Wc("controlling",{isExternal:f,originalEvent:u,sw:d,isUpdate:c.mn})),f||c.on.resolve(d)},c.gn=(h=function(u){var d=u.data,f=u.ports,p=u.source;return bd(c.getSW(),function(){c.an.has(p)&&c.dispatchEvent(new Wc("message",{data:d,originalEvent:u,ports:f,sw:p}))})},function(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];try{return Promise.resolve(h.apply(this,u))}catch(f){return Promise.reject(f)}}),c.sn=a,c.nn=l,navigator.serviceWorker.addEventListener("message",c.gn),c}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,s,o=i.prototype;return o.register=function(a){var l=(a===void 0?{}:a).immediate,c=l!==void 0&&l;try{var h=this;return function(u,d){var f=u();return f&&f.then?f.then(d):d(f)}(function(){if(!c&&document.readyState!=="complete")return eE(new Promise(function(u){return window.addEventListener("load",u)}))},function(){return h.mn=Boolean(navigator.serviceWorker.controller),h.yn=h.pn(),bd(h.bn(),function(u){h.fn=u,h.yn&&(h.hn=h.yn,h.en.resolve(h.yn),h.on.resolve(h.yn),h.yn.addEventListener("statechange",h.ln,{once:!0}));var d=h.fn.waiting;return d&&Og(d.scriptURL,h.sn.toString())&&(h.hn=d,Promise.resolve().then(function(){h.dispatchEvent(new Wc("waiting",{sw:d,wasWaitingBeforeRegister:!0}))}).then(function(){})),h.hn&&(h.rn.resolve(h.hn),h.an.add(h.hn)),h.fn.addEventListener("updatefound",h.cn),navigator.serviceWorker.addEventListener("controllerchange",h.dn),h.fn})})}catch(u){return Promise.reject(u)}},o.update=function(){try{return this.fn?eE(this.fn.update()):void 0}catch(a){return Promise.reject(a)}},o.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(a){try{return bd(this.getSW(),function(l){return vy(l,a)})}catch(l){return Promise.reject(l)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&vy(this.fn.waiting,NU)},o.pn=function(){var a=navigator.serviceWorker.controller;return a&&Og(a.scriptURL,this.sn.toString())?a:void 0},o.bn=function(){try{var a=this;return function(l,c){try{var h=l()}catch(u){return c(u)}return h&&h.then?h.then(void 0,c):h}(function(){return bd(navigator.serviceWorker.register(a.sn,a.nn),function(l){return a.un=performance.now(),l})},function(l){throw l})}catch(l){return Promise.reject(l)}},r=i,(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&RU(r.prototype,s),i}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,i){this.Sn(n).add(i)},t.removeEventListener=function(n,i){this.Sn(n).delete(i)},t.dispatchEvent=function(n){n.target=this;for(var i,r=LU(this.Sn(n.type));!(i=r()).done;)(0,i.value)(n)},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e}());function OU(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisterError:s}=e;let o,a;const l=async(c=!0)=>{c&&(o==null||o.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()})),a&&a.waiting&&await vy(a.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){o=new kU("/dope-sw.js",{scope:"/",type:"classic"}),o.addEventListener("activated",c=>{c.isUpdate||i==null||i()});{const c=()=>{n==null||n()};o.addEventListener("waiting",c),o.addEventListener("externalwaiting",c)}o.register({immediate:t}).then(c=>{a=c,r==null||r(c)}).catch(c=>{s==null||s(c)})}return l}function DU(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisterError:s}=e,o=st(!1),a=st(!1);return{updateServiceWorker:OU({immediate:t,onNeedRefresh(){o.value=!0,n==null||n()},onOfflineReady(){a.value=!0,i==null||i()},onRegistered:r,onRegisterError:s}),offlineReady:a,needRefresh:o}}var VA={name:"Dialog",inheritAttrs:!1,emits:["update:visible","show","hide","maximize","unmaximize","dragend"],props:{header:null,footer:null,visible:Boolean,modal:Boolean,contentStyle:null,contentClass:String,rtl:Boolean,maximizable:Boolean,dismissableMask:Boolean,closable:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0},ariaCloseLabel:{type:String,default:"close"},position:{type:String,default:"center"},breakpoints:{type:Object,default:null},draggable:{type:Boolean,default:!0},keepInViewport:{type:Boolean,default:!0},minX:{type:Number,default:0},minY:{type:Number,default:0},appendTo:{type:String,default:"body"}},data(){return{containerVisible:this.visible,maximized:!1}},documentKeydownListener:null,container:null,mask:null,styleElement:null,dragging:null,documentDragListener:null,documentDragEndListener:null,lastPageX:null,lastPageY:null,updated(){this.visible&&(this.containerVisible=this.visible)},beforeUnmount(){this.unbindDocumentState(),this.unbindGlobalListeners(),this.destroyStyle(),this.mask=null,this.container&&this.autoZIndex&&_r.clear(this.container),this.container=null},mounted(){this.breakpoints&&this.createStyle()},methods:{close(){this.$emit("update:visible",!1)},onBeforeEnter(e){this.autoZIndex&&_r.set("modal",e,this.baseZIndex+this.$primevue.config.zIndex.modal),e.setAttribute(this.attributeSelector,"")},onEnter(){this.mask.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1),this.$emit("show"),this.focus(),this.enableDocumentSettings(),this.bindGlobalListeners()},onBeforeLeave(){this.modal&&He.addClass(this.mask,"p-component-overlay-leave")},onLeave(){this.$emit("hide")},onAfterLeave(e){this.autoZIndex&&_r.clear(e),this.containerVisible=!1,this.unbindDocumentState(),this.unbindGlobalListeners()},onMaskClick(e){this.dismissableMask&&this.closable&&this.modal&&this.mask===e.target&&this.close()},focus(){let e=this.container.querySelector("[autofocus]");e&&e.focus()},maximize(e){this.maximized?(this.maximized=!1,this.$emit("unmaximize",e)):(this.maximized=!0,this.$emit("maximize",e)),this.modal||(this.maximized?He.addClass(document.body,"p-overflow-hidden"):He.removeClass(document.body,"p-overflow-hidden"))},enableDocumentSettings(){(this.modal||this.maximizable&&this.maximized)&&He.addClass(document.body,"p-overflow-hidden")},unbindDocumentState(){(this.modal||this.maximizable&&this.maximized)&&He.removeClass(document.body,"p-overflow-hidden")},onKeyDown(e){if(e.which===9){e.preventDefault();let t=He.getFocusableElements(this.container);if(t&&t.length>0)if(!document.activeElement)t[0].focus();else{let n=t.indexOf(document.activeElement);e.shiftKey?n==-1||n===0?t[t.length-1].focus():t[n-1].focus():n==-1||n===t.length-1?t[0].focus():t[n+1].focus()}}else e.which===27&&this.closeOnEscape&&this.close()},bindDocumentKeyDownListener(){this.documentKeydownListener||(this.documentKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.documentKeydownListener))},unbindDocumentKeyDownListener(){this.documentKeydownListener&&(window.document.removeEventListener("keydown",this.documentKeydownListener),this.documentKeydownListener=null)},getPositionClass(){const t=["left","right","top","topleft","topright","bottom","bottomleft","bottomright"].find(n=>n===this.position);return t?`p-dialog-${t}`:""},containerRef(e){this.container=e},maskRef(e){this.mask=e},createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let t in this.breakpoints)e+=`
                        @media screen and (max-width: ${t}) {
                            .p-dialog[${this.attributeSelector}] {
                                width: ${this.breakpoints[t]} !important;
                            }
                        }
                    `;this.styleElement.innerHTML=e}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)},initDrag(e){He.hasClass(e.target,"p-dialog-header-icon")||He.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",He.addClass(document.body,"p-unselectable-text"))},bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.closeOnEscape&&this.closable&&this.bindDocumentKeyDownListener()},unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentKeyDownListener()},bindDocumentDragListener(){this.documentDragListener=e=>{if(this.dragging){let t=He.getOuterWidth(this.container),n=He.getOuterHeight(this.container),i=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=this.container.getBoundingClientRect(),o=s.left+i,a=s.top+r,l=He.getViewport();this.container.style.position="fixed",this.keepInViewport?(o>=this.minX&&o+t<l.width&&(this.lastPageX=e.pageX,this.container.style.left=o+"px"),a>=this.minY&&a+n<l.height&&(this.lastPageY=e.pageY,this.container.style.top=a+"px")):(this.lastPageX=e.pageX,this.container.style.left=o+"px",this.lastPageY=e.pageY,this.container.style.top=a+"px")}},window.document.addEventListener("mousemove",this.documentDragListener)},unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)},bindDocumentDragEndListener(){this.documentDragEndListener=e=>{this.dragging&&(this.dragging=!1,He.removeClass(document.body,"p-unselectable-text"),this.$emit("dragend",e))},window.document.addEventListener("mouseup",this.documentDragEndListener)},unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}},computed:{maskClass(){return["p-dialog-mask",{"p-component-overlay p-component-overlay-enter":this.modal},this.getPositionClass()]},dialogClass(){return["p-dialog p-component",{"p-dialog-rtl":this.rtl,"p-dialog-maximized":this.maximizable&&this.maximized,"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},maximizeIconClass(){return["p-dialog-header-maximize-icon pi",{"pi-window-maximize":!this.maximized,"pi-window-minimize":this.maximized}]},ariaId(){return qu()},ariaLabelledById(){return this.header!=null?this.ariaId+"_header":null},attributeSelector(){return qu()},contentStyleClass(){return["p-dialog-content",this.contentClass]},appendDisabled(){return this.appendTo==="self"},appendTarget(){return this.appendDisabled?null:this.appendTo}},directives:{ripple:Fh}};const FU=["aria-labelledby","aria-modal"],BU=["id"],VU={class:"p-dialog-header-icons"},UU=["aria-label"],zU=Ee("span",{class:"p-dialog-header-close-icon pi pi-times"},null,-1),HU=[zU],WU={key:1,class:"p-dialog-footer"};function GU(e,t,n,i,r,s){const o=Nh("ripple");return we(),bt(Yp,{to:s.appendTarget,disabled:s.appendDisabled},[r.containerVisible?(we(),De("div",{key:0,ref:s.maskRef,class:kt(s.maskClass),onClick:t[3]||(t[3]=(...a)=>s.onMaskClick&&s.onMaskClick(...a))},[tt(n_,{name:"p-dialog",onBeforeEnter:s.onBeforeEnter,onEnter:s.onEnter,onBeforeLeave:s.onBeforeLeave,onLeave:s.onLeave,onAfterLeave:s.onAfterLeave,appear:""},{default:Rt(()=>[n.visible?(we(),De("div",Co({key:0,ref:s.containerRef,class:s.dialogClass},e.$attrs,{role:"dialog","aria-labelledby":s.ariaLabelledById,"aria-modal":n.modal}),[n.showHeader?(we(),De("div",{key:0,class:"p-dialog-header",onMousedown:t[2]||(t[2]=(...a)=>s.initDrag&&s.initDrag(...a))},[On(e.$slots,"header",{},()=>[n.header?(we(),De("span",{key:0,id:s.ariaLabelledById,class:"p-dialog-title"},Je(n.header),9,BU)):_t("",!0)]),Ee("div",VU,[n.maximizable?Mi((we(),De("button",{key:0,class:"p-dialog-header-icon p-dialog-header-maximize p-link",onClick:t[0]||(t[0]=(...a)=>s.maximize&&s.maximize(...a)),type:"button",tabindex:"-1"},[Ee("span",{class:kt(s.maximizeIconClass)},null,2)])),[[o]]):_t("",!0),n.closable?Mi((we(),De("button",{key:1,class:"p-dialog-header-icon p-dialog-header-close p-link",onClick:t[1]||(t[1]=(...a)=>s.close&&s.close(...a)),"aria-label":n.ariaCloseLabel,type:"button"},HU,8,UU)),[[o]]):_t("",!0)])],32)):_t("",!0),Ee("div",{class:kt(s.contentStyleClass),style:Ba(n.contentStyle)},[On(e.$slots,"default")],6),n.footer||e.$slots.footer?(we(),De("div",WU,[On(e.$slots,"footer",{},()=>[Ki(Je(n.footer),1)])])):_t("",!0)],16,FU)):_t("",!0)]),_:3},8,["onBeforeEnter","onEnter","onBeforeLeave","onLeave","onAfterLeave"])],2)):_t("",!0)],8,["to","disabled"])}function $U(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var jU=`
.p-dialog-mask {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    pointer-events: none;
}
.p-dialog-mask.p-component-overlay {
    pointer-events: auto;
}
.p-dialog {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    pointer-events: auto;
    max-height: 90%;
    -webkit-transform: scale(1);
            transform: scale(1);
}
.p-dialog-content {
    overflow-y: auto;
}
.p-dialog-header {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: justify;
        -ms-flex-pack: justify;
            justify-content: space-between;
    -ms-flex-negative: 0;
        flex-shrink: 0;
}
.p-dialog-footer {
    -ms-flex-negative: 0;
        flex-shrink: 0;
}
.p-dialog .p-dialog-header-icons {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
}
.p-dialog .p-dialog-header-icon {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    overflow: hidden;
    position: relative;
}

/* Fluid */
.p-fluid .p-dialog-footer .p-button {
    width: auto;
}

/* Animation */
/* Center */
.p-dialog-enter-active {
    -webkit-transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
    transition: all 150ms cubic-bezier(0, 0, 0.2, 1);
}
.p-dialog-leave-active {
    -webkit-transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);
    transition: all 150ms cubic-bezier(0.4, 0.0, 0.2, 1);
}
.p-dialog-enter-from,
.p-dialog-leave-to {
    opacity: 0;
    -webkit-transform: scale(0.7);
            transform: scale(0.7);
}

/* Top, Bottom, Left, Right, Top* and Bottom* */
.p-dialog-top .p-dialog,
.p-dialog-bottom .p-dialog,
.p-dialog-left .p-dialog,
.p-dialog-right .p-dialog,
.p-dialog-topleft .p-dialog,
.p-dialog-topright .p-dialog,
.p-dialog-bottomleft .p-dialog,
.p-dialog-bottomright .p-dialog {
    margin: .75rem;
    -webkit-transform: translate3d(0px, 0px, 0px);
            transform: translate3d(0px, 0px, 0px);
}
.p-dialog-top .p-dialog-enter-active,
.p-dialog-top .p-dialog-leave-active,
.p-dialog-bottom .p-dialog-enter-active,
.p-dialog-bottom .p-dialog-leave-active,
.p-dialog-left .p-dialog-enter-active,
.p-dialog-left .p-dialog-leave-active,
.p-dialog-right .p-dialog-enter-active,
.p-dialog-right .p-dialog-leave-active,
.p-dialog-topleft .p-dialog-enter-active,
.p-dialog-topleft .p-dialog-leave-active,
.p-dialog-topright .p-dialog-enter-active,
.p-dialog-topright .p-dialog-leave-active,
.p-dialog-bottomleft .p-dialog-enter-active,
.p-dialog-bottomleft .p-dialog-leave-active,
.p-dialog-bottomright .p-dialog-enter-active,
.p-dialog-bottomright .p-dialog-leave-active {
    -webkit-transition: all .3s ease-out;
    transition: all .3s ease-out;
}
.p-dialog-top .p-dialog-enter-from,
.p-dialog-top .p-dialog-leave-to {
    -webkit-transform: translate3d(0px, -100%, 0px);
            transform: translate3d(0px, -100%, 0px);
}
.p-dialog-bottom .p-dialog-enter-from,
.p-dialog-bottom .p-dialog-leave-to {
    -webkit-transform: translate3d(0px, 100%, 0px);
            transform: translate3d(0px, 100%, 0px);
}
.p-dialog-left .p-dialog-enter-from,
.p-dialog-left .p-dialog-leave-to,
.p-dialog-topleft .p-dialog-enter-from,
.p-dialog-topleft .p-dialog-leave-to,
.p-dialog-bottomleft .p-dialog-enter-from,
.p-dialog-bottomleft .p-dialog-leave-to {
    -webkit-transform: translate3d(-100%, 0px, 0px);
            transform: translate3d(-100%, 0px, 0px);
}
.p-dialog-right .p-dialog-enter-from,
.p-dialog-right .p-dialog-leave-to,
.p-dialog-topright .p-dialog-enter-from,
.p-dialog-topright .p-dialog-leave-to,
.p-dialog-bottomright .p-dialog-enter-from,
.p-dialog-bottomright .p-dialog-leave-to {
    -webkit-transform: translate3d(100%, 0px, 0px);
            transform: translate3d(100%, 0px, 0px);
}

/* Maximize */
.p-dialog-maximized {
    -webkit-transition: none;
    transition: none;
    -webkit-transform: none;
            transform: none;
    width: 100vw !important;
    height: 100vh !important;
    top: 0px !important;
    left: 0px !important;
    max-height: 100%;
    height: 100%;
}
.p-dialog-maximized .p-dialog-content {
    -webkit-box-flex: 1;
        -ms-flex-positive: 1;
            flex-grow: 1;
}

/* Position */
.p-dialog-left {
    -webkit-box-pack: start;
        -ms-flex-pack: start;
            justify-content: flex-start;
}
.p-dialog-right {
    -webkit-box-pack: end;
        -ms-flex-pack: end;
            justify-content: flex-end;
}
.p-dialog-top {
    -webkit-box-align: start;
        -ms-flex-align: start;
            align-items: flex-start;
}
.p-dialog-topleft {
    -webkit-box-pack: start;
        -ms-flex-pack: start;
            justify-content: flex-start;
    -webkit-box-align: start;
        -ms-flex-align: start;
            align-items: flex-start;
}
.p-dialog-topright {
    -webkit-box-pack: end;
        -ms-flex-pack: end;
            justify-content: flex-end;
    -webkit-box-align: start;
        -ms-flex-align: start;
            align-items: flex-start;
}
.p-dialog-bottom {
    -webkit-box-align: end;
        -ms-flex-align: end;
            align-items: flex-end;
}
.p-dialog-bottomleft {
    -webkit-box-pack: start;
        -ms-flex-pack: start;
            justify-content: flex-start;
    -webkit-box-align: end;
        -ms-flex-align: end;
            align-items: flex-end;
}
.p-dialog-bottomright {
    -webkit-box-pack: end;
        -ms-flex-pack: end;
            justify-content: flex-end;
    -webkit-box-align: end;
        -ms-flex-align: end;
            align-items: flex-end;
}
.p-confirm-dialog .p-dialog-content {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
}
`;$U(jU);VA.render=GU;const qU={components:{PrimeDialog:VA},setup(){const{offlineReady:e,needRefresh:t,updateServiceWorker:n}=DU(),i=st(!1),r=async()=>{e.value=!1,t.value=!1,i.value=!1};dn(t,o=>i.value=o,{immediate:!0});function s(){"Notification"in window?Notification.permission==="granted"?console.log("Notifications are enabled"):Notification.permission!=="denied"?Notification.requestPermission().then(o=>{console.log(o==="granted"?"Notifications accepted!":"Notifications denied!")}):console.log("Notifications are disabled"):console.log("Notifications are not supported")}return Tr(async()=>{s()}),{dialogDisaplyed:i,offlineReady:e,needRefresh:t,updateServiceWorker:n,close:r}}},KU=Ee("p",null,"Doupo appka m\xE1 nov\xFD fi\u010Dury, aktualizuj, aby se ti uk\xE1zaly!",-1),XU=Ki("Aktualizovat"),YU=Ki("Zav\u0159\xEDt");function ZU(e,t,n,i,r,s){const o=nt("prime-button"),a=nt("prime-dialog");return we(),bt(a,{visible:i.dialogDisaplyed,"onUpdate:visible":t[2]||(t[2]=l=>i.dialogDisaplyed=l),header:"P\u0159ibyly nov\xFD v\u011Bci",modal:!0,class:"p-mx-2"},{footer:Rt(()=>[tt(o,{onClick:t[0]||(t[0]=l=>i.updateServiceWorker())},{default:Rt(()=>[XU]),_:1}),tt(o,{class:"p-button-secondary",onClick:t[1]||(t[1]=l=>i.close())},{default:Rt(()=>[YU]),_:1})]),default:Rt(()=>[KU]),_:1},8,["visible"])}var JU=Ht(qU,[["render",ZU]]),QU="/logo.png";const ez={components:{DopeReloadPrompt:JU},setup(){const e=Xi(),t=Qe(()=>e.getters["layout/isLoading"]({type:"fullscreen"})),n=Qe(()=>e.getters["layout/isLoading"]());return{fullscreenLoading:t,contentLoading:n}}},tz=e=>(ek("data-v-5824686a"),e=e(),tk(),e),nz={class:"p-component header"},iz=tz(()=>Ee("footer",null,null,-1));function rz(e,t,n,i,r,s){const o=nt("prime-block-ui"),a=nt("prime-progress-spinner"),l=nt("prime-progress-bar"),c=nt("prime-toast"),h=nt("dope-reload-prompt");return we(),De(It,null,[Ee("aside",null,[tt(o,{blocked:i.fullscreenLoading,"full-screen":!0},null,8,["blocked"]),i.fullscreenLoading?(we(),bt(a,{key:0,"animation-duration":"2s","stroke-width":"4",class:"overlayspinner"})):_t("",!0),i.contentLoading?(we(),bt(l,{key:1,mode:"indeterminate",class:"progressbar"})):_t("",!0),tt(c,{position:"top-center"}),tt(h)]),Ee("header",null,[Ee("div",nz,[Ee("img",{src:QU,class:"logo",alt:"Doupe Doupo App",onClick:t[0]||(t[0]=u=>e.$router.push({name:e.$router.currentRoute.value.name=="chat"?"home":"chat"}))}),Ee("h1",null,Je(e.$t(`navigation.${e.$router.currentRoute.value.name.replace("."," ")}`)),1)])]),Ee("main",null,[On(e.$slots,"default",{},void 0,!0)]),iz],64)}var $r=Ht(ez,[["render",rz],["__scopeId","data-v-5824686a"]]),sz=[{path:"/",name:"home",component:IU,meta:{layout:$r,requiresAuth:!0}}];function oz(){const e=st({}),t=Xi(),{makeRequest:n}=hm(),{auth:i,db:r}=dm();async function s({name:o,title:a=""}){await n({actions:async()=>{const l=i.getCurrentUser().uid;await r.updateRecord(r.tables.USERS,l,{name:o,title:a}),t.commit("auth/SET_AUTH",{name:o,title:a}),(await r.getRecords(r.tables.POSTS,{where:["userId","==",l]})).forEach(d=>{r.updateRecord(r.tables.POSTS,d.id,{userName:o})}),(await r.getRecords(r.tables.COMMENTS,{where:["userId","==",l]})).forEach(d=>{r.updateRecord(r.tables.COMMENTS,d.id,{userName:o})}),(await r.getRecords(r.tables.PLANNER,{where:["userId","==",l]})).forEach(d=>{r.updateRecord(r.tables.PLANNER,d.id,{userName:o})})},messages:{success:"users.user updated",error:"users.error updating user"}})}return{user:e,updateUser:s}}const az={setup(){const e=Xi(),t=Qe(()=>e.state.auth.user),{updateUser:n}=oz(),i=st({name:t.value.name,title:t.value.title});return{user:t,newUser:i,updateUser:n}}},lz=Ki("Nastaven\xED"),cz={id:"settings"},uz={class:"col1"},hz=Ee("h3",null,"Nasteven\xED (TODO)",-1),dz=Ee("p",null,"Uprav svoje \xFAdaje",-1),fz=Ee("label",{for:"name"},"Jm\xE9no",-1),pz=Ee("label",{for:"title"},"Hodnost",-1);function mz(e,t,n,i,r,s){const o=nt("prime-divider"),a=nt("prime-card");return we(),bt(a,null,{title:Rt(()=>[lz,tt(o)]),content:Rt(()=>[Ee("section",cz,[Ee("div",uz,[hz,dz,Ee("form",{onSubmit:t[3]||(t[3]=i_(()=>{},["prevent"]))},[fz,Mi(Ee("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=l=>i.newUser.name=l),type:"text"},null,512),[[Hu,i.newUser.name,void 0,{trim:!0}]]),pz,Mi(Ee("input",{id:"title","onUpdate:modelValue":t[1]||(t[1]=l=>i.newUser.title=l),type:"text"},null,512),[[Hu,i.newUser.title,void 0,{trim:!0}]]),Ee("button",{class:"button",onClick:t[2]||(t[2]=l=>i.updateUser(i.newUser))},"Upravit profil")],32)])])]),footer:Rt(()=>[]),_:1})}var gz=Ht(az,[["render",mz]]);function vz(){const e=GM(),{makeRequest:t}=hm(),{auth:n,db:i}=dm(),r=Xi();async function s(c){await t({actions:async()=>{const{user:h}=await n.signIn(c.email,c.password),u=await i.getRecord(i.tables.USERS,h.uid),d=i.getRecordData(u);d.id=h.uid,r.commit("auth/SET_AUTH",d),e.push({name:"home"})},messages:{success:"auth.successful sign in",error:"auth.error while signing in"}})}async function o(c){await t({actions:async()=>{const{user:h}=await n.signUp(c.email,c.password);await i.setRecord(i.tables.USERS,h.uid,{name:c.name,title:c.title});const u=await i.getRecord(i.tables.USERS,h.uid);r.commit("auth/SET_AUTH",i.getRecordData(u)),e.push({name:"home"})},messages:{success:"auth.successful sign up",error:"auth.error while signing up"}})}async function a(){await t({actions:async()=>{await n.signOut(),r.commit("auth/PURGE_AUTH"),e.push({name:"home"})},messages:{success:"auth.successful sign out",error:"auth.error while signing out"}})}async function l(c){await t({actions:async()=>{await n.resetPassword(c)},messages:{success:"auth.check your mail",error:"auth.error while reseting password"}})}return{signIn:s,signUp:o,signOut:a,resetPassword:l}}var UA={name:"TabMenu",emits:["update:activeIndex","tab-change"],props:{model:{type:Array,default:null},exact:{type:Boolean,default:!0},activeIndex:{type:Number,default:0}},timeout:null,data(){return{d_activeIndex:this.activeIndex}},mounted(){this.updateInkBar()},updated(){this.updateInkBar()},beforeUnmount(){clearTimeout(this.timeout)},watch:{$route(){this.timeout=setTimeout(()=>this.updateInkBar(),50)},activeIndex(e){this.d_activeIndex=e}},methods:{onItemClick(e,t,n,i){if(this.disabled(t)){e.preventDefault();return}t.command&&t.command({originalEvent:e,item:t}),t.to&&i&&i(e),n!==this.d_activeIndex&&(this.d_activeIndex=n,this.$emit("update:activeIndex",this.d_activeIndex)),this.$emit("tab-change",{originalEvent:e,index:n})},getItemClass(e,t){return["p-tabmenuitem",e.class,{"p-highlight":this.d_activeIndex===t,"p-disabled":this.disabled(e)}]},getRouteItemClass(e,t,n){return["p-tabmenuitem",e.class,{"p-highlight":this.exact?n:t,"p-disabled":this.disabled(e)}]},getItemIcon(e){return["p-menuitem-icon",e.icon]},visible(e){return typeof e.visible=="function"?e.visible():e.visible!==!1},disabled(e){return typeof e.disabled=="function"?e.disabled():e.disabled},label(e){return typeof e.label=="function"?e.label():e.label},updateInkBar(){let e=this.$refs.nav.children,t=!1;for(let n=0;n<e.length;n++){let i=e[n];He.hasClass(i,"p-highlight")&&(this.$refs.inkbar.style.width=He.getWidth(i)+"px",this.$refs.inkbar.style.left=He.getOffset(i).left-He.getOffset(this.$refs.nav).left+"px",t=!0)}t||(this.$refs.inkbar.style.width="0px",this.$refs.inkbar.style.left="0px")}},directives:{ripple:Fh}};const yz={class:"p-tabmenu p-component"},_z={ref:"nav",class:"p-tabmenu-nav p-reset",role:"tablist"},bz=["href","onClick"],wz={class:"p-menuitem-text"},xz=["href","target","onClick","tabindex"],Ez={class:"p-menuitem-text"},Sz={ref:"inkbar",class:"p-tabmenu-ink-bar"};function Tz(e,t,n,i,r,s){const o=nt("router-link"),a=Nh("ripple");return we(),De("div",yz,[Ee("ul",_z,[(we(!0),De(It,null,Ur(n.model,(l,c)=>(we(),De(It,{key:s.label(l)+"_"+c.toString()},[l.to&&!s.disabled(l)?(we(),bt(o,{key:0,to:l.to,custom:""},{default:Rt(({navigate:h,href:u,isActive:d,isExactActive:f})=>[s.visible(l)?(we(),De("li",{key:0,class:kt(s.getRouteItemClass(l,d,f)),style:Ba(l.style),role:"tab"},[e.$slots.item?(we(),bt(Es(e.$slots.item),{key:1,item:l},null,8,["item"])):Mi((we(),De("a",{key:0,href:u,class:"p-menuitem-link",onClick:p=>s.onItemClick(p,l,c,h),role:"presentation"},[l.icon?(we(),De("span",{key:0,class:kt(s.getItemIcon(l))},null,2)):_t("",!0),Ee("span",wz,Je(s.label(l)),1)],8,bz)),[[a]])],6)):_t("",!0)]),_:2},1032,["to"])):s.visible(l)?(we(),De("li",{key:1,class:kt(s.getItemClass(l,c)),role:"tab"},[e.$slots.item?(we(),bt(Es(e.$slots.item),{key:1,item:l},null,8,["item"])):Mi((we(),De("a",{key:0,href:l.url,class:"p-menuitem-link",target:l.target,onClick:h=>s.onItemClick(h,l,c),role:"presentation",tabindex:s.disabled(l)?null:"0"},[l.icon?(we(),De("span",{key:0,class:kt(s.getItemIcon(l))},null,2)):_t("",!0),Ee("span",Ez,Je(s.label(l)),1)],8,xz)),[[a]])],2)):_t("",!0)],64))),128)),Ee("li",Sz,null,512)],512)])}function Mz(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var Az=`
.p-tabmenu {
    overflow-x: auto;
}
.p-tabmenu-nav {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    margin: 0;
    padding: 0;
    list-style-type: none;
    -ms-flex-wrap: nowrap;
        flex-wrap: nowrap;
}
.p-tabmenu-nav a {
    cursor: pointer;
    -webkit-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    position: relative;
    text-decoration: none;
    text-decoration: none;
    overflow: hidden;
}
.p-tabmenu-nav a:focus {
    z-index: 1;
}
.p-tabmenu-nav .p-menuitem-text {
    line-height: 1;
}
.p-tabmenu-ink-bar {
    display: none;
    z-index: 1;
}
.p-tabmenu::-webkit-scrollbar {
    display: none;
}
`;Mz(Az);UA.render=Tz;const Cz={props:{data:{type:Object,default:()=>{}},valid:{type:Boolean,default:!1}},emits:["update:data","update:valid"],setup(e,{emit:t}){const n=st(!1),i=st({email:"",password:""});return _c(()=>{t("update:data",i.value),t("update:valid",n.value)}),{credentials:i,isFormValid:n}}};function Iz(e,t,n,i,r,s){const o=nt("dope-form-field"),a=nt("dope-form");return we(),bt(a,{isValid:i.isFormValid,"onUpdate:isValid":t[2]||(t[2]=l=>i.isFormValid=l)},{default:Rt(()=>[tt(o,{modelValue:i.credentials.email,"onUpdate:modelValue":t[0]||(t[0]=l=>i.credentials.email=l),label:e.$t("auth.email"),name:"email",rules:"required|email","deep-props":{type:"email",placeholder:"you@email.com"}},null,8,["modelValue","label","deep-props"]),tt(o,{modelValue:i.credentials.password,"onUpdate:modelValue":t[1]||(t[1]=l=>i.credentials.password=l),label:e.$t("auth.password"),name:"password",rules:"required|min:6","deep-props":{type:"password",placeholder:"******"}},null,8,["modelValue","label"])]),_:1},8,["isValid"])}var tE=Ht(Cz,[["render",Iz]]);const Rz={props:{data:{type:Object,default:()=>{}},valid:{type:Boolean,default:!1}},emits:["update:data","update:valid"],setup(e,{emit:t}){const n=st(!1),i=st({name:"",email:"",title:"",password:""});return _c(()=>{t("update:data",i.value),t("update:valid",n)}),{credentials:i,isFormValid:n}}};function Lz(e,t,n,i,r,s){const o=nt("dope-form-field"),a=nt("dope-form");return we(),bt(a,{isValid:i.isFormValid,"onUpdate:isValid":t[3]||(t[3]=l=>i.isFormValid=l)},{default:Rt(()=>[tt(o,{modelValue:i.credentials.name,"onUpdate:modelValue":t[0]||(t[0]=l=>i.credentials.name=l),label:e.$t("auth.username"),name:"name",rules:"required","deep-props":{type:"text",placeholder:"your name"}},null,8,["modelValue","label"]),tt(o,{modelValue:i.credentials.email,"onUpdate:modelValue":t[1]||(t[1]=l=>i.credentials.email=l),label:e.$t("auth.email"),name:"email",rules:"required|email","deep-props":{type:"email",placeholder:"you@email.com"}},null,8,["modelValue","label","deep-props"]),tt(o,{modelValue:i.credentials.password,"onUpdate:modelValue":t[2]||(t[2]=l=>i.credentials.password=l),label:e.$t("auth.password"),name:"password",rules:"required|min:6","deep-props":{type:"password",placeholder:"******"}},null,8,["modelValue","label"])]),_:1},8,["isValid"])}var nE=Ht(Rz,[["render",Lz]]);const Pz={props:{data:{type:Object,default:()=>{}},valid:{type:Boolean,default:!1}},emits:["update:data","update:valid"],setup(e,{emit:t}){const n=st(!1),i=st({email:""});return _c(()=>{t("update:data",i.value),t("update:valid",n.value)}),{credentials:i,isFormValid:n}}};function Nz(e,t,n,i,r,s){const o=nt("dope-form-field"),a=nt("dope-form");return we(),bt(a,{isValid:i.isFormValid,"onUpdate:isValid":t[1]||(t[1]=l=>i.isFormValid=l)},{default:Rt(()=>[tt(o,{modelValue:i.credentials.email,"onUpdate:modelValue":t[0]||(t[0]=l=>i.credentials.email=l),label:e.$t("auth.email"),name:"email",rules:"required|email","deep-props":{type:"email",placeholder:"you@email.com"}},null,8,["modelValue","label","deep-props"])]),_:1},8,["isValid"])}var iE=Ht(Pz,[["render",Nz]]);const kz={components:{PrimeTabMenu:UA,DopeAuthSignIn:tE,DopeAuthSignUp:nE,DopeAuthResetPassword:iE},setup(){const{signIn:e,signUp:t,signOut:n,resetPassword:i}=vz(),r=Xi(),s=Qe(()=>r.getters["auth/isLogged"]),o=st(null),a=st(!1),l=st(null),c=st([{label:"P\u0159ihl\xE1sit",class:"active",component:ca(tE),command:f=>u(f.item)},{label:"Registrovat",component:ca(nE),command:f=>u(f.item)},{label:"Reset",component:ca(iE),command:f=>u(f.item)}]),h=st(sn({},c.value[0])),u=f=>{h.value=f,c.value.forEach(p=>p.class=""),f.class="active"};return{signOut:n,tabItems:c,activeTab:h,isFormValid:a,formData:l,submitForm:async()=>{switch(h.value.label){case"P\u0159ihl\xE1sit":e(l.value);break;case"Registrovat":t(l.value);break;case"Reset":i(l.value.email);break}},formComponent:o,isSignedIn:s}}};function Oz(e,t,n,i,r,s){const o=nt("prime-tab-menu"),a=nt("prime-button"),l=nt("prime-card");return we(),bt(l,null,{title:Rt(()=>[i.isSignedIn?_t("",!0):(we(),bt(o,{key:0,model:i.tabItems},null,8,["model"]))]),content:Rt(()=>[(we(),bt(Es(!i.isSignedIn&&i.activeTab.component?i.activeTab.component:"div"),{ref:"formComponent",valid:i.isFormValid,"onUpdate:valid":t[0]||(t[0]=c=>i.isFormValid=c),data:i.formData,"onUpdate:data":t[1]||(t[1]=c=>i.formData=c),class:"p-mt-3"},null,40,["valid","data"]))]),footer:Rt(()=>[i.isSignedIn?(we(),bt(a,{key:0,label:"Sign out",onClick:t[2]||(t[2]=c=>i.signOut())})):(we(),bt(a,{key:1,disabled:!i.isFormValid,icon:i.activeTab.icon,label:i.activeTab.label,onClick:i.submitForm},null,8,["disabled","icon","label","onClick"]))]),_:1})}var zA=Ht(kz,[["render",Oz],["__scopeId","data-v-d232cd82"]]);const Dz={components:{DopeAuth:zA}},Fz=Ki(" Login plx ");function Bz(e,t,n,i,r,s){const o=nt("prime-divider"),a=nt("dope-auth"),l=nt("prime-card");return we(),bt(l,null,{title:Rt(()=>[Fz,tt(o)]),content:Rt(()=>[tt(a)]),footer:Rt(()=>[]),_:1})}var Vz=Ht(Dz,[["render",Bz]]),Uz=function(e){return function(t){return!!t&&typeof t=="object"}(e)&&!function(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||function(i){return i.$$typeof===zz}(t)}(e)},zz=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function ru(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ql(Array.isArray(e)?[]:{},e,t):e}function Hz(e,t,n){return e.concat(t).map(function(i){return ru(i,n)})}function rE(e){return Object.keys(e).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(n){return t.propertyIsEnumerable(n)}):[]}(e))}function sE(e,t){try{return t in e}catch{return!1}}function Ql(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||Hz,n.isMergeableObject=n.isMergeableObject||Uz,n.cloneUnlessOtherwiseSpecified=ru;var i=Array.isArray(t);return i===Array.isArray(e)?i?n.arrayMerge(e,t,n):function(r,s,o){var a={};return o.isMergeableObject(r)&&rE(r).forEach(function(l){a[l]=ru(r[l],o)}),rE(s).forEach(function(l){(function(c,h){return sE(c,h)&&!(Object.hasOwnProperty.call(c,h)&&Object.propertyIsEnumerable.call(c,h))})(r,l)||(a[l]=sE(r,l)&&o.isMergeableObject(s[l])?function(c,h){if(!h.customMerge)return Ql;var u=h.customMerge(c);return typeof u=="function"?u:Ql}(l,o)(r[l],s[l],o):ru(s[l],o))}),a}(e,t,n):ru(t,n)}Ql.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return Ql(n,i,t)},{})};var Wz=Ql;function Gz(e){var t=(e=e||{}).storage||window&&window.localStorage,n=e.key||"vuex";function i(h,u){var d=u.getItem(h);try{return typeof d=="string"?JSON.parse(d):typeof d=="object"?d:void 0}catch{}}function r(){return!0}function s(h,u,d){return d.setItem(h,JSON.stringify(u))}function o(h,u){return Array.isArray(u)?u.reduce(function(d,f){return function(v,m,g,w){return!/^(__proto__|constructor|prototype)$/.test(m)&&((m=m.split?m.split("."):m.slice(0)).slice(0,-1).reduce(function(b,E){return b[E]=b[E]||{}},v)[m.pop()]=g),v}(d,f,(p=h,(p=((y=f).split?y.split("."):y).reduce(function(v,m){return v&&v[m]},p))===void 0?void 0:p));var p,y},{}):h}function a(h){return function(u){return h.subscribe(u)}}(e.assertStorage||function(){t.setItem("@@",1),t.removeItem("@@")})(t);var l,c=function(){return(e.getState||i)(n,t)};return e.fetchBeforeUse&&(l=c()),function(h){e.fetchBeforeUse||(l=c()),typeof l=="object"&&l!==null&&(h.replaceState(e.overwrite?l:Wz(h.state,l,{arrayMerge:e.arrayMerger||function(u,d){return d},clone:!1})),(e.rehydrated||function(){})(h)),(e.subscriber||a)(h)(function(u,d){(e.filter||r)(u)&&(e.setState||s)(n,(e.reducer||o)(d,e.paths),t)})}}const $z=()=>({user:{},roles:[],permissions:[]}),jz={hasPermission:e=>t=>e.roles.includes("admin")||e.permissions.includes(t),hasRole:e=>t=>e.roles.includes("admin")||e.roles.includes(t),isLogged:e=>"name"in e.user},qz={},Kz={SET_AUTH(e,t){e.user=mV(t,["name","title","id"]),e.roles=t.roles||["ADMIN"],e.permissions=t.permissions||["TEST"]},PURGE_AUTH(e){e.user={},e.roles=[],e.permissions=[]}};var Xz={namespaced:!0,state:$z,getters:jz,actions:qz,mutations:Kz};const Yz=()=>({loading:{}}),Zz={isLoading:e=>({type:t="default"}={})=>!!e.loading[t]&&e.loading[t]>0},Jz={startLoading({commit:e,state:t},{type:n="default"}={}){var r;let i=(r=t.loading[n])!=null?r:0;e("SET_LOADING",{loading:++i,type:n})},finishLoading({commit:e,state:t},{type:n="default"}={}){var r;let i=(r=t.loading[n])!=null?r:0;e("SET_LOADING",{loading:--i,type:n})}},Qz={SET_LOADING(e,t){e.loading[t.type]=t.loading}};var eH={namespaced:!0,state:Yz,getters:Zz,actions:Jz,mutations:Qz};const tH=_V({module:"locale",state:{lang:TV}}),nH={},iH={},rH={SET_LANG(e,{lang:t}){e.lang=t}};var sH={namespaced:!0,state:tH,getters:nH,actions:iH,mutations:rH},Ku=QF({modules:{auth:Xz,layout:eH,locale:sH},plugins:[Gz({paths:["auth"]})]}),oH=[{path:"/settings",name:"settings.list",component:gz,meta:{requiresAuth:!0,layout:$r},beforeEnter:()=>Ku.getters["auth/hasPermission"]("TEST")},{path:"/settings/login",name:"settings.login",component:Vz,meta:{layout:$r}}];function wd(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $t={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,r,s){function o(c,h){if(!r[c]){if(!i[c]){var u=typeof wd=="function"&&wd;if(!h&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}var d=r[c]={exports:{}};i[c][0].call(d.exports,function(f){var p=i[c][1][f];return o(p||f)},d,d.exports,n,i,r,s)}return r[c].exports}for(var a=typeof wd=="function"&&wd,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,i,r){i.exports={name:"cannon",version:"0.6.2",description:"A lightweight 3D physics engine written in JavaScript.",homepage:"https://github.com/schteppe/cannon.js",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["cannon.js","cannon","physics","engine","3d"],main:"./build/cannon.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/cannon.js.git"},bugs:{url:"https://github.com/schteppe/cannon.js/issues"},licenses:[{type:"MIT"}],devDependencies:{jshint:"latest","uglify-js":"latest",nodeunit:"^0.9.0",grunt:"~0.4.0","grunt-contrib-jshint":"~0.1.1","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-concat":"~0.1.3","grunt-contrib-uglify":"^0.5.1","grunt-browserify":"^2.1.4","grunt-contrib-yuidoc":"^0.5.2",browserify:"*"},dependencies:{}}},{}],2:[function(n,i,r){i.exports={version:n("../package.json").version,AABB:n("./collision/AABB"),ArrayCollisionMatrix:n("./collision/ArrayCollisionMatrix"),Body:n("./objects/Body"),Box:n("./shapes/Box"),Broadphase:n("./collision/Broadphase"),Constraint:n("./constraints/Constraint"),ContactEquation:n("./equations/ContactEquation"),Narrowphase:n("./world/Narrowphase"),ConeTwistConstraint:n("./constraints/ConeTwistConstraint"),ContactMaterial:n("./material/ContactMaterial"),ConvexPolyhedron:n("./shapes/ConvexPolyhedron"),Cylinder:n("./shapes/Cylinder"),DistanceConstraint:n("./constraints/DistanceConstraint"),Equation:n("./equations/Equation"),EventTarget:n("./utils/EventTarget"),FrictionEquation:n("./equations/FrictionEquation"),GSSolver:n("./solver/GSSolver"),GridBroadphase:n("./collision/GridBroadphase"),Heightfield:n("./shapes/Heightfield"),HingeConstraint:n("./constraints/HingeConstraint"),LockConstraint:n("./constraints/LockConstraint"),Mat3:n("./math/Mat3"),Material:n("./material/Material"),NaiveBroadphase:n("./collision/NaiveBroadphase"),ObjectCollisionMatrix:n("./collision/ObjectCollisionMatrix"),Pool:n("./utils/Pool"),Particle:n("./shapes/Particle"),Plane:n("./shapes/Plane"),PointToPointConstraint:n("./constraints/PointToPointConstraint"),Quaternion:n("./math/Quaternion"),Ray:n("./collision/Ray"),RaycastVehicle:n("./objects/RaycastVehicle"),RaycastResult:n("./collision/RaycastResult"),RigidVehicle:n("./objects/RigidVehicle"),RotationalEquation:n("./equations/RotationalEquation"),RotationalMotorEquation:n("./equations/RotationalMotorEquation"),SAPBroadphase:n("./collision/SAPBroadphase"),SPHSystem:n("./objects/SPHSystem"),Shape:n("./shapes/Shape"),Solver:n("./solver/Solver"),Sphere:n("./shapes/Sphere"),SplitSolver:n("./solver/SplitSolver"),Spring:n("./objects/Spring"),Trimesh:n("./shapes/Trimesh"),Vec3:n("./math/Vec3"),Vec3Pool:n("./utils/Vec3Pool"),World:n("./world/World")}},{"../package.json":1,"./collision/AABB":3,"./collision/ArrayCollisionMatrix":4,"./collision/Broadphase":5,"./collision/GridBroadphase":6,"./collision/NaiveBroadphase":7,"./collision/ObjectCollisionMatrix":8,"./collision/Ray":9,"./collision/RaycastResult":10,"./collision/SAPBroadphase":11,"./constraints/ConeTwistConstraint":12,"./constraints/Constraint":13,"./constraints/DistanceConstraint":14,"./constraints/HingeConstraint":15,"./constraints/LockConstraint":16,"./constraints/PointToPointConstraint":17,"./equations/ContactEquation":19,"./equations/Equation":20,"./equations/FrictionEquation":21,"./equations/RotationalEquation":22,"./equations/RotationalMotorEquation":23,"./material/ContactMaterial":24,"./material/Material":25,"./math/Mat3":27,"./math/Quaternion":28,"./math/Vec3":30,"./objects/Body":31,"./objects/RaycastVehicle":32,"./objects/RigidVehicle":33,"./objects/SPHSystem":34,"./objects/Spring":35,"./shapes/Box":37,"./shapes/ConvexPolyhedron":38,"./shapes/Cylinder":39,"./shapes/Heightfield":40,"./shapes/Particle":41,"./shapes/Plane":42,"./shapes/Shape":43,"./shapes/Sphere":44,"./shapes/Trimesh":45,"./solver/GSSolver":46,"./solver/Solver":47,"./solver/SplitSolver":48,"./utils/EventTarget":49,"./utils/Pool":51,"./utils/Vec3Pool":54,"./world/Narrowphase":55,"./world/World":56}],3:[function(n,i,r){var s=n("../math/Vec3");n("../utils/Utils"),i.exports=o;function o(c){c=c||{},this.lowerBound=new s,c.lowerBound&&this.lowerBound.copy(c.lowerBound),this.upperBound=new s,c.upperBound&&this.upperBound.copy(c.upperBound)}var a=new s;o.prototype.setFromPoints=function(c,h,u,d){var f=this.lowerBound,p=this.upperBound,y=u;f.copy(c[0]),y&&y.vmult(f,f),p.copy(f);for(var v=1;v<c.length;v++){var m=c[v];y&&(y.vmult(m,a),m=a),m.x>p.x&&(p.x=m.x),m.x<f.x&&(f.x=m.x),m.y>p.y&&(p.y=m.y),m.y<f.y&&(f.y=m.y),m.z>p.z&&(p.z=m.z),m.z<f.z&&(f.z=m.z)}return h&&(h.vadd(f,f),h.vadd(p,p)),d&&(f.x-=d,f.y-=d,f.z-=d,p.x+=d,p.y+=d,p.z+=d),this},o.prototype.copy=function(c){return this.lowerBound.copy(c.lowerBound),this.upperBound.copy(c.upperBound),this},o.prototype.clone=function(){return new o().copy(this)},o.prototype.extend=function(c){var h=c.lowerBound.x;this.lowerBound.x>h&&(this.lowerBound.x=h);var u=c.upperBound.x;this.upperBound.x<u&&(this.upperBound.x=u);var h=c.lowerBound.y;this.lowerBound.y>h&&(this.lowerBound.y=h);var u=c.upperBound.y;this.upperBound.y<u&&(this.upperBound.y=u);var h=c.lowerBound.z;this.lowerBound.z>h&&(this.lowerBound.z=h);var u=c.upperBound.z;this.upperBound.z<u&&(this.upperBound.z=u)},o.prototype.overlaps=function(c){var h=this.lowerBound,u=this.upperBound,d=c.lowerBound,f=c.upperBound;return(d.x<=u.x&&u.x<=f.x||h.x<=f.x&&f.x<=u.x)&&(d.y<=u.y&&u.y<=f.y||h.y<=f.y&&f.y<=u.y)&&(d.z<=u.z&&u.z<=f.z||h.z<=f.z&&f.z<=u.z)},o.prototype.contains=function(c){var h=this.lowerBound,u=this.upperBound,d=c.lowerBound,f=c.upperBound;return h.x<=d.x&&u.x>=f.x&&h.y<=d.y&&u.y>=f.y&&h.z<=d.z&&u.z>=f.z},o.prototype.getCorners=function(c,h,u,d,f,p,y,v){var m=this.lowerBound,g=this.upperBound;c.copy(m),h.set(g.x,m.y,m.z),u.set(g.x,g.y,m.z),d.set(m.x,g.y,g.z),f.set(g.x,m.y,m.z),p.set(m.x,g.y,m.z),y.set(m.x,m.y,g.z),v.copy(g)};var l=[new s,new s,new s,new s,new s,new s,new s,new s];o.prototype.toLocalFrame=function(c,h){var u=l,d=u[0],f=u[1],p=u[2],y=u[3],v=u[4],m=u[5],g=u[6],w=u[7];this.getCorners(d,f,p,y,v,m,g,w);for(var b=0;b!==8;b++){var E=u[b];c.pointToLocal(E,E)}return h.setFromPoints(u)},o.prototype.toWorldFrame=function(c,h){var u=l,d=u[0],f=u[1],p=u[2],y=u[3],v=u[4],m=u[5],g=u[6],w=u[7];this.getCorners(d,f,p,y,v,m,g,w);for(var b=0;b!==8;b++){var E=u[b];c.pointToWorld(E,E)}return h.setFromPoints(u)}},{"../math/Vec3":30,"../utils/Utils":53}],4:[function(n,i,r){i.exports=s;function s(){this.matrix=[]}s.prototype.get=function(o,a){if(o=o.index,a=a.index,a>o){var l=a;a=o,o=l}return this.matrix[(o*(o+1)>>1)+a-1]},s.prototype.set=function(o,a,l){if(o=o.index,a=a.index,a>o){var c=a;a=o,o=c}this.matrix[(o*(o+1)>>1)+a-1]=l?1:0},s.prototype.reset=function(){for(var o=0,a=this.matrix.length;o!==a;o++)this.matrix[o]=0},s.prototype.setNumObjects=function(o){this.matrix.length=o*(o-1)>>1}},{}],5:[function(n,i,r){var s=n("../objects/Body"),o=n("../math/Vec3"),a=n("../math/Quaternion");n("../shapes/Shape"),n("../shapes/Plane"),i.exports=l;function l(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}l.prototype.collisionPairs=function(y,v,m){throw new Error("collisionPairs not implemented for this BroadPhase class!")};var c=s.STATIC|s.KINEMATIC;l.prototype.needBroadphaseCollision=function(y,v){return!((y.collisionFilterGroup&v.collisionFilterMask)===0||(v.collisionFilterGroup&y.collisionFilterMask)===0||((y.type&c)!==0||y.sleepState===s.SLEEPING)&&((v.type&c)!==0||v.sleepState===s.SLEEPING))},l.prototype.intersectionTest=function(y,v,m,g){this.useBoundingBoxes?this.doBoundingBoxBroadphase(y,v,m,g):this.doBoundingSphereBroadphase(y,v,m,g)};var h=new o;new o,new a,new o,l.prototype.doBoundingSphereBroadphase=function(y,v,m,g){var w=h;v.position.vsub(y.position,w);var b=Math.pow(y.boundingRadius+v.boundingRadius,2),E=w.norm2();E<b&&(m.push(y),g.push(v))},l.prototype.doBoundingBoxBroadphase=function(y,v,m,g){y.aabbNeedsUpdate&&y.computeAABB(),v.aabbNeedsUpdate&&v.computeAABB(),y.aabb.overlaps(v.aabb)&&(m.push(y),g.push(v))};var u={keys:[]},d=[],f=[];l.prototype.makePairsUnique=function(y,v){for(var m=u,g=d,w=f,b=y.length,E=0;E!==b;E++)g[E]=y[E],w[E]=v[E];y.length=0,v.length=0;for(var E=0;E!==b;E++){var S=g[E].id,k=w[E].id,O=S<k?S+","+k:k+","+S;m[O]=E,m.keys.push(O)}for(var E=0;E!==m.keys.length;E++){var O=m.keys.pop(),W=m[O];y.push(g[W]),v.push(w[W]),delete m[O]}},l.prototype.setWorld=function(y){};var p=new o;l.boundingSphereCheck=function(y,v){var m=p;return y.position.vsub(v.position,m),Math.pow(y.shape.boundingSphereRadius+v.shape.boundingSphereRadius,2)>m.norm2()},l.prototype.aabbQuery=function(y,v,m){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Plane":42,"../shapes/Shape":43}],6:[function(n,i,r){i.exports=l;var s=n("./Broadphase"),o=n("../math/Vec3"),a=n("../shapes/Shape");function l(h,u,d,f,p){s.apply(this),this.nx=d||10,this.ny=f||10,this.nz=p||10,this.aabbMin=h||new o(100,100,100),this.aabbMax=u||new o(-100,-100,-100);var y=this.nx*this.ny*this.nz;if(y<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=y,this.binLengths.length=y;for(var v=0;v<y;v++)this.bins[v]=[],this.binLengths[v]=0}l.prototype=new s,l.prototype.constructor=l;var c=new o;new o,l.prototype.collisionPairs=function(h,u,d){var f=h.numObjects(),p=h.bodies,Q=this.aabbMax,ne=this.aabbMin,y=this.nx,v=this.ny,m=this.nz,g=v*m,w=m,b=1,E=Q.x,S=Q.y,k=Q.z,O=ne.x,W=ne.y,U=ne.z,L=y/(E-O),D=v/(S-W),V=m/(k-U),ee=(E-O)/y,K=(S-W)/v,Z=(k-U)/m,H=Math.sqrt(ee*ee+K*K+Z*Z)*.5,B=a.types,te=B.SPHERE,ae=B.PLANE;B.BOX,B.COMPOUND,B.CONVEXPOLYHEDRON;for(var G=this.bins,le=this.binLengths,X=this.bins.length,J=0;J!==X;J++)le[J]=0;var T=Math.ceil,ne=Math.min,Q=Math.max;function oe(Oe,ht,At,yn,cn,Ii,Xt){var jt=(Oe-O)*L|0,Hn=(ht-W)*D|0,mn=(At-U)*V|0,Ri=T((yn-O)*L),vi=T((cn-W)*D),_n=T((Ii-U)*V);jt<0?jt=0:jt>=y&&(jt=y-1),Hn<0?Hn=0:Hn>=v&&(Hn=v-1),mn<0?mn=0:mn>=m&&(mn=m-1),Ri<0?Ri=0:Ri>=y&&(Ri=y-1),vi<0?vi=0:vi>=v&&(vi=v-1),_n<0?_n=0:_n>=m&&(_n=m-1),jt*=g,Hn*=w,mn*=b,Ri*=g,vi*=w,_n*=b;for(var Rn=jt;Rn<=Ri;Rn+=g)for(var Ar=Hn;Ar<=vi;Ar+=w)for(var Jr=mn;Jr<=_n;Jr+=b){var Vs=Rn+Ar+Jr;G[Vs][le[Vs]++]=Xt}}for(var J=0;J!==f;J++){var ie=p[J],$=ie.shape;switch($.type){case te:var A=ie.position.x,P=ie.position.y,x=ie.position.z,M=$.radius;oe(A-M,P-M,x-M,A+M,P+M,x+M,ie);break;case ae:$.worldNormalNeedsUpdate&&$.computeWorldNormal(ie.quaternion);var N=$.worldNormal,F=O+ee*.5-ie.position.x,R=W+K*.5-ie.position.y,C=U+Z*.5-ie.position.z,ce=c;ce.set(F,R,C);for(var Y=0,I=0;Y!==y;Y++,I+=g,ce.y=R,ce.x+=ee)for(var z=0,de=0;z!==v;z++,de+=w,ce.z=C,ce.y+=K)for(var pe=0,fe=0;pe!==m;pe++,fe+=b,ce.z+=Z)if(ce.dot(N)<H){var ve=I+de+fe;G[ve][le[ve]++]=ie}break;default:ie.aabbNeedsUpdate&&ie.computeAABB(),oe(ie.aabb.lowerBound.x,ie.aabb.lowerBound.y,ie.aabb.lowerBound.z,ie.aabb.upperBound.x,ie.aabb.upperBound.y,ie.aabb.upperBound.z,ie);break}}for(var J=0;J!==X;J++){var ye=le[J];if(ye>1)for(var Ne=G[J],Y=0;Y!==ye;Y++)for(var ie=Ne[Y],z=0;z!==Y;z++){var Ae=Ne[z];this.needBroadphaseCollision(ie,Ae)&&this.intersectionTest(ie,Ae,u,d)}}this.makePairsUnique(u,d)}},{"../math/Vec3":30,"../shapes/Shape":43,"./Broadphase":5}],7:[function(n,i,r){i.exports=a;var s=n("./Broadphase"),o=n("./AABB");function a(){s.apply(this)}a.prototype=new s,a.prototype.constructor=a,a.prototype.collisionPairs=function(l,c,h){var u=l.bodies,d=u.length,f,p,y,v;for(f=0;f!==d;f++)for(p=0;p!==f;p++)y=u[f],v=u[p],this.needBroadphaseCollision(y,v)&&this.intersectionTest(y,v,c,h)},new o,a.prototype.aabbQuery=function(l,c,h){h=h||[];for(var u=0;u<l.bodies.length;u++){var d=l.bodies[u];d.aabbNeedsUpdate&&d.computeAABB(),d.aabb.overlaps(c)&&h.push(d)}return h}},{"./AABB":3,"./Broadphase":5}],8:[function(n,i,r){i.exports=s;function s(){this.matrix={}}s.prototype.get=function(o,a){if(o=o.id,a=a.id,a>o){var l=a;a=o,o=l}return o+"-"+a in this.matrix},s.prototype.set=function(o,a,l){if(o=o.id,a=a.id,a>o){var c=a;a=o,o=c}l?this.matrix[o+"-"+a]=!0:delete this.matrix[o+"-"+a]},s.prototype.reset=function(){this.matrix={}},s.prototype.setNumObjects=function(o){}},{}],9:[function(n,i,r){i.exports=u;var s=n("../math/Vec3"),o=n("../math/Quaternion"),a=n("../math/Transform");n("../shapes/ConvexPolyhedron"),n("../shapes/Box");var l=n("../collision/RaycastResult"),c=n("../shapes/Shape"),h=n("../collision/AABB");function u(X,J){this.from=X?X.clone():new s,this.to=J?J.clone():new s,this._direction=new s,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=u.ANY,this.result=new l,this.hasHit=!1,this.callback=function(T){}}u.prototype.constructor=u,u.CLOSEST=1,u.ANY=2,u.ALL=4;var d=new h,f=[];u.prototype.intersectWorld=function(X,J){return this.mode=J.mode||u.ANY,this.result=J.result||new l,this.skipBackfaces=!!J.skipBackfaces,this.collisionFilterMask=typeof J.collisionFilterMask!="undefined"?J.collisionFilterMask:-1,this.collisionFilterGroup=typeof J.collisionFilterGroup!="undefined"?J.collisionFilterGroup:-1,J.from&&this.from.copy(J.from),J.to&&this.to.copy(J.to),this.callback=J.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(d),f.length=0,X.broadphase.aabbQuery(X,d,f),this.intersectBodies(f),this.hasHit};var p=new s,y=new s;u.pointInTriangle=v;function v(X,J,T,ne){ne.vsub(J,ae),T.vsub(J,p),X.vsub(J,y);var Q=ae.dot(ae),oe=ae.dot(p),ie=ae.dot(y),$=p.dot(p),A=p.dot(y),P,x;return(P=$*ie-oe*A)>=0&&(x=Q*A-oe*ie)>=0&&P+x<Q*$-oe*oe}var m=new s,g=new o;u.prototype.intersectBody=function(X,J){J&&(this.result=J,this._updateDirection());var T=this.checkCollisionResponse;if(!(T&&!X.collisionResponse)&&!((this.collisionFilterGroup&X.collisionFilterMask)===0||(X.collisionFilterGroup&this.collisionFilterMask)===0))for(var ne=m,Q=g,oe=0,ie=X.shapes.length;oe<ie;oe++){var $=X.shapes[oe];if(!(T&&!$.collisionResponse)&&(X.quaternion.mult(X.shapeOrientations[oe],Q),X.quaternion.vmult(X.shapeOffsets[oe],ne),ne.vadd(X.position,ne),this.intersectShape($,Q,ne,X),this.result._shouldStop))break}},u.prototype.intersectBodies=function(X,J){J&&(this.result=J,this._updateDirection());for(var T=0,ne=X.length;!this.result._shouldStop&&T<ne;T++)this.intersectBody(X[T])},u.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},u.prototype.intersectShape=function(X,J,T,ne){var Q=this.from,oe=le(Q,this._direction,T);if(!(oe>X.boundingSphereRadius)){var ie=this[X.type];ie&&ie.call(this,X,J,T,ne)}},new s,new s;var w=new s,b=new s,E=new s,S=new s;new s,new l,u.prototype.intersectBox=function(X,J,T,ne){return this.intersectConvex(X.convexPolyhedronRepresentation,J,T,ne)},u.prototype[c.types.BOX]=u.prototype.intersectBox,u.prototype.intersectPlane=function(X,J,T,ne){var Q=this.from,oe=this.to,ie=this._direction,$=new s(0,0,1);J.vmult($,$);var A=new s;Q.vsub(T,A);var P=A.dot($);oe.vsub(T,A);var x=A.dot($);if(!(P*x>0)&&!(Q.distanceTo(oe)<P)){var M=$.dot(ie);if(!(Math.abs(M)<this.precision)){var N=new s,F=new s,R=new s;Q.vsub(T,N);var C=-$.dot(N)/M;ie.scale(C,F),Q.vadd(F,R),this.reportIntersection($,R,X,ne,-1)}}},u.prototype[c.types.PLANE]=u.prototype.intersectPlane,u.prototype.getAABB=function(X){var J=this.to,T=this.from;X.lowerBound.x=Math.min(J.x,T.x),X.lowerBound.y=Math.min(J.y,T.y),X.lowerBound.z=Math.min(J.z,T.z),X.upperBound.x=Math.max(J.x,T.x),X.upperBound.y=Math.max(J.y,T.y),X.upperBound.z=Math.max(J.z,T.z)};var k={faceList:[0]};u.prototype.intersectHeightfield=function(X,J,T,ne){X.data,X.elementSize;var Q=new s,oe=new u(this.from,this.to);a.pointToLocalFrame(T,J,oe.from,oe.from),a.pointToLocalFrame(T,J,oe.to,oe.to);var ie=[],$=null,A=null,P=null,x=null,M=X.getIndexOfPosition(oe.from.x,oe.from.y,ie,!1);if(M&&($=ie[0],A=ie[1],P=ie[0],x=ie[1]),M=X.getIndexOfPosition(oe.to.x,oe.to.y,ie,!1),M&&(($===null||ie[0]<$)&&($=ie[0]),(P===null||ie[0]>P)&&(P=ie[0]),(A===null||ie[1]<A)&&(A=ie[1]),(x===null||ie[1]>x)&&(x=ie[1])),$!==null){var N=[];X.getRectMinMax($,A,P,x,N),N[0],N[1];for(var F=$;F<=P;F++)for(var R=A;R<=x;R++){if(this.result._shouldStop||(X.getConvexTrianglePillar(F,R,!1),a.pointToWorldFrame(T,J,X.pillarOffset,Q),this.intersectConvex(X.pillarConvex,J,Q,ne,k),this.result._shouldStop))return;X.getConvexTrianglePillar(F,R,!0),a.pointToWorldFrame(T,J,X.pillarOffset,Q),this.intersectConvex(X.pillarConvex,J,Q,ne,k)}}},u.prototype[c.types.HEIGHTFIELD]=u.prototype.intersectHeightfield;var O=new s,W=new s;u.prototype.intersectSphere=function(X,J,T,ne){var Q=this.from,oe=this.to,ie=X.radius,$=Math.pow(oe.x-Q.x,2)+Math.pow(oe.y-Q.y,2)+Math.pow(oe.z-Q.z,2),A=2*((oe.x-Q.x)*(Q.x-T.x)+(oe.y-Q.y)*(Q.y-T.y)+(oe.z-Q.z)*(Q.z-T.z)),P=Math.pow(Q.x-T.x,2)+Math.pow(Q.y-T.y,2)+Math.pow(Q.z-T.z,2)-Math.pow(ie,2),x=Math.pow(A,2)-4*$*P,M=O,N=W;if(!(x<0))if(x===0)Q.lerp(oe,x,M),M.vsub(T,N),N.normalize(),this.reportIntersection(N,M,X,ne,-1);else{var F=(-A-Math.sqrt(x))/(2*$),R=(-A+Math.sqrt(x))/(2*$);if(F>=0&&F<=1&&(Q.lerp(oe,F,M),M.vsub(T,N),N.normalize(),this.reportIntersection(N,M,X,ne,-1)),this.result._shouldStop)return;R>=0&&R<=1&&(Q.lerp(oe,R,M),M.vsub(T,N),N.normalize(),this.reportIntersection(N,M,X,ne,-1))}},u.prototype[c.types.SPHERE]=u.prototype.intersectSphere;var U=new s;new s,new s;var L=new s;u.prototype.intersectConvex=function(J,T,ne,Q,oe){for(var ie=U,$=L,A=oe&&oe.faceList||null,P=J.faces,x=J.vertices,M=J.faceNormals,N=this._direction,F=this.from,R=this.to,C=F.distanceTo(R),ce=A?A.length:P.length,Y=this.result,I=0;!Y._shouldStop&&I<ce;I++){var z=A?A[I]:I,de=P[z],pe=M[z],fe=T,ve=ne;$.copy(x[de[0]]),fe.vmult($,$),$.vadd(ve,$),$.vsub(F,$),fe.vmult(pe,ie);var ye=N.dot(ie);if(!(Math.abs(ye)<this.precision)){var Ne=ie.dot($)/ye;if(!(Ne<0)){N.mult(Ne,w),w.vadd(F,w),b.copy(x[de[0]]),fe.vmult(b,b),ve.vadd(b,b);for(var Ae=1;!Y._shouldStop&&Ae<de.length-1;Ae++){E.copy(x[de[Ae]]),S.copy(x[de[Ae+1]]),fe.vmult(E,E),fe.vmult(S,S),ve.vadd(E,E),ve.vadd(S,S);var Oe=w.distanceTo(F);!(v(w,b,E,S)||v(w,E,b,S))||Oe>C||this.reportIntersection(ie,w,J,Q,z)}}}}},u.prototype[c.types.CONVEXPOLYHEDRON]=u.prototype.intersectConvex;var D=new s,V=new s,ee=new s,K=new s,Z=new s,H=new s;new h;var B=[],te=new a;u.prototype.intersectTrimesh=function(J,T,ne,Q,oe){var ie=D,$=B,A=te,P=L,x=V,M=ee,N=K,F=H,R=Z;oe&&oe.faceList;var C=J.indices;J.vertices,J.faceNormals;var ce=this.from,Y=this.to,I=this._direction;A.position.copy(ne),A.quaternion.copy(T),a.vectorToLocalFrame(ne,T,I,x),a.pointToLocalFrame(ne,T,ce,M),a.pointToLocalFrame(ne,T,Y,N);var z=M.distanceSquared(N);J.tree.rayQuery(this,A,$);for(var de=0,pe=$.length;!this.result._shouldStop&&de!==pe;de++){var fe=$[de];J.getNormal(fe,ie),J.getVertex(C[fe*3],b),b.vsub(M,P);var ve=x.dot(ie),ye=ie.dot(P)/ve;if(!(ye<0)){x.scale(ye,w),w.vadd(M,w),J.getVertex(C[fe*3+1],E),J.getVertex(C[fe*3+2],S);var Ne=w.distanceSquared(M);!(v(w,E,b,S)||v(w,b,E,S))||Ne>z||(a.vectorToWorldFrame(T,ie,R),a.pointToWorldFrame(ne,T,w,F),this.reportIntersection(R,F,J,Q,fe))}}$.length=0},u.prototype[c.types.TRIMESH]=u.prototype.intersectTrimesh,u.prototype.reportIntersection=function(X,J,T,ne,Q){var oe=this.from,ie=this.to,$=oe.distanceTo(J),A=this.result;if(!(this.skipBackfaces&&X.dot(this._direction)>0))switch(A.hitFaceIndex=typeof Q!="undefined"?Q:-1,this.mode){case u.ALL:this.hasHit=!0,A.set(oe,ie,X,J,T,ne,$),A.hasHit=!0,this.callback(A);break;case u.CLOSEST:($<A.distance||!A.hasHit)&&(this.hasHit=!0,A.hasHit=!0,A.set(oe,ie,X,J,T,ne,$));break;case u.ANY:this.hasHit=!0,A.hasHit=!0,A.set(oe,ie,X,J,T,ne,$),A._shouldStop=!0;break}};var ae=new s,G=new s;function le(X,J,T){T.vsub(X,ae);var ne=ae.dot(J);J.mult(ne,G),G.vadd(X,G);var Q=T.distanceTo(G);return Q}},{"../collision/AABB":3,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/Box":37,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43}],10:[function(n,i,r){var s=n("../math/Vec3");i.exports=o;function o(){this.rayFromWorld=new s,this.rayToWorld=new s,this.hitNormalWorld=new s,this.hitPointWorld=new s,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}o.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},o.prototype.abort=function(){this._shouldStop=!0},o.prototype.set=function(a,l,c,h,u,d,f){this.rayFromWorld.copy(a),this.rayToWorld.copy(l),this.hitNormalWorld.copy(c),this.hitPointWorld.copy(h),this.shape=u,this.body=d,this.distance=f}},{"../math/Vec3":30}],11:[function(n,i,r){n("../shapes/Shape");var s=n("../collision/Broadphase");i.exports=o;function o(a){s.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var l=this.axisList;this._addBodyHandler=function(c){l.push(c.body)},this._removeBodyHandler=function(c){var h=l.indexOf(c.body);h!==-1&&l.splice(h,1)},a&&this.setWorld(a)}o.prototype=new s,o.prototype.setWorld=function(a){this.axisList.length=0;for(var l=0;l<a.bodies.length;l++)this.axisList.push(a.bodies[l]);a.removeEventListener("addBody",this._addBodyHandler),a.removeEventListener("removeBody",this._removeBodyHandler),a.addEventListener("addBody",this._addBodyHandler),a.addEventListener("removeBody",this._removeBodyHandler),this.world=a,this.dirty=!0},o.insertionSortX=function(a){for(var l=1,c=a.length;l<c;l++){for(var h=a[l],u=l-1;u>=0&&!(a[u].aabb.lowerBound.x<=h.aabb.lowerBound.x);u--)a[u+1]=a[u];a[u+1]=h}return a},o.insertionSortY=function(a){for(var l=1,c=a.length;l<c;l++){for(var h=a[l],u=l-1;u>=0&&!(a[u].aabb.lowerBound.y<=h.aabb.lowerBound.y);u--)a[u+1]=a[u];a[u+1]=h}return a},o.insertionSortZ=function(a){for(var l=1,c=a.length;l<c;l++){for(var h=a[l],u=l-1;u>=0&&!(a[u].aabb.lowerBound.z<=h.aabb.lowerBound.z);u--)a[u+1]=a[u];a[u+1]=h}return a},o.prototype.collisionPairs=function(a,l,c){var h=this.axisList,u=h.length,d=this.axisIndex,f,p;for(this.dirty&&(this.sortList(),this.dirty=!1),f=0;f!==u;f++){var y=h[f];for(p=f+1;p<u;p++){var v=h[p];if(!!this.needBroadphaseCollision(y,v)){if(!o.checkBounds(y,v,d))break;this.intersectionTest(y,v,l,c)}}}},o.prototype.sortList=function(){for(var a=this.axisList,l=this.axisIndex,c=a.length,h=0;h!==c;h++){var u=a[h];u.aabbNeedsUpdate&&u.computeAABB()}l===0?o.insertionSortX(a):l===1?o.insertionSortY(a):l===2&&o.insertionSortZ(a)},o.checkBounds=function(a,l,c){var h,u;c===0?(h=a.position.x,u=l.position.x):c===1?(h=a.position.y,u=l.position.y):c===2&&(h=a.position.z,u=l.position.z);var d=a.boundingRadius,f=l.boundingRadius,p=h+d,y=u-f;return y<p},o.prototype.autoDetectAxis=function(){for(var a=0,l=0,c=0,h=0,u=0,d=0,f=this.axisList,p=f.length,y=1/p,v=0;v!==p;v++){var m=f[v],g=m.position.x;a+=g,l+=g*g;var w=m.position.y;c+=w,h+=w*w;var b=m.position.z;u+=b,d+=b*b}var E=l-a*a*y,S=h-c*c*y,k=d-u*u*y;E>S?E>k?this.axisIndex=0:this.axisIndex=2:S>k?this.axisIndex=1:this.axisIndex=2},o.prototype.aabbQuery=function(a,l,c){c=c||[],this.dirty&&(this.sortList(),this.dirty=!1);var h=this.axisIndex,u="x";h===1&&(u="y"),h===2&&(u="z");var d=this.axisList;l.lowerBound[u],l.upperBound[u];for(var f=0;f<d.length;f++){var p=d[f];p.aabbNeedsUpdate&&p.computeAABB(),p.aabb.overlaps(l)&&c.push(p)}return c}},{"../collision/Broadphase":5,"../shapes/Shape":43}],12:[function(n,i,r){i.exports=c,n("./Constraint");var s=n("./PointToPointConstraint"),o=n("../equations/ConeEquation"),a=n("../equations/RotationalEquation");n("../equations/ContactEquation");var l=n("../math/Vec3");function c(h,u,d){d=d||{};var f=typeof d.maxForce!="undefined"?d.maxForce:1e6,p=d.pivotA?d.pivotA.clone():new l,y=d.pivotB?d.pivotB.clone():new l;this.axisA=d.axisA?d.axisA.clone():new l,this.axisB=d.axisB?d.axisB.clone():new l,s.call(this,h,p,u,y,f),this.collideConnected=!!d.collideConnected,this.angle=typeof d.angle!="undefined"?d.angle:0;var v=this.coneEquation=new o(h,u,d),m=this.twistEquation=new a(h,u,d);this.twistAngle=typeof d.twistAngle!="undefined"?d.twistAngle:0,v.maxForce=0,v.minForce=-f,m.maxForce=0,m.minForce=-f,this.equations.push(v,m)}c.prototype=new s,c.constructor=c,new l,new l,c.prototype.update=function(){var h=this.bodyA,u=this.bodyB,d=this.coneEquation,f=this.twistEquation;s.prototype.update.call(this),h.vectorToWorldFrame(this.axisA,d.axisA),u.vectorToWorldFrame(this.axisB,d.axisB),this.axisA.tangents(f.axisA,f.axisA),h.vectorToWorldFrame(f.axisA,f.axisA),this.axisB.tangents(f.axisB,f.axisB),u.vectorToWorldFrame(f.axisB,f.axisB),d.angle=this.angle,f.maxAngle=this.twistAngle}},{"../equations/ConeEquation":18,"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],13:[function(n,i,r){i.exports=o;var s=n("../utils/Utils");function o(a,l,c){c=s.defaults(c,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=a,this.bodyB=l,this.id=o.idCounter++,this.collideConnected=c.collideConnected,c.wakeUpBodies&&(a&&a.wakeUp(),l&&l.wakeUp())}o.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},o.prototype.enable=function(){for(var a=this.equations,l=0;l<a.length;l++)a[l].enabled=!0},o.prototype.disable=function(){for(var a=this.equations,l=0;l<a.length;l++)a[l].enabled=!1},o.idCounter=0},{"../utils/Utils":53}],14:[function(n,i,r){i.exports=a;var s=n("./Constraint"),o=n("../equations/ContactEquation");function a(l,c,h,u){s.call(this,l,c),typeof h=="undefined"&&(h=l.position.distanceTo(c.position)),typeof u=="undefined"&&(u=1e6),this.distance=h;var d=this.distanceEquation=new o(l,c);this.equations.push(d),d.minForce=-u,d.maxForce=u}a.prototype=new s,a.prototype.update=function(){var l=this.bodyA,c=this.bodyB,h=this.distanceEquation,u=this.distance*.5,d=h.ni;c.position.vsub(l.position,d),d.normalize(),d.mult(u,h.ri),d.mult(-u,h.rj)}},{"../equations/ContactEquation":19,"./Constraint":13}],15:[function(n,i,r){i.exports=c,n("./Constraint");var s=n("./PointToPointConstraint"),o=n("../equations/RotationalEquation"),a=n("../equations/RotationalMotorEquation");n("../equations/ContactEquation");var l=n("../math/Vec3");function c(d,f,p){p=p||{};var y=typeof p.maxForce!="undefined"?p.maxForce:1e6,v=p.pivotA?p.pivotA.clone():new l,m=p.pivotB?p.pivotB.clone():new l;s.call(this,d,v,f,m,y);var g=this.axisA=p.axisA?p.axisA.clone():new l(1,0,0);g.normalize();var w=this.axisB=p.axisB?p.axisB.clone():new l(1,0,0);w.normalize();var b=this.rotationalEquation1=new o(d,f,p),E=this.rotationalEquation2=new o(d,f,p),S=this.motorEquation=new a(d,f,y);S.enabled=!1,this.equations.push(b,E,S)}c.prototype=new s,c.constructor=c,c.prototype.enableMotor=function(){this.motorEquation.enabled=!0},c.prototype.disableMotor=function(){this.motorEquation.enabled=!1},c.prototype.setMotorSpeed=function(d){this.motorEquation.targetVelocity=d},c.prototype.setMotorMaxForce=function(d){this.motorEquation.maxForce=d,this.motorEquation.minForce=-d};var h=new l,u=new l;c.prototype.update=function(){var d=this.bodyA,f=this.bodyB,p=this.motorEquation,y=this.rotationalEquation1,v=this.rotationalEquation2,m=h,g=u,w=this.axisA,b=this.axisB;s.prototype.update.call(this),d.quaternion.vmult(w,m),f.quaternion.vmult(b,g),m.tangents(y.axisA,v.axisA),y.axisB.copy(g),v.axisB.copy(g),this.motorEquation.enabled&&(d.quaternion.vmult(this.axisA,p.axisA),f.quaternion.vmult(this.axisB,p.axisB))}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],16:[function(n,i,r){i.exports=l,n("./Constraint");var s=n("./PointToPointConstraint"),o=n("../equations/RotationalEquation");n("../equations/RotationalMotorEquation"),n("../equations/ContactEquation");var a=n("../math/Vec3");function l(c,h,u){u=u||{};var d=typeof u.maxForce!="undefined"?u.maxForce:1e6,f=new a,p=new a,y=new a;c.position.vadd(h.position,y),y.scale(.5,y),h.pointToLocalFrame(y,p),c.pointToLocalFrame(y,f),s.call(this,c,f,h,p,d);var v=this.rotationalEquation1=new o(c,h,u),m=this.rotationalEquation2=new o(c,h,u),g=this.rotationalEquation3=new o(c,h,u);this.equations.push(v,m,g)}l.prototype=new s,l.constructor=l,new a,new a,l.prototype.update=function(){var c=this.bodyA,h=this.bodyB;this.motorEquation;var u=this.rotationalEquation1,d=this.rotationalEquation2,f=this.rotationalEquation3;s.prototype.update.call(this),c.vectorToWorldFrame(a.UNIT_X,u.axisA),h.vectorToWorldFrame(a.UNIT_Y,u.axisB),c.vectorToWorldFrame(a.UNIT_Y,d.axisA),h.vectorToWorldFrame(a.UNIT_Z,d.axisB),c.vectorToWorldFrame(a.UNIT_Z,f.axisA),h.vectorToWorldFrame(a.UNIT_X,f.axisB)}},{"../equations/ContactEquation":19,"../equations/RotationalEquation":22,"../equations/RotationalMotorEquation":23,"../math/Vec3":30,"./Constraint":13,"./PointToPointConstraint":17}],17:[function(n,i,r){i.exports=l;var s=n("./Constraint"),o=n("../equations/ContactEquation"),a=n("../math/Vec3");function l(c,h,u,d,f){s.call(this,c,u),f=typeof f!="undefined"?f:1e6,this.pivotA=h?h.clone():new a,this.pivotB=d?d.clone():new a;var p=this.equationX=new o(c,u),y=this.equationY=new o(c,u),v=this.equationZ=new o(c,u);this.equations.push(p,y,v),p.minForce=y.minForce=v.minForce=-f,p.maxForce=y.maxForce=v.maxForce=f,p.ni.set(1,0,0),y.ni.set(0,1,0),v.ni.set(0,0,1)}l.prototype=new s,l.prototype.update=function(){var c=this.bodyA,h=this.bodyB,u=this.equationX,d=this.equationY,f=this.equationZ;c.quaternion.vmult(this.pivotA,u.ri),h.quaternion.vmult(this.pivotB,u.rj),d.ri.copy(u.ri),d.rj.copy(u.rj),f.ri.copy(u.ri),f.rj.copy(u.rj)}},{"../equations/ContactEquation":19,"../math/Vec3":30,"./Constraint":13}],18:[function(n,i,r){i.exports=a;var s=n("../math/Vec3");n("../math/Mat3");var o=n("./Equation");function a(h,u,d){d=d||{};var f=typeof d.maxForce!="undefined"?d.maxForce:1e6;o.call(this,h,u,-f,f),this.axisA=d.axisA?d.axisA.clone():new s(1,0,0),this.axisB=d.axisB?d.axisB.clone():new s(0,1,0),this.angle=typeof d.angle!="undefined"?d.angle:0}a.prototype=new o,a.prototype.constructor=a;var l=new s,c=new s;a.prototype.computeB=function(h){var u=this.a,d=this.b,f=this.axisA,p=this.axisB,y=l,v=c,m=this.jacobianElementA,g=this.jacobianElementB;f.cross(p,y),p.cross(f,v),m.rotational.copy(v),g.rotational.copy(y);var w=Math.cos(this.angle)-f.dot(p),b=this.computeGW(),E=this.computeGiMf(),S=-w*u-b*d-h*E;return S}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],19:[function(n,i,r){i.exports=a;var s=n("./Equation"),o=n("../math/Vec3");n("../math/Mat3");function a(v,m,g){g=typeof g!="undefined"?g:1e6,s.call(this,v,m,0,g),this.restitution=0,this.ri=new o,this.rj=new o,this.ni=new o}a.prototype=new s,a.prototype.constructor=a;var l=new o,c=new o,h=new o;a.prototype.computeB=function(v){var m=this.a,g=this.b,w=this.bi,b=this.bj,E=this.ri,S=this.rj,k=l,O=c,W=w.velocity,U=w.angularVelocity;w.force,w.torque;var L=b.velocity,D=b.angularVelocity;b.force,b.torque;var V=h,ee=this.jacobianElementA,K=this.jacobianElementB,Z=this.ni;E.cross(Z,k),S.cross(Z,O),Z.negate(ee.spatial),k.negate(ee.rotational),K.spatial.copy(Z),K.rotational.copy(O),V.copy(b.position),V.vadd(S,V),V.vsub(w.position,V),V.vsub(E,V);var H=Z.dot(V),B=this.restitution+1,te=B*L.dot(Z)-B*W.dot(Z)+D.dot(O)-U.dot(k),ae=this.computeGiMf(),G=-H*m-te*g-v*ae;return G};var u=new o,d=new o,f=new o,p=new o,y=new o;a.prototype.getImpactVelocityAlongNormal=function(){var v=u,m=d,g=f,w=p,b=y;return this.bi.position.vadd(this.ri,g),this.bj.position.vadd(this.rj,w),this.bi.getVelocityAtWorldPoint(g,v),this.bj.getVelocityAtWorldPoint(w,m),v.vsub(m,b),this.ni.dot(b)}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],20:[function(n,i,r){i.exports=a;var s=n("../math/JacobianElement"),o=n("../math/Vec3");function a(y,v,m,g){this.id=a.id++,this.minForce=typeof m=="undefined"?-1e6:m,this.maxForce=typeof g=="undefined"?1e6:g,this.bi=y,this.bj=v,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new s,this.jacobianElementB=new s,this.enabled=!0,this.setSpookParams(1e7,4,1/60)}a.prototype.constructor=a,a.id=0,a.prototype.setSpookParams=function(y,v,m){var g=v,w=y,b=m;this.a=4/(b*(1+4*g)),this.b=4*g/(1+4*g),this.eps=4/(b*b*w*(1+4*g))},a.prototype.computeB=function(y,v,m){var g=this.computeGW(),w=this.computeGq(),b=this.computeGiMf();return-w*y-g*v-b*m},a.prototype.computeGq=function(){var y=this.jacobianElementA,v=this.jacobianElementB,m=this.bi,g=this.bj,w=m.position,b=g.position;return y.spatial.dot(w)+v.spatial.dot(b)};var l=new o;a.prototype.computeGW=function(){var y=this.jacobianElementA,v=this.jacobianElementB,m=this.bi,g=this.bj,w=m.velocity,b=g.velocity,E=m.angularVelocity||l,S=g.angularVelocity||l;return y.multiplyVectors(w,E)+v.multiplyVectors(b,S)},a.prototype.computeGWlambda=function(){var y=this.jacobianElementA,v=this.jacobianElementB,m=this.bi,g=this.bj,w=m.vlambda,b=g.vlambda,E=m.wlambda||l,S=g.wlambda||l;return y.multiplyVectors(w,E)+v.multiplyVectors(b,S)};var c=new o,h=new o,u=new o,d=new o;a.prototype.computeGiMf=function(){var y=this.jacobianElementA,v=this.jacobianElementB,m=this.bi,g=this.bj,w=m.force,b=m.torque,E=g.force,S=g.torque,k=m.invMassSolve,O=g.invMassSolve;return m.invInertiaWorldSolve?m.invInertiaWorldSolve.vmult(b,u):u.set(0,0,0),g.invInertiaWorldSolve?g.invInertiaWorldSolve.vmult(S,d):d.set(0,0,0),w.mult(k,c),E.mult(O,h),y.multiplyVectors(c,u)+v.multiplyVectors(h,d)};var f=new o;a.prototype.computeGiMGt=function(){var y=this.jacobianElementA,v=this.jacobianElementB,m=this.bi,g=this.bj,w=m.invMassSolve,b=g.invMassSolve,E=m.invInertiaWorldSolve,S=g.invInertiaWorldSolve,k=w+b;return E&&(E.vmult(y.rotational,f),k+=f.dot(y.rotational)),S&&(S.vmult(v.rotational,f),k+=f.dot(v.rotational)),k};var p=new o;new o,new o,new o,new o,new o,a.prototype.addToWlambda=function(y){var v=this.jacobianElementA,m=this.jacobianElementB,g=this.bi,w=this.bj,b=p;v.spatial.mult(g.invMassSolve*y,b),g.vlambda.vadd(b,g.vlambda),m.spatial.mult(w.invMassSolve*y,b),w.vlambda.vadd(b,w.vlambda),g.invInertiaWorldSolve&&(g.invInertiaWorldSolve.vmult(v.rotational,b),b.mult(y,b),g.wlambda.vadd(b,g.wlambda)),w.invInertiaWorldSolve&&(w.invInertiaWorldSolve.vmult(m.rotational,b),b.mult(y,b),w.wlambda.vadd(b,w.wlambda))},a.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},{"../math/JacobianElement":26,"../math/Vec3":30}],21:[function(n,i,r){i.exports=a;var s=n("./Equation"),o=n("../math/Vec3");n("../math/Mat3");function a(h,u,d){s.call(this,h,u,-d,d),this.ri=new o,this.rj=new o,this.t=new o}a.prototype=new s,a.prototype.constructor=a;var l=new o,c=new o;a.prototype.computeB=function(h){this.a;var u=this.b;this.bi,this.bj;var d=this.ri,f=this.rj,p=l,y=c,v=this.t;d.cross(v,p),f.cross(v,y);var m=this.jacobianElementA,g=this.jacobianElementB;v.negate(m.spatial),p.negate(m.rotational),g.spatial.copy(v),g.rotational.copy(y);var w=this.computeGW(),b=this.computeGiMf(),E=-w*u-h*b;return E}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],22:[function(n,i,r){i.exports=a;var s=n("../math/Vec3");n("../math/Mat3");var o=n("./Equation");function a(h,u,d){d=d||{};var f=typeof d.maxForce!="undefined"?d.maxForce:1e6;o.call(this,h,u,-f,f),this.axisA=d.axisA?d.axisA.clone():new s(1,0,0),this.axisB=d.axisB?d.axisB.clone():new s(0,1,0),this.maxAngle=Math.PI/2}a.prototype=new o,a.prototype.constructor=a;var l=new s,c=new s;a.prototype.computeB=function(h){var u=this.a,d=this.b,f=this.axisA,p=this.axisB,y=l,v=c,m=this.jacobianElementA,g=this.jacobianElementB;f.cross(p,y),p.cross(f,v),m.rotational.copy(v),g.rotational.copy(y);var w=Math.cos(this.maxAngle)-f.dot(p),b=this.computeGW(),E=this.computeGiMf(),S=-w*u-b*d-h*E;return S}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],23:[function(n,i,r){i.exports=a;var s=n("../math/Vec3");n("../math/Mat3");var o=n("./Equation");function a(l,c,h){h=typeof h!="undefined"?h:1e6,o.call(this,l,c,-h,h),this.axisA=new s,this.axisB=new s,this.targetVelocity=0}a.prototype=new o,a.prototype.constructor=a,a.prototype.computeB=function(l){this.a;var c=this.b;this.bi,this.bj;var h=this.axisA,u=this.axisB,d=this.jacobianElementA,f=this.jacobianElementB;d.rotational.copy(h),u.negate(f.rotational);var p=this.computeGW()-this.targetVelocity,y=this.computeGiMf(),v=-p*c-l*y;return v}},{"../math/Mat3":27,"../math/Vec3":30,"./Equation":20}],24:[function(n,i,r){var s=n("../utils/Utils");i.exports=o;function o(a,l,c){c=s.defaults(c,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=o.idCounter++,this.materials=[a,l],this.friction=c.friction,this.restitution=c.restitution,this.contactEquationStiffness=c.contactEquationStiffness,this.contactEquationRelaxation=c.contactEquationRelaxation,this.frictionEquationStiffness=c.frictionEquationStiffness,this.frictionEquationRelaxation=c.frictionEquationRelaxation}o.idCounter=0},{"../utils/Utils":53}],25:[function(n,i,r){i.exports=s;function s(o){var a="";o=o||{},typeof o=="string"?(a=o,o={}):typeof o=="object"&&(a=""),this.name=a,this.id=s.idCounter++,this.friction=typeof o.friction!="undefined"?o.friction:-1,this.restitution=typeof o.restitution!="undefined"?o.restitution:-1}s.idCounter=0},{}],26:[function(n,i,r){i.exports=o;var s=n("./Vec3");function o(){this.spatial=new s,this.rotational=new s}o.prototype.multiplyElement=function(a){return a.spatial.dot(this.spatial)+a.rotational.dot(this.rotational)},o.prototype.multiplyVectors=function(a,l){return a.dot(this.spatial)+l.dot(this.rotational)}},{"./Vec3":30}],27:[function(n,i,r){i.exports=o;var s=n("./Vec3");function o(a){a?this.elements=a:this.elements=[0,0,0,0,0,0,0,0,0]}o.prototype.identity=function(){var a=this.elements;a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1},o.prototype.setZero=function(){var a=this.elements;a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0},o.prototype.setTrace=function(a){var l=this.elements;l[0]=a.x,l[4]=a.y,l[8]=a.z},o.prototype.getTrace=function(l){var l=l||new s,c=this.elements;l.x=c[0],l.y=c[4],l.z=c[8]},o.prototype.vmult=function(a,l){l=l||new s;var c=this.elements,h=a.x,u=a.y,d=a.z;return l.x=c[0]*h+c[1]*u+c[2]*d,l.y=c[3]*h+c[4]*u+c[5]*d,l.z=c[6]*h+c[7]*u+c[8]*d,l},o.prototype.smult=function(a){for(var l=0;l<this.elements.length;l++)this.elements[l]*=a},o.prototype.mmult=function(a,l){for(var c=l||new o,h=0;h<3;h++)for(var u=0;u<3;u++){for(var d=0,f=0;f<3;f++)d+=a.elements[h+f*3]*this.elements[f+u*3];c.elements[h+u*3]=d}return c},o.prototype.scale=function(a,l){l=l||new o;for(var c=this.elements,h=l.elements,u=0;u!==3;u++)h[3*u+0]=a.x*c[3*u+0],h[3*u+1]=a.y*c[3*u+1],h[3*u+2]=a.z*c[3*u+2];return l},o.prototype.solve=function(a,l){l=l||new s;for(var c=3,h=4,u=[],d=0;d<c*h;d++)u.push(0);var d,f;for(d=0;d<3;d++)for(f=0;f<3;f++)u[d+h*f]=this.elements[d+3*f];u[3+4*0]=a.x,u[3+4*1]=a.y,u[3+4*2]=a.z;var p=3,y=p,v,m=4,g;do{if(d=y-p,u[d+h*d]===0){for(f=d+1;f<y;f++)if(u[d+h*f]!==0){v=m;do g=m-v,u[g+h*d]+=u[g+h*f];while(--v);break}}if(u[d+h*d]!==0)for(f=d+1;f<y;f++){var w=u[d+h*f]/u[d+h*d];v=m;do g=m-v,u[g+h*f]=g<=d?0:u[g+h*f]-u[g+h*d]*w;while(--v)}}while(--p);if(l.z=u[2*h+3]/u[2*h+2],l.y=(u[1*h+3]-u[1*h+2]*l.z)/u[1*h+1],l.x=(u[0*h+3]-u[0*h+2]*l.z-u[0*h+1]*l.y)/u[0*h+0],isNaN(l.x)||isNaN(l.y)||isNaN(l.z)||l.x===1/0||l.y===1/0||l.z===1/0)throw"Could not solve equation! Got x=["+l.toString()+"], b=["+a.toString()+"], A=["+this.toString()+"]";return l},o.prototype.e=function(a,l,c){if(c===void 0)return this.elements[l+3*a];this.elements[l+3*a]=c},o.prototype.copy=function(a){for(var l=0;l<a.elements.length;l++)this.elements[l]=a.elements[l];return this},o.prototype.toString=function(){for(var a="",l=",",c=0;c<9;c++)a+=this.elements[c]+l;return a},o.prototype.reverse=function(a){a=a||new o;for(var l=3,c=6,h=[],u=0;u<l*c;u++)h.push(0);var u,d;for(u=0;u<3;u++)for(d=0;d<3;d++)h[u+c*d]=this.elements[u+3*d];h[3+6*0]=1,h[3+6*1]=0,h[3+6*2]=0,h[4+6*0]=0,h[4+6*1]=1,h[4+6*2]=0,h[5+6*0]=0,h[5+6*1]=0,h[5+6*2]=1;var f=3,p=f,y,v=c,m;do{if(u=p-f,h[u+c*u]===0){for(d=u+1;d<p;d++)if(h[u+c*d]!==0){y=v;do m=v-y,h[m+c*u]+=h[m+c*d];while(--y);break}}if(h[u+c*u]!==0)for(d=u+1;d<p;d++){var g=h[u+c*d]/h[u+c*u];y=v;do m=v-y,h[m+c*d]=m<=u?0:h[m+c*d]-h[m+c*u]*g;while(--y)}}while(--f);u=2;do{d=u-1;do{var g=h[u+c*d]/h[u+c*u];y=c;do m=c-y,h[m+c*d]=h[m+c*d]-h[m+c*u]*g;while(--y)}while(d--)}while(--u);u=2;do{var g=1/h[u+c*u];y=c;do m=c-y,h[m+c*u]=h[m+c*u]*g;while(--y)}while(u--);u=2;do{d=2;do{if(m=h[l+d+c*u],isNaN(m)||m===1/0)throw"Could not reverse! A=["+this.toString()+"]";a.e(u,d,m)}while(d--)}while(u--);return a},o.prototype.setRotationFromQuaternion=function(a){var l=a.x,c=a.y,h=a.z,u=a.w,d=l+l,f=c+c,p=h+h,y=l*d,v=l*f,m=l*p,g=c*f,w=c*p,b=h*p,E=u*d,S=u*f,k=u*p,O=this.elements;return O[3*0+0]=1-(g+b),O[3*0+1]=v-k,O[3*0+2]=m+S,O[3*1+0]=v+k,O[3*1+1]=1-(y+b),O[3*1+2]=w-E,O[3*2+0]=m-S,O[3*2+1]=w+E,O[3*2+2]=1-(y+g),this},o.prototype.transpose=function(a){a=a||new o;for(var l=a.elements,c=this.elements,h=0;h!==3;h++)for(var u=0;u!==3;u++)l[3*h+u]=c[3*u+h];return a}},{"./Vec3":30}],28:[function(n,i,r){i.exports=o;var s=n("./Vec3");function o(d,f,p,y){this.x=d!==void 0?d:0,this.y=f!==void 0?f:0,this.z=p!==void 0?p:0,this.w=y!==void 0?y:1}o.prototype.set=function(d,f,p,y){this.x=d,this.y=f,this.z=p,this.w=y},o.prototype.toString=function(){return this.x+","+this.y+","+this.z+","+this.w},o.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},o.prototype.setFromAxisAngle=function(d,f){var p=Math.sin(f*.5);this.x=d.x*p,this.y=d.y*p,this.z=d.z*p,this.w=Math.cos(f*.5)},o.prototype.toAxisAngle=function(d){d=d||new s,this.normalize();var f=2*Math.acos(this.w),p=Math.sqrt(1-this.w*this.w);return p<.001?(d.x=this.x,d.y=this.y,d.z=this.z):(d.x=this.x/p,d.y=this.y/p,d.z=this.z/p),[d,f]};var a=new s,l=new s;o.prototype.setFromVectors=function(d,f){if(d.isAntiparallelTo(f)){var p=a,y=l;d.tangents(p,y),this.setFromAxisAngle(p,Math.PI)}else{var v=d.cross(f);this.x=v.x,this.y=v.y,this.z=v.z,this.w=Math.sqrt(Math.pow(d.norm(),2)*Math.pow(f.norm(),2))+d.dot(f),this.normalize()}};var c=new s,h=new s,u=new s;o.prototype.mult=function(d,f){f=f||new o;var p=this.w,y=c,v=h,m=u;return y.set(this.x,this.y,this.z),v.set(d.x,d.y,d.z),f.w=p*d.w-y.dot(v),y.cross(v,m),f.x=p*v.x+d.w*y.x+m.x,f.y=p*v.y+d.w*y.y+m.y,f.z=p*v.z+d.w*y.z+m.z,f},o.prototype.inverse=function(d){var f=this.x,p=this.y,y=this.z,v=this.w;d=d||new o,this.conjugate(d);var m=1/(f*f+p*p+y*y+v*v);return d.x*=m,d.y*=m,d.z*=m,d.w*=m,d},o.prototype.conjugate=function(d){return d=d||new o,d.x=-this.x,d.y=-this.y,d.z=-this.z,d.w=this.w,d},o.prototype.normalize=function(){var d=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);d===0?(this.x=0,this.y=0,this.z=0,this.w=0):(d=1/d,this.x*=d,this.y*=d,this.z*=d,this.w*=d)},o.prototype.normalizeFast=function(){var d=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;d===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=d,this.y*=d,this.z*=d,this.w*=d)},o.prototype.vmult=function(d,f){f=f||new s;var p=d.x,y=d.y,v=d.z,m=this.x,g=this.y,w=this.z,b=this.w,E=b*p+g*v-w*y,S=b*y+w*p-m*v,k=b*v+m*y-g*p,O=-m*p-g*y-w*v;return f.x=E*b+O*-m+S*-w-k*-g,f.y=S*b+O*-g+k*-m-E*-w,f.z=k*b+O*-w+E*-g-S*-m,f},o.prototype.copy=function(d){return this.x=d.x,this.y=d.y,this.z=d.z,this.w=d.w,this},o.prototype.toEuler=function(d,f){f=f||"YZX";var p,y,v,m=this.x,g=this.y,w=this.z,b=this.w;switch(f){case"YZX":var E=m*g+w*b;if(E>.499&&(p=2*Math.atan2(m,b),y=Math.PI/2,v=0),E<-.499&&(p=-2*Math.atan2(m,b),y=-Math.PI/2,v=0),isNaN(p)){var S=m*m,k=g*g,O=w*w;p=Math.atan2(2*g*b-2*m*w,1-2*k-2*O),y=Math.asin(2*E),v=Math.atan2(2*m*b-2*g*w,1-2*S-2*O)}break;default:throw new Error("Euler order "+f+" not supported yet.")}d.y=p,d.z=y,d.x=v},o.prototype.setFromEuler=function(d,f,p,y){y=y||"XYZ";var v=Math.cos(d/2),m=Math.cos(f/2),g=Math.cos(p/2),w=Math.sin(d/2),b=Math.sin(f/2),E=Math.sin(p/2);return y==="XYZ"?(this.x=w*m*g+v*b*E,this.y=v*b*g-w*m*E,this.z=v*m*E+w*b*g,this.w=v*m*g-w*b*E):y==="YXZ"?(this.x=w*m*g+v*b*E,this.y=v*b*g-w*m*E,this.z=v*m*E-w*b*g,this.w=v*m*g+w*b*E):y==="ZXY"?(this.x=w*m*g-v*b*E,this.y=v*b*g+w*m*E,this.z=v*m*E+w*b*g,this.w=v*m*g-w*b*E):y==="ZYX"?(this.x=w*m*g-v*b*E,this.y=v*b*g+w*m*E,this.z=v*m*E-w*b*g,this.w=v*m*g+w*b*E):y==="YZX"?(this.x=w*m*g+v*b*E,this.y=v*b*g+w*m*E,this.z=v*m*E-w*b*g,this.w=v*m*g-w*b*E):y==="XZY"&&(this.x=w*m*g-v*b*E,this.y=v*b*g-w*m*E,this.z=v*m*E+w*b*g,this.w=v*m*g+w*b*E),this},o.prototype.clone=function(){return new o(this.x,this.y,this.z,this.w)}},{"./Vec3":30}],29:[function(n,i,r){var s=n("./Vec3"),o=n("./Quaternion");i.exports=a;function a(c){c=c||{},this.position=new s,c.position&&this.position.copy(c.position),this.quaternion=new o,c.quaternion&&this.quaternion.copy(c.quaternion)}var l=new o;a.pointToLocalFrame=function(c,h,u,f){var f=f||new s;return u.vsub(c,f),h.conjugate(l),l.vmult(f,f),f},a.prototype.pointToLocal=function(c,h){return a.pointToLocalFrame(this.position,this.quaternion,c,h)},a.pointToWorldFrame=function(c,h,u,f){var f=f||new s;return h.vmult(u,f),f.vadd(c,f),f},a.prototype.pointToWorld=function(c,h){return a.pointToWorldFrame(this.position,this.quaternion,c,h)},a.prototype.vectorToWorldFrame=function(c,u){var u=u||new s;return this.quaternion.vmult(c,u),u},a.vectorToWorldFrame=function(c,h,u){return c.vmult(h,u),u},a.vectorToLocalFrame=function(c,h,u,f){var f=f||new s;return h.w*=-1,h.vmult(u,f),h.w*=-1,f}},{"./Quaternion":28,"./Vec3":30}],30:[function(n,i,r){i.exports=o;var s=n("./Mat3");function o(h,u,d){this.x=h||0,this.y=u||0,this.z=d||0}o.ZERO=new o(0,0,0),o.UNIT_X=new o(1,0,0),o.UNIT_Y=new o(0,1,0),o.UNIT_Z=new o(0,0,1),o.prototype.cross=function(h,u){var d=h.x,f=h.y,p=h.z,y=this.x,v=this.y,m=this.z;return u=u||new o,u.x=v*p-m*f,u.y=m*d-y*p,u.z=y*f-v*d,u},o.prototype.set=function(h,u,d){return this.x=h,this.y=u,this.z=d,this},o.prototype.setZero=function(){this.x=this.y=this.z=0},o.prototype.vadd=function(h,u){if(u)u.x=h.x+this.x,u.y=h.y+this.y,u.z=h.z+this.z;else return new o(this.x+h.x,this.y+h.y,this.z+h.z)},o.prototype.vsub=function(h,u){if(u)u.x=this.x-h.x,u.y=this.y-h.y,u.z=this.z-h.z;else return new o(this.x-h.x,this.y-h.y,this.z-h.z)},o.prototype.crossmat=function(){return new s([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},o.prototype.normalize=function(){var h=this.x,u=this.y,d=this.z,f=Math.sqrt(h*h+u*u+d*d);if(f>0){var p=1/f;this.x*=p,this.y*=p,this.z*=p}else this.x=0,this.y=0,this.z=0;return f},o.prototype.unit=function(h){h=h||new o;var u=this.x,d=this.y,f=this.z,p=Math.sqrt(u*u+d*d+f*f);return p>0?(p=1/p,h.x=u*p,h.y=d*p,h.z=f*p):(h.x=1,h.y=0,h.z=0),h},o.prototype.norm=function(){var h=this.x,u=this.y,d=this.z;return Math.sqrt(h*h+u*u+d*d)},o.prototype.length=o.prototype.norm,o.prototype.norm2=function(){return this.dot(this)},o.prototype.lengthSquared=o.prototype.norm2,o.prototype.distanceTo=function(h){var u=this.x,d=this.y,f=this.z,p=h.x,y=h.y,v=h.z;return Math.sqrt((p-u)*(p-u)+(y-d)*(y-d)+(v-f)*(v-f))},o.prototype.distanceSquared=function(h){var u=this.x,d=this.y,f=this.z,p=h.x,y=h.y,v=h.z;return(p-u)*(p-u)+(y-d)*(y-d)+(v-f)*(v-f)},o.prototype.mult=function(h,u){u=u||new o;var d=this.x,f=this.y,p=this.z;return u.x=h*d,u.y=h*f,u.z=h*p,u},o.prototype.scale=o.prototype.mult,o.prototype.dot=function(h){return this.x*h.x+this.y*h.y+this.z*h.z},o.prototype.isZero=function(){return this.x===0&&this.y===0&&this.z===0},o.prototype.negate=function(h){return h=h||new o,h.x=-this.x,h.y=-this.y,h.z=-this.z,h};var a=new o,l=new o;o.prototype.tangents=function(h,u){var d=this.norm();if(d>0){var f=a,p=1/d;f.set(this.x*p,this.y*p,this.z*p);var y=l;Math.abs(f.x)<.9?(y.set(1,0,0),f.cross(y,h)):(y.set(0,1,0),f.cross(y,h)),f.cross(h,u)}else h.set(1,0,0),u.set(0,1,0)},o.prototype.toString=function(){return this.x+","+this.y+","+this.z},o.prototype.toArray=function(){return[this.x,this.y,this.z]},o.prototype.copy=function(h){return this.x=h.x,this.y=h.y,this.z=h.z,this},o.prototype.lerp=function(h,u,d){var f=this.x,p=this.y,y=this.z;d.x=f+(h.x-f)*u,d.y=p+(h.y-p)*u,d.z=y+(h.z-y)*u},o.prototype.almostEquals=function(h,u){return u===void 0&&(u=1e-6),!(Math.abs(this.x-h.x)>u||Math.abs(this.y-h.y)>u||Math.abs(this.z-h.z)>u)},o.prototype.almostZero=function(h){return h===void 0&&(h=1e-6),!(Math.abs(this.x)>h||Math.abs(this.y)>h||Math.abs(this.z)>h)};var c=new o;o.prototype.isAntiparallelTo=function(h,u){return this.negate(c),c.almostEquals(h,u)},o.prototype.clone=function(){return new o(this.x,this.y,this.z)}},{"./Mat3":27}],31:[function(n,i,r){i.exports=u;var s=n("../utils/EventTarget");n("../shapes/Shape");var o=n("../math/Vec3"),a=n("../math/Mat3"),l=n("../math/Quaternion");n("../material/Material");var c=n("../collision/AABB"),h=n("../shapes/Box");function u(L){L=L||{},s.apply(this),this.id=u.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new o,this.collisionFilterGroup=typeof L.collisionFilterGroup=="number"?L.collisionFilterGroup:1,this.collisionFilterMask=typeof L.collisionFilterMask=="number"?L.collisionFilterMask:1,this.collisionResponse=!0,this.position=new o,L.position&&this.position.copy(L.position),this.previousPosition=new o,this.initPosition=new o,this.velocity=new o,L.velocity&&this.velocity.copy(L.velocity),this.initVelocity=new o,this.force=new o;var D=typeof L.mass=="number"?L.mass:0;this.mass=D,this.invMass=D>0?1/D:0,this.material=L.material||null,this.linearDamping=typeof L.linearDamping=="number"?L.linearDamping:.01,this.type=D<=0?u.STATIC:u.DYNAMIC,typeof L.type==typeof u.STATIC&&(this.type=L.type),this.allowSleep=typeof L.allowSleep!="undefined"?L.allowSleep:!0,this.sleepState=0,this.sleepSpeedLimit=typeof L.sleepSpeedLimit!="undefined"?L.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof L.sleepTimeLimit!="undefined"?L.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new o,this.quaternion=new l,L.quaternion&&this.quaternion.copy(L.quaternion),this.initQuaternion=new l,this.angularVelocity=new o,L.angularVelocity&&this.angularVelocity.copy(L.angularVelocity),this.initAngularVelocity=new o,this.interpolatedPosition=new o,this.interpolatedQuaternion=new l,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new o,this.invInertia=new o,this.invInertiaWorld=new a,this.invMassSolve=0,this.invInertiaSolve=new o,this.invInertiaWorldSolve=new a,this.fixedRotation=typeof L.fixedRotation!="undefined"?L.fixedRotation:!1,this.angularDamping=typeof L.angularDamping!="undefined"?L.angularDamping:.01,this.aabb=new c,this.aabbNeedsUpdate=!0,this.wlambda=new o,L.shape&&this.addShape(L.shape),this.updateMassProperties()}u.prototype=new s,u.prototype.constructor=u,u.DYNAMIC=1,u.STATIC=2,u.KINEMATIC=4,u.AWAKE=0,u.SLEEPY=1,u.SLEEPING=2,u.idCounter=0,u.prototype.wakeUp=function(){var L=this.sleepState;this.sleepState=0,L===u.SLEEPING&&this.dispatchEvent({type:"wakeup"})},u.prototype.sleep=function(){this.sleepState=u.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},u.sleepyEvent={type:"sleepy"},u.sleepEvent={type:"sleep"},u.prototype.sleepTick=function(L){if(this.allowSleep){var D=this.sleepState,V=this.velocity.norm2()+this.angularVelocity.norm2(),ee=Math.pow(this.sleepSpeedLimit,2);D===u.AWAKE&&V<ee?(this.sleepState=u.SLEEPY,this.timeLastSleepy=L,this.dispatchEvent(u.sleepyEvent)):D===u.SLEEPY&&V>ee?this.wakeUp():D===u.SLEEPY&&L-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(u.sleepEvent))}},u.prototype.updateSolveMassProperties=function(){this.sleepState===u.SLEEPING||this.type===u.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},u.prototype.pointToLocalFrame=function(L,V){var V=V||new o;return L.vsub(this.position,V),this.quaternion.conjugate().vmult(V,V),V},u.prototype.vectorToLocalFrame=function(L,V){var V=V||new o;return this.quaternion.conjugate().vmult(L,V),V},u.prototype.pointToWorldFrame=function(L,V){var V=V||new o;return this.quaternion.vmult(L,V),V.vadd(this.position,V),V},u.prototype.vectorToWorldFrame=function(L,V){var V=V||new o;return this.quaternion.vmult(L,V),V};var d=new o,f=new l;u.prototype.addShape=function(L,D,V){var ee=new o,K=new l;return D&&ee.copy(D),V&&K.copy(V),this.shapes.push(L),this.shapeOffsets.push(ee),this.shapeOrientations.push(K),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},u.prototype.updateBoundingRadius=function(){for(var L=this.shapes,D=this.shapeOffsets,V=L.length,ee=0,K=0;K!==V;K++){var Z=L[K];Z.updateBoundingSphereRadius();var H=D[K].norm(),B=Z.boundingSphereRadius;H+B>ee&&(ee=H+B)}this.boundingRadius=ee};var p=new c;u.prototype.computeAABB=function(){for(var L=this.shapes,D=this.shapeOffsets,V=this.shapeOrientations,ee=L.length,K=d,Z=f,H=this.quaternion,B=this.aabb,te=p,ae=0;ae!==ee;ae++){var G=L[ae];V[ae].mult(H,Z),Z.vmult(D[ae],K),K.vadd(this.position,K),G.calculateWorldAABB(K,Z,te.lowerBound,te.upperBound),ae===0?B.copy(te):B.extend(te)}this.aabbNeedsUpdate=!1};var y=new a,v=new a;new a,u.prototype.updateInertiaWorld=function(L){var D=this.invInertia;if(!(D.x===D.y&&D.y===D.z&&!L)){var V=y,ee=v;V.setRotationFromQuaternion(this.quaternion),V.transpose(ee),V.scale(D,V),V.mmult(ee,this.invInertiaWorld)}};var m=new o,g=new o;u.prototype.applyForce=function(L,D){if(this.type===u.DYNAMIC){var V=m;D.vsub(this.position,V);var ee=g;V.cross(L,ee),this.force.vadd(L,this.force),this.torque.vadd(ee,this.torque)}};var w=new o,b=new o;u.prototype.applyLocalForce=function(L,D){if(this.type===u.DYNAMIC){var V=w,ee=b;this.vectorToWorldFrame(L,V),this.pointToWorldFrame(D,ee),this.applyForce(V,ee)}};var E=new o,S=new o,k=new o;u.prototype.applyImpulse=function(L,D){if(this.type===u.DYNAMIC){var V=E;D.vsub(this.position,V);var ee=S;ee.copy(L),ee.mult(this.invMass,ee),this.velocity.vadd(ee,this.velocity);var K=k;V.cross(L,K),this.invInertiaWorld.vmult(K,K),this.angularVelocity.vadd(K,this.angularVelocity)}};var O=new o,W=new o;u.prototype.applyLocalImpulse=function(L,D){if(this.type===u.DYNAMIC){var V=O,ee=W;this.vectorToWorldFrame(L,V),this.pointToWorldFrame(D,ee),this.applyImpulse(V,ee)}};var U=new o;u.prototype.updateMassProperties=function(){var L=U;this.invMass=this.mass>0?1/this.mass:0;var D=this.inertia,V=this.fixedRotation;this.computeAABB(),L.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),h.calculateInertia(L,this.mass,D),this.invInertia.set(D.x>0&&!V?1/D.x:0,D.y>0&&!V?1/D.y:0,D.z>0&&!V?1/D.z:0),this.updateInertiaWorld(!0)},u.prototype.getVelocityAtWorldPoint=function(L,D){var V=new o;return L.vsub(this.position,V),this.angularVelocity.cross(V,D),this.velocity.vadd(D,D),D}},{"../collision/AABB":3,"../material/Material":25,"../math/Mat3":27,"../math/Quaternion":28,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Shape":43,"../utils/EventTarget":49}],32:[function(n,i,r){n("./Body");var s=n("../math/Vec3"),o=n("../math/Quaternion");n("../collision/RaycastResult");var a=n("../collision/Ray"),l=n("../objects/WheelInfo");i.exports=c;function c(H){this.chassisBody=H.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=typeof H.indexRightAxis!="undefined"?H.indexRightAxis:1,this.indexForwardAxis=typeof H.indexForwardAxis!="undefined"?H.indexForwardAxis:0,this.indexUpAxis=typeof H.indexUpAxis!="undefined"?H.indexUpAxis:2}new s,new s,new s;var h=new s,u=new s,d=new s;new a,c.prototype.addWheel=function(H){H=H||{};var B=new l(H),te=this.wheelInfos.length;return this.wheelInfos.push(B),te},c.prototype.setSteeringValue=function(H,B){var te=this.wheelInfos[B];te.steering=H},new s,c.prototype.applyEngineForce=function(H,B){this.wheelInfos[B].engineForce=H},c.prototype.setBrake=function(H,B){this.wheelInfos[B].brake=H},c.prototype.addToWorld=function(H){this.constraints,H.add(this.chassisBody);var B=this;this.preStepCallback=function(){B.updateVehicle(H.dt)},H.addEventListener("preStep",this.preStepCallback),this.world=H},c.prototype.getVehicleAxisWorld=function(H,B){B.set(H===0?1:0,H===1?1:0,H===2?1:0),this.chassisBody.vectorToWorldFrame(B,B)},c.prototype.updateVehicle=function(H){for(var B=this.wheelInfos,te=B.length,ae=this.chassisBody,G=0;G<te;G++)this.updateWheelTransform(G);this.currentVehicleSpeedKmHour=3.6*ae.velocity.norm();var le=new s;this.getVehicleAxisWorld(this.indexForwardAxis,le),le.dot(ae.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(var G=0;G<te;G++)this.castRay(B[G]);this.updateSuspension(H);for(var X=new s,J=new s,G=0;G<te;G++){var T=B[G],ne=T.suspensionForce;ne>T.maxSuspensionForce&&(ne=T.maxSuspensionForce),T.raycastResult.hitNormalWorld.scale(ne*H,X),T.raycastResult.hitPointWorld.vsub(ae.position,J),ae.applyImpulse(X,T.raycastResult.hitPointWorld)}this.updateFriction(H);var Q=new s,oe=new s,ie=new s;for(G=0;G<te;G++){var T=B[G];ae.getVelocityAtWorldPoint(T.chassisConnectionPointWorld,ie);var $=1;switch(this.indexUpAxis){case 1:$=-1;break}if(T.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,oe);var A=oe.dot(T.raycastResult.hitNormalWorld);T.raycastResult.hitNormalWorld.scale(A,Q),oe.vsub(Q,oe);var P=oe.dot(ie);T.deltaRotation=$*P*H/T.radius}(T.sliding||!T.isInContact)&&T.engineForce!==0&&T.useCustomSlidingRotationalSpeed&&(T.deltaRotation=(T.engineForce>0?1:-1)*T.customSlidingRotationalSpeed*H),Math.abs(T.brake)>Math.abs(T.engineForce)&&(T.deltaRotation=0),T.rotation+=T.deltaRotation,T.deltaRotation*=.99}},c.prototype.updateSuspension=function(H){for(var B=this.chassisBody,te=B.mass,ae=this.wheelInfos,G=ae.length,le=0;le<G;le++){var X=ae[le];if(X.isInContact){var J,T=X.suspensionRestLength,ne=X.suspensionLength,Q=T-ne;J=X.suspensionStiffness*Q*X.clippedInvContactDotSuspension;var oe=X.suspensionRelativeVelocity,ie;oe<0?ie=X.dampingCompression:ie=X.dampingRelaxation,J-=ie*oe,X.suspensionForce=J*te,X.suspensionForce<0&&(X.suspensionForce=0)}else X.suspensionForce=0}},c.prototype.removeFromWorld=function(H){this.constraints,H.remove(this.chassisBody),H.removeEventListener("preStep",this.preStepCallback),this.world=null};var f=new s,p=new s;c.prototype.castRay=function(H){var B=f,te=p;this.updateWheelTransformWorld(H);var ae=this.chassisBody,G=-1,le=H.suspensionRestLength+H.radius;H.directionWorld.scale(le,B);var X=H.chassisConnectionPointWorld;X.vadd(B,te);var J=H.raycastResult;J.reset();var T=ae.collisionResponse;ae.collisionResponse=!1,this.world.rayTest(X,te,J),ae.collisionResponse=T;var ne=J.body;if(H.raycastResult.groundObject=0,ne){G=J.distance,H.raycastResult.hitNormalWorld=J.hitNormalWorld,H.isInContact=!0;var Q=J.distance;H.suspensionLength=Q-H.radius;var oe=H.suspensionRestLength-H.maxSuspensionTravel,ie=H.suspensionRestLength+H.maxSuspensionTravel;H.suspensionLength<oe&&(H.suspensionLength=oe),H.suspensionLength>ie&&(H.suspensionLength=ie,H.raycastResult.reset());var $=H.raycastResult.hitNormalWorld.dot(H.directionWorld),A=new s;ae.getVelocityAtWorldPoint(H.raycastResult.hitPointWorld,A);var P=H.raycastResult.hitNormalWorld.dot(A);if($>=-.1)H.suspensionRelativeVelocity=0,H.clippedInvContactDotSuspension=1/.1;else{var x=-1/$;H.suspensionRelativeVelocity=P*x,H.clippedInvContactDotSuspension=x}}else H.suspensionLength=H.suspensionRestLength+0*H.maxSuspensionTravel,H.suspensionRelativeVelocity=0,H.directionWorld.scale(-1,H.raycastResult.hitNormalWorld),H.clippedInvContactDotSuspension=1;return G},c.prototype.updateWheelTransformWorld=function(H){H.isInContact=!1;var B=this.chassisBody;B.pointToWorldFrame(H.chassisConnectionPointLocal,H.chassisConnectionPointWorld),B.vectorToWorldFrame(H.directionLocal,H.directionWorld),B.vectorToWorldFrame(H.axleLocal,H.axleWorld)},c.prototype.updateWheelTransform=function(H){var B=h,te=u,ae=d,G=this.wheelInfos[H];this.updateWheelTransformWorld(G),G.directionLocal.scale(-1,B),te.copy(G.axleLocal),B.cross(te,ae),ae.normalize(),te.normalize();var le=G.steering,X=new o;X.setFromAxisAngle(B,le);var J=new o;J.setFromAxisAngle(te,G.rotation);var T=G.worldTransform.quaternion;this.chassisBody.quaternion.mult(X,T),T.mult(J,T),T.normalize();var ne=G.worldTransform.position;ne.copy(G.directionWorld),ne.scale(G.suspensionLength,ne),ne.vadd(G.chassisConnectionPointWorld,ne)};var y=[new s(1,0,0),new s(0,1,0),new s(0,0,1)];c.prototype.getWheelTransformWorld=function(H){return this.wheelInfos[H].worldTransform};var v=new s,m=[],g=[],w=1;c.prototype.updateFriction=function(H){for(var B=v,te=this.wheelInfos,ae=te.length,G=this.chassisBody,le=g,X=m,J=0;J<ae;J++){var T=te[J],ne=T.raycastResult.body;T.sideImpulse=0,T.forwardImpulse=0,le[J]||(le[J]=new s),X[J]||(X[J]=new s)}for(var J=0;J<ae;J++){var T=te[J],ne=T.raycastResult.body;if(ne){var Q=X[J],oe=this.getWheelTransformWorld(J);oe.vectorToWorldFrame(y[this.indexRightAxis],Q);var ie=T.raycastResult.hitNormalWorld,$=Q.dot(ie);ie.scale($,B),Q.vsub(B,Q),Q.normalize(),ie.cross(Q,le[J]),le[J].normalize(),T.sideImpulse=Z(G,T.raycastResult.hitPointWorld,ne,T.raycastResult.hitPointWorld,Q),T.sideImpulse*=w}}var A=1,P=.5;this.sliding=!1;for(var J=0;J<ae;J++){var T=te[J],ne=T.raycastResult.body,x=0;if(T.slipInfo=1,ne){var M=0,N=T.brake?T.brake:M;x=k(G,ne,T.raycastResult.hitPointWorld,le[J],N),x+=T.engineForce*H;var F=N/x;T.slipInfo*=F}if(T.forwardImpulse=0,T.skidInfo=1,ne){T.skidInfo=1;var R=T.suspensionForce*H*T.frictionSlip,C=R,ce=R*C;T.forwardImpulse=x;var Y=T.forwardImpulse*P,I=T.sideImpulse*A,z=Y*Y+I*I;if(T.sliding=!1,z>ce){this.sliding=!0,T.sliding=!0;var F=R/Math.sqrt(z);T.skidInfo*=F}}}if(this.sliding)for(var J=0;J<ae;J++){var T=te[J];T.sideImpulse!==0&&T.skidInfo<1&&(T.forwardImpulse*=T.skidInfo,T.sideImpulse*=T.skidInfo)}for(var J=0;J<ae;J++){var T=te[J],de=new s;if(de.copy(T.raycastResult.hitPointWorld),T.forwardImpulse!==0){var pe=new s;le[J].scale(T.forwardImpulse,pe),G.applyImpulse(pe,de)}if(T.sideImpulse!==0){var ne=T.raycastResult.body,fe=new s;fe.copy(T.raycastResult.hitPointWorld);var ve=new s;X[J].scale(T.sideImpulse,ve),G.pointToLocalFrame(de,de),de["xyz"[this.indexUpAxis]]*=T.rollInfluence,G.pointToWorldFrame(de,de),G.applyImpulse(ve,de),ve.scale(-1,ve),ne.applyImpulse(ve,fe)}}};var b=new s,E=new s,S=new s;function k(H,B,te,ae,G){var le=0,X=te,J=b,T=E,ne=S;H.getVelocityAtWorldPoint(X,J),B.getVelocityAtWorldPoint(X,T),J.vsub(T,ne);var Q=ae.dot(ne),oe=D(H,te,ae),ie=D(B,te,ae),$=1,A=$/(oe+ie);return le=-Q*A,G<le&&(le=G),le<-G&&(le=-G),le}var O=new s,W=new s,U=new s,L=new s;function D(H,B,te){var ae=O,G=W,le=U,X=L;return B.vsub(H.position,ae),ae.cross(te,G),H.invInertiaWorld.vmult(G,X),X.cross(ae,le),H.invMass+te.dot(le)}var V=new s,ee=new s,K=new s;function Z(H,B,te,ae,G,$){var X=G.norm2();if(X>1.1)return 0;var J=V,T=ee,ne=K;H.getVelocityAtWorldPoint(B,J),te.getVelocityAtWorldPoint(ae,T),J.vsub(T,ne);var Q=G.dot(ne),oe=.2,ie=1/(H.invMass+te.invMass),$=-oe*Q*ie;return $}},{"../collision/Ray":9,"../collision/RaycastResult":10,"../math/Quaternion":28,"../math/Vec3":30,"../objects/WheelInfo":36,"./Body":31}],33:[function(n,i,r){var s=n("./Body"),o=n("../shapes/Sphere"),a=n("../shapes/Box"),l=n("../math/Vec3"),c=n("../constraints/HingeConstraint");i.exports=h;function h(f){if(this.wheelBodies=[],this.coordinateSystem=typeof f.coordinateSystem=="undefined"?new l(1,2,3):f.coordinateSystem.clone(),this.chassisBody=f.chassisBody,!this.chassisBody){var p=new a(new l(5,2,.5));this.chassisBody=new s(1,p)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}h.prototype.addWheel=function(f){f=f||{};var p=f.body;p||(p=new s(1,new o(1.2))),this.wheelBodies.push(p),this.wheelForces.push(0),new l;var y=typeof f.position!="undefined"?f.position.clone():new l,v=new l;this.chassisBody.pointToWorldFrame(y,v),p.position.set(v.x,v.y,v.z);var m=typeof f.axis!="undefined"?f.axis.clone():new l(0,1,0);this.wheelAxes.push(m);var g=new c(this.chassisBody,p,{pivotA:y,axisA:m,pivotB:l.ZERO,axisB:m,collideConnected:!1});return this.constraints.push(g),this.wheelBodies.length-1},h.prototype.setSteeringValue=function(f,p){var y=this.wheelAxes[p],v=Math.cos(f),m=Math.sin(f),g=y.x,w=y.y;this.constraints[p].axisA.set(v*g-m*w,m*g+v*w,0)},h.prototype.setMotorSpeed=function(f,p){var y=this.constraints[p];y.enableMotor(),y.motorTargetVelocity=f},h.prototype.disableMotor=function(f){var p=this.constraints[f];p.disableMotor()};var u=new l;h.prototype.setWheelForce=function(f,p){this.wheelForces[p]=f},h.prototype.applyWheelForce=function(f,p){var y=this.wheelAxes[p],v=this.wheelBodies[p],m=v.torque;y.scale(f,u),v.vectorToWorldFrame(u,u),m.vadd(u,m)},h.prototype.addToWorld=function(f){for(var p=this.constraints,y=this.wheelBodies.concat([this.chassisBody]),v=0;v<y.length;v++)f.add(y[v]);for(var v=0;v<p.length;v++)f.addConstraint(p[v]);f.addEventListener("preStep",this._update.bind(this))},h.prototype._update=function(){for(var f=this.wheelForces,p=0;p<f.length;p++)this.applyWheelForce(f[p],p)},h.prototype.removeFromWorld=function(f){for(var p=this.constraints,y=this.wheelBodies.concat([this.chassisBody]),v=0;v<y.length;v++)f.remove(y[v]);for(var v=0;v<p.length;v++)f.removeConstraint(p[v])};var d=new l;h.prototype.getWheelSpeed=function(f){var p=this.wheelAxes[f],y=this.wheelBodies[f],v=y.angularVelocity;return this.chassisBody.vectorToWorldFrame(p,d),v.dot(d)}},{"../constraints/HingeConstraint":15,"../math/Vec3":30,"../shapes/Box":37,"../shapes/Sphere":44,"./Body":31}],34:[function(n,i,r){i.exports=o,n("../shapes/Shape");var s=n("../math/Vec3");n("../math/Quaternion"),n("../shapes/Particle"),n("../objects/Body"),n("../material/Material");function o(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}o.prototype.add=function(p){this.particles.push(p),this.neighbors.length<this.particles.length&&this.neighbors.push([])},o.prototype.remove=function(p){var y=this.particles.indexOf(p);y!==-1&&(this.particles.splice(y,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var a=new s;o.prototype.getNeighbors=function(p,y){for(var v=this.particles.length,m=p.id,g=this.smoothingRadius*this.smoothingRadius,w=a,b=0;b!==v;b++){var E=this.particles[b];E.position.vsub(p.position,w),m!==E.id&&w.norm2()<g&&y.push(E)}};var l=new s,c=new s,h=new s,u=new s,d=new s,f=new s;o.prototype.update=function(){for(var p=this.particles.length,y=l,v=this.speedOfSound,m=this.eps,g=0;g!==p;g++){var w=this.particles[g],b=this.neighbors[g];b.length=0,this.getNeighbors(w,b),b.push(this.particles[g]);for(var E=b.length,S=0,k=0;k!==E;k++){w.position.vsub(b[k].position,y);var O=y.norm(),W=this.w(O);S+=b[k].mass*W}this.densities[g]=S,this.pressures[g]=v*v*(this.densities[g]-this.density)}for(var U=c,L=h,D=u,V=d,ee=f,g=0;g!==p;g++){var K=this.particles[g];U.set(0,0,0),L.set(0,0,0);for(var Z,H,b=this.neighbors[g],E=b.length,k=0;k!==E;k++){var B=b[k];K.position.vsub(B.position,V);var te=V.norm();Z=-B.mass*(this.pressures[g]/(this.densities[g]*this.densities[g]+m)+this.pressures[k]/(this.densities[k]*this.densities[k]+m)),this.gradw(V,D),D.mult(Z,D),U.vadd(D,U),B.velocity.vsub(K.velocity,ee),ee.mult(1/(1e-4+this.densities[g]*this.densities[k])*this.viscosity*B.mass,ee),H=this.nablaw(te),ee.mult(H,ee),L.vadd(ee,L)}L.mult(K.mass,L),U.mult(K.mass,U),K.force.vadd(L,K.force),K.force.vadd(U,K.force)}},o.prototype.w=function(p){var y=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(y,9))*Math.pow(y*y-p*p,3)},o.prototype.gradw=function(p,y){var v=p.norm(),m=this.smoothingRadius;p.mult(945/(32*Math.PI*Math.pow(m,9))*Math.pow(m*m-v*v,2),y)},o.prototype.nablaw=function(p){var y=this.smoothingRadius,v=945/(32*Math.PI*Math.pow(y,9))*(y*y-p*p)*(7*p*p-3*y*y);return v}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Particle":41,"../shapes/Shape":43}],35:[function(n,i,r){var s=n("../math/Vec3");i.exports=o;function o(g,w,b){b=b||{},this.restLength=typeof b.restLength=="number"?b.restLength:1,this.stiffness=b.stiffness||100,this.damping=b.damping||1,this.bodyA=g,this.bodyB=w,this.localAnchorA=new s,this.localAnchorB=new s,b.localAnchorA&&this.localAnchorA.copy(b.localAnchorA),b.localAnchorB&&this.localAnchorB.copy(b.localAnchorB),b.worldAnchorA&&this.setWorldAnchorA(b.worldAnchorA),b.worldAnchorB&&this.setWorldAnchorB(b.worldAnchorB)}o.prototype.setWorldAnchorA=function(g){this.bodyA.pointToLocalFrame(g,this.localAnchorA)},o.prototype.setWorldAnchorB=function(g){this.bodyB.pointToLocalFrame(g,this.localAnchorB)},o.prototype.getWorldAnchorA=function(g){this.bodyA.pointToWorldFrame(this.localAnchorA,g)},o.prototype.getWorldAnchorB=function(g){this.bodyB.pointToWorldFrame(this.localAnchorB,g)};var a=new s,l=new s,c=new s,h=new s,u=new s,d=new s,f=new s,p=new s,y=new s,v=new s,m=new s;o.prototype.applyForce=function(){var g=this.stiffness,w=this.damping,b=this.restLength,E=this.bodyA,S=this.bodyB,k=a,O=l,W=c,U=h,L=m,D=u,V=d,ee=f,K=p,Z=y,H=v;this.getWorldAnchorA(D),this.getWorldAnchorB(V),D.vsub(E.position,ee),V.vsub(S.position,K),V.vsub(D,k);var B=k.norm();O.copy(k),O.normalize(),S.velocity.vsub(E.velocity,W),S.angularVelocity.cross(K,L),W.vadd(L,W),E.angularVelocity.cross(ee,L),W.vsub(L,W),O.mult(-g*(B-b)-w*W.dot(O),U),E.force.vsub(U,E.force),S.force.vadd(U,S.force),ee.cross(U,Z),K.cross(U,H),E.torque.vsub(Z,E.torque),S.torque.vadd(H,S.torque)}},{"../math/Vec3":30}],36:[function(n,i,r){var s=n("../math/Vec3"),o=n("../math/Transform"),a=n("../collision/RaycastResult"),l=n("../utils/Utils");i.exports=c;function c(d){d=l.defaults(d,{chassisConnectionPointLocal:new s,chassisConnectionPointWorld:new s,directionLocal:new s,directionWorld:new s,axleLocal:new s,axleWorld:new s,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=d.maxSuspensionTravel,this.customSlidingRotationalSpeed=d.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=d.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=d.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=d.chassisConnectionPointWorld.clone(),this.directionLocal=d.directionLocal.clone(),this.directionWorld=d.directionWorld.clone(),this.axleLocal=d.axleLocal.clone(),this.axleWorld=d.axleWorld.clone(),this.suspensionRestLength=d.suspensionRestLength,this.suspensionMaxLength=d.suspensionMaxLength,this.radius=d.radius,this.suspensionStiffness=d.suspensionStiffness,this.dampingCompression=d.dampingCompression,this.dampingRelaxation=d.dampingRelaxation,this.frictionSlip=d.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=d.rollInfluence,this.maxSuspensionForce=d.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=d.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new a,this.worldTransform=new o,this.isInContact=!1}var u=new s,h=new s,u=new s;c.prototype.updateWheel=function(d){var f=this.raycastResult;if(this.isInContact){var p=f.hitNormalWorld.dot(f.directionWorld);f.hitPointWorld.vsub(d.position,h),d.getVelocityAtWorldPoint(h,u);var y=f.hitNormalWorld.dot(u);if(p>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=1/.1;else{var v=-1/p;this.suspensionRelativeVelocity=y*v,this.clippedInvContactDotSuspension=v}}else f.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,f.directionWorld.scale(-1,f.hitNormalWorld),this.clippedInvContactDotSuspension=1}},{"../collision/RaycastResult":10,"../math/Transform":29,"../math/Vec3":30,"../utils/Utils":53}],37:[function(n,i,r){i.exports=l;var s=n("./Shape"),o=n("../math/Vec3"),a=n("./ConvexPolyhedron");function l(u){s.call(this),this.type=s.types.BOX,this.halfExtents=u,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}l.prototype=new s,l.prototype.constructor=l,l.prototype.updateConvexPolyhedronRepresentation=function(){var u=this.halfExtents.x,d=this.halfExtents.y,f=this.halfExtents.z,p=o,y=[new p(-u,-d,-f),new p(u,-d,-f),new p(u,d,-f),new p(-u,d,-f),new p(-u,-d,f),new p(u,-d,f),new p(u,d,f),new p(-u,d,f)],v=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]];new p(0,0,1),new p(0,1,0),new p(1,0,0);var m=new a(y,v);this.convexPolyhedronRepresentation=m,m.material=this.material},l.prototype.calculateLocalInertia=function(u,d){return d=d||new o,l.calculateInertia(this.halfExtents,u,d),d},l.calculateInertia=function(u,d,f){var p=u;f.x=1/12*d*(2*p.y*2*p.y+2*p.z*2*p.z),f.y=1/12*d*(2*p.x*2*p.x+2*p.z*2*p.z),f.z=1/12*d*(2*p.y*2*p.y+2*p.x*2*p.x)},l.prototype.getSideNormals=function(u,d){var f=u,p=this.halfExtents;if(f[0].set(p.x,0,0),f[1].set(0,p.y,0),f[2].set(0,0,p.z),f[3].set(-p.x,0,0),f[4].set(0,-p.y,0),f[5].set(0,0,-p.z),d!==void 0)for(var y=0;y!==f.length;y++)d.vmult(f[y],f[y]);return f},l.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},l.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};var c=new o;new o,l.prototype.forEachWorldCorner=function(u,d,f){for(var p=this.halfExtents,y=[[p.x,p.y,p.z],[-p.x,p.y,p.z],[-p.x,-p.y,p.z],[-p.x,-p.y,-p.z],[p.x,-p.y,-p.z],[p.x,p.y,-p.z],[-p.x,p.y,-p.z],[p.x,-p.y,p.z]],v=0;v<y.length;v++)c.set(y[v][0],y[v][1],y[v][2]),d.vmult(c,c),u.vadd(c,c),f(c.x,c.y,c.z)};var h=[new o,new o,new o,new o,new o,new o,new o,new o];l.prototype.calculateWorldAABB=function(u,d,f,p){var y=this.halfExtents;h[0].set(y.x,y.y,y.z),h[1].set(-y.x,y.y,y.z),h[2].set(-y.x,-y.y,y.z),h[3].set(-y.x,-y.y,-y.z),h[4].set(y.x,-y.y,-y.z),h[5].set(y.x,y.y,-y.z),h[6].set(-y.x,y.y,-y.z),h[7].set(y.x,-y.y,y.z);var v=h[0];d.vmult(v,v),u.vadd(v,v),p.copy(v),f.copy(v);for(var m=1;m<8;m++){var v=h[m];d.vmult(v,v),u.vadd(v,v);var g=v.x,w=v.y,b=v.z;g>p.x&&(p.x=g),w>p.y&&(p.y=w),b>p.z&&(p.z=b),g<f.x&&(f.x=g),w<f.y&&(f.y=w),b<f.z&&(f.z=b)}}},{"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],38:[function(n,i,r){i.exports=l;var s=n("./Shape"),o=n("../math/Vec3");n("../math/Quaternion");var a=n("../math/Transform");function l(G,le,X){s.call(this),this.type=s.types.CONVEXPOLYHEDRON,this.vertices=G||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=le||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=X?X.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}l.prototype=new s,l.prototype.constructor=l;var c=new o;l.prototype.computeEdges=function(){var G=this.faces,le=this.vertices;le.length;var X=this.uniqueEdges;X.length=0;for(var J=c,T=0;T!==G.length;T++)for(var ne=G[T],Q=ne.length,oe=0;oe!==Q;oe++){var ie=(oe+1)%Q;le[ne[oe]].vsub(le[ne[ie]],J),J.normalize();for(var $=!1,A=0;A!==X.length;A++)if(X[A].almostEquals(J)||X[A].almostEquals(J)){$=!0;break}$||X.push(J.clone())}},l.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var G=0;G<this.faces.length;G++){for(var le=0;le<this.faces[G].length;le++)if(!this.vertices[this.faces[G][le]])throw new Error("Vertex "+this.faces[G][le]+" not found!");var X=this.faceNormals[G]||new o;this.getFaceNormal(G,X),X.negate(X),this.faceNormals[G]=X;var J=this.vertices[this.faces[G][0]];if(X.dot(J)<0){console.error(".faceNormals["+G+"] = Vec3("+X.toString()+") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");for(var le=0;le<this.faces[G].length;le++)console.warn(".vertices["+this.faces[G][le]+"] = Vec3("+this.vertices[this.faces[G][le]].toString()+")")}}};var h=new o,u=new o;l.computeNormal=function(G,le,X,J){le.vsub(G,u),X.vsub(le,h),h.cross(u,J),J.isZero()||J.normalize()},l.prototype.getFaceNormal=function(G,le){var X=this.faces[G],J=this.vertices[X[0]],T=this.vertices[X[1]],ne=this.vertices[X[2]];return l.computeNormal(J,T,ne,le)};var d=new o;l.prototype.clipAgainstHull=function(G,le,X,J,T,ne,Q,oe,ie){for(var $=d,A=-1,P=-Number.MAX_VALUE,x=0;x<X.faces.length;x++){$.copy(X.faceNormals[x]),T.vmult($,$);var M=$.dot(ne);M>P&&(P=M,A=x)}for(var N=[],F=X.faces[A],R=F.length,C=0;C<R;C++){var ce=X.vertices[F[C]],Y=new o;Y.copy(ce),T.vmult(Y,Y),J.vadd(Y,Y),N.push(Y)}A>=0&&this.clipFaceAgainstHull(ne,G,le,N,Q,oe,ie)};var f=new o,p=new o,y=new o,v=new o,m=new o,g=new o;l.prototype.findSeparatingAxis=function(G,le,X,J,T,ne,Q,oe){var ie=f,$=p,A=y,P=v,x=m,M=g,N=Number.MAX_VALUE,F=this;if(F.uniqueAxes)for(var C=0;C!==F.uniqueAxes.length;C++){X.vmult(F.uniqueAxes[C],ie);var Y=F.testSepAxis(ie,G,le,X,J,T);if(Y===!1)return!1;Y<N&&(N=Y,ne.copy(ie))}else for(var R=Q?Q.length:F.faces.length,C=0;C<R;C++){var ce=Q?Q[C]:C;ie.copy(F.faceNormals[ce]),X.vmult(ie,ie);var Y=F.testSepAxis(ie,G,le,X,J,T);if(Y===!1)return!1;Y<N&&(N=Y,ne.copy(ie))}if(G.uniqueAxes)for(var C=0;C!==G.uniqueAxes.length;C++){T.vmult(G.uniqueAxes[C],$);var Y=F.testSepAxis($,G,le,X,J,T);if(Y===!1)return!1;Y<N&&(N=Y,ne.copy($))}else for(var I=oe?oe.length:G.faces.length,C=0;C<I;C++){var ce=oe?oe[C]:C;$.copy(G.faceNormals[ce]),T.vmult($,$);var Y=F.testSepAxis($,G,le,X,J,T);if(Y===!1)return!1;Y<N&&(N=Y,ne.copy($))}for(var z=0;z!==F.uniqueEdges.length;z++){X.vmult(F.uniqueEdges[z],P);for(var de=0;de!==G.uniqueEdges.length;de++)if(T.vmult(G.uniqueEdges[de],x),P.cross(x,M),!M.almostZero()){M.normalize();var pe=F.testSepAxis(M,G,le,X,J,T);if(pe===!1)return!1;pe<N&&(N=pe,ne.copy(M))}}return J.vsub(le,A),A.dot(ne)>0&&ne.negate(ne),!0};var w=[],b=[];l.prototype.testSepAxis=function(G,le,X,J,T,ne){var Q=this;l.project(Q,G,X,J,w),l.project(le,G,T,ne,b);var oe=w[0],ie=w[1],$=b[0],A=b[1];if(oe<A||$<ie)return!1;var P=oe-A,x=$-ie,M=P<x?P:x;return M};var E=new o,S=new o;l.prototype.calculateLocalInertia=function(G,le){this.computeLocalAABB(E,S);var X=S.x-E.x,J=S.y-E.y,T=S.z-E.z;le.x=1/12*G*(2*J*2*J+2*T*2*T),le.y=1/12*G*(2*X*2*X+2*T*2*T),le.z=1/12*G*(2*J*2*J+2*X*2*X)},l.prototype.getPlaneConstantOfFace=function(G){var le=this.faces[G],X=this.faceNormals[G],J=this.vertices[le[0]],T=-X.dot(J);return T};var k=new o,O=new o,W=new o,U=new o,L=new o,D=new o,V=new o,ee=new o;l.prototype.clipFaceAgainstHull=function(G,le,X,J,T,ne,Q){for(var oe=k,ie=O,$=W,A=U,P=L,x=D,M=V,N=ee,F=this,R=[],C=J,ce=R,Y=-1,I=Number.MAX_VALUE,z=0;z<F.faces.length;z++){oe.copy(F.faceNormals[z]),X.vmult(oe,oe);var de=oe.dot(G);de<I&&(I=de,Y=z)}if(!(Y<0)){var pe=F.faces[Y];pe.connectedFaces=[];for(var fe=0;fe<F.faces.length;fe++)for(var ve=0;ve<F.faces[fe].length;ve++)pe.indexOf(F.faces[fe][ve])!==-1&&fe!==Y&&pe.connectedFaces.indexOf(fe)===-1&&pe.connectedFaces.push(fe);C.length;for(var ye=pe.length,Ne=0;Ne<ye;Ne++){var Ae=F.vertices[pe[Ne]],Oe=F.vertices[pe[(Ne+1)%ye]];Ae.vsub(Oe,ie),$.copy(ie),X.vmult($,$),le.vadd($,$),A.copy(this.faceNormals[Y]),X.vmult(A,A),le.vadd(A,A),$.cross(A,P),P.negate(P),x.copy(Ae),X.vmult(x,x),le.vadd(x,x),-x.dot(P);var yn;{var ht=pe.connectedFaces[Ne];M.copy(this.faceNormals[ht]);var At=this.getPlaneConstantOfFace(ht);N.copy(M),X.vmult(N,N);var yn=At-N.dot(le)}for(this.clipFaceAgainstPlane(C,ce,N,yn);C.length;)C.shift();for(;ce.length;)C.push(ce.shift())}M.copy(this.faceNormals[Y]);var At=this.getPlaneConstantOfFace(Y);N.copy(M),X.vmult(N,N);for(var yn=At-N.dot(le),fe=0;fe<C.length;fe++){var cn=N.dot(C[fe])+yn;if(cn<=T&&(console.log("clamped: depth="+cn+" to minDist="+(T+"")),cn=T),cn<=ne){var Ii=C[fe];if(cn<=0){var Xt={point:Ii,normal:N,depth:cn};Q.push(Xt)}}}}},l.prototype.clipFaceAgainstPlane=function(G,le,X,J){var T,ne,Q=G.length;if(Q<2)return le;var oe=G[G.length-1],ie=G[0];T=X.dot(oe)+J;for(var $=0;$<Q;$++){if(ie=G[$],ne=X.dot(ie)+J,T<0)if(ne<0){var A=new o;A.copy(ie),le.push(A)}else{var A=new o;oe.lerp(ie,T/(T-ne),A),le.push(A)}else if(ne<0){var A=new o;oe.lerp(ie,T/(T-ne),A),le.push(A),le.push(ie)}oe=ie,T=ne}return le},l.prototype.computeWorldVertices=function(G,le){for(var X=this.vertices.length;this.worldVertices.length<X;)this.worldVertices.push(new o);for(var J=this.vertices,T=this.worldVertices,ne=0;ne!==X;ne++)le.vmult(J[ne],T[ne]),G.vadd(T[ne],T[ne]);this.worldVerticesNeedsUpdate=!1},new o,l.prototype.computeLocalAABB=function(G,le){var X=this.vertices.length,J=this.vertices;G.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),le.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var T=0;T<X;T++){var ne=J[T];ne.x<G.x?G.x=ne.x:ne.x>le.x&&(le.x=ne.x),ne.y<G.y?G.y=ne.y:ne.y>le.y&&(le.y=ne.y),ne.z<G.z?G.z=ne.z:ne.z>le.z&&(le.z=ne.z)}},l.prototype.computeWorldFaceNormals=function(G){for(var le=this.faceNormals.length;this.worldFaceNormals.length<le;)this.worldFaceNormals.push(new o);for(var X=this.faceNormals,J=this.worldFaceNormals,T=0;T!==le;T++)G.vmult(X[T],J[T]);this.worldFaceNormalsNeedsUpdate=!1},l.prototype.updateBoundingSphereRadius=function(){for(var G=0,le=this.vertices,X=0,J=le.length;X!==J;X++){var T=le[X].norm2();T>G&&(G=T)}this.boundingSphereRadius=Math.sqrt(G)};var K=new o;l.prototype.calculateWorldAABB=function(G,le,X,J){for(var T=this.vertices.length,ne=this.vertices,Q,oe,ie,$,A,P,x=0;x<T;x++){K.copy(ne[x]),le.vmult(K,K),G.vadd(K,K);var M=K;M.x<Q||Q===void 0?Q=M.x:(M.x>$||$===void 0)&&($=M.x),M.y<oe||oe===void 0?oe=M.y:(M.y>A||A===void 0)&&(A=M.y),M.z<ie||ie===void 0?ie=M.z:(M.z>P||P===void 0)&&(P=M.z)}X.set(Q,oe,ie),J.set($,A,P)},l.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},l.prototype.getAveragePointLocal=function(G){G=G||new o;for(var le=this.vertices.length,X=this.vertices,J=0;J<le;J++)G.vadd(X[J],G);return G.mult(1/le,G),G},l.prototype.transformAllPoints=function(G,le){var X=this.vertices.length,J=this.vertices;if(le){for(var T=0;T<X;T++){var ne=J[T];le.vmult(ne,ne)}for(var T=0;T<this.faceNormals.length;T++){var ne=this.faceNormals[T];le.vmult(ne,ne)}}if(G)for(var T=0;T<X;T++){var ne=J[T];ne.vadd(G,ne)}};var Z=new o,H=new o,B=new o;l.prototype.pointIsInside=function(G){var le=this.vertices.length,X=this.vertices,J=this.faces,T=this.faceNormals,ne=null,Q=this.faces.length,oe=Z;this.getAveragePointLocal(oe);for(var ie=0;ie<Q;ie++){this.faces[ie].length;var le=T[ie],$=X[J[ie][0]],A=H;G.vsub($,A);var P=le.dot(A),x=B;oe.vsub($,x);var M=le.dot(x);if(P<0&&M>0||P>0&&M<0)return!1}return ne?1:-1},new o;var te=new o,ae=new o;l.project=function(G,le,X,J,T){var ne=G.vertices.length,Q=te,oe=0,ie=0,$=ae,A=G.vertices;$.setZero(),a.vectorToLocalFrame(X,J,le,Q),a.pointToLocalFrame(X,J,$,$);var P=$.dot(Q);ie=oe=A[0].dot(Q);for(var x=1;x<ne;x++){var M=A[x].dot(Q);M>oe&&(oe=M),M<ie&&(ie=M)}if(ie-=P,oe-=P,ie>oe){var N=ie;ie=oe,oe=N}T[0]=oe,T[1]=ie}},{"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"./Shape":43}],39:[function(n,i,r){i.exports=l;var s=n("./Shape"),o=n("../math/Vec3");n("../math/Quaternion");var a=n("./ConvexPolyhedron");function l(c,h,u,d){var f=d,p=[],y=[],v=[],m=[],g=[],w=Math.cos,b=Math.sin;p.push(new o(h*w(0),h*b(0),-u*.5)),m.push(0),p.push(new o(c*w(0),c*b(0),u*.5)),g.push(1);for(var E=0;E<f;E++){var S=2*Math.PI/f*(E+1),k=2*Math.PI/f*(E+.5);E<f-1?(p.push(new o(h*w(S),h*b(S),-u*.5)),m.push(2*E+2),p.push(new o(c*w(S),c*b(S),u*.5)),g.push(2*E+3),v.push([2*E+2,2*E+3,2*E+1,2*E])):v.push([0,1,2*E+1,2*E]),(f%2===1||E<f/2)&&y.push(new o(w(k),b(k),0))}v.push(g),y.push(new o(0,0,1));for(var O=[],E=0;E<m.length;E++)O.push(m[m.length-E-1]);v.push(O),this.type=s.types.CONVEXPOLYHEDRON,a.call(this,p,v,y)}l.prototype=new a},{"../math/Quaternion":28,"../math/Vec3":30,"./ConvexPolyhedron":38,"./Shape":43}],40:[function(n,i,r){var s=n("./Shape"),o=n("./ConvexPolyhedron"),a=n("../math/Vec3"),l=n("../utils/Utils");i.exports=c;function c(h,u){u=l.defaults(u,{maxValue:null,minValue:null,elementSize:1}),this.data=h,this.maxValue=u.maxValue,this.minValue=u.minValue,this.elementSize=u.elementSize,u.minValue===null&&this.updateMinValue(),u.maxValue===null&&this.updateMaxValue(),this.cacheEnabled=!0,s.call(this),this.pillarConvex=new o,this.pillarOffset=new a,this.type=s.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}c.prototype=new s,c.prototype.update=function(){this._cachedPillars={}},c.prototype.updateMinValue=function(){for(var h=this.data,u=h[0][0],d=0;d!==h.length;d++)for(var f=0;f!==h[d].length;f++){var p=h[d][f];p<u&&(u=p)}this.minValue=u},c.prototype.updateMaxValue=function(){for(var h=this.data,u=h[0][0],d=0;d!==h.length;d++)for(var f=0;f!==h[d].length;f++){var p=h[d][f];p>u&&(u=p)}this.maxValue=u},c.prototype.setHeightValueAtIndex=function(h,u,d){var f=this.data;f[h][u]=d,this.clearCachedConvexTrianglePillar(h,u,!1),h>0&&(this.clearCachedConvexTrianglePillar(h-1,u,!0),this.clearCachedConvexTrianglePillar(h-1,u,!1)),u>0&&(this.clearCachedConvexTrianglePillar(h,u-1,!0),this.clearCachedConvexTrianglePillar(h,u-1,!1)),u>0&&h>0&&this.clearCachedConvexTrianglePillar(h-1,u-1,!0)},c.prototype.getRectMinMax=function(h,u,d,f,p){p=p||[];for(var y=this.data,v=this.minValue,m=h;m<=d;m++)for(var g=u;g<=f;g++){var w=y[m][g];w>v&&(v=w)}p[0]=this.minValue,p[1]=v},c.prototype.getIndexOfPosition=function(h,u,d,f){var p=this.elementSize,y=this.data,v=Math.floor(h/p),m=Math.floor(u/p);return d[0]=v,d[1]=m,f&&(v<0&&(v=0),m<0&&(m=0),v>=y.length-1&&(v=y.length-1),m>=y[0].length-1&&(m=y[0].length-1)),!(v<0||m<0||v>=y.length-1||m>=y[0].length-1)},c.prototype.getHeightAt=function(h,u,d){var f=[];this.getIndexOfPosition(h,u,f,d);var p=[];return this.getRectMinMax(f[0],f[1]+1,f[0],f[1]+1,p),(p[0]+p[1])/2},c.prototype.getCacheConvexTrianglePillarKey=function(h,u,d){return h+"_"+u+"_"+(d?1:0)},c.prototype.getCachedConvexTrianglePillar=function(h,u,d){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(h,u,d)]},c.prototype.setCachedConvexTrianglePillar=function(h,u,d,f,p){this._cachedPillars[this.getCacheConvexTrianglePillarKey(h,u,d)]={convex:f,offset:p}},c.prototype.clearCachedConvexTrianglePillar=function(h,u,d){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(h,u,d)]},c.prototype.getConvexTrianglePillar=function(h,u,d){var f=this.pillarConvex,p=this.pillarOffset;if(this.cacheEnabled){var y=this.getCachedConvexTrianglePillar(h,u,d);if(y){this.pillarConvex=y.convex,this.pillarOffset=y.offset;return}f=new o,p=new a,this.pillarConvex=f,this.pillarOffset=p}var y=this.data,v=this.elementSize,m=f.faces;f.vertices.length=6;for(var g=0;g<6;g++)f.vertices[g]||(f.vertices[g]=new a);m.length=5;for(var g=0;g<5;g++)m[g]||(m[g]=[]);var w=f.vertices,b=(Math.min(y[h][u],y[h+1][u],y[h][u+1],y[h+1][u+1])-this.minValue)/2+this.minValue;d?(p.set((h+.75)*v,(u+.75)*v,b),w[0].set(.25*v,.25*v,y[h+1][u+1]-b),w[1].set(-.75*v,.25*v,y[h][u+1]-b),w[2].set(.25*v,-.75*v,y[h+1][u]-b),w[3].set(.25*v,.25*v,-b-1),w[4].set(-.75*v,.25*v,-b-1),w[5].set(.25*v,-.75*v,-b-1),m[0][0]=0,m[0][1]=1,m[0][2]=2,m[1][0]=5,m[1][1]=4,m[1][2]=3,m[2][0]=2,m[2][1]=5,m[2][2]=3,m[2][3]=0,m[3][0]=3,m[3][1]=4,m[3][2]=1,m[3][3]=0,m[4][0]=1,m[4][1]=4,m[4][2]=5,m[4][3]=2):(p.set((h+.25)*v,(u+.25)*v,b),w[0].set(-.25*v,-.25*v,y[h][u]-b),w[1].set(.75*v,-.25*v,y[h+1][u]-b),w[2].set(-.25*v,.75*v,y[h][u+1]-b),w[3].set(-.25*v,-.25*v,-b-1),w[4].set(.75*v,-.25*v,-b-1),w[5].set(-.25*v,.75*v,-b-1),m[0][0]=0,m[0][1]=1,m[0][2]=2,m[1][0]=5,m[1][1]=4,m[1][2]=3,m[2][0]=0,m[2][1]=2,m[2][2]=5,m[2][3]=3,m[3][0]=1,m[3][1]=0,m[3][2]=3,m[3][3]=4,m[4][0]=4,m[4][1]=5,m[4][2]=2,m[4][3]=1),f.computeNormals(),f.computeEdges(),f.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(h,u,d,f,p)},c.prototype.calculateLocalInertia=function(h,u){return u=u||new a,u.set(0,0,0),u},c.prototype.volume=function(){return Number.MAX_VALUE},c.prototype.calculateWorldAABB=function(h,u,d,f){d.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),f.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},c.prototype.updateBoundingSphereRadius=function(){var h=this.data,u=this.elementSize;this.boundingSphereRadius=new a(h.length*u,h[0].length*u,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()}},{"../math/Vec3":30,"../utils/Utils":53,"./ConvexPolyhedron":38,"./Shape":43}],41:[function(n,i,r){i.exports=a;var s=n("./Shape"),o=n("../math/Vec3");function a(){s.call(this),this.type=s.types.PARTICLE}a.prototype=new s,a.prototype.constructor=a,a.prototype.calculateLocalInertia=function(l,c){return c=c||new o,c.set(0,0,0),c},a.prototype.volume=function(){return 0},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},a.prototype.calculateWorldAABB=function(l,c,h,u){h.copy(l),u.copy(l)}},{"../math/Vec3":30,"./Shape":43}],42:[function(n,i,r){i.exports=a;var s=n("./Shape"),o=n("../math/Vec3");function a(){s.call(this),this.type=s.types.PLANE,this.worldNormal=new o,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}a.prototype=new s,a.prototype.constructor=a,a.prototype.computeWorldNormal=function(c){var h=this.worldNormal;h.set(0,0,1),c.vmult(h,h),this.worldNormalNeedsUpdate=!1},a.prototype.calculateLocalInertia=function(c,h){return h=h||new o,h},a.prototype.volume=function(){return Number.MAX_VALUE};var l=new o;a.prototype.calculateWorldAABB=function(c,h,u,d){l.set(0,0,1),h.vmult(l,l);var f=Number.MAX_VALUE;u.set(-f,-f,-f),d.set(f,f,f),l.x===1&&(d.x=c.x),l.y===1&&(d.y=c.y),l.z===1&&(d.z=c.z),l.x===-1&&(u.x=c.x),l.y===-1&&(u.y=c.y),l.z===-1&&(u.z=c.z)},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},{"../math/Vec3":30,"./Shape":43}],43:[function(n,i,r){i.exports=s;var s=n("./Shape");n("../math/Vec3"),n("../math/Quaternion"),n("../material/Material");function s(){this.id=s.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}s.prototype.constructor=s,s.prototype.updateBoundingSphereRadius=function(){throw"computeBoundingSphereRadius() not implemented for shape type "+this.type},s.prototype.volume=function(){throw"volume() not implemented for shape type "+this.type},s.prototype.calculateLocalInertia=function(o,a){throw"calculateLocalInertia() not implemented for shape type "+this.type},s.idCounter=0,s.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},{"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"./Shape":43}],44:[function(n,i,r){i.exports=a;var s=n("./Shape"),o=n("../math/Vec3");function a(l){if(s.call(this),this.radius=l!==void 0?Number(l):1,this.type=s.types.SPHERE,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}a.prototype=new s,a.prototype.constructor=a,a.prototype.calculateLocalInertia=function(l,c){c=c||new o;var h=2*l*this.radius*this.radius/5;return c.x=h,c.y=h,c.z=h,c},a.prototype.volume=function(){return 4*Math.PI*this.radius/3},a.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},a.prototype.calculateWorldAABB=function(l,c,h,u){for(var d=this.radius,f=["x","y","z"],p=0;p<f.length;p++){var y=f[p];h[y]=l[y]-d,u[y]=l[y]+d}}},{"../math/Vec3":30,"./Shape":43}],45:[function(n,i,r){i.exports=h;var s=n("./Shape"),o=n("../math/Vec3");n("../math/Quaternion");var a=n("../math/Transform"),l=n("../collision/AABB"),c=n("../utils/Octree");function h(O,W){s.call(this),this.type=s.types.TRIMESH,this.vertices=new Float32Array(O),this.indices=new Int16Array(W),this.normals=new Float32Array(W.length),this.aabb=new l,this.edges=null,this.scale=new o(1,1,1),this.tree=new c,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}h.prototype=new s,h.prototype.constructor=h;var u=new o;h.prototype.updateTree=function(){var O=this.tree;O.reset(),O.aabb.copy(this.aabb);var W=this.scale;O.aabb.lowerBound.x*=1/W.x,O.aabb.lowerBound.y*=1/W.y,O.aabb.lowerBound.z*=1/W.z,O.aabb.upperBound.x*=1/W.x,O.aabb.upperBound.y*=1/W.y,O.aabb.upperBound.z*=1/W.z;for(var U=new l,L=new o,D=new o,V=new o,ee=[L,D,V],K=0;K<this.indices.length/3;K++){var Z=K*3;this._getUnscaledVertex(this.indices[Z],L),this._getUnscaledVertex(this.indices[Z+1],D),this._getUnscaledVertex(this.indices[Z+2],V),U.setFromPoints(ee),O.insert(U,K)}O.removeEmptyNodes()};var d=new l;h.prototype.getTrianglesInAABB=function(O,W){d.copy(O);var U=this.scale,L=U.x,D=U.y,V=U.z,ee=d.lowerBound,K=d.upperBound;return ee.x/=L,ee.y/=D,ee.z/=V,K.x/=L,K.y/=D,K.z/=V,this.tree.aabbQuery(d,W)},h.prototype.setScale=function(O){var W=this.scale.x===this.scale.y===this.scale.z,U=O.x===O.y===O.z;W&&U||this.updateNormals(),this.scale.copy(O),this.updateAABB(),this.updateBoundingSphereRadius()},h.prototype.updateNormals=function(){for(var O=u,W=this.normals,U=0;U<this.indices.length/3;U++){var L=U*3,D=this.indices[L],V=this.indices[L+1],ee=this.indices[L+2];this.getVertex(D,m),this.getVertex(V,g),this.getVertex(ee,w),h.computeNormal(g,m,w,O),W[L]=O.x,W[L+1]=O.y,W[L+2]=O.z}},h.prototype.updateEdges=function(){for(var O={},W=function(Z,H){var B=D<V?D+"_"+V:V+"_"+D;O[B]=!0},U=0;U<this.indices.length/3;U++){var L=U*3,D=this.indices[L],V=this.indices[L+1];this.indices[L+2],W(),W(),W()}var ee=Object.keys(O);this.edges=new Int16Array(ee.length*2);for(var U=0;U<ee.length;U++){var K=ee[U].split("_");this.edges[2*U]=parseInt(K[0],10),this.edges[2*U+1]=parseInt(K[1],10)}},h.prototype.getEdgeVertex=function(O,W,U){var L=this.edges[O*2+(W?1:0)];this.getVertex(L,U)};var f=new o,p=new o;h.prototype.getEdgeVector=function(O,W){var U=f,L=p;this.getEdgeVertex(O,0,U),this.getEdgeVertex(O,1,L),L.vsub(U,W)};var y=new o,v=new o;h.computeNormal=function(O,W,U,L){W.vsub(O,v),U.vsub(W,y),y.cross(v,L),L.isZero()||L.normalize()};var m=new o,g=new o,w=new o;h.prototype.getVertex=function(O,W){var U=this.scale;return this._getUnscaledVertex(O,W),W.x*=U.x,W.y*=U.y,W.z*=U.z,W},h.prototype._getUnscaledVertex=function(O,W){var U=O*3,L=this.vertices;return W.set(L[U],L[U+1],L[U+2])},h.prototype.getWorldVertex=function(O,W,U,L){return this.getVertex(O,L),a.pointToWorldFrame(W,U,L,L),L},h.prototype.getTriangleVertices=function(O,W,U,L){var D=O*3;this.getVertex(this.indices[D],W),this.getVertex(this.indices[D+1],U),this.getVertex(this.indices[D+2],L)},h.prototype.getNormal=function(O,W){var U=O*3;return W.set(this.normals[U],this.normals[U+1],this.normals[U+2])};var b=new l;h.prototype.calculateLocalInertia=function(O,W){this.computeLocalAABB(b);var U=b.upperBound.x-b.lowerBound.x,L=b.upperBound.y-b.lowerBound.y,D=b.upperBound.z-b.lowerBound.z;return W.set(1/12*O*(2*L*2*L+2*D*2*D),1/12*O*(2*U*2*U+2*D*2*D),1/12*O*(2*L*2*L+2*U*2*U))};var E=new o;h.prototype.computeLocalAABB=function(O){var W=O.lowerBound,U=O.upperBound,L=this.vertices.length;this.vertices;var D=E;this.getVertex(0,D),W.copy(D),U.copy(D);for(var V=0;V!==L;V++)this.getVertex(V,D),D.x<W.x?W.x=D.x:D.x>U.x&&(U.x=D.x),D.y<W.y?W.y=D.y:D.y>U.y&&(U.y=D.y),D.z<W.z?W.z=D.z:D.z>U.z&&(U.z=D.z)},h.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},h.prototype.updateBoundingSphereRadius=function(){for(var O=0,W=this.vertices,U=new o,L=0,D=W.length/3;L!==D;L++){this.getVertex(L,U);var V=U.norm2();V>O&&(O=V)}this.boundingSphereRadius=Math.sqrt(O)},new o;var S=new a,k=new l;h.prototype.calculateWorldAABB=function(O,W,U,L){var D=S,V=k;D.position=O,D.quaternion=W,this.aabb.toWorldFrame(D,V),U.copy(V.lowerBound),L.copy(V.upperBound)},h.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},h.createTorus=function(O,W,U,L,D){O=O||1,W=W||.5,U=U||8,L=L||6,D=D||Math.PI*2;for(var V=[],ee=[],K=0;K<=U;K++)for(var Z=0;Z<=L;Z++){var H=Z/L*D,B=K/U*Math.PI*2,te=(O+W*Math.cos(B))*Math.cos(H),ae=(O+W*Math.cos(B))*Math.sin(H),G=W*Math.sin(B);V.push(te,ae,G)}for(var K=1;K<=U;K++)for(var Z=1;Z<=L;Z++){var le=(L+1)*K+Z-1,X=(L+1)*(K-1)+Z-1,J=(L+1)*(K-1)+Z,T=(L+1)*K+Z;ee.push(le,X,T),ee.push(X,J,T)}return new h(V,ee)}},{"../collision/AABB":3,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../utils/Octree":50,"./Shape":43}],46:[function(n,i,r){i.exports=o,n("../math/Vec3"),n("../math/Quaternion");var s=n("./Solver");function o(){s.call(this),this.iterations=10,this.tolerance=1e-7}o.prototype=new s;var a=[],l=[],c=[];o.prototype.solve=function(h,u){var d=0,f=this.iterations,p=this.tolerance*this.tolerance,y=this.equations,v=y.length,m=u.bodies,g=m.length,w=h,b,E,S,k,O,W;if(v!==0)for(var U=0;U!==g;U++)m[U].updateSolveMassProperties();var L=l,D=c,V=a;L.length=v,D.length=v,V.length=v;for(var U=0;U!==v;U++){var ee=y[U];V[U]=0,D[U]=ee.computeB(w),L[U]=1/ee.computeC()}if(v!==0){for(var U=0;U!==g;U++){var K=m[U],Z=K.vlambda,H=K.wlambda;Z.set(0,0,0),H&&H.set(0,0,0)}for(d=0;d!==f;d++){k=0;for(var B=0;B!==v;B++){var ee=y[B];b=D[B],E=L[B],W=V[B],O=ee.computeGWlambda(),S=E*(b-O-ee.eps*W),W+S<ee.minForce?S=ee.minForce-W:W+S>ee.maxForce&&(S=ee.maxForce-W),V[B]+=S,k+=S>0?S:-S,ee.addToWlambda(S)}if(k*k<p)break}for(var U=0;U!==g;U++){var K=m[U],te=K.velocity,ae=K.angularVelocity;te.vadd(K.vlambda,te),ae&&ae.vadd(K.wlambda,ae)}}return d}},{"../math/Quaternion":28,"../math/Vec3":30,"./Solver":47}],47:[function(n,i,r){i.exports=s;function s(){this.equations=[]}s.prototype.solve=function(o,a){return 0},s.prototype.addEquation=function(o){o.enabled&&this.equations.push(o)},s.prototype.removeEquation=function(o){var a=this.equations,l=a.indexOf(o);l!==-1&&a.splice(l,1)},s.prototype.removeAllEquations=function(){this.equations.length=0}},{}],48:[function(n,i,r){i.exports=a,n("../math/Vec3"),n("../math/Quaternion");var s=n("./Solver"),o=n("../objects/Body");function a(m){for(s.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=m,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}a.prototype=new s;var l=[],c=[],h={bodies:[]},u=o.STATIC;function d(m){for(var g=m.length,w=0;w!==g;w++){var b=m[w];if(!b.visited&&!(b.body.type&u))return b}return!1}var f=[];function p(m,g,w,b){for(f.push(m),m.visited=!0,g(m,w,b);f.length;)for(var E=f.pop(),S;S=d(E.children);)S.visited=!0,g(S,w,b),f.push(S)}function y(m,g,w){g.push(m.body);for(var b=m.eqs.length,E=0;E!==b;E++){var S=m.eqs[E];w.indexOf(S)===-1&&w.push(S)}}a.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},a.prototype.solve=function(m,g){for(var w=l,b=this.nodePool,E=g.bodies,S=this.equations,k=S.length,O=E.length,W=this.subsolver;b.length<O;)b.push(this.createNode());w.length=O;for(var U=0;U<O;U++)w[U]=b[U];for(var U=0;U!==O;U++){var L=w[U];L.body=E[U],L.children.length=0,L.eqs.length=0,L.visited=!1}for(var D=0;D!==k;D++){var V=S[D],U=E.indexOf(V.bi),ee=E.indexOf(V.bj),K=w[U],Z=w[ee];K.children.push(Z),K.eqs.push(V),Z.children.push(K),Z.eqs.push(V)}var H,B=0,te=c;W.tolerance=this.tolerance,W.iterations=this.iterations;for(var ae=h;H=d(w);){te.length=0,ae.bodies.length=0,p(H,y,ae.bodies,te);var G=te.length;te=te.sort(v);for(var U=0;U!==G;U++)W.addEquation(te[U]);W.solve(m,ae),W.removeAllEquations(),B++}return B};function v(m,g){return g.id-m.id}},{"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"./Solver":47}],49:[function(n,i,r){var s=function(){};i.exports=s,s.prototype={constructor:s,addEventListener:function(o,a){this._listeners===void 0&&(this._listeners={});var l=this._listeners;return l[o]===void 0&&(l[o]=[]),l[o].indexOf(a)===-1&&l[o].push(a),this},hasEventListener:function(o,a){if(this._listeners===void 0)return!1;var l=this._listeners;return l[o]!==void 0&&l[o].indexOf(a)!==-1},removeEventListener:function(o,a){if(this._listeners===void 0)return this;var l=this._listeners;if(l[o]===void 0)return this;var c=l[o].indexOf(a);return c!==-1&&l[o].splice(c,1),this},dispatchEvent:function(o){if(this._listeners===void 0)return this;var a=this._listeners,l=a[o.type];if(l!==void 0){o.target=this;for(var c=0,h=l.length;c<h;c++)l[c].call(this,o)}return this}}},{}],50:[function(n,i,r){var s=n("../collision/AABB"),o=n("../math/Vec3");i.exports=l;function a(u){u=u||{},this.root=u.root||null,this.aabb=u.aabb?u.aabb.clone():new s,this.data=[],this.children=[]}function l(u,d){d=d||{},d.root=null,d.aabb=u,a.call(this,d),this.maxDepth=typeof d.maxDepth!="undefined"?d.maxDepth:8}l.prototype=new a,a.prototype.reset=function(u,d){this.children.length=this.data.length=0},a.prototype.insert=function(u,d,f){var p=this.data;if(f=f||0,!this.aabb.contains(u))return!1;var y=this.children;if(f<(this.maxDepth||this.root.maxDepth)){var v=!1;y.length||(this.subdivide(),v=!0);for(var m=0;m!==8;m++)if(y[m].insert(u,d,f+1))return!0;v&&(y.length=0)}return p.push(d),!0};var c=new o;a.prototype.subdivide=function(){var u=this.aabb,d=u.lowerBound,f=u.upperBound,p=this.children;p.push(new a({aabb:new s({lowerBound:new o(0,0,0)})}),new a({aabb:new s({lowerBound:new o(1,0,0)})}),new a({aabb:new s({lowerBound:new o(1,1,0)})}),new a({aabb:new s({lowerBound:new o(1,1,1)})}),new a({aabb:new s({lowerBound:new o(0,1,1)})}),new a({aabb:new s({lowerBound:new o(0,0,1)})}),new a({aabb:new s({lowerBound:new o(1,0,1)})}),new a({aabb:new s({lowerBound:new o(0,1,0)})})),f.vsub(d,c),c.scale(.5,c);for(var y=this.root||this,v=0;v!==8;v++){var m=p[v];m.root=y;var g=m.aabb.lowerBound;g.x*=c.x,g.y*=c.y,g.z*=c.z,g.vadd(d,g),g.vadd(c,m.aabb.upperBound)}},a.prototype.aabbQuery=function(u,d){this.data,this.children;for(var f=[this];f.length;){var p=f.pop();p.aabb.overlaps(u)&&Array.prototype.push.apply(d,p.data),Array.prototype.push.apply(f,p.children)}return d};var h=new s;a.prototype.rayQuery=function(u,d,f){return u.getAABB(h),h.toLocalFrame(d,h),this.aabbQuery(h,f),f},a.prototype.removeEmptyNodes=function(){for(var u=[this];u.length;){for(var d=u.pop(),f=d.children.length-1;f>=0;f--)d.children[f].data.length||d.children.splice(f,1);Array.prototype.push.apply(u,d.children)}}},{"../collision/AABB":3,"../math/Vec3":30}],51:[function(n,i,r){i.exports=s;function s(){this.objects=[],this.type=Object}s.prototype.release=function(){for(var o=arguments.length,a=0;a!==o;a++)this.objects.push(arguments[a])},s.prototype.get=function(){return this.objects.length===0?this.constructObject():this.objects.pop()},s.prototype.constructObject=function(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}},{}],52:[function(n,i,r){i.exports=s;function s(){this.data={keys:[]}}s.prototype.get=function(o,a){if(o>a){var l=a;a=o,o=l}return this.data[o+"-"+a]},s.prototype.set=function(o,a,l){if(o>a){var c=a;a=o,o=c}var h=o+"-"+a;this.get(o,a)||this.data.keys.push(h),this.data[h]=l},s.prototype.reset=function(){for(var o=this.data,a=o.keys;a.length>0;){var l=a.pop();delete o[l]}}},{}],53:[function(n,i,r){function s(){}i.exports=s,s.defaults=function(o,a){o=o||{};for(var l in a)l in o||(o[l]=a[l]);return o}},{}],54:[function(n,i,r){i.exports=a;var s=n("../math/Vec3"),o=n("./Pool");function a(){o.call(this),this.type=s}a.prototype=new o,a.prototype.constructObject=function(){return new s}},{"../math/Vec3":30,"./Pool":51}],55:[function(n,i,r){i.exports=p;var s=n("../collision/AABB"),o=n("../shapes/Shape"),a=n("../collision/Ray"),l=n("../math/Vec3"),c=n("../math/Transform");n("../shapes/ConvexPolyhedron");var h=n("../math/Quaternion");n("../solver/Solver");var u=n("../utils/Vec3Pool"),d=n("../equations/ContactEquation"),f=n("../equations/FrictionEquation");function p(q){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new u,this.world=q,this.currentContactMaterial=null,this.enableFrictionReduction=!1}p.prototype.createContactEquation=function(q,re,ue,ge,ke,xe){var be;this.contactPointPool.length?(be=this.contactPointPool.pop(),be.bi=q,be.bj=re):be=new d(q,re),be.enabled=q.collisionResponse&&re.collisionResponse&&ue.collisionResponse&&ge.collisionResponse;var Le=this.currentContactMaterial;be.restitution=Le.restitution,be.setSpookParams(Le.contactEquationStiffness,Le.contactEquationRelaxation,this.world.dt);var he=ue.material||q.material,_e=ge.material||re.material;return he&&_e&&he.restitution>=0&&_e.restitution>=0&&(be.restitution=he.restitution*_e.restitution),be.si=ke||ue,be.sj=xe||ge,be},p.prototype.createFrictionEquationsFromContact=function(q,re){var ue=q.bi,ge=q.bj,ke=q.si,xe=q.sj,be=this.world,Le=this.currentContactMaterial,he=Le.friction,_e=ke.material||ue.material,Me=xe.material||ge.material;if(_e&&Me&&_e.friction>=0&&Me.friction>=0&&(he=_e.friction*Me.friction),he>0){var Fe=he*be.gravity.length(),Se=ue.invMass+ge.invMass;Se>0&&(Se=1/Se);var Pe=this.frictionEquationPool,Re=Pe.length?Pe.pop():new f(ue,ge,Fe*Se),We=Pe.length?Pe.pop():new f(ue,ge,Fe*Se);return Re.bi=We.bi=ue,Re.bj=We.bj=ge,Re.minForce=We.minForce=-Fe*Se,Re.maxForce=We.maxForce=Fe*Se,Re.ri.copy(q.ri),Re.rj.copy(q.rj),We.ri.copy(q.ri),We.rj.copy(q.rj),q.ni.tangents(Re.t,We.t),Re.setSpookParams(Le.frictionEquationStiffness,Le.frictionEquationRelaxation,be.dt),We.setSpookParams(Le.frictionEquationStiffness,Le.frictionEquationRelaxation,be.dt),Re.enabled=We.enabled=q.enabled,re.push(Re,We),!0}return!1};var y=new l,v=new l,m=new l;p.prototype.createFrictionFromAverage=function(q){var re=this.result[this.result.length-1];if(!(!this.createFrictionEquationsFromContact(re,this.frictionResult)||q===1)){var ue=this.frictionResult[this.frictionResult.length-2],ge=this.frictionResult[this.frictionResult.length-1];y.setZero(),v.setZero(),m.setZero();var ke=re.bi;re.bj;for(var xe=0;xe!==q;xe++)re=this.result[this.result.length-1-xe],re.bodyA!==ke?(y.vadd(re.ni,y),v.vadd(re.ri,v),m.vadd(re.rj,m)):(y.vsub(re.ni,y),v.vadd(re.rj,v),m.vadd(re.ri,m));var be=1/q;v.scale(be,ue.ri),m.scale(be,ue.rj),ge.ri.copy(ue.ri),ge.rj.copy(ue.rj),y.normalize(),y.tangents(ue.t,ge.t)}};var g=new l,w=new l,b=new h,E=new h;p.prototype.getContacts=function(q,re,ue,ge,ke,xe,be){this.contactPointPool=ke,this.frictionEquationPool=be,this.result=ge,this.frictionResult=xe;for(var Le=b,he=E,_e=g,Me=w,Fe=0,Se=q.length;Fe!==Se;Fe++){var Pe=q[Fe],Re=re[Fe],We=null;Pe.material&&Re.material&&(We=ue.getContactMaterial(Pe.material,Re.material)||null);for(var Ge=0;Ge<Pe.shapes.length;Ge++){Pe.quaternion.mult(Pe.shapeOrientations[Ge],Le),Pe.quaternion.vmult(Pe.shapeOffsets[Ge],_e),_e.vadd(Pe.position,_e);for(var Ce=Pe.shapes[Ge],it=0;it<Re.shapes.length;it++){Re.quaternion.mult(Re.shapeOrientations[it],he),Re.quaternion.vmult(Re.shapeOffsets[it],Me),Me.vadd(Re.position,Me);var lt=Re.shapes[it];if(!(_e.distanceTo(Me)>Ce.boundingSphereRadius+lt.boundingSphereRadius)){var rn=null;Ce.material&&lt.material&&(rn=ue.getContactMaterial(Ce.material,lt.material)||null),this.currentContactMaterial=rn||We||ue.defaultContactMaterial;var yt=this[Ce.type|lt.type];yt&&(Ce.type<lt.type?yt.call(this,Ce,lt,_e,Me,Le,he,Pe,Re,Ce,lt):yt.call(this,lt,Ce,Me,_e,he,Le,Re,Pe,Ce,lt))}}}}},p.prototype[o.types.BOX|o.types.BOX]=p.prototype.boxBox=function(q,re,ue,ge,ke,xe,be,Le){q.convexPolyhedronRepresentation.material=q.material,re.convexPolyhedronRepresentation.material=re.material,q.convexPolyhedronRepresentation.collisionResponse=q.collisionResponse,re.convexPolyhedronRepresentation.collisionResponse=re.collisionResponse,this.convexConvex(q.convexPolyhedronRepresentation,re.convexPolyhedronRepresentation,ue,ge,ke,xe,be,Le,q,re)},p.prototype[o.types.BOX|o.types.CONVEXPOLYHEDRON]=p.prototype.boxConvex=function(q,re,ue,ge,ke,xe,be,Le){q.convexPolyhedronRepresentation.material=q.material,q.convexPolyhedronRepresentation.collisionResponse=q.collisionResponse,this.convexConvex(q.convexPolyhedronRepresentation,re,ue,ge,ke,xe,be,Le,q,re)},p.prototype[o.types.BOX|o.types.PARTICLE]=p.prototype.boxParticle=function(q,re,ue,ge,ke,xe,be,Le){q.convexPolyhedronRepresentation.material=q.material,q.convexPolyhedronRepresentation.collisionResponse=q.collisionResponse,this.convexParticle(q.convexPolyhedronRepresentation,re,ue,ge,ke,xe,be,Le,q,re)},p.prototype[o.types.SPHERE]=p.prototype.sphereSphere=function(q,re,ue,ge,ke,xe,be,Le){var he=this.createContactEquation(be,Le,q,re);ge.vsub(ue,he.ni),he.ni.normalize(),he.ri.copy(he.ni),he.rj.copy(he.ni),he.ri.mult(q.radius,he.ri),he.rj.mult(-re.radius,he.rj),he.ri.vadd(ue,he.ri),he.ri.vsub(be.position,he.ri),he.rj.vadd(ge,he.rj),he.rj.vsub(Le.position,he.rj),this.result.push(he),this.createFrictionEquationsFromContact(he,this.frictionResult)};var S=new l,k=new l,O=new l;p.prototype[o.types.PLANE|o.types.TRIMESH]=p.prototype.planeTrimesh=function(q,re,ue,ge,ke,xe,be,Le){var he=new l,_e=S;_e.set(0,0,1),ke.vmult(_e,_e);for(var Me=0;Me<re.vertices.length/3;Me++){re.getVertex(Me,he);var Fe=new l;Fe.copy(he),c.pointToWorldFrame(ge,xe,Fe,he);var Se=k;he.vsub(ue,Se);var Pe=_e.dot(Se);if(Pe<=0){var Re=this.createContactEquation(be,Le,q,re);Re.ni.copy(_e);var We=O;_e.scale(Se.dot(_e),We),he.vsub(We,We),Re.ri.copy(We),Re.ri.vsub(be.position,Re.ri),Re.rj.copy(he),Re.rj.vsub(Le.position,Re.rj),this.result.push(Re),this.createFrictionEquationsFromContact(Re,this.frictionResult)}}};var W=new l,U=new l;new l;var L=new l,D=new l,V=new l,ee=new l,K=new l,Z=new l,H=new l,B=new l,te=new l,ae=new l,G=new l,le=new s,X=[];p.prototype[o.types.SPHERE|o.types.TRIMESH]=p.prototype.sphereTrimesh=function(q,re,ue,ge,ke,xe,be,Le){var he=V,_e=ee,Me=K,Fe=Z,Se=H,Pe=B,Re=le,We=D,Ge=U,Ce=X;c.pointToLocalFrame(ge,xe,ue,Se);var it=q.radius;Re.lowerBound.set(Se.x-it,Se.y-it,Se.z-it),Re.upperBound.set(Se.x+it,Se.y+it,Se.z+it),re.getTrianglesInAABB(Re,Ce);for(var lt=L,rn=q.radius*q.radius,yt=0;yt<Ce.length;yt++)for(var xt=0;xt<3;xt++)if(re.getVertex(re.indices[Ce[yt]*3+xt],lt),lt.vsub(Se,Ge),Ge.norm2()<=rn){We.copy(lt),c.pointToWorldFrame(ge,xe,We,lt),lt.vsub(ue,Ge);var Ze=this.createContactEquation(be,Le,q,re);Ze.ni.copy(Ge),Ze.ni.normalize(),Ze.ri.copy(Ze.ni),Ze.ri.scale(q.radius,Ze.ri),Ze.ri.vadd(ue,Ze.ri),Ze.ri.vsub(be.position,Ze.ri),Ze.rj.copy(lt),Ze.rj.vsub(Le.position,Ze.rj),this.result.push(Ze),this.createFrictionEquationsFromContact(Ze,this.frictionResult)}for(var yt=0;yt<Ce.length;yt++)for(var xt=0;xt<3;xt++){re.getVertex(re.indices[Ce[yt]*3+xt],he),re.getVertex(re.indices[Ce[yt]*3+(xt+1)%3],_e),_e.vsub(he,Me),Se.vsub(_e,Pe);var Yi=Pe.dot(Me);Se.vsub(he,Pe);var Zi=Pe.dot(Me);if(Zi>0&&Yi<0){Se.vsub(he,Pe),Fe.copy(Me),Fe.normalize(),Zi=Pe.dot(Fe),Fe.scale(Zi,Pe),Pe.vadd(he,Pe);var yi=Pe.distanceTo(Se);if(yi<q.radius){var Ze=this.createContactEquation(be,Le,q,re);Pe.vsub(Se,Ze.ni),Ze.ni.normalize(),Ze.ni.scale(q.radius,Ze.ri),c.pointToWorldFrame(ge,xe,Pe,Pe),Pe.vsub(Le.position,Ze.rj),c.vectorToWorldFrame(xe,Ze.ni,Ze.ni),c.vectorToWorldFrame(xe,Ze.ri,Ze.ri),this.result.push(Ze),this.createFrictionEquationsFromContact(Ze,this.frictionResult)}}}for(var Qr=te,_i=ae,Dt=G,es=W,yt=0,Yt=Ce.length;yt!==Yt;yt++){re.getTriangleVertices(Ce[yt],Qr,_i,Dt),re.getNormal(Ce[yt],es),Se.vsub(Qr,Pe);var yi=Pe.dot(es);if(es.scale(yi,Pe),Se.vsub(Pe,Pe),yi=Pe.distanceTo(Se),a.pointInTriangle(Pe,Qr,_i,Dt)&&yi<q.radius){var Ze=this.createContactEquation(be,Le,q,re);Pe.vsub(Se,Ze.ni),Ze.ni.normalize(),Ze.ni.scale(q.radius,Ze.ri),c.pointToWorldFrame(ge,xe,Pe,Pe),Pe.vsub(Le.position,Ze.rj),c.vectorToWorldFrame(xe,Ze.ni,Ze.ni),c.vectorToWorldFrame(xe,Ze.ri,Ze.ri),this.result.push(Ze),this.createFrictionEquationsFromContact(Ze,this.frictionResult)}}Ce.length=0};var J=new l,T=new l;p.prototype[o.types.SPHERE|o.types.PLANE]=p.prototype.spherePlane=function(q,re,ue,ge,ke,xe,be,Le){var he=this.createContactEquation(be,Le,q,re);if(he.ni.set(0,0,1),xe.vmult(he.ni,he.ni),he.ni.negate(he.ni),he.ni.normalize(),he.ni.mult(q.radius,he.ri),ue.vsub(ge,J),he.ni.mult(he.ni.dot(J),T),J.vsub(T,he.rj),-J.dot(he.ni)<=q.radius){var _e=he.ri,Me=he.rj;_e.vadd(ue,_e),_e.vsub(be.position,_e),Me.vadd(ge,Me),Me.vsub(Le.position,Me),this.result.push(he),this.createFrictionEquationsFromContact(he,this.frictionResult)}};var ne=new l,Q=new l,oe=new l;function ie(q,re,ue){for(var ge=null,ke=q.length,xe=0;xe!==ke;xe++){var be=q[xe],Le=ne;q[(xe+1)%ke].vsub(be,Le);var he=Q;Le.cross(re,he);var _e=oe;ue.vsub(be,_e);var Me=he.dot(_e);if(ge===null||Me>0&&ge===!0||Me<=0&&ge===!1){ge===null&&(ge=Me>0);continue}else return!1}return!0}var $=new l,A=new l,P=new l,x=new l,M=[new l,new l,new l,new l,new l,new l],N=new l,F=new l,R=new l,C=new l;p.prototype[o.types.SPHERE|o.types.BOX]=p.prototype.sphereBox=function(q,re,ue,ge,ke,xe,be,Le){var he=this.v3pool,_e=M;ue.vsub(ge,$),re.getSideNormals(_e,xe);for(var Me=q.radius,Fe=!1,Se=F,Pe=R,Re=C,We=null,Ge=0,Ce=0,it=0,lt=null,rn=0,yt=_e.length;rn!==yt&&Fe===!1;rn++){var xt=A;xt.copy(_e[rn]);var Ze=xt.norm();xt.normalize();var Yi=$.dot(xt);if(Yi<Ze+Me&&Yi>0){var Zi=P,yi=x;Zi.copy(_e[(rn+1)%3]),yi.copy(_e[(rn+2)%3]);var Qr=Zi.norm(),_i=yi.norm();Zi.normalize(),yi.normalize();var Dt=$.dot(Zi),es=$.dot(yi);if(Dt<Qr&&Dt>-Qr&&es<_i&&es>-_i){var bn=Math.abs(Yi-Ze-Me);(lt===null||bn<lt)&&(lt=bn,Ce=Dt,it=es,We=Ze,Se.copy(xt),Pe.copy(Zi),Re.copy(yi),Ge++)}}}if(Ge){Fe=!0;var ct=this.createContactEquation(be,Le,q,re);Se.mult(-Me,ct.ri),ct.ni.copy(Se),ct.ni.negate(ct.ni),Se.mult(We,Se),Pe.mult(Ce,Pe),Se.vadd(Pe,Se),Re.mult(it,Re),Se.vadd(Re,ct.rj),ct.ri.vadd(ue,ct.ri),ct.ri.vsub(be.position,ct.ri),ct.rj.vadd(ge,ct.rj),ct.rj.vsub(Le.position,ct.rj),this.result.push(ct),this.createFrictionEquationsFromContact(ct,this.frictionResult)}for(var Yt=he.get(),ts=N,bi=0;bi!==2&&!Fe;bi++)for(var Wn=0;Wn!==2&&!Fe;Wn++)for(var Ln=0;Ln!==2&&!Fe;Ln++)if(Yt.set(0,0,0),bi?Yt.vadd(_e[0],Yt):Yt.vsub(_e[0],Yt),Wn?Yt.vadd(_e[1],Yt):Yt.vsub(_e[1],Yt),Ln?Yt.vadd(_e[2],Yt):Yt.vsub(_e[2],Yt),ge.vadd(Yt,ts),ts.vsub(ue,ts),ts.norm2()<Me*Me){Fe=!0;var ct=this.createContactEquation(be,Le,q,re);ct.ri.copy(ts),ct.ri.normalize(),ct.ni.copy(ct.ri),ct.ri.mult(Me,ct.ri),ct.rj.copy(Yt),ct.ri.vadd(ue,ct.ri),ct.ri.vsub(be.position,ct.ri),ct.rj.vadd(ge,ct.rj),ct.rj.vsub(Le.position,ct.rj),this.result.push(ct),this.createFrictionEquationsFromContact(ct,this.frictionResult)}he.release(Yt),Yt=null;for(var Ji=he.get(),ns=he.get(),ct=he.get(),Li=he.get(),bn=he.get(),Oo=_e.length,bi=0;bi!==Oo&&!Fe;bi++)for(var Wn=0;Wn!==Oo&&!Fe;Wn++)if(bi%3!==Wn%3){_e[Wn].cross(_e[bi],Ji),Ji.normalize(),_e[bi].vadd(_e[Wn],ns),ct.copy(ue),ct.vsub(ns,ct),ct.vsub(ge,ct);var Do=ct.dot(Ji);Ji.mult(Do,Li);for(var Ln=0;Ln===bi%3||Ln===Wn%3;)Ln++;bn.copy(ue),bn.vsub(Li,bn),bn.vsub(ns,bn),bn.vsub(ge,bn);var WP=Math.abs(Do),GP=bn.norm();if(WP<_e[Ln].norm()&&GP<Me){Fe=!0;var Zt=this.createContactEquation(be,Le,q,re);ns.vadd(Li,Zt.rj),Zt.rj.copy(Zt.rj),bn.negate(Zt.ni),Zt.ni.normalize(),Zt.ri.copy(Zt.rj),Zt.ri.vadd(ge,Zt.ri),Zt.ri.vsub(ue,Zt.ri),Zt.ri.normalize(),Zt.ri.mult(Me,Zt.ri),Zt.ri.vadd(ue,Zt.ri),Zt.ri.vsub(be.position,Zt.ri),Zt.rj.vadd(ge,Zt.rj),Zt.rj.vsub(Le.position,Zt.rj),this.result.push(Zt),this.createFrictionEquationsFromContact(Zt,this.frictionResult)}}he.release(Ji,ns,ct,Li,bn)};var ce=new l,Y=new l,I=new l,z=new l,de=new l,pe=new l,fe=new l,ve=new l,ye=new l,Ne=new l;p.prototype[o.types.SPHERE|o.types.CONVEXPOLYHEDRON]=p.prototype.sphereConvex=function(q,re,ue,ge,ke,xe,be,Le){var he=this.v3pool;ue.vsub(ge,ce);for(var _e=re.faceNormals,Me=re.faces,Fe=re.vertices,Se=q.radius,Pe=0;Pe!==Fe.length;Pe++){var Re=Fe[Pe],We=de;xe.vmult(Re,We),ge.vadd(We,We);var Ge=z;if(We.vsub(ue,Ge),Ge.norm2()<Se*Se){it=!0;var Ce=this.createContactEquation(be,Le,q,re);Ce.ri.copy(Ge),Ce.ri.normalize(),Ce.ni.copy(Ce.ri),Ce.ri.mult(Se,Ce.ri),We.vsub(ge,Ce.rj),Ce.ri.vadd(ue,Ce.ri),Ce.ri.vsub(be.position,Ce.ri),Ce.rj.vadd(ge,Ce.rj),Ce.rj.vsub(Le.position,Ce.rj),this.result.push(Ce),this.createFrictionEquationsFromContact(Ce,this.frictionResult);return}}for(var it=!1,Pe=0,lt=Me.length;Pe!==lt&&it===!1;Pe++){var rn=_e[Pe],yt=Me[Pe],xt=pe;xe.vmult(rn,xt);var Ze=fe;xe.vmult(Fe[yt[0]],Ze),Ze.vadd(ge,Ze);var Yi=ve;xt.mult(-Se,Yi),ue.vadd(Yi,Yi);var Zi=ye;Yi.vsub(Ze,Zi);var yi=Zi.dot(xt),Qr=Ne;if(ue.vsub(Ze,Qr),yi<0&&Qr.dot(xt)>0){for(var _i=[],Dt=0,es=yt.length;Dt!==es;Dt++){var Yt=he.get();xe.vmult(Fe[yt[Dt]],Yt),ge.vadd(Yt,Yt),_i.push(Yt)}if(ie(_i,xt,ue)){it=!0;var Ce=this.createContactEquation(be,Le,q,re);xt.mult(-Se,Ce.ri),xt.negate(Ce.ni);var ts=he.get();xt.mult(-yi,ts);var bi=he.get();xt.mult(-Se,bi),ue.vsub(ge,Ce.rj),Ce.rj.vadd(bi,Ce.rj),Ce.rj.vadd(ts,Ce.rj),Ce.rj.vadd(ge,Ce.rj),Ce.rj.vsub(Le.position,Ce.rj),Ce.ri.vadd(ue,Ce.ri),Ce.ri.vsub(be.position,Ce.ri),he.release(ts),he.release(bi),this.result.push(Ce),this.createFrictionEquationsFromContact(Ce,this.frictionResult);for(var Dt=0,Wn=_i.length;Dt!==Wn;Dt++)he.release(_i[Dt]);return}else for(var Dt=0;Dt!==yt.length;Dt++){var Ln=he.get(),Ji=he.get();xe.vmult(Fe[yt[(Dt+1)%yt.length]],Ln),xe.vmult(Fe[yt[(Dt+2)%yt.length]],Ji),ge.vadd(Ln,Ln),ge.vadd(Ji,Ji);var ns=Y;Ji.vsub(Ln,ns);var ct=I;ns.unit(ct);var Li=he.get(),bn=he.get();ue.vsub(Ln,bn);var Oo=bn.dot(ct);ct.mult(Oo,Li),Li.vadd(Ln,Li);var Do=he.get();if(Li.vsub(ue,Do),Oo>0&&Oo*Oo<ns.norm2()&&Do.norm2()<Se*Se){var Ce=this.createContactEquation(be,Le,q,re);Li.vsub(ge,Ce.rj),Li.vsub(ue,Ce.ni),Ce.ni.normalize(),Ce.ni.mult(Se,Ce.ri),Ce.rj.vadd(ge,Ce.rj),Ce.rj.vsub(Le.position,Ce.rj),Ce.ri.vadd(ue,Ce.ri),Ce.ri.vsub(be.position,Ce.ri),this.result.push(Ce),this.createFrictionEquationsFromContact(Ce,this.frictionResult);for(var Dt=0,Wn=_i.length;Dt!==Wn;Dt++)he.release(_i[Dt]);he.release(Ln),he.release(Ji),he.release(Li),he.release(Do),he.release(bn);return}he.release(Ln),he.release(Ji),he.release(Li),he.release(Do),he.release(bn)}for(var Dt=0,Wn=_i.length;Dt!==Wn;Dt++)he.release(_i[Dt])}}},new l,new l,p.prototype[o.types.PLANE|o.types.BOX]=p.prototype.planeBox=function(q,re,ue,ge,ke,xe,be,Le){re.convexPolyhedronRepresentation.material=re.material,re.convexPolyhedronRepresentation.collisionResponse=re.collisionResponse,this.planeConvex(q,re.convexPolyhedronRepresentation,ue,ge,ke,xe,be,Le)};var Ae=new l,Oe=new l,ht=new l,At=new l;p.prototype[o.types.PLANE|o.types.CONVEXPOLYHEDRON]=p.prototype.planeConvex=function(q,re,ue,ge,ke,xe,be,Le){var he=Ae,_e=Oe;_e.set(0,0,1),ke.vmult(_e,_e);for(var Me=0,Fe=ht,Se=0;Se!==re.vertices.length;Se++){he.copy(re.vertices[Se]),xe.vmult(he,he),ge.vadd(he,he),he.vsub(ue,Fe);var Pe=_e.dot(Fe);if(Pe<=0){var Re=this.createContactEquation(be,Le,q,re),We=At;_e.mult(_e.dot(Fe),We),he.vsub(We,We),We.vsub(ue,Re.ri),Re.ni.copy(_e),he.vsub(ge,Re.rj),Re.ri.vadd(ue,Re.ri),Re.ri.vsub(be.position,Re.ri),Re.rj.vadd(ge,Re.rj),Re.rj.vsub(Le.position,Re.rj),this.result.push(Re),Me++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(Re,this.frictionResult)}}this.enableFrictionReduction&&Me&&this.createFrictionFromAverage(Me)};var yn=new l,cn=new l;p.prototype[o.types.CONVEXPOLYHEDRON]=p.prototype.convexConvex=function(q,re,ue,ge,ke,xe,be,Le,he,_e,Me,Fe){var Se=yn;if(!(ue.distanceTo(ge)>q.boundingSphereRadius+re.boundingSphereRadius)&&q.findSeparatingAxis(re,ue,ke,ge,xe,Se,Me,Fe)){var Pe=[],Re=cn;q.clipAgainstHull(ue,ke,re,ge,xe,Se,-100,100,Pe);for(var We=0,Ge=0;Ge!==Pe.length;Ge++){var Ce=this.createContactEquation(be,Le,q,re,he,_e),it=Ce.ri,lt=Ce.rj;Se.negate(Ce.ni),Pe[Ge].normal.negate(Re),Re.mult(Pe[Ge].depth,Re),Pe[Ge].point.vadd(Re,it),lt.copy(Pe[Ge].point),it.vsub(ue,it),lt.vsub(ge,lt),it.vadd(ue,it),it.vsub(be.position,it),lt.vadd(ge,lt),lt.vsub(Le.position,lt),this.result.push(Ce),We++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(Ce,this.frictionResult)}this.enableFrictionReduction&&We&&this.createFrictionFromAverage(We)}};var Ii=new l,Xt=new l,jt=new l;p.prototype[o.types.PLANE|o.types.PARTICLE]=p.prototype.planeParticle=function(q,re,ue,ge,ke,xe,be,Le){var he=Ii;he.set(0,0,1),be.quaternion.vmult(he,he);var _e=Xt;ge.vsub(be.position,_e);var Me=he.dot(_e);if(Me<=0){var Fe=this.createContactEquation(Le,be,re,q);Fe.ni.copy(he),Fe.ni.negate(Fe.ni),Fe.ri.set(0,0,0);var Se=jt;he.mult(he.dot(ge),Se),ge.vsub(Se,Se),Fe.rj.copy(Se),this.result.push(Fe),this.createFrictionEquationsFromContact(Fe,this.frictionResult)}};var Hn=new l;p.prototype[o.types.PARTICLE|o.types.SPHERE]=p.prototype.sphereParticle=function(q,re,ue,ge,ke,xe,be,Le){var he=Hn;he.set(0,0,1),ge.vsub(ue,he);var _e=he.norm2();if(_e<=q.radius*q.radius){var Me=this.createContactEquation(Le,be,re,q);he.normalize(),Me.rj.copy(he),Me.rj.mult(q.radius,Me.rj),Me.ni.copy(he),Me.ni.negate(Me.ni),Me.ri.set(0,0,0),this.result.push(Me),this.createFrictionEquationsFromContact(Me,this.frictionResult)}};var mn=new h,Ri=new l;new l;var vi=new l,_n=new l,Rn=new l;p.prototype[o.types.PARTICLE|o.types.CONVEXPOLYHEDRON]=p.prototype.convexParticle=function(q,re,ue,ge,ke,xe,be,Le){var he=-1,_e=vi,Me=Rn,Fe=null,Se=Ri;if(Se.copy(ge),Se.vsub(ue,Se),ke.conjugate(mn),mn.vmult(Se,Se),q.pointIsInside(Se)){q.worldVerticesNeedsUpdate&&q.computeWorldVertices(ue,ke),q.worldFaceNormalsNeedsUpdate&&q.computeWorldFaceNormals(ke);for(var Pe=0,Re=q.faces.length;Pe!==Re;Pe++){var We=[q.worldVertices[q.faces[Pe][0]]],Ge=q.worldFaceNormals[Pe];ge.vsub(We[0],_n);var Ce=-Ge.dot(_n);(Fe===null||Math.abs(Ce)<Math.abs(Fe))&&(Fe=Ce,he=Pe,_e.copy(Ge))}if(he!==-1){var it=this.createContactEquation(Le,be,re,q);_e.mult(Fe,Me),Me.vadd(ge,Me),Me.vsub(ue,Me),it.rj.copy(Me),_e.negate(it.ni),it.ri.set(0,0,0);var lt=it.ri,rn=it.rj;lt.vadd(ge,lt),lt.vsub(Le.position,lt),rn.vadd(ue,rn),rn.vsub(be.position,rn),this.result.push(it),this.createFrictionEquationsFromContact(it,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}},p.prototype[o.types.BOX|o.types.HEIGHTFIELD]=p.prototype.boxHeightfield=function(q,re,ue,ge,ke,xe,be,Le){q.convexPolyhedronRepresentation.material=q.material,q.convexPolyhedronRepresentation.collisionResponse=q.collisionResponse,this.convexHeightfield(q.convexPolyhedronRepresentation,re,ue,ge,ke,xe,be,Le)};var Ar=new l,Jr=new l,Vs=[0];p.prototype[o.types.CONVEXPOLYHEDRON|o.types.HEIGHTFIELD]=p.prototype.convexHeightfield=function(q,re,ue,ge,ke,xe,be,Le){var he=re.data,_e=re.elementSize,Me=q.boundingSphereRadius,Fe=Jr,Se=Vs,Pe=Ar;c.pointToLocalFrame(ge,xe,ue,Pe);var Re=Math.floor((Pe.x-Me)/_e)-1,We=Math.ceil((Pe.x+Me)/_e)+1,Ge=Math.floor((Pe.y-Me)/_e)-1,Ce=Math.ceil((Pe.y+Me)/_e)+1;if(!(We<0||Ce<0||Re>he.length||Ge>he[0].length)){Re<0&&(Re=0),We<0&&(We=0),Ge<0&&(Ge=0),Ce<0&&(Ce=0),Re>=he.length&&(Re=he.length-1),We>=he.length&&(We=he.length-1),Ce>=he[0].length&&(Ce=he[0].length-1),Ge>=he[0].length&&(Ge=he[0].length-1);var it=[];re.getRectMinMax(Re,Ge,We,Ce,it);var lt=it[0],rn=it[1];if(!(Pe.z-Me>rn||Pe.z+Me<lt))for(var yt=Re;yt<We;yt++)for(var xt=Ge;xt<Ce;xt++)re.getConvexTrianglePillar(yt,xt,!1),c.pointToWorldFrame(ge,xe,re.pillarOffset,Fe),ue.distanceTo(Fe)<re.pillarConvex.boundingSphereRadius+q.boundingSphereRadius&&this.convexConvex(q,re.pillarConvex,ue,Fe,ke,xe,be,Le,null,null,Se,null),re.getConvexTrianglePillar(yt,xt,!0),c.pointToWorldFrame(ge,xe,re.pillarOffset,Fe),ue.distanceTo(Fe)<re.pillarConvex.boundingSphereRadius+q.boundingSphereRadius&&this.convexConvex(q,re.pillarConvex,ue,Fe,ke,xe,be,Le,null,null,Se,null)}};var j=new l,me=new l;p.prototype[o.types.SPHERE|o.types.HEIGHTFIELD]=p.prototype.sphereHeightfield=function(q,re,ue,ge,ke,xe,be,Le){var he=re.data,_e=q.radius,Me=re.elementSize,Fe=me,Se=j;c.pointToLocalFrame(ge,xe,ue,Se);var Pe=Math.floor((Se.x-_e)/Me)-1,Re=Math.ceil((Se.x+_e)/Me)+1,We=Math.floor((Se.y-_e)/Me)-1,Ge=Math.ceil((Se.y+_e)/Me)+1;if(!(Re<0||Ge<0||Pe>he.length||Ge>he[0].length)){Pe<0&&(Pe=0),Re<0&&(Re=0),We<0&&(We=0),Ge<0&&(Ge=0),Pe>=he.length&&(Pe=he.length-1),Re>=he.length&&(Re=he.length-1),Ge>=he[0].length&&(Ge=he[0].length-1),We>=he[0].length&&(We=he[0].length-1);var Ce=[];re.getRectMinMax(Pe,We,Re,Ge,Ce);var it=Ce[0],lt=Ce[1];if(!(Se.z-_e>lt||Se.z+_e<it))for(var rn=this.result,yt=Pe;yt<Re;yt++)for(var xt=We;xt<Ge;xt++){var Ze=rn.length;re.getConvexTrianglePillar(yt,xt,!1),c.pointToWorldFrame(ge,xe,re.pillarOffset,Fe),ue.distanceTo(Fe)<re.pillarConvex.boundingSphereRadius+q.boundingSphereRadius&&this.sphereConvex(q,re.pillarConvex,ue,Fe,ke,xe,be,Le),re.getConvexTrianglePillar(yt,xt,!0),c.pointToWorldFrame(ge,xe,re.pillarOffset,Fe),ue.distanceTo(Fe)<re.pillarConvex.boundingSphereRadius+q.boundingSphereRadius&&this.sphereConvex(q,re.pillarConvex,ue,Fe,ke,xe,be,Le);var Yi=rn.length-Ze;if(Yi>2)return}}}},{"../collision/AABB":3,"../collision/Ray":9,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../math/Quaternion":28,"../math/Transform":29,"../math/Vec3":30,"../shapes/ConvexPolyhedron":38,"../shapes/Shape":43,"../solver/Solver":47,"../utils/Vec3Pool":54}],56:[function(n,i,r){i.exports=b;var s=n("../shapes/Shape"),o=n("../math/Vec3"),a=n("../math/Quaternion"),l=n("../solver/GSSolver");n("../utils/Vec3Pool"),n("../equations/ContactEquation"),n("../equations/FrictionEquation");var c=n("./Narrowphase"),h=n("../utils/EventTarget"),u=n("../collision/ArrayCollisionMatrix"),d=n("../material/Material"),f=n("../material/ContactMaterial"),p=n("../objects/Body"),y=n("../utils/TupleDictionary"),v=n("../collision/RaycastResult"),m=n("../collision/AABB"),g=n("../collision/Ray"),w=n("../collision/NaiveBroadphase");function b(){h.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new o,this.broadphase=new w,this.bodies=[],this.solver=new l,this.constraints=[],this.narrowphase=new c(this),this.collisionMatrix=new u,this.collisionMatrixPrevious=new u,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new y,this.defaultMaterial=new d("default"),this.defaultContactMaterial=new f(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null}}b.prototype=new h,new m;var E=new g;if(b.prototype.getContactMaterial=function(B,te){return this.contactMaterialTable.get(B.id,te.id)},b.prototype.numObjects=function(){return this.bodies.length},b.prototype.collisionMatrixTick=function(){var B=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=B,this.collisionMatrix.reset()},b.prototype.add=b.prototype.addBody=function(B){this.bodies.indexOf(B)===-1&&(B.index=this.bodies.length,this.bodies.push(B),B.world=this,B.initPosition.copy(B.position),B.initVelocity.copy(B.velocity),B.timeLastSleepy=this.time,B instanceof p&&(B.initAngularVelocity.copy(B.angularVelocity),B.initQuaternion.copy(B.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=B,this.dispatchEvent(this.addBodyEvent))},b.prototype.addConstraint=function(B){this.constraints.push(B)},b.prototype.removeConstraint=function(B){var te=this.constraints.indexOf(B);te!==-1&&this.constraints.splice(te,1)},b.prototype.rayTest=function(B,te,ae){ae instanceof v?this.raycastClosest(B,te,{skipBackfaces:!0},ae):this.raycastAll(B,te,{skipBackfaces:!0},ae)},b.prototype.raycastAll=function(B,te,ae,G){return ae.mode=g.ALL,ae.from=B,ae.to=te,ae.callback=G,E.intersectWorld(this,ae)},b.prototype.raycastAny=function(B,te,ae,G){return ae.mode=g.ANY,ae.from=B,ae.to=te,ae.result=G,E.intersectWorld(this,ae)},b.prototype.raycastClosest=function(B,te,ae,G){return ae.mode=g.CLOSEST,ae.from=B,ae.to=te,ae.result=G,E.intersectWorld(this,ae)},b.prototype.remove=function(B){B.world=null;var te=this.bodies.length-1,ae=this.bodies,G=ae.indexOf(B);if(G!==-1){ae.splice(G,1);for(var le=0;le!==ae.length;le++)ae[le].index=le;this.collisionMatrix.setNumObjects(te),this.removeBodyEvent.body=B,this.dispatchEvent(this.removeBodyEvent)}},b.prototype.removeBody=b.prototype.remove,b.prototype.addMaterial=function(B){this.materials.push(B)},b.prototype.addContactMaterial=function(B){this.contactmaterials.push(B),this.contactMaterialTable.set(B.materials[0].id,B.materials[1].id,B)},typeof performance=="undefined"&&(performance={}),!performance.now){var S=Date.now();performance.timing&&performance.timing.navigationStart&&(S=performance.timing.navigationStart),performance.now=function(){return Date.now()-S}}var k=new o;b.prototype.step=function(B,te,ae){if(ae=ae||10,te=te||0,te===0)this.internalStep(B),this.time+=B;else{var G=Math.floor((this.time+te)/B)-Math.floor(this.time/B);G=Math.min(G,ae);for(var le=performance.now(),X=0;X!==G&&(this.internalStep(B),!(performance.now()-le>B*1e3));X++);this.time+=te;for(var J=this.time%B,T=J/B,ne=k,Q=this.bodies,oe=0;oe!==Q.length;oe++){var ie=Q[oe];ie.type!==p.STATIC&&ie.sleepState!==p.SLEEPING?(ie.position.vsub(ie.previousPosition,ne),ne.scale(T,ne),ie.position.vadd(ne,ie.interpolatedPosition)):(ie.interpolatedPosition.copy(ie.position),ie.interpolatedQuaternion.copy(ie.quaternion))}}};var O={type:"postStep"},W={type:"preStep"},U={type:"collide",body:null,contact:null},L=[],D=[],V=[],ee=[];new o,new o,new o,new o,new o,new o,new o,new o,new o,new a;var K=new a,Z=new a,H=new o;b.prototype.internalStep=function(B){this.dt=B;var te=this.contacts,ae=V,G=ee,le=this.numObjects(),X=this.bodies,J=this.solver,T=this.gravity,ne=this.doProfiling,Q=this.profile,oe=p.DYNAMIC,ie,$=this.constraints,A=D;T.norm();var P=T.x,x=T.y,M=T.z,N=0;for(ne&&(ie=performance.now()),N=0;N!==le;N++){var F=X[N];if(F.type&oe){var R=F.force,C=F.mass;R.x+=C*P,R.y+=C*x,R.z+=C*M}}for(var N=0,ce=this.subsystems.length;N!==ce;N++)this.subsystems[N].update();ne&&(ie=performance.now()),ae.length=0,G.length=0,this.broadphase.collisionPairs(this,ae,G),ne&&(Q.broadphase=performance.now()-ie);var yn=$.length;for(N=0;N!==yn;N++){var Y=$[N];if(!Y.collideConnected)for(var I=ae.length-1;I>=0;I-=1)(Y.bodyA===ae[I]&&Y.bodyB===G[I]||Y.bodyB===ae[I]&&Y.bodyA===G[I])&&(ae.splice(I,1),G.splice(I,1))}this.collisionMatrixTick(),ne&&(ie=performance.now());var z=L,de=te.length;for(N=0;N!==de;N++)z.push(te[N]);te.length=0;var pe=this.frictionEquations.length;for(N=0;N!==pe;N++)A.push(this.frictionEquations[N]);this.frictionEquations.length=0,this.narrowphase.getContacts(ae,G,this,te,z,this.frictionEquations,A),ne&&(Q.narrowphase=performance.now()-ie),ne&&(ie=performance.now());for(var N=0;N<this.frictionEquations.length;N++)J.addEquation(this.frictionEquations[N]);for(var fe=te.length,ve=0;ve!==fe;ve++){var Y=te[ve],F=Y.bi,ye=Y.bj;Y.si,Y.sj;var Ne;if(F.material&&ye.material?Ne=this.getContactMaterial(F.material,ye.material)||this.defaultContactMaterial:Ne=this.defaultContactMaterial,Ne.friction,F.material&&ye.material&&(F.material.friction>=0&&ye.material.friction>=0&&F.material.friction*ye.material.friction,F.material.restitution>=0&&ye.material.restitution>=0&&(Y.restitution=F.material.restitution*ye.material.restitution)),J.addEquation(Y),F.allowSleep&&F.type===p.DYNAMIC&&F.sleepState===p.SLEEPING&&ye.sleepState===p.AWAKE&&ye.type!==p.STATIC){var Ae=ye.velocity.norm2()+ye.angularVelocity.norm2(),Oe=Math.pow(ye.sleepSpeedLimit,2);Ae>=Oe*2&&(F._wakeUpAfterNarrowphase=!0)}if(ye.allowSleep&&ye.type===p.DYNAMIC&&ye.sleepState===p.SLEEPING&&F.sleepState===p.AWAKE&&F.type!==p.STATIC){var ht=F.velocity.norm2()+F.angularVelocity.norm2(),At=Math.pow(F.sleepSpeedLimit,2);ht>=At*2&&(ye._wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(F,ye,!0),this.collisionMatrixPrevious.get(F,ye)||(U.body=ye,U.contact=Y,F.dispatchEvent(U),U.body=F,ye.dispatchEvent(U))}for(ne&&(Q.makeContactConstraints=performance.now()-ie,ie=performance.now()),N=0;N!==le;N++){var F=X[N];F._wakeUpAfterNarrowphase&&(F.wakeUp(),F._wakeUpAfterNarrowphase=!1)}var yn=$.length;for(N=0;N!==yn;N++){var Y=$[N];Y.update();for(var I=0,cn=Y.equations.length;I!==cn;I++){var Ii=Y.equations[I];J.addEquation(Ii)}}J.solve(B,this),ne&&(Q.solve=performance.now()-ie),J.removeAllEquations();var Xt=Math.pow;for(N=0;N!==le;N++){var F=X[N];if(F.type&oe){var jt=Xt(1-F.linearDamping,B),Hn=F.velocity;Hn.mult(jt,Hn);var mn=F.angularVelocity;if(mn){var Ri=Xt(1-F.angularDamping,B);mn.mult(Ri,mn)}}}for(this.dispatchEvent(W),N=0;N!==le;N++){var F=X[N];F.preStep&&F.preStep.call(F)}ne&&(ie=performance.now());var vi=K,_n=Z,Rn=this.stepnumber,Ar=p.DYNAMIC|p.KINEMATIC,Jr=Rn%(this.quatNormalizeSkip+1)===0,Vs=this.quatNormalizeFast,j=B*.5;for(s.types.PLANE,s.types.CONVEXPOLYHEDRON,N=0;N!==le;N++){var me=X[N],q=me.force,re=me.torque;if(me.type&Ar&&me.sleepState!==p.SLEEPING){var ue=me.velocity,ge=me.angularVelocity,ke=me.position,xe=me.quaternion,be=me.invMass,Le=me.invInertiaWorld;ue.x+=q.x*be*B,ue.y+=q.y*be*B,ue.z+=q.z*be*B,me.angularVelocity&&(Le.vmult(re,H),H.mult(B,H),H.vadd(ge,ge)),ke.x+=ue.x*B,ke.y+=ue.y*B,ke.z+=ue.z*B,me.angularVelocity&&(vi.set(ge.x,ge.y,ge.z,0),vi.mult(xe,_n),xe.x+=j*_n.x,xe.y+=j*_n.y,xe.z+=j*_n.z,xe.w+=j*_n.w,Jr&&(Vs?xe.normalizeFast():xe.normalize())),me.aabb&&(me.aabbNeedsUpdate=!0),me.updateInertiaWorld&&me.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,ne&&(Q.integrate=performance.now()-ie),this.time+=B,this.stepnumber+=1,this.dispatchEvent(O),N=0;N!==le;N++){var F=X[N],he=F.postStep;he&&he.call(F)}if(this.allowSleep)for(N=0;N!==le;N++)X[N].sleepTick(this.time)},b.prototype.clearForces=function(){for(var B=this.bodies,te=B.length,ae=0;ae!==te;ae++){var G=B[ae];G.force,G.torque,G.force.set(0,0,0),G.torque.set(0,0,0)}}},{"../collision/AABB":3,"../collision/ArrayCollisionMatrix":4,"../collision/NaiveBroadphase":7,"../collision/Ray":9,"../collision/RaycastResult":10,"../equations/ContactEquation":19,"../equations/FrictionEquation":21,"../material/ContactMaterial":24,"../material/Material":25,"../math/Quaternion":28,"../math/Vec3":30,"../objects/Body":31,"../shapes/Shape":43,"../solver/GSSolver":46,"../utils/EventTarget":49,"../utils/TupleDictionary":52,"../utils/Vec3Pool":54,"./Narrowphase":55}]},{},[2])(2)})})($t);const aH="122",lH=0,oE=1,cH=2,HA=1,WA=2,su=3,fm=0,Nn=1,pm=2,x_=1,bu=0,wu=1,aE=2,lE=3,cE=4,uH=5,Sl=100,hH=101,dH=102,uE=103,hE=104,fH=200,pH=201,mH=202,gH=203,GA=204,$A=205,vH=206,yH=207,_H=208,bH=209,wH=210,xH=0,EH=1,SH=2,yy=3,TH=4,MH=5,AH=6,CH=7,mm=0,IH=1,RH=2,xu=0,LH=1,PH=2,NH=3,kH=4,OH=5,jA=300,E_=301,S_=302,dE=303,fE=304,T_=306,M_=307,_y=1e3,Oi=1001,by=1002,di=1003,pE=1004,mE=1005,Zn=1006,DH=1007,gm=1008,A_=1009,FH=1010,BH=1011,Xf=1012,VH=1013,wf=1014,oo=1015,Yf=1016,UH=1017,zH=1018,HH=1019,Eu=1020,WH=1021,ha=1022,br=1023,GH=1024,$H=1025,Hl=1026,Xu=1027,jH=1028,qH=1029,KH=1030,XH=1031,YH=1032,ZH=1033,gE=33776,vE=33777,yE=33778,_E=33779,bE=35840,wE=35841,xE=35842,EE=35843,JH=36196,SE=37492,TE=37496,QH=37808,eW=37809,tW=37810,nW=37811,iW=37812,rW=37813,sW=37814,oW=37815,aW=37816,lW=37817,cW=37818,uW=37819,hW=37820,dW=37821,fW=36492,pW=37840,mW=37841,gW=37842,vW=37843,yW=37844,_W=37845,bW=37846,wW=37847,xW=37848,EW=37849,SW=37850,TW=37851,MW=37852,AW=37853,CW=2200,IW=2201,RW=2202,Zf=2300,xf=2301,Dg=2302,Cl=2400,Il=2401,Jf=2402,C_=2500,qA=2501,LW=0,Bh=3e3,KA=3001,PW=3007,NW=3002,kW=3003,OW=3004,DW=3005,FW=3006,BW=3200,VW=3201,Ec=0,UW=1,Fg=7680,zW=519,vm=35044,Yu=35048,ME="300 es";function Fs(){}Object.assign(Fs.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}},dispatchEvent:function(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}}});const Pn=[];for(let e=0;e<256;e++)Pn[e]=(e<16?"0":"")+e.toString(16);let xd=1234567;const gt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Pn[e&255]+Pn[e>>8&255]+Pn[e>>16&255]+Pn[e>>24&255]+"-"+Pn[t&255]+Pn[t>>8&255]+"-"+Pn[t>>16&15|64]+Pn[t>>24&255]+"-"+Pn[n&63|128]+Pn[n>>8&255]+"-"+Pn[n>>16&255]+Pn[n>>24&255]+Pn[i&255]+Pn[i>>8&255]+Pn[i>>16&255]+Pn[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return e!==void 0&&(xd=e%2147483647),xd=xd*16807%2147483647,(xd-1)/2147483646},degToRad:function(e){return e*gt.DEG2RAD},radToDeg:function(e){return e*gt.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((t+i)/2),h=o((t+i)/2),u=s((t-i)/2),d=o((t-i)/2),f=s((i-t)/2),p=o((i-t)/2);switch(r){case"XYX":e.set(a*h,l*u,l*d,a*c);break;case"YZY":e.set(l*d,a*h,l*u,a*c);break;case"ZXZ":e.set(l*u,l*d,a*h,a*c);break;case"XZX":e.set(a*h,l*p,l*f,a*c);break;case"YXY":e.set(l*f,a*h,l*p,a*c);break;case"ZYZ":e.set(l*p,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class Ie{constructor(t=0,n=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,i=this.y,r=t.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*r+t.x,this.y=s*r+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Ti{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,n,i,r,s,o,a,l,c){const h=this.elements;return h[0]=t,h[1]=r,h[2]=a,h[3]=n,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(t,n,i){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],h=i[4],u=i[7],d=i[2],f=i[5],p=i[8],y=r[0],v=r[3],m=r[6],g=r[1],w=r[4],b=r[7],E=r[2],S=r[5],k=r[8];return s[0]=o*y+a*g+l*E,s[3]=o*v+a*w+l*S,s[6]=o*m+a*b+l*k,s[1]=c*y+h*g+u*E,s[4]=c*v+h*w+u*S,s[7]=c*m+h*b+u*k,s[2]=d*y+f*g+p*E,s[5]=d*v+f*w+p*S,s[8]=d*m+f*b+p*k,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return n*o*h-n*a*c-i*s*h+i*a*l+r*s*c-r*o*l}getInverse(t,n){n!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=t.elements,r=this.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],h=i[5],u=i[6],d=i[7],f=i[8],p=f*c-h*d,y=h*u-f*l,v=d*l-c*u,m=s*p+o*y+a*v;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return r[0]=p*g,r[1]=(a*d-f*o)*g,r[2]=(h*o-a*c)*g,r[3]=y*g,r[4]=(f*s-a*u)*g,r[5]=(a*l-h*s)*g,r[6]=v*g,r[7]=(o*u-d*s)*g,r[8]=(c*s-o*l)*g,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);this.set(i*l,i*c,-i*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1)}scale(t,n){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(t){const n=Math.cos(t),i=Math.sin(t),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],h=r[7];return r[0]=n*s+i*l,r[3]=n*o+i*c,r[6]=n*a+i*h,r[1]=-i*s+n*l,r[4]=-i*o+n*c,r[7]=-i*a+n*h,this}translate(t,n){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n=0){for(let i=0;i<9;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}}let el;const ga={getDataURL:function(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{el===void 0&&(el=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),el.width=e.width,el.height=e.height;const n=el.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=el}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let HW=0;function Ot(e,t,n,i,r,s,o,a,l,c){Object.defineProperty(this,"id",{value:HW++}),this.uuid=gt.generateUUID(),this.name="",this.image=e!==void 0?e:Ot.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:Ot.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:Oi,this.wrapT=i!==void 0?i:Oi,this.magFilter=r!==void 0?r:Zn,this.minFilter=s!==void 0?s:gm,this.anisotropy=l!==void 0?l:1,this.format=o!==void 0?o:br,this.internalFormat=null,this.type=a!==void 0?a:A_,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ti,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:Bh,this.version=0,this.onUpdate=null}Ot.DEFAULT_IMAGE=void 0;Ot.DEFAULT_MAPPING=jA;Ot.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Ot,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=gt.generateUUID()),!t&&e.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let s=0,o=i.length;s<o;s++)r.push(ga.getDataURL(i[s]))}else r=ga.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==jA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case _y:e.x=e.x-Math.floor(e.x);break;case Oi:e.x=e.x<0?0:1;break;case by:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case _y:e.y=e.y-Math.floor(e.y);break;case Oi:e.y=e.y<0?0:1;break;case by:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}});Object.defineProperty(Ot.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});class Vt{constructor(t=0,n=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,i,r){return this.x=t,this.y=n,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,i,r,s;const l=t.elements,c=l[0],h=l[4],u=l[8],d=l[1],f=l[5],p=l[9],y=l[2],v=l[6],m=l[10];if(Math.abs(h-d)<.01&&Math.abs(u-y)<.01&&Math.abs(p-v)<.01){if(Math.abs(h+d)<.1&&Math.abs(u+y)<.1&&Math.abs(p+v)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,b=(f+1)/2,E=(m+1)/2,S=(h+d)/4,k=(u+y)/4,O=(p+v)/4;return w>b&&w>E?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=S/i,s=k/i):b>E?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=S/r,s=O/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=k/s,r=O/s),this.set(i,r,s,n),this}let g=Math.sqrt((v-p)*(v-p)+(u-y)*(u-y)+(d-h)*(d-h));return Math.abs(g)<.001&&(g=1),this.x=(v-p)/g,this.y=(u-y)/g,this.z=(d-h)/g,this.w=Math.acos((c+f+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this.w=t.w+(n.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function wr(e,t,n){this.width=e,this.height=t,this.scissor=new Vt(0,0,e,t),this.scissorTest=!1,this.viewport=new Vt(0,0,e,t),n=n||{},this.texture=new Ot(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Zn,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}wr.prototype=Object.assign(Object.create(Fs.prototype),{constructor:wr,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function AE(e,t,n){wr.call(this,e,t,n),this.samples=4}AE.prototype=Object.assign(Object.create(wr.prototype),{constructor:AE,isWebGLMultisampleRenderTarget:!0,copy:function(e){return wr.prototype.copy.call(this,e),this.samples=e.samples,this}});class Ui{constructor(t=0,n=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=n,this._z=i,this._w=r}static slerp(t,n,i,r){return i.copy(t).slerp(n,r)}static slerpFlat(t,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],h=i[r+2],u=i[r+3];const d=s[o+0],f=s[o+1],p=s[o+2],y=s[o+3];if(u!==y||l!==d||c!==f||h!==p){let v=1-a;const m=l*d+c*f+h*p+u*y,g=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){const E=Math.sqrt(w),S=Math.atan2(E,m*g);v=Math.sin(v*S)/E,a=Math.sin(a*S)/E}const b=a*g;if(l=l*v+d*b,c=c*v+f*b,h=h*v+p*b,u=u*v+y*b,v===1-a){const E=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=E,c*=E,h*=E,u*=E}}t[n]=l,t[n+1]=c,t[n+2]=h,t[n+3]=u}static multiplyQuaternionsFlat(t,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],h=i[r+3],u=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return t[n]=a*p+h*u+l*f-c*d,t[n+1]=l*p+h*d+c*u-a*f,t[n+2]=c*p+h*f+a*d-l*u,t[n+3]=h*p-a*u-l*d-c*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(i/2),h=a(r/2),u=a(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"YXZ":this._x=d*h*u+c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"ZXY":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u-d*f*p;break;case"ZYX":this._x=d*h*u-c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u+d*f*p;break;case"YZX":this._x=d*h*u+c*f*p,this._y=c*f*u+d*h*p,this._z=c*h*p-d*f*u,this._w=c*h*u-d*f*p;break;case"XZY":this._x=d*h*u-c*f*p,this._y=c*f*u-d*h*p,this._z=c*h*p+d*f*u,this._w=c*h*u+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const i=n/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],h=n[6],u=n[10],d=i+a+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(h-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>u){const f=2*Math.sqrt(1+i-a-u);this._w=(h-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-i-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+h)/f}else{const f=2*Math.sqrt(1+u-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(gt.clamp(this.dot(t),-1,1)))}rotateTowards(t,n){const i=this.angleTo(t);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const i=t._x,r=t._y,s=t._z,o=t._w,a=n._x,l=n._y,c=n._z,h=n._w;return this._x=i*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-i*c,this._z=s*h+o*c+i*l-r*a,this._w=o*h-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+i*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-n;return this._w=f*o+n*this._w,this._x=f*i+n*this._x,this._y=f*r+n*this._y,this._z=f*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-n)*h)/c,d=Math.sin(n*h)/c;return this._w=o*u+this._w*d,this._x=i*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class se{constructor(t=0,n=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=i}set(t,n,i){return i===void 0&&(i=this.z),this.x=t,this.y=n,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(CE.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(CE.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,s=t.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(t){const n=this.x,i=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=l*n+o*r-a*i,h=l*i+a*n-s*r,u=l*r+s*i-o*n,d=-s*n-o*i-a*r;return this.x=c*l+d*-s+h*-a-u*-o,this.y=h*l+d*-o+u*-s-c*-a,this.z=u*l+d*-a+c*-o-h*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,i=this.y,r=this.z,s=t.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}cross(t,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)}crossVectors(t,n){const i=t.x,r=t.y,s=t.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const i=t.dot(this)/n;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Bg.copy(this).projectOnVector(t),this.sub(Bg)}reflect(t){return this.sub(Bg.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(gt.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return n*n+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,i){const r=Math.sin(n)*t;return this.x=r*Math.sin(i),this.y=Math.cos(n)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Bg=new se,CE=new Ui;class Ro{constructor(t,n){Object.defineProperty(this,"isBox3",{value:!0}),this.min=t!==void 0?t:new se(1/0,1/0,1/0),this.max=n!==void 0?n:new se(-1/0,-1/0,-1/0)}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.length;l<c;l+=3){const h=t[l],u=t[l+1],d=t[l+2];h<n&&(n=h),u<i&&(i=u),d<r&&(r=d),h>s&&(s=h),u>o&&(o=u),d>a&&(a=d)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(t){let n=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=t.count;l<c;l++){const h=t.getX(l),u=t.getY(l),d=t.getZ(l);h<n&&(n=h),u<i&&(i=u),d<r&&(r=d),h>s&&(s=h),u>o&&(o=u),d>a&&(a=d)}return this.min.set(n,i,r),this.max.set(s,o,a),this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=Gc.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new se),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new se),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const n=t.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Ug.copy(n.boundingBox),Ug.applyMatrix4(t.matrixWorld),this.union(Ug));const i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new se),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Gc),Gc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,i;return t.normal.x>0?(n=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),n<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter($c),Ed.subVectors(this.max,$c),tl.subVectors(t.a,$c),nl.subVectors(t.b,$c),il.subVectors(t.c,$c),Gs.subVectors(nl,tl),$s.subVectors(il,nl),Wo.subVectors(tl,il);let n=[0,-Gs.z,Gs.y,0,-$s.z,$s.y,0,-Wo.z,Wo.y,Gs.z,0,-Gs.x,$s.z,0,-$s.x,Wo.z,0,-Wo.x,-Gs.y,Gs.x,0,-$s.y,$s.x,0,-Wo.y,Wo.x,0];return!Vg(n,tl,nl,il,Ed)||(n=[1,0,0,0,1,0,0,0,1],!Vg(n,tl,nl,il,Ed))?!1:(Sd.crossVectors(Gs,$s),n=[Sd.x,Sd.y,Sd.z],Vg(n,tl,nl,il,Ed))}clampPoint(t,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new se),n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Gc.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=this.getSize(Gc).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(rs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),rs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),rs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),rs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),rs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),rs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),rs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),rs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(rs),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function Vg(e,t,n,i,r){for(let s=0,o=e.length-3;s<=o;s+=3){Go.fromArray(e,s);const a=r.x*Math.abs(Go.x)+r.y*Math.abs(Go.y)+r.z*Math.abs(Go.z),l=t.dot(Go),c=n.dot(Go),h=i.dot(Go);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const rs=[new se,new se,new se,new se,new se,new se,new se,new se],Gc=new se,Ug=new Ro,tl=new se,nl=new se,il=new se,Gs=new se,$s=new se,Wo=new se,$c=new se,Ed=new se,Sd=new se,Go=new se,WW=new Ro;class Bs{constructor(t,n){this.center=t!==void 0?t:new se,this.radius=n!==void 0?n:-1}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const i=this.center;n!==void 0?i.copy(n):WW.setFromPoints(t).getCenter(i);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const i=this.center.distanceToSquared(t);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new se),n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ro),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const ss=new se,zg=new se,Td=new se,js=new se,Hg=new se,Md=new se,Wg=new se;class Vh{constructor(t,n){this.origin=t!==void 0?t:new se,this.direction=n!==void 0?n:new se(0,0,-1)}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new se),n.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ss)),this}closestPointToPoint(t,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new se),n.subVectors(t,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=ss.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(ss.copy(this.direction).multiplyScalar(n).add(this.origin),ss.distanceToSquared(t))}distanceSqToSegment(t,n,i,r){zg.copy(t).add(n).multiplyScalar(.5),Td.copy(n).sub(t).normalize(),js.copy(this.origin).sub(zg);const s=t.distanceTo(n)*.5,o=-this.direction.dot(Td),a=js.dot(this.direction),l=-js.dot(Td),c=js.lengthSq(),h=Math.abs(1-o*o);let u,d,f,p;if(h>0)if(u=o*l-a,d=o*a-l,p=s*h,u>=0)if(d>=-p)if(d<=p){const y=1/h;u*=y,d*=y,f=u*(u+o*d+2*a)+d*(o*u+d+2*l)+c}else d=s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d<=-p?(u=Math.max(0,-(-o*s+a)),d=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c):d<=p?(u=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(u=Math.max(0,-(o*s+a)),d=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c);else d=o>0?-s:s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Td).multiplyScalar(d).add(zg),f}intersectSphere(t,n){ss.subVectors(t.center,this.origin);const i=ss.dot(this.direction),r=ss.dot(ss)-i*i,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/n;return i>=0?i:null}intersectPlane(t,n){const i=this.distanceToPlane(t);return i===null?null:this.at(i,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let i,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(i=(t.min.x-d.x)*c,r=(t.max.x-d.x)*c):(i=(t.max.x-d.x)*c,r=(t.min.x-d.x)*c),h>=0?(s=(t.min.y-d.y)*h,o=(t.max.y-d.y)*h):(s=(t.max.y-d.y)*h,o=(t.min.y-d.y)*h),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),u>=0?(a=(t.min.z-d.z)*u,l=(t.max.z-d.z)*u):(a=(t.max.z-d.z)*u,l=(t.min.z-d.z)*u),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(t){return this.intersectBox(t,ss)!==null}intersectTriangle(t,n,i,r,s){Hg.subVectors(n,t),Md.subVectors(i,t),Wg.crossVectors(Hg,Md);let o=this.direction.dot(Wg),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;js.subVectors(this.origin,t);const l=a*this.direction.dot(Md.crossVectors(js,Md));if(l<0)return null;const c=a*this.direction.dot(Hg.cross(js));if(c<0||l+c>o)return null;const h=-a*js.dot(Wg);return h<0?null:this.at(h/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class vt{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,n,i,r,s,o,a,l,c,h,u,d,f,p,y,v){const m=this.elements;return m[0]=t,m[4]=n,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=h,m[10]=u,m[14]=d,m[3]=f,m[7]=p,m[11]=y,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new vt().fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(t){const n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}extractBasis(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,i=t.elements,r=1/rl.setFromMatrixColumn(t,0).length(),s=1/rl.setFromMatrixColumn(t,1).length(),o=1/rl.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=t.x,r=t.y,s=t.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(t.order==="XYZ"){const d=o*h,f=o*u,p=a*h,y=a*u;n[0]=l*h,n[4]=-l*u,n[8]=c,n[1]=f+p*c,n[5]=d-y*c,n[9]=-a*l,n[2]=y-d*c,n[6]=p+f*c,n[10]=o*l}else if(t.order==="YXZ"){const d=l*h,f=l*u,p=c*h,y=c*u;n[0]=d+y*a,n[4]=p*a-f,n[8]=o*c,n[1]=o*u,n[5]=o*h,n[9]=-a,n[2]=f*a-p,n[6]=y+d*a,n[10]=o*l}else if(t.order==="ZXY"){const d=l*h,f=l*u,p=c*h,y=c*u;n[0]=d-y*a,n[4]=-o*u,n[8]=p+f*a,n[1]=f+p*a,n[5]=o*h,n[9]=y-d*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(t.order==="ZYX"){const d=o*h,f=o*u,p=a*h,y=a*u;n[0]=l*h,n[4]=p*c-f,n[8]=d*c+y,n[1]=l*u,n[5]=y*c+d,n[9]=f*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(t.order==="YZX"){const d=o*l,f=o*c,p=a*l,y=a*c;n[0]=l*h,n[4]=y-d*u,n[8]=p*u+f,n[1]=u,n[5]=o*h,n[9]=-a*h,n[2]=-c*h,n[6]=f*u+p,n[10]=d-y*u}else if(t.order==="XZY"){const d=o*l,f=o*c,p=a*l,y=a*c;n[0]=l*h,n[4]=-u,n[8]=c*h,n[1]=d*u+y,n[5]=o*h,n[9]=f*u-p,n[2]=p*u-f,n[6]=a*h,n[10]=y*u+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(GW,t,$W)}lookAt(t,n,i){const r=this.elements;return Pi.subVectors(t,n),Pi.lengthSq()===0&&(Pi.z=1),Pi.normalize(),qs.crossVectors(i,Pi),qs.lengthSq()===0&&(Math.abs(i.z)===1?Pi.x+=1e-4:Pi.z+=1e-4,Pi.normalize(),qs.crossVectors(i,Pi)),qs.normalize(),Ad.crossVectors(Pi,qs),r[0]=qs.x,r[4]=Ad.x,r[8]=Pi.x,r[1]=qs.y,r[5]=Ad.y,r[9]=Pi.y,r[2]=qs.z,r[6]=Ad.z,r[10]=Pi.z,this}multiply(t,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],h=i[1],u=i[5],d=i[9],f=i[13],p=i[2],y=i[6],v=i[10],m=i[14],g=i[3],w=i[7],b=i[11],E=i[15],S=r[0],k=r[4],O=r[8],W=r[12],U=r[1],L=r[5],D=r[9],V=r[13],ee=r[2],K=r[6],Z=r[10],H=r[14],B=r[3],te=r[7],ae=r[11],G=r[15];return s[0]=o*S+a*U+l*ee+c*B,s[4]=o*k+a*L+l*K+c*te,s[8]=o*O+a*D+l*Z+c*ae,s[12]=o*W+a*V+l*H+c*G,s[1]=h*S+u*U+d*ee+f*B,s[5]=h*k+u*L+d*K+f*te,s[9]=h*O+u*D+d*Z+f*ae,s[13]=h*W+u*V+d*H+f*G,s[2]=p*S+y*U+v*ee+m*B,s[6]=p*k+y*L+v*K+m*te,s[10]=p*O+y*D+v*Z+m*ae,s[14]=p*W+y*V+v*H+m*G,s[3]=g*S+w*U+b*ee+E*B,s[7]=g*k+w*L+b*K+E*te,s[11]=g*O+w*D+b*Z+E*ae,s[15]=g*W+w*V+b*H+E*G,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],h=t[2],u=t[6],d=t[10],f=t[14],p=t[3],y=t[7],v=t[11],m=t[15];return p*(+s*l*u-r*c*u-s*a*d+i*c*d+r*a*f-i*l*f)+y*(+n*l*f-n*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+v*(+n*c*u-n*a*f-s*o*u+i*o*f+s*a*h-i*c*h)+m*(-r*a*h-n*l*u+n*a*d+r*o*u-i*o*d+i*l*h)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=n,r[14]=i),this}getInverse(t,n){n!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],u=r[6],d=r[7],f=r[8],p=r[9],y=r[10],v=r[11],m=r[12],g=r[13],w=r[14],b=r[15],E=p*w*d-g*y*d+g*u*v-h*w*v-p*u*b+h*y*b,S=m*y*d-f*w*d-m*u*v+c*w*v+f*u*b-c*y*b,k=f*g*d-m*p*d+m*h*v-c*g*v-f*h*b+c*p*b,O=m*p*u-f*g*u-m*h*y+c*g*y+f*h*w-c*p*w,W=s*E+o*S+a*k+l*O;if(W===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/W;return i[0]=E*U,i[1]=(g*y*l-p*w*l-g*a*v+o*w*v+p*a*b-o*y*b)*U,i[2]=(h*w*l-g*u*l+g*a*d-o*w*d-h*a*b+o*u*b)*U,i[3]=(p*u*l-h*y*l-p*a*d+o*y*d+h*a*v-o*u*v)*U,i[4]=S*U,i[5]=(f*w*l-m*y*l+m*a*v-s*w*v-f*a*b+s*y*b)*U,i[6]=(m*u*l-c*w*l-m*a*d+s*w*d+c*a*b-s*u*b)*U,i[7]=(c*y*l-f*u*l+f*a*d-s*y*d-c*a*v+s*u*v)*U,i[8]=k*U,i[9]=(m*p*l-f*g*l-m*o*v+s*g*v+f*o*b-s*p*b)*U,i[10]=(c*g*l-m*h*l+m*o*d-s*g*d-c*o*b+s*h*b)*U,i[11]=(f*h*l-c*p*l-f*o*d+s*p*d+c*o*v-s*h*v)*U,i[12]=O*U,i[13]=(f*g*a-m*p*a+m*o*y-s*g*y-f*o*w+s*p*w)*U,i[14]=(m*h*a-c*g*a-m*o*u+s*g*u+c*o*w-s*h*w)*U,i[15]=(c*p*a-f*h*a+f*o*u-s*p*u-c*o*y+s*h*y)*U,this}scale(t){const n=this.elements,i=t.x,r=t.y,s=t.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(t,n,i){return this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=t.x,a=t.y,l=t.z,c=s*o,h=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+i,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,n,i){return this.set(1,n,i,0,t,1,i,0,t,n,1,0,0,0,0,1),this}compose(t,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,p=s*u,y=o*h,v=o*u,m=a*u,g=l*c,w=l*h,b=l*u,E=i.x,S=i.y,k=i.z;return r[0]=(1-(y+m))*E,r[1]=(f+b)*E,r[2]=(p-w)*E,r[3]=0,r[4]=(f-b)*S,r[5]=(1-(d+m))*S,r[6]=(v+g)*S,r[7]=0,r[8]=(p+w)*k,r[9]=(v-g)*k,r[10]=(1-(d+y))*k,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,n,i){const r=this.elements;let s=rl.set(r[0],r[1],r[2]).length();const o=rl.set(r[4],r[5],r[6]).length(),a=rl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],dr.copy(this);const c=1/s,h=1/o,u=1/a;return dr.elements[0]*=c,dr.elements[1]*=c,dr.elements[2]*=c,dr.elements[4]*=h,dr.elements[5]*=h,dr.elements[6]*=h,dr.elements[8]*=u,dr.elements[9]*=u,dr.elements[10]*=u,n.setFromRotationMatrix(dr),i.x=s,i.y=o,i.z=a,this}makePerspective(t,n,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(n-t),c=2*s/(i-r),h=(n+t)/(n-t),u=(i+r)/(i-r),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,n,i,r,s,o){const a=this.elements,l=1/(n-t),c=1/(i-r),h=1/(o-s),u=(n+t)*l,d=(i+r)*c,f=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n=0){for(let i=0;i<16;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}const rl=new se,dr=new vt,GW=new se(0,0,0),$W=new se(1,1,1),qs=new se,Ad=new se,Pi=new se;class Uh{constructor(t=0,n=0,i=0,r=Uh.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n,i){const r=gt.clamp,s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],h=s[5],u=s[9],d=s[2],f=s[6],p=s[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,h),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,h),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(t,n,i){return IE.makeRotationFromQuaternion(t),this.setFromRotationMatrix(IE,n,i)}setFromVector3(t,n){return this.set(t.x,t.y,t.z,n||this._order)}reorder(t){return RE.setFromEuler(this),this.setFromQuaternion(RE,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new se(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Uh.DefaultOrder="XYZ";Uh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const IE=new vt,RE=new Ui;class XA{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}}let jW=0;const LE=new se,sl=new Ui,os=new vt,Cd=new se,jc=new se,qW=new se,KW=new Ui,PE=new se(1,0,0),NE=new se(0,1,0),kE=new se(0,0,1),XW={type:"added"},OE={type:"removed"};function Ye(){Object.defineProperty(this,"id",{value:jW++}),this.uuid=gt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ye.DefaultUp.clone();const e=new se,t=new Uh,n=new Ui,i=new se(1,1,1);function r(){n.setFromEuler(t,!1)}function s(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new vt},normalMatrix:{value:new Ti}}),this.matrix=new vt,this.matrixWorld=new vt,this.matrixAutoUpdate=Ye.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new XA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Ye.DefaultUp=new se(0,1,0);Ye.DefaultMatrixAutoUpdate=!0;Ye.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Ye,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return sl.setFromAxisAngle(e,t),this.quaternion.multiply(sl),this},rotateOnWorldAxis:function(e,t){return sl.setFromAxisAngle(e,t),this.quaternion.premultiply(sl),this},rotateX:function(e){return this.rotateOnAxis(PE,e)},rotateY:function(e){return this.rotateOnAxis(NE,e)},rotateZ:function(e){return this.rotateOnAxis(kE,e)},translateOnAxis:function(e,t){return LE.copy(e).applyQuaternion(this.quaternion),this.position.add(LE.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(PE,e)},translateY:function(e){return this.translateOnAxis(NE,e)},translateZ:function(e){return this.translateOnAxis(kE,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(os.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Cd.copy(e):Cd.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),jc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?os.lookAt(jc,Cd,this.up):os.lookAt(Cd,jc,this.up),this.quaternion.setFromRotationMatrix(os),i&&(os.extractRotation(i.matrixWorld),sl.setFromRotationMatrix(os),this.quaternion.premultiply(sl.inverse()))},add:function(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(XW)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(OE)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(OE)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),os.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),os.multiply(e.parent.matrixWorld)),e.applyMatrix4(os),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n].getObjectByProperty(e,t);if(s!==void 0)return s}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new se),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Ui),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jc,e,qW),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new se),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(jc,KW,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new se),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(e)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){const h=a[l];r(e.shapes,h)}else r(e.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(r(e.materials,this.material[a]));i.material=o}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(t){const o=s(e.geometries),a=s(e.materials),l=s(e.textures),c=s(e.images),h=s(e.shapes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),h.length>0&&(n.shapes=h)}return n.object=i,n;function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}});const Gg=new se,YW=new se,ZW=new Ti;class hs{constructor(t,n){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=t!==void 0?t:new se(1,0,0),this.constant=n!==void 0?n:0}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,i,r){return this.normal.set(t,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,i){const r=Gg.subVectors(i,n).cross(YW.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return new this.constructor().copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new se),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new se);const i=t.delta(Gg),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):void 0;const s=-(t.start.dot(this.normal)+this.constant)/r;if(!(s<0||s>1))return n.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const n=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return n<0&&i>0||i<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new se),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const i=n||ZW.getNormalMatrix(t),r=this.coplanarPoint(Gg).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const fr=new se,as=new se,$g=new se,ls=new se,ol=new se,al=new se,DE=new se,jg=new se,qg=new se,Kg=new se;class Kn{constructor(t,n,i){this.a=t!==void 0?t:new se,this.b=n!==void 0?n:new se,this.c=i!==void 0?i:new se}static getNormal(t,n,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new se),r.subVectors(i,n),fr.subVectors(t,n),r.cross(fr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,n,i,r,s){fr.subVectors(r,n),as.subVectors(i,n),$g.subVectors(t,n);const o=fr.dot(fr),a=fr.dot(as),l=fr.dot($g),c=as.dot(as),h=as.dot($g),u=o*c-a*a;if(s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new se),u===0)return s.set(-2,-1,-1);const d=1/u,f=(c*l-a*h)*d,p=(o*h-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(t,n,i,r){return this.getBarycoord(t,n,i,r,ls),ls.x>=0&&ls.y>=0&&ls.x+ls.y<=1}static getUV(t,n,i,r,s,o,a,l){return this.getBarycoord(t,n,i,r,ls),l.set(0,0),l.addScaledVector(s,ls.x),l.addScaledVector(o,ls.y),l.addScaledVector(a,ls.z),l}static isFrontFacing(t,n,i,r){return fr.subVectors(i,n),as.subVectors(t,n),fr.cross(as).dot(r)<0}set(t,n,i){return this.a.copy(t),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(t,n,i,r){return this.a.copy(t[n]),this.b.copy(t[i]),this.c.copy(t[r]),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return fr.subVectors(this.c,this.b),as.subVectors(this.a,this.b),fr.cross(as).length()*.5}getMidpoint(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new se),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Kn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new hs),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return Kn.getBarycoord(t,this.a,this.b,this.c,n)}getUV(t,n,i,r,s){return Kn.getUV(t,this.a,this.b,this.c,n,i,r,s)}containsPoint(t){return Kn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Kn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new se);const i=this.a,r=this.b,s=this.c;let o,a;ol.subVectors(r,i),al.subVectors(s,i),jg.subVectors(t,i);const l=ol.dot(jg),c=al.dot(jg);if(l<=0&&c<=0)return n.copy(i);qg.subVectors(t,r);const h=ol.dot(qg),u=al.dot(qg);if(h>=0&&u<=h)return n.copy(r);const d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),n.copy(i).addScaledVector(ol,o);Kg.subVectors(t,s);const f=ol.dot(Kg),p=al.dot(Kg);if(p>=0&&f<=p)return n.copy(s);const y=f*c-l*p;if(y<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(al,a);const v=h*p-f*u;if(v<=0&&u-h>=0&&f-p>=0)return DE.subVectors(s,r),a=(u-h)/(u-h+(f-p)),n.copy(r).addScaledVector(DE,a);const m=1/(v+y+d);return o=y*m,a=d*m,n.copy(i).addScaledVector(ol,o).addScaledVector(al,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const YA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pr={h:0,s:0,l:0},Id={h:0,s:0,l:0};function Xg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}function Yg(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Zg(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}class Ke{constructor(t,n,i){return Object.defineProperty(this,"isColor",{value:!0}),n===void 0&&i===void 0?this.set(t):this.setRGB(t,n,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,n,i){return this.r=t,this.g=n,this.b=i,this}setHSL(t,n,i){if(t=gt.euclideanModulo(t,1),n=gt.clamp(n,0,1),i=gt.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;this.r=Xg(s,r,t+1/3),this.g=Xg(s,r,t),this.b=Xg(s,r,t-1/3)}return this}setStyle(t){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,n(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,n(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return n(r[5]),this.setHSL(a,l,c)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const n=YA[t];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,n){return n===void 0&&(n=2),this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}copyLinearToGamma(t,n){n===void 0&&(n=2);const i=n>0?1/n:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=Yg(t.r),this.g=Yg(t.g),this.b=Yg(t.b),this}copyLinearToSRGB(t){return this.r=Zg(t.r),this.g=Zg(t.g),this.b=Zg(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const n=this.r,i=this.g,r=this.b,s=Math.max(n,i,r),o=Math.min(n,i,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const h=s-o;switch(l=c<=.5?h/(s+o):h/(2-s-o),s){case n:a=(i-r)/h+(i<r?6:0);break;case i:a=(r-n)/h+2;break;case r:a=(n-i)/h+4;break}a/=6}return t.h=a,t.s=l,t.l=c,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,n,i){return this.getHSL(pr),pr.h+=t,pr.s+=n,pr.l+=i,this.setHSL(pr.h,pr.s,pr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpHSL(t,n){this.getHSL(pr),t.getHSL(Id);const i=gt.lerp(pr.h,Id.h,n),r=gt.lerp(pr.s,Id.s,n),s=gt.lerp(pr.l,Id.l,n);return this.setHSL(i,r,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ke.NAMES=YA;Ke.prototype.r=1;Ke.prototype.g=1;Ke.prototype.b=1;class Qf{constructor(t,n,i,r,s,o){this.a=t,this.b=n,this.c=i,this.normal=r&&r.isVector3?r:new se,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new Ke,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=o!==void 0?o:0}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let n=0,i=t.vertexNormals.length;n<i;n++)this.vertexNormals[n]=t.vertexNormals[n].clone();for(let n=0,i=t.vertexColors.length;n<i;n++)this.vertexColors[n]=t.vertexColors[n].clone();return this}}let JW=0;function rt(){Object.defineProperty(this,"id",{value:JW++}),this.uuid=gt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=wu,this.side=fm,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=GA,this.blendDst=$A,this.blendEquation=Sl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=yy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=zW,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fg,this.stencilZFail=Fg,this.stencilZPass=Fg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}rt.prototype=Object.assign(Object.create(Fs.prototype),{constructor:rt,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===x_;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}},toJSON:function(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==wu&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==fm&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(r){const s=[];for(const o in r){const a=r[o];delete a.metadata,s.push(a)}return s}if(t){const r=i(e.textures),s=i(e.images);r.length>0&&(n.textures=r),s.length>0&&(n.images=s)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(rt.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function va(e){rt.call(this),this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}va.prototype=Object.create(rt.prototype);va.prototype.constructor=va;va.prototype.isMeshBasicMaterial=!0;va.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const Gt=new se,Rd=new Ie;function mt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=vm,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(mt.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(mt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Ke),t[n++]=s.r,t[n++]=s.g,t[n++]=s.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Ie),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new se),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Vt),t[n++]=s.x,t[n++]=s.y,t[n++]=s.z,t[n++]=s.w}return this},applyMatrix3:function(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Rd.fromBufferAttribute(this,t),Rd.applyMatrix3(e),this.setXY(t,Rd.x,Rd.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Gt.fromBufferAttribute(this,t),Gt.applyMatrix3(e),this.setXYZ(t,Gt.x,Gt.y,Gt.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)Gt.x=this.getX(t),Gt.y=this.getY(t),Gt.z=this.getZ(t),Gt.applyMatrix4(e),this.setXYZ(t,Gt.x,Gt.y,Gt.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)Gt.x=this.getX(t),Gt.y=this.getY(t),Gt.z=this.getZ(t),Gt.applyNormalMatrix(e),this.setXYZ(t,Gt.x,Gt.y,Gt.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)Gt.x=this.getX(t),Gt.y=this.getY(t),Gt.z=this.getZ(t),Gt.transformDirection(e),this.setXYZ(t,Gt.x,Gt.y,Gt.z);return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function wy(e,t,n){mt.call(this,new Int8Array(e),t,n)}wy.prototype=Object.create(mt.prototype);wy.prototype.constructor=wy;function xy(e,t,n){mt.call(this,new Uint8Array(e),t,n)}xy.prototype=Object.create(mt.prototype);xy.prototype.constructor=xy;function Ey(e,t,n){mt.call(this,new Uint8ClampedArray(e),t,n)}Ey.prototype=Object.create(mt.prototype);Ey.prototype.constructor=Ey;function Sy(e,t,n){mt.call(this,new Int16Array(e),t,n)}Sy.prototype=Object.create(mt.prototype);Sy.prototype.constructor=Sy;function Zu(e,t,n){mt.call(this,new Uint16Array(e),t,n)}Zu.prototype=Object.create(mt.prototype);Zu.prototype.constructor=Zu;function Ty(e,t,n){mt.call(this,new Int32Array(e),t,n)}Ty.prototype=Object.create(mt.prototype);Ty.prototype.constructor=Ty;function Ju(e,t,n){mt.call(this,new Uint32Array(e),t,n)}Ju.prototype=Object.create(mt.prototype);Ju.prototype.constructor=Ju;function Lt(e,t,n){mt.call(this,new Float32Array(e),t,n)}Lt.prototype=Object.create(mt.prototype);Lt.prototype.constructor=Lt;function My(e,t,n){mt.call(this,new Float64Array(e),t,n)}My.prototype=Object.create(mt.prototype);My.prototype.constructor=My;class QW{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const n=[];let i,r,s;const o=t.faces;for(r=0;r<o.length;r++){const a=o[r];a.materialIndex!==s&&(s=a.materialIndex,i!==void 0&&(i.count=r*3-i.start,n.push(i)),i={start:r*3,materialIndex:s})}i!==void 0&&(i.count=r*3-i.start,n.push(i)),this.groups=n}fromGeometry(t){const n=t.faces,i=t.vertices,r=t.faceVertexUvs,s=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=t.morphTargets,l=a.length;let c;if(l>0){c=[];for(let m=0;m<l;m++)c[m]={name:a[m].name,data:[]};this.morphTargets.position=c}const h=t.morphNormals,u=h.length;let d;if(u>0){d=[];for(let m=0;m<u;m++)d[m]={name:h[m].name,data:[]};this.morphTargets.normal=d}const f=t.skinIndices,p=t.skinWeights,y=f.length===i.length,v=p.length===i.length;i.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let m=0;m<n.length;m++){const g=n[m];this.vertices.push(i[g.a],i[g.b],i[g.c]);const w=g.vertexNormals;if(w.length===3)this.normals.push(w[0],w[1],w[2]);else{const E=g.normal;this.normals.push(E,E,E)}const b=g.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{const E=g.color;this.colors.push(E,E,E)}if(s===!0){const E=r[0][m];E!==void 0?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new Ie,new Ie,new Ie))}if(o===!0){const E=r[1][m];E!==void 0?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new Ie,new Ie,new Ie))}for(let E=0;E<l;E++){const S=a[E].vertices;c[E].data.push(S[g.a],S[g.b],S[g.c])}for(let E=0;E<u;E++){const S=h[E].vertexNormals[m];d[E].data.push(S.a,S.b,S.c)}y&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}}function ZA(e){if(e.length===0)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}let e4=1;const Rr=new vt,Jg=new Ye,ll=new se,Ni=new Ro,qc=new Ro,wn=new se;function Ut(){Object.defineProperty(this,"id",{value:e4+=2}),this.uuid=gt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ut.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Ut,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(ZA(e)>65535?Ju:Zu)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Ti().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return Rr.makeRotationX(e),this.applyMatrix4(Rr),this},rotateY:function(e){return Rr.makeRotationY(e),this.applyMatrix4(Rr),this},rotateZ:function(e){return Rr.makeRotationZ(e),this.applyMatrix4(Rr),this},translate:function(e,t,n){return Rr.makeTranslation(e,t,n),this.applyMatrix4(Rr),this},scale:function(e,t,n){return Rr.makeScale(e,t,n),this.applyMatrix4(Rr),this},lookAt:function(e){return Jg.lookAt(e),Jg.updateMatrix(),this.applyMatrix4(Jg.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ll).negate(),this.translate(ll.x,ll.y,ll.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const n=new Lt(t.vertices.length*3,3),i=new Lt(t.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const r=new Lt(t.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Lt(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(t.verticesNeedUpdate===!0){const n=this.attributes.position;n!==void 0&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1}if(t.normalsNeedUpdate===!0){const n=this.attributes.normal;n!==void 0&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1}if(t.colorsNeedUpdate===!0){const n=this.attributes.color;n!==void 0&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const n=this.attributes.uv;n!==void 0&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const n=this.attributes.lineDistance;n!==void 0&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new QW().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(e.vertices.length*3);if(this.setAttribute("position",new mt(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const n=new Float32Array(e.normals.length*3);this.setAttribute("normal",new mt(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const n=new Float32Array(e.colors.length*3);this.setAttribute("color",new mt(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const n=new Float32Array(e.uvs.length*2);this.setAttribute("uv",new mt(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const n=new Float32Array(e.uvs2.length*2);this.setAttribute("uv2",new mt(n,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const n in e.morphTargets){const i=[],r=e.morphTargets[n];for(let s=0,o=r.length;s<o;s++){const a=r[s],l=new Lt(a.data.length*3,3);l.name=a.name,i.push(l.copyVector3sArray(a.data))}this.morphAttributes[n]=i}if(e.skinIndices.length>0){const n=new Lt(e.skinIndices.length*4,4);this.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const n=new Lt(e.skinWeights.length*4,4);this.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Ro);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];Ni.setFromBufferAttribute(r),this.morphTargetsRelative?(wn.addVectors(this.boundingBox.min,Ni.min),this.boundingBox.expandByPoint(wn),wn.addVectors(this.boundingBox.max,Ni.max),this.boundingBox.expandByPoint(wn)):(this.boundingBox.expandByPoint(Ni.min),this.boundingBox.expandByPoint(Ni.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Bs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new se,1/0);return}if(e){const n=this.boundingSphere.center;if(Ni.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];qc.setFromBufferAttribute(o),this.morphTargetsRelative?(wn.addVectors(Ni.min,qc.min),Ni.expandByPoint(wn),wn.addVectors(Ni.max,qc.max),Ni.expandByPoint(wn)):(Ni.expandByPoint(qc.min),Ni.expandByPoint(qc.max))}Ni.getCenter(n);let i=0;for(let r=0,s=e.count;r<s;r++)wn.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(wn));if(t)for(let r=0,s=t.length;r<s;r++){const o=t[r],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)wn.fromBufferAttribute(o,l),a&&(ll.fromBufferAttribute(e,l),wn.add(ll)),i=Math.max(i,n.distanceToSquared(wn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new mt(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let u=0,d=n.count;u<d;u++)n.setXYZ(u,0,0,0);const i=new se,r=new se,s=new se,o=new se,a=new se,l=new se,c=new se,h=new se;if(e)for(let u=0,d=e.count;u<d;u+=3){const f=e.getX(u+0),p=e.getX(u+1),y=e.getX(u+2);i.fromBufferAttribute(t,f),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),o.fromBufferAttribute(n,f),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,y),o.add(c),a.add(c),l.add(c),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(y,l.x,l.y,l.z)}else for(let u=0,d=t.count;u<d;u+=3)i.fromBufferAttribute(t,u+0),r.fromBufferAttribute(t,u+1),s.fromBufferAttribute(t,u+2),c.subVectors(s,r),h.subVectors(i,r),c.cross(h),n.setXYZ(u+0,c.x,c.y,c.z),n.setXYZ(u+1,c.x,c.y,c.z),n.setXYZ(u+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(e.attributes[i]===void 0)continue;const s=n[i].array,o=e.attributes[i],a=o.array,l=o.itemSize*t,c=Math.min(a.length,s.length-l);for(let h=0,u=l;h<c;h++,u++)s[u]=a[h]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)wn.fromBufferAttribute(e,t),wn.normalize(),e.setXYZ(t,wn.x,wn.y,wn.z)},toNonIndexed:function(){function e(o,a){const l=o.array,c=o.itemSize,h=o.normalized,u=new l.constructor(a.length*c);let d=0,f=0;for(let p=0,y=a.length;p<y;p++){d=a[p]*c;for(let v=0;v<c;v++)u[f++]=l[d++]}return new mt(u,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new Ut,n=this.index.array,i=this.attributes;for(const o in i){const a=i[o],l=e(a,n);t.setAttribute(o,l)}const r=this.morphAttributes;for(const o in r){const a=[],l=r[o];for(let c=0,h=l.length;c<h;c++){const u=l[c],d=e(u,n);a.push(d)}t.morphAttributes[o]=a}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const l=s[o];t.addGroup(l.start,l.count,l.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const l in a)a[l]!==void 0&&(e[l]=a[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const l=n[a],c=l.toJSON(e.data);l.name!==""&&(c.name=l.name),e.data.attributes[a]=c}const i={};let r=!1;for(const a in this.morphAttributes){const l=this.morphAttributes[a],c=[];for(let h=0,u=l.length;h<u;h++){const d=l[h],f=d.toJSON(e.data);d.name!==""&&(f.name=d.name),c.push(f)}c.length>0&&(i[a]=c,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e},clone:function(){return new Ut().copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(t))}const r=e.morphAttributes;for(const l in r){const c=[],h=r[l];for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const h=s[l];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const FE=new vt,$o=new Vh,Qg=new Bs,Ks=new se,Xs=new se,Ys=new se,ev=new se,tv=new se,nv=new se,Ld=new se,Pd=new se,Nd=new se,Rl=new Ie,Ll=new Ie,Pl=new Ie,Su=new se,kd=new se;function Mn(e,t){Ye.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new Ut,this.material=t!==void 0?t:new va,this.updateMorphTargets()}Mn.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Mn,isMesh:!0,copy:function(e){return Ye.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),Qg.copy(n.boundingSphere),Qg.applyMatrix4(r),e.ray.intersectsSphere(Qg)===!1)||(FE.getInverse(r),$o.copy(e.ray).applyMatrix4(FE),n.boundingBox!==null&&$o.intersectsBox(n.boundingBox)===!1))return;let s;if(n.isBufferGeometry){const o=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,h=n.attributes.uv,u=n.attributes.uv2,d=n.groups,f=n.drawRange;if(o!==null)if(Array.isArray(i))for(let p=0,y=d.length;p<y;p++){const v=d[p],m=i[v.materialIndex],g=Math.max(v.start,f.start),w=Math.min(v.start+v.count,f.start+f.count);for(let b=g,E=w;b<E;b+=3){const S=o.getX(b),k=o.getX(b+1),O=o.getX(b+2);s=Od(this,m,e,$o,a,l,c,h,u,S,k,O),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const p=Math.max(0,f.start),y=Math.min(o.count,f.start+f.count);for(let v=p,m=y;v<m;v+=3){const g=o.getX(v),w=o.getX(v+1),b=o.getX(v+2);s=Od(this,i,e,$o,a,l,c,h,u,g,w,b),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}else if(a!==void 0)if(Array.isArray(i))for(let p=0,y=d.length;p<y;p++){const v=d[p],m=i[v.materialIndex],g=Math.max(v.start,f.start),w=Math.min(v.start+v.count,f.start+f.count);for(let b=g,E=w;b<E;b+=3){const S=b,k=b+1,O=b+2;s=Od(this,m,e,$o,a,l,c,h,u,S,k,O),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=v.materialIndex,t.push(s))}}else{const p=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);for(let v=p,m=y;v<m;v+=3){const g=v,w=v+1,b=v+2;s=Od(this,i,e,$o,a,l,c,h,u,g,w,b),s&&(s.faceIndex=Math.floor(v/3),t.push(s))}}}else if(n.isGeometry){const o=Array.isArray(i),a=n.vertices,l=n.faces;let c;const h=n.faceVertexUvs[0];h.length>0&&(c=h);for(let u=0,d=l.length;u<d;u++){const f=l[u],p=o?i[f.materialIndex]:i;if(p===void 0)continue;const y=a[f.a],v=a[f.b],m=a[f.c];if(s=JA(this,p,e,$o,y,v,m,Su),s){if(c&&c[u]){const g=c[u];Rl.copy(g[0]),Ll.copy(g[1]),Pl.copy(g[2]),s.uv=Kn.getUV(Su,y,v,m,Rl,Ll,Pl,new Ie)}s.face=f,s.faceIndex=u,t.push(s)}}}}});function JA(e,t,n,i,r,s,o,a){let l;if(t.side===Nn?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,t.side!==pm,a),l===null)return null;kd.copy(a),kd.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(kd);return c<n.near||c>n.far?null:{distance:c,point:kd.clone(),object:e}}function Od(e,t,n,i,r,s,o,a,l,c,h,u){Ks.fromBufferAttribute(r,c),Xs.fromBufferAttribute(r,h),Ys.fromBufferAttribute(r,u);const d=e.morphTargetInfluences;if(t.morphTargets&&s&&d){Ld.set(0,0,0),Pd.set(0,0,0),Nd.set(0,0,0);for(let p=0,y=s.length;p<y;p++){const v=d[p],m=s[p];v!==0&&(ev.fromBufferAttribute(m,c),tv.fromBufferAttribute(m,h),nv.fromBufferAttribute(m,u),o?(Ld.addScaledVector(ev,v),Pd.addScaledVector(tv,v),Nd.addScaledVector(nv,v)):(Ld.addScaledVector(ev.sub(Ks),v),Pd.addScaledVector(tv.sub(Xs),v),Nd.addScaledVector(nv.sub(Ys),v)))}Ks.add(Ld),Xs.add(Pd),Ys.add(Nd)}e.isSkinnedMesh&&(e.boneTransform(c,Ks),e.boneTransform(h,Xs),e.boneTransform(u,Ys));const f=JA(e,t,n,i,Ks,Xs,Ys,Su);if(f){a&&(Rl.fromBufferAttribute(a,c),Ll.fromBufferAttribute(a,h),Pl.fromBufferAttribute(a,u),f.uv=Kn.getUV(Su,Ks,Xs,Ys,Rl,Ll,Pl,new Ie)),l&&(Rl.fromBufferAttribute(l,c),Ll.fromBufferAttribute(l,h),Pl.fromBufferAttribute(l,u),f.uv2=Kn.getUV(Su,Ks,Xs,Ys,Rl,Ll,Pl,new Ie));const p=new Qf(c,h,u);Kn.getNormal(Ks,Xs,Ys,p.normal),f.face=p}return f}class QA extends Ut{constructor(t=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],u=[];let d=0,f=0;p("z","y","x",-1,-1,i,n,t,o,s,0),p("z","y","x",1,-1,i,n,-t,o,s,1),p("x","z","y",1,1,t,i,n,r,o,2),p("x","z","y",1,-1,t,i,-n,r,o,3),p("x","y","z",1,-1,t,n,i,r,s,4),p("x","y","z",-1,-1,t,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Lt(c,3)),this.setAttribute("normal",new Lt(h,3)),this.setAttribute("uv",new Lt(u,2));function p(y,v,m,g,w,b,E,S,k,O,W){const U=b/k,L=E/O,D=b/2,V=E/2,ee=S/2,K=k+1,Z=O+1;let H=0,B=0;const te=new se;for(let ae=0;ae<Z;ae++){const G=ae*L-V;for(let le=0;le<K;le++){const X=le*U-D;te[y]=X*g,te[v]=G*w,te[m]=ee,c.push(te.x,te.y,te.z),te[y]=0,te[v]=0,te[m]=S>0?1:-1,h.push(te.x,te.y,te.z),u.push(le/k),u.push(1-ae/O),H+=1}}for(let ae=0;ae<O;ae++)for(let G=0;G<k;G++){const le=d+G+K*ae,X=d+G+K*(ae+1),J=d+(G+1)+K*(ae+1),T=d+(G+1)+K*ae;l.push(le,X,T),l.push(X,J,T),B+=6}a.addGroup(f,B,W),f+=B,d+=H}}}function ec(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function $n(e){const t={};for(let n=0;n<e.length;n++){const i=ec(e[n]);for(const r in i)t[r]=i[r]}return t}const t4={clone:ec,merge:$n};var n4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,i4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Ai(e){rt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=n4,this.fragmentShader=i4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}Ai.prototype=Object.create(rt.prototype);Ai.prototype.constructor=Ai;Ai.prototype.isShaderMaterial=!0;Ai.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ec(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this};Ai.prototype.toJSON=function(e){const t=rt.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t};function bo(){Ye.call(this),this.type="Camera",this.matrixWorldInverse=new vt,this.projectionMatrix=new vt,this.projectionMatrixInverse=new vt}bo.prototype=Object.assign(Object.create(Ye.prototype),{constructor:bo,isCamera:!0,copy:function(e,t){return Ye.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new se),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Ye.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Ye.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function Sn(e,t,n,i){bo.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=i!==void 0?i:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Sn.prototype=Object.assign(Object.create(bo.prototype),{constructor:Sn,isPerspectiveCamera:!0,copy:function(e,t){return bo.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=gt.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(gt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return gt.RAD2DEG*2*Math.atan(Math.tan(gt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(gt.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const a=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/a,t-=s.offsetY*n/l,i*=s.width/a,n*=s.height/l}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=Ye.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const cl=90,ul=1;function tc(e,t,n){if(Ye.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Sn(cl,ul,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new se(1,0,0)),this.add(i);const r=new Sn(cl,ul,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new se(-1,0,0)),this.add(r);const s=new Sn(cl,ul,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new se(0,1,0)),this.add(s);const o=new Sn(cl,ul,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new se(0,-1,0)),this.add(o);const a=new Sn(cl,ul,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new se(0,0,1)),this.add(a);const l=new Sn(cl,ul,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new se(0,0,-1)),this.add(l),this.update=function(c,h){this.parent===null&&this.updateMatrixWorld();const u=c.xr.enabled,d=c.getRenderTarget();c.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,c.setRenderTarget(n,0),c.render(h,i),c.setRenderTarget(n,1),c.render(h,r),c.setRenderTarget(n,2),c.render(h,s),c.setRenderTarget(n,3),c.render(h,o),c.setRenderTarget(n,4),c.render(h,a),n.texture.generateMipmaps=f,c.setRenderTarget(n,5),c.render(h,l),c.setRenderTarget(d),c.xr.enabled=u}}tc.prototype=Object.create(Ye.prototype);tc.prototype.constructor=tc;function wo(e,t,n,i,r,s,o,a,l,c){e=e!==void 0?e:[],t=t!==void 0?t:E_,o=o!==void 0?o:ha,Ot.call(this,e,t,n,i,r,s,o,a,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}wo.prototype=Object.create(Ot.prototype);wo.prototype.constructor=wo;wo.prototype.isCubeTexture=!0;Object.defineProperty(wo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});function ya(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),wr.call(this,e,e,t),t=t||{},this.texture=new wo(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}ya.prototype=Object.create(wr.prototype);ya.prototype.constructor=ya;ya.prototype.isWebGLCubeRenderTarget=!0;ya.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=br,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},i=new QA(5,5,5),r=new Ai({name:"CubemapFromEquirect",uniforms:ec(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Nn,blending:bu});r.uniforms.tEquirect.value=t;const s=new Mn(i,r),o=t.minFilter;return t.minFilter===gm&&(t.minFilter=Zn),new tc(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this};ya.prototype.clear=function(e,t,n,i){const r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(r)};function nc(e,t,n,i,r,s,o,a,l,c,h,u){Ot.call(this,null,s,o,a,l,c,i,r,h,u),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=l!==void 0?l:di,this.minFilter=c!==void 0?c:di,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}nc.prototype=Object.create(Ot.prototype);nc.prototype.constructor=nc;nc.prototype.isDataTexture=!0;const hl=new Bs,Dd=new se;class ym{constructor(t,n,i,r,s,o){this.planes=[t!==void 0?t:new hs,n!==void 0?n:new hs,i!==void 0?i:new hs,r!==void 0?r:new hs,s!==void 0?s:new hs,o!==void 0?o:new hs]}set(t,n,i,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}clone(){return new this.constructor().copy(this)}copy(t){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const n=this.planes,i=t.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],f=i[9],p=i[10],y=i[11],v=i[12],m=i[13],g=i[14],w=i[15];return n[0].setComponents(a-r,u-l,y-d,w-v).normalize(),n[1].setComponents(a+r,u+l,y+d,w+v).normalize(),n[2].setComponents(a+s,u+c,y+f,w+m).normalize(),n[3].setComponents(a-s,u-c,y-f,w-m).normalize(),n[4].setComponents(a-o,u-h,y-p,w-g).normalize(),n[5].setComponents(a+o,u+h,y+p,w+g).normalize(),this}intersectsObject(t){const n=t.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),hl.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(hl)}intersectsSprite(t){return hl.center.set(0,0,0),hl.radius=.7071067811865476,hl.applyMatrix4(t.matrixWorld),this.intersectsSphere(hl)}intersectsSphere(t){const n=this.planes,i=t.center,r=-t.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(Dd.x=r.normal.x>0?t.max.x:t.min.x,Dd.y=r.normal.y>0?t.max.y:t.min.y,Dd.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Dd)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(t)<0)return!1;return!0}}function eC(){let e=null,t=!1,n=null,i=null;function r(s,o){n(s,o),i=e.requestAnimationFrame(r)}return{start:function(){t!==!0&&n!==null&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){n=s},setContext:function(s){e=s}}}function r4(e,t){const n=t.isWebGL2,i=new WeakMap;function r(c,h){const u=c.array,d=c.usage,f=e.createBuffer();e.bindBuffer(h,f),e.bufferData(h,u,d),c.onUploadCallback();let p=5126;return u instanceof Float32Array?p=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?p=5123:u instanceof Int16Array?p=5122:u instanceof Uint32Array?p=5125:u instanceof Int32Array?p=5124:u instanceof Int8Array?p=5120:u instanceof Uint8Array&&(p=5121),{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:c.version}}function s(c,h,u){const d=h.array,f=h.updateRange;e.bindBuffer(u,c),f.count===-1?e.bufferSubData(u,0,d):(n?e.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):e.bufferSubData(u,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h&&(e.deleteBuffer(h.buffer),i.delete(c))}function l(c,h){if(c.isGLBufferAttribute){var u=i.get(c);(!u||u.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,r(c,h)):d.version<c.version&&(s(d.buffer,c,h),d.version=c.version)}return{get:o,remove:a,update:l}}class tC extends Ut{constructor(t,n,i,r){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:r},t=t||1,n=n||1;const s=t/2,o=n/2,a=Math.floor(i)||1,l=Math.floor(r)||1,c=a+1,h=l+1,u=t/a,d=n/l,f=[],p=[],y=[],v=[];for(let m=0;m<h;m++){const g=m*d-o;for(let w=0;w<c;w++){const b=w*u-s;p.push(b,-g,0),y.push(0,0,1),v.push(w/a),v.push(1-m/l)}}for(let m=0;m<l;m++)for(let g=0;g<a;g++){const w=g+c*m,b=g+c*(m+1),E=g+1+c*(m+1),S=g+1+c*m;f.push(w,b,S),f.push(b,E,S)}this.setIndex(f),this.setAttribute("position",new Lt(p,3)),this.setAttribute("normal",new Lt(y,3)),this.setAttribute("uv",new Lt(v,2))}}var s4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,o4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,a4=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,l4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,c4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,u4="vec3 transformed = vec3( position );",h4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,d4=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,f4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,p4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,m4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,g4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,v4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,y4=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,_4=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,b4=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,w4=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,x4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,E4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,S4=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,T4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,M4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,A4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,C4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,I4="gl_FragColor = linearToOutputTexel( gl_FragColor );",R4=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,L4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,P4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,N4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,k4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,O4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,D4=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,F4=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,B4=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,V4=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,U4=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,z4=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,H4=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,W4=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,G4=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,$4=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,j4=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,q4=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,K4=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,X4=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Y4=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,Z4=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,J4=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Q4=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,eG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,tG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,rG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,sG=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,oG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,aG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,uG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,dG=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,fG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,pG=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,mG=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,gG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,vG=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,yG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,_G=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,bG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,wG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,xG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,EG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,SG=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,TG=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,MG=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,AG=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,CG=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,IG=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,RG=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,LG=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,PG=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,NG=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,kG=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,OG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,DG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,FG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,BG=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,VG=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,UG=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,zG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,HG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,WG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,GG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,$G=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,jG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,qG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,KG=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,XG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,YG=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,ZG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,QG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,e$=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,t$=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,n$=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,i$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,r$=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,s$=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,o$=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a$=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,l$=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c$=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u$=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h$=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,d$=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f$=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,p$=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,m$=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,g$=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v$=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,y$=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,_$=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,b$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,w$=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,x$=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,E$=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S$=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,T$=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const wt={alphamap_fragment:s4,alphamap_pars_fragment:o4,alphatest_fragment:a4,aomap_fragment:l4,aomap_pars_fragment:c4,begin_vertex:u4,beginnormal_vertex:h4,bsdfs:d4,bumpmap_pars_fragment:f4,clipping_planes_fragment:p4,clipping_planes_pars_fragment:m4,clipping_planes_pars_vertex:g4,clipping_planes_vertex:v4,color_fragment:y4,color_pars_fragment:_4,color_pars_vertex:b4,color_vertex:w4,common:x4,cube_uv_reflection_fragment:E4,defaultnormal_vertex:S4,displacementmap_pars_vertex:T4,displacementmap_vertex:M4,emissivemap_fragment:A4,emissivemap_pars_fragment:C4,encodings_fragment:I4,encodings_pars_fragment:R4,envmap_fragment:L4,envmap_common_pars_fragment:P4,envmap_pars_fragment:N4,envmap_pars_vertex:k4,envmap_physical_pars_fragment:$4,envmap_vertex:O4,fog_vertex:D4,fog_pars_vertex:F4,fog_fragment:B4,fog_pars_fragment:V4,gradientmap_pars_fragment:U4,lightmap_fragment:z4,lightmap_pars_fragment:H4,lights_lambert_vertex:W4,lights_pars_begin:G4,lights_toon_fragment:j4,lights_toon_pars_fragment:q4,lights_phong_fragment:K4,lights_phong_pars_fragment:X4,lights_physical_fragment:Y4,lights_physical_pars_fragment:Z4,lights_fragment_begin:J4,lights_fragment_maps:Q4,lights_fragment_end:eG,logdepthbuf_fragment:tG,logdepthbuf_pars_fragment:nG,logdepthbuf_pars_vertex:iG,logdepthbuf_vertex:rG,map_fragment:sG,map_pars_fragment:oG,map_particle_fragment:aG,map_particle_pars_fragment:lG,metalnessmap_fragment:cG,metalnessmap_pars_fragment:uG,morphnormal_vertex:hG,morphtarget_pars_vertex:dG,morphtarget_vertex:fG,normal_fragment_begin:pG,normal_fragment_maps:mG,normalmap_pars_fragment:gG,clearcoat_normal_fragment_begin:vG,clearcoat_normal_fragment_maps:yG,clearcoat_pars_fragment:_G,packing:bG,premultiplied_alpha_fragment:wG,project_vertex:xG,dithering_fragment:EG,dithering_pars_fragment:SG,roughnessmap_fragment:TG,roughnessmap_pars_fragment:MG,shadowmap_pars_fragment:AG,shadowmap_pars_vertex:CG,shadowmap_vertex:IG,shadowmask_pars_fragment:RG,skinbase_vertex:LG,skinning_pars_vertex:PG,skinning_vertex:NG,skinnormal_vertex:kG,specularmap_fragment:OG,specularmap_pars_fragment:DG,tonemapping_fragment:FG,tonemapping_pars_fragment:BG,transmissionmap_fragment:VG,transmissionmap_pars_fragment:UG,uv_pars_fragment:zG,uv_pars_vertex:HG,uv_vertex:WG,uv2_pars_fragment:GG,uv2_pars_vertex:$G,uv2_vertex:jG,worldpos_vertex:qG,background_frag:KG,background_vert:XG,cube_frag:YG,cube_vert:ZG,depth_frag:JG,depth_vert:QG,distanceRGBA_frag:e$,distanceRGBA_vert:t$,equirect_frag:n$,equirect_vert:i$,linedashed_frag:r$,linedashed_vert:s$,meshbasic_frag:o$,meshbasic_vert:a$,meshlambert_frag:l$,meshlambert_vert:c$,meshmatcap_frag:u$,meshmatcap_vert:h$,meshtoon_frag:d$,meshtoon_vert:f$,meshphong_frag:p$,meshphong_vert:m$,meshphysical_frag:g$,meshphysical_vert:v$,normal_frag:y$,normal_vert:_$,points_frag:b$,points_vert:w$,shadow_frag:x$,shadow_vert:E$,sprite_frag:S$,sprite_vert:T$},Be={common:{diffuse:{value:new Ke(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ti},uv2Transform:{value:new Ti},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Ti}},sprite:{diffuse:{value:new Ke(15658734)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Ti}}},Fr={basic:{uniforms:$n([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:wt.meshbasic_vert,fragmentShader:wt.meshbasic_frag},lambert:{uniforms:$n([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.fog,Be.lights,{emissive:{value:new Ke(0)}}]),vertexShader:wt.meshlambert_vert,fragmentShader:wt.meshlambert_frag},phong:{uniforms:$n([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:wt.meshphong_vert,fragmentShader:wt.meshphong_frag},standard:{uniforms:$n([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag},toon:{uniforms:$n([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new Ke(0)}}]),vertexShader:wt.meshtoon_vert,fragmentShader:wt.meshtoon_frag},matcap:{uniforms:$n([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:wt.meshmatcap_vert,fragmentShader:wt.meshmatcap_frag},points:{uniforms:$n([Be.points,Be.fog]),vertexShader:wt.points_vert,fragmentShader:wt.points_frag},dashed:{uniforms:$n([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wt.linedashed_vert,fragmentShader:wt.linedashed_frag},depth:{uniforms:$n([Be.common,Be.displacementmap]),vertexShader:wt.depth_vert,fragmentShader:wt.depth_frag},normal:{uniforms:$n([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:wt.normal_vert,fragmentShader:wt.normal_frag},sprite:{uniforms:$n([Be.sprite,Be.fog]),vertexShader:wt.sprite_vert,fragmentShader:wt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ti},t2D:{value:null}},vertexShader:wt.background_vert,fragmentShader:wt.background_frag},cube:{uniforms:$n([Be.envmap,{opacity:{value:1}}]),vertexShader:wt.cube_vert,fragmentShader:wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wt.equirect_vert,fragmentShader:wt.equirect_frag},distanceRGBA:{uniforms:$n([Be.common,Be.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wt.distanceRGBA_vert,fragmentShader:wt.distanceRGBA_frag},shadow:{uniforms:$n([Be.lights,Be.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:wt.shadow_vert,fragmentShader:wt.shadow_frag}};Fr.physical={uniforms:$n([Fr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ke(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag};function M$(e,t,n,i,r){const s=new Ke(0);let o=0,a,l,c=null,h=0,u=null;function d(p,y,v,m){let g=y.isScene===!0?y.background:null;g&&g.isTexture&&(g=t.get(g));const w=e.xr,b=w.getSession&&w.getSession();b&&b.environmentBlendMode==="additive"&&(g=null),g===null?f(s,o):g&&g.isColor&&(f(g,1),m=!0),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.mapping===T_)?(l===void 0&&(l=new Mn(new QA(1,1,1),new Ai({name:"BackgroundCubeMaterial",uniforms:ec(Fr.cube.uniforms),vertexShader:Fr.cube.vertexShader,fragmentShader:Fr.cube.fragmentShader,side:Nn,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(E,S,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),g.isWebGLCubeRenderTarget&&(g=g.texture),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,(c!==g||h!==g.version||u!==e.toneMapping)&&(l.material.needsUpdate=!0,c=g,h=g.version,u=e.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new Mn(new tC(2,2),new Ai({name:"BackgroundMaterial",uniforms:ec(Fr.background.uniforms),vertexShader:Fr.background.vertexShader,fragmentShader:Fr.background.fragmentShader,side:fm,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(c!==g||h!==g.version||u!==e.toneMapping)&&(a.material.needsUpdate=!0,c=g,h=g.version,u=e.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function f(p,y){n.buffers.color.setClear(p.r,p.g,p.b,y,r)}return{getClearColor:function(){return s},setClearColor:function(p,y){s.set(p),o=y!==void 0?y:1,f(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,f(s,o)},render:d}}function A$(e,t,n,i){const r=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=y(null);let c=l;function h(V,ee,K,Z,H){let B=!1;if(o){const te=p(Z,K,ee);c!==te&&(c=te,d(c.object)),B=v(Z,H),B&&m(Z,H)}else{const te=ee.wireframe===!0;(c.geometry!==Z.id||c.program!==K.id||c.wireframe!==te)&&(c.geometry=Z.id,c.program=K.id,c.wireframe=te,B=!0)}V.isInstancedMesh===!0&&(B=!0),H!==null&&n.update(H,34963),B&&(k(V,ee,K,Z),H!==null&&e.bindBuffer(34963,n.get(H).buffer))}function u(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function d(V){return i.isWebGL2?e.bindVertexArray(V):s.bindVertexArrayOES(V)}function f(V){return i.isWebGL2?e.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function p(V,ee,K){const Z=K.wireframe===!0;let H=a[V.id];H===void 0&&(H={},a[V.id]=H);let B=H[ee.id];B===void 0&&(B={},H[ee.id]=B);let te=B[Z];return te===void 0&&(te=y(u()),B[Z]=te),te}function y(V){const ee=[],K=[],Z=[];for(let H=0;H<r;H++)ee[H]=0,K[H]=0,Z[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:K,attributeDivisors:Z,object:V,attributes:{},index:null}}function v(V,ee){const K=c.attributes,Z=V.attributes;if(Object.keys(K).length!==Object.keys(Z).length)return!0;for(const H in Z){const B=K[H],te=Z[H];if(B===void 0||B.attribute!==te||B.data!==te.data)return!0}return c.index!==ee}function m(V,ee){const K={},Z=V.attributes;for(const H in Z){const B=Z[H],te={};te.attribute=B,B.data&&(te.data=B.data),K[H]=te}c.attributes=K,c.index=ee}function g(){const V=c.newAttributes;for(let ee=0,K=V.length;ee<K;ee++)V[ee]=0}function w(V){b(V,0)}function b(V,ee){const K=c.newAttributes,Z=c.enabledAttributes,H=c.attributeDivisors;K[V]=1,Z[V]===0&&(e.enableVertexAttribArray(V),Z[V]=1),H[V]!==ee&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,ee),H[V]=ee)}function E(){const V=c.newAttributes,ee=c.enabledAttributes;for(let K=0,Z=ee.length;K<Z;K++)ee[K]!==V[K]&&(e.disableVertexAttribArray(K),ee[K]=0)}function S(V,ee,K,Z,H,B){i.isWebGL2===!0&&(K===5124||K===5125)?e.vertexAttribIPointer(V,ee,K,H,B):e.vertexAttribPointer(V,ee,K,Z,H,B)}function k(V,ee,K,Z){if(i.isWebGL2===!1&&(V.isInstancedMesh||Z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;g();const H=Z.attributes,B=K.getAttributes(),te=ee.defaultAttributeValues;for(const ae in B){const G=B[ae];if(G>=0){const le=H[ae];if(le!==void 0){const X=le.normalized,J=le.itemSize,T=n.get(le);if(T===void 0)continue;const ne=T.buffer,Q=T.type,oe=T.bytesPerElement;if(le.isInterleavedBufferAttribute){const ie=le.data,$=ie.stride,A=le.offset;ie&&ie.isInstancedInterleavedBuffer?(b(G,ie.meshPerAttribute),Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=ie.meshPerAttribute*ie.count)):w(G),e.bindBuffer(34962,ne),S(G,J,Q,X,$*oe,A*oe)}else le.isInstancedBufferAttribute?(b(G,le.meshPerAttribute),Z._maxInstanceCount===void 0&&(Z._maxInstanceCount=le.meshPerAttribute*le.count)):w(G),e.bindBuffer(34962,ne),S(G,J,Q,X,0,0)}else if(ae==="instanceMatrix"){const X=n.get(V.instanceMatrix);if(X===void 0)continue;const J=X.buffer,T=X.type;b(G+0,1),b(G+1,1),b(G+2,1),b(G+3,1),e.bindBuffer(34962,J),e.vertexAttribPointer(G+0,4,T,!1,64,0),e.vertexAttribPointer(G+1,4,T,!1,64,16),e.vertexAttribPointer(G+2,4,T,!1,64,32),e.vertexAttribPointer(G+3,4,T,!1,64,48)}else if(ae==="instanceColor"){const X=n.get(V.instanceColor);if(X===void 0)continue;const J=X.buffer,T=X.type;b(G,1),e.bindBuffer(34962,J),e.vertexAttribPointer(G,3,T,!1,12,0)}else if(te!==void 0){const X=te[ae];if(X!==void 0)switch(X.length){case 2:e.vertexAttrib2fv(G,X);break;case 3:e.vertexAttrib3fv(G,X);break;case 4:e.vertexAttrib4fv(G,X);break;default:e.vertexAttrib1fv(G,X)}}}}E()}function O(){L();for(const V in a){const ee=a[V];for(const K in ee){const Z=ee[K];for(const H in Z)f(Z[H].object),delete Z[H];delete ee[K]}delete a[V]}}function W(V){if(a[V.id]===void 0)return;const ee=a[V.id];for(const K in ee){const Z=ee[K];for(const H in Z)f(Z[H].object),delete Z[H];delete ee[K]}delete a[V.id]}function U(V){for(const ee in a){const K=a[ee];if(K[V.id]===void 0)continue;const Z=K[V.id];for(const H in Z)f(Z[H].object),delete Z[H];delete K[V.id]}}function L(){D(),c!==l&&(c=l,d(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:L,resetDefaultState:D,dispose:O,releaseStatesOfGeometry:W,releaseStatesOfProgram:U,initAttributes:g,enableAttribute:w,disableUnusedAttributes:E}}function C$(e,t,n,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,h){e.drawArrays(s,c,h),n.update(h,s,1)}function l(c,h,u){if(u===0)return;let d,f;if(r)d=e,f="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,h,u),n.update(h,s,u)}this.setMode=o,this.render=a,this.renderInstances=l}function I$(e,t,n){let i;function r(){if(i!==void 0)return i;const S=t.get("EXT_texture_filter_anisotropic");return S!==null?i=e.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function s(S){if(S==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return S==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&e instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=n.logarithmicDepthBuffer===!0,h=e.getParameter(34930),u=e.getParameter(35660),d=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),y=e.getParameter(36347),v=e.getParameter(36348),m=e.getParameter(36349),g=u>0,w=o||!!t.get("OES_texture_float"),b=g&&w,E=o?e.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:u,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:w,floatVertexTextures:b,maxSamples:E}}function R$(e){const t=this;let n=null,i=0,r=!1,s=!1;const o=new hs,a=new Ti,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d,f){const p=u.length!==0||d||i!==0||r;return r=d,n=h(u,f,0),i=u.length,p},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1,c()},this.setState=function(u,d,f){const p=u.clippingPlanes,y=u.clipIntersection,v=u.clipShadows,m=e.get(u);if(!r||p===null||p.length===0||s&&!v)s?h(null):c();else{const g=s?0:i,w=g*4;let b=m.clippingState||null;l.value=b,b=h(p,d,w,f);for(let E=0;E!==w;++E)b[E]=n[E];m.clippingState=b,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=g}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function h(u,d,f,p){const y=u!==null?u.length:0;let v=null;if(y!==0){if(v=l.value,p!==!0||v===null){const m=f+y*4,g=d.matrixWorldInverse;a.getNormalMatrix(g),(v===null||v.length<m)&&(v=new Float32Array(m));for(let w=0,b=f;w!==y;++w,b+=4)o.copy(u[w]).applyMatrix4(g,a),o.normal.toArray(v,b),v[b+3]=o.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=y,t.numIntersection=0,v}}function L$(e){let t=new WeakMap;function n(o,a){return a===dE?o.mapping=E_:a===fE&&(o.mapping=S_),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===dE||a===fE)if(t.has(o)){const l=t.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=e.getRenderList(),h=e.getRenderTarget(),u=e.getRenderState(),d=new ya(l.height/2);return d.fromEquirectangularTexture(e,o),t.set(o,d),e.setRenderTarget(h),e.setRenderList(c),e.setRenderState(u),o.addEventListener("dispose",r),n(d.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}function P$(e){const t={};return{has:function(n){if(t[n]!==void 0)return t[n]!==null;let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i!==null},get:function(n){return this.has(n)||console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]}}}function N$(e,t,n,i){const r=new WeakMap,s=new WeakMap;function o(u){const d=u.target,f=r.get(d);f.index!==null&&t.remove(f.index);for(const y in f.attributes)t.remove(f.attributes[y]);d.removeEventListener("dispose",o),r.delete(d);const p=s.get(f);p&&(t.remove(p),s.delete(f)),i.releaseStatesOfGeometry(f),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function a(u,d){let f=r.get(d);return f||(d.addEventListener("dispose",o),d.isBufferGeometry?f=d:d.isGeometry&&(d._bufferGeometry===void 0&&(d._bufferGeometry=new Ut().setFromObject(u)),f=d._bufferGeometry),r.set(d,f),n.memory.geometries++,f)}function l(u){const d=u.attributes;for(const p in d)t.update(d[p],34962);const f=u.morphAttributes;for(const p in f){const y=f[p];for(let v=0,m=y.length;v<m;v++)t.update(y[v],34962)}}function c(u){const d=[],f=u.index,p=u.attributes.position;let y=0;if(f!==null){const g=f.array;y=f.version;for(let w=0,b=g.length;w<b;w+=3){const E=g[w+0],S=g[w+1],k=g[w+2];d.push(E,S,S,k,k,E)}}else{const g=p.array;y=p.version;for(let w=0,b=g.length/3-1;w<b;w+=3){const E=w+0,S=w+1,k=w+2;d.push(E,S,S,k,k,E)}}const v=new(ZA(d)>65535?Ju:Zu)(d,1);v.version=y;const m=s.get(u);m&&t.remove(m),s.set(u,v)}function h(u){const d=s.get(u);if(d){const f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function k$(e,t,n,i){const r=i.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function h(d,f){e.drawElements(s,f,a,d*l),n.update(f,s,1)}function u(d,f,p){if(p===0)return;let y,v;if(r)y=e,v="drawElementsInstanced";else if(y=t.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[v](s,f,a,d*l,p),n.update(f,s,p)}this.setMode=o,this.setIndex=c,this.render=h,this.renderInstances=u}function O$(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function D$(e,t){return e[0]-t[0]}function F$(e,t){return Math.abs(t[1])-Math.abs(e[1])}function B$(e){const t={},n=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,a,l){const c=s.morphTargetInfluences,h=c===void 0?0:c.length;let u=t[o.id];if(u===void 0){u=[];for(let v=0;v<h;v++)u[v]=[v,0];t[o.id]=u}for(let v=0;v<h;v++){const m=u[v];m[0]=v,m[1]=c[v]}u.sort(F$);for(let v=0;v<8;v++)v<h&&u[v][1]?(i[v][0]=u[v][0],i[v][1]=u[v][1]):(i[v][0]=Number.MAX_SAFE_INTEGER,i[v][1]=0);i.sort(D$);const d=a.morphTargets&&o.morphAttributes.position,f=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let v=0;v<8;v++){const m=i[v],g=m[0],w=m[1];g!==Number.MAX_SAFE_INTEGER&&w?(d&&o.getAttribute("morphTarget"+v)!==d[g]&&o.setAttribute("morphTarget"+v,d[g]),f&&o.getAttribute("morphNormal"+v)!==f[g]&&o.setAttribute("morphNormal"+v,f[g]),n[v]=w,p+=w):(d&&o.getAttribute("morphTarget"+v)!==void 0&&o.deleteAttribute("morphTarget"+v),f&&o.getAttribute("morphNormal"+v)!==void 0&&o.deleteAttribute("morphNormal"+v),n[v]=0)}const y=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(e,"morphTargetBaseInfluence",y),l.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function V$(e,t,n,i){let r=new WeakMap;function s(a){const l=i.render.frame,c=a.geometry,h=t.get(a,c);return r.get(h)!==l&&(c.isGeometry&&h.updateFromObject(a),t.update(h),r.set(h,l)),a.isInstancedMesh&&(n.update(a.instanceMatrix,34962),a.instanceColor!==null&&n.update(a.instanceColor,34962)),h}function o(){r=new WeakMap}return{update:s,dispose:o}}function Qu(e,t,n,i){Ot.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=di,this.minFilter=di,this.wrapR=Oi,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Qu.prototype=Object.create(Ot.prototype);Qu.prototype.constructor=Qu;Qu.prototype.isDataTexture2DArray=!0;function eh(e,t,n,i){Ot.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:i||1},this.magFilter=di,this.minFilter=di,this.wrapR=Oi,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}eh.prototype=Object.create(Ot.prototype);eh.prototype.constructor=eh;eh.prototype.isDataTexture3D=!0;const nC=new Ot,U$=new Qu,z$=new eh,iC=new wo,BE=[],VE=[],UE=new Float32Array(16),zE=new Float32Array(9),HE=new Float32Array(4);function Sc(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=BE[r];if(s===void 0&&(s=new Float32Array(r),BE[r]=s),t!==0){i.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=n,e[o].toArray(s,a)}return s}function or(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function $i(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function rC(e,t){let n=VE[t];n===void 0&&(n=new Int32Array(t),VE[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function H$(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function W$(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(or(n,t))return;e.uniform2fv(this.addr,t),$i(n,t)}}function G$(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(or(n,t))return;e.uniform3fv(this.addr,t),$i(n,t)}}function $$(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(or(n,t))return;e.uniform4fv(this.addr,t),$i(n,t)}}function j$(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(or(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),$i(n,t)}else{if(or(n,i))return;HE.set(i),e.uniformMatrix2fv(this.addr,!1,HE),$i(n,i)}}function q$(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(or(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),$i(n,t)}else{if(or(n,i))return;zE.set(i),e.uniformMatrix3fv(this.addr,!1,zE),$i(n,i)}}function K$(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(or(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),$i(n,t)}else{if(or(n,i))return;UE.set(i),e.uniformMatrix4fv(this.addr,!1,UE),$i(n,i)}}function X$(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||nC,r)}function Y$(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||U$,r)}function Z$(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||z$,r)}function J$(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||iC,r)}function Q$(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function ej(e,t){const n=this.cache;or(n,t)||(e.uniform2iv(this.addr,t),$i(n,t))}function tj(e,t){const n=this.cache;or(n,t)||(e.uniform3iv(this.addr,t),$i(n,t))}function nj(e,t){const n=this.cache;or(n,t)||(e.uniform4iv(this.addr,t),$i(n,t))}function ij(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function rj(e){switch(e){case 5126:return H$;case 35664:return W$;case 35665:return G$;case 35666:return $$;case 35674:return j$;case 35675:return q$;case 35676:return K$;case 5124:case 35670:return Q$;case 35667:case 35671:return ej;case 35668:case 35672:return tj;case 35669:case 35673:return nj;case 5125:return ij;case 35678:case 36198:case 36298:case 36306:case 35682:return X$;case 35679:case 36299:case 36307:return Z$;case 35680:case 36300:case 36308:case 36293:return J$;case 36289:case 36303:case 36311:case 36292:return Y$}}function sj(e,t){e.uniform1fv(this.addr,t)}function oj(e,t){e.uniform1iv(this.addr,t)}function aj(e,t){e.uniform2iv(this.addr,t)}function lj(e,t){e.uniform3iv(this.addr,t)}function cj(e,t){e.uniform4iv(this.addr,t)}function uj(e,t){const n=Sc(t,this.size,2);e.uniform2fv(this.addr,n)}function hj(e,t){const n=Sc(t,this.size,3);e.uniform3fv(this.addr,n)}function dj(e,t){const n=Sc(t,this.size,4);e.uniform4fv(this.addr,n)}function fj(e,t){const n=Sc(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function pj(e,t){const n=Sc(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function mj(e,t){const n=Sc(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function gj(e,t,n){const i=t.length,r=rC(n,i);e.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTexture2D(t[s]||nC,r[s])}function vj(e,t,n){const i=t.length,r=rC(n,i);e.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)n.safeSetTextureCube(t[s]||iC,r[s])}function yj(e){switch(e){case 5126:return sj;case 35664:return uj;case 35665:return hj;case 35666:return dj;case 35674:return fj;case 35675:return pj;case 35676:return mj;case 5124:case 35670:return oj;case 35667:case 35671:return aj;case 35668:case 35672:return lj;case 35669:case 35673:return cj;case 35678:case 36198:case 36298:case 36306:case 35682:return gj;case 35680:case 36300:case 36308:case 36293:return vj}}function _j(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=rj(t.type)}function sC(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=yj(t.type)}sC.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),$i(t,e)};function oC(e){this.id=e,this.seq=[],this.map={}}oC.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(e,t[o.id],n)}};const iv=/([\w\d_]+)(\])?(\[|\.)?/g;function WE(e,t){e.seq.push(t),e.map[t.id]=t}function bj(e,t,n){const i=e.name,r=i.length;for(iv.lastIndex=0;;){const s=iv.exec(i),o=iv.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){WE(n,c===void 0?new _j(a,e,t):new sC(a,e,t));break}else{let u=n.map[a];u===void 0&&(u=new oC(a),WE(n,u)),n=u}}}function po(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const r=e.getActiveUniform(t,i),s=e.getUniformLocation(t,r.name);bj(r,s,this)}}po.prototype.setValue=function(e,t,n,i){const r=this.map[t];r!==void 0&&r.setValue(e,n,i)};po.prototype.setOptional=function(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)};po.upload=function(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const o=t[r],a=n[o.id];a.needsUpdate!==!1&&o.setValue(e,a.value,i)}};po.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const s=e[i];s.id in t&&n.push(s)}return n};function GE(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let wj=0;function xj(e){const t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function aC(e){switch(e){case Bh:return["Linear","( value )"];case KA:return["sRGB","( value )"];case NW:return["RGBE","( value )"];case OW:return["RGBM","( value, 7.0 )"];case DW:return["RGBM","( value, 16.0 )"];case FW:return["RGBD","( value, 256.0 )"];case PW:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case kW:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function $E(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&r==="")return"";const s=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+r+xj(s)}function Kc(e,t){const n=aC(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ej(e,t){const n=aC(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Sj(e,t){let n;switch(t){case LH:n="Linear";break;case PH:n="Reinhard";break;case NH:n="OptimizedCineon";break;case kH:n="ACESFilmic";break;case OH:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Tj(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ou).join(`
`)}function Mj(e){const t=[];for(const n in e){const i=e[n];i!==!1&&t.push("#define "+n+" "+i)}return t.join(`
`)}function Aj(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const o=e.getActiveAttrib(t,r).name;n[o]=e.getAttribLocation(t,o)}return n}function ou(e){return e!==""}function jE(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function qE(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Cj=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ay(e){return e.replace(Cj,Ij)}function Ij(e,t){const n=wt[t];if(n===void 0)throw new Error("Can not resolve #include <"+t+">");return Ay(n)}const Rj=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Lj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function KE(e){return e.replace(Lj,lC).replace(Rj,Pj)}function Pj(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),lC(e,t,n,i)}function lC(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function XE(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Nj(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===HA?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===WA?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===su&&(t="SHADOWMAP_TYPE_VSM"),t}function kj(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case E_:case S_:t="ENVMAP_TYPE_CUBE";break;case T_:case M_:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Oj(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case S_:case M_:t="ENVMAP_MODE_REFRACTION";break}return t}function Dj(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case mm:t="ENVMAP_BLENDING_MULTIPLY";break;case IH:t="ENVMAP_BLENDING_MIX";break;case RH:t="ENVMAP_BLENDING_ADD";break}return t}function Fj(e,t,n,i){const r=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=Nj(n),c=kj(n),h=Oj(n),u=Dj(n),d=e.gammaFactor>0?e.gammaFactor:1,f=n.isWebGL2?"":Tj(n),p=Mj(s),y=r.createProgram();let v,m,g=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=[p].filter(ou).join(`
`),v.length>0&&(v+=`
`),m=[f,p].filter(ou).join(`
`),m.length>0&&(m+=`
`)):(v=[XE(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ou).join(`
`),m=[f,XE(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==xu?"#define TONE_MAPPING":"",n.toneMapping!==xu?wt.tonemapping_pars_fragment:"",n.toneMapping!==xu?Sj("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",wt.encodings_pars_fragment,n.map?Kc("mapTexelToLinear",n.mapEncoding):"",n.matcap?Kc("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Kc("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Kc("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Kc("lightMapTexelToLinear",n.lightMapEncoding):"",Ej("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ou).join(`
`)),o=Ay(o),o=jE(o,n),o=qE(o,n),a=Ay(a),a=jE(a,n),a=qE(a,n),o=KE(o),a=KE(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,v=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=["#define varying in",n.glslVersion===ME?"":"out highp vec4 pc_fragColor;",n.glslVersion===ME?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const w=g+v+o,b=g+m+a,E=GE(r,35633,w),S=GE(r,35632,b);if(r.attachShader(y,E),r.attachShader(y,S),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),e.debug.checkShaderErrors){const W=r.getProgramInfoLog(y).trim(),U=r.getShaderInfoLog(E).trim(),L=r.getShaderInfoLog(S).trim();let D=!0,V=!0;if(r.getProgramParameter(y,35714)===!1){D=!1;const ee=$E(r,E,"vertex"),K=$E(r,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(y,35715),"gl.getProgramInfoLog",W,ee,K)}else W!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",W):(U===""||L==="")&&(V=!1);V&&(this.diagnostics={runnable:D,programLog:W,vertexShader:{log:U,prefix:v},fragmentShader:{log:L,prefix:m}})}r.deleteShader(E),r.deleteShader(S);let k;this.getUniforms=function(){return k===void 0&&(k=new po(r,y)),k};let O;return this.getAttributes=function(){return O===void 0&&(O=Aj(r,y)),O},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=wj++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=E,this.fragmentShader=S,this}function Bj(e,t,n,i,r,s){const o=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,h=i.maxVertexUniforms,u=i.vertexTextures;let d=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function y(S){const O=S.skeleton.bones;if(c)return 1024;{const U=Math.floor((h-20)/4),L=Math.min(U,O.length);return L<O.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+O.length+" bones. This GPU supports "+L+"."),0):L}}function v(S){let k;return S?S.isTexture?k=S.encoding:S.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),k=S.texture.encoding):k=Bh,k}function m(S,k,O,W,U){const L=W.fog,D=S.isMeshStandardMaterial?W.environment:null,V=t.get(S.envMap||D),ee=f[S.type],K=U.isSkinnedMesh?y(U):0;S.precision!==null&&(d=i.getMaxPrecision(S.precision),d!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",d,"instead."));let Z,H;if(ee){const ae=Fr[ee];Z=ae.vertexShader,H=ae.fragmentShader}else Z=S.vertexShader,H=S.fragmentShader;const B=e.getRenderTarget();return{isWebGL2:a,shaderID:ee,shaderName:S.type,vertexShader:Z,fragmentShader:H,defines:S.defines,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:d,instancing:U.isInstancedMesh===!0,instancingColor:U.isInstancedMesh===!0&&U.instanceColor!==null,supportsVertexTextures:u,outputEncoding:B!==null?v(B.texture):e.outputEncoding,map:!!S.map,mapEncoding:v(S.map),matcap:!!S.matcap,matcapEncoding:v(S.matcap),envMap:!!V,envMapMode:V&&V.mapping,envMapEncoding:v(V),envMapCubeUV:!!V&&(V.mapping===T_||V.mapping===M_),lightMap:!!S.lightMap,lightMapEncoding:v(S.lightMap),aoMap:!!S.aoMap,emissiveMap:!!S.emissiveMap,emissiveMapEncoding:v(S.emissiveMap),bumpMap:!!S.bumpMap,normalMap:!!S.normalMap,objectSpaceNormalMap:S.normalMapType===UW,tangentSpaceNormalMap:S.normalMapType===Ec,clearcoatMap:!!S.clearcoatMap,clearcoatRoughnessMap:!!S.clearcoatRoughnessMap,clearcoatNormalMap:!!S.clearcoatNormalMap,displacementMap:!!S.displacementMap,roughnessMap:!!S.roughnessMap,metalnessMap:!!S.metalnessMap,specularMap:!!S.specularMap,alphaMap:!!S.alphaMap,gradientMap:!!S.gradientMap,sheen:!!S.sheen,transmissionMap:!!S.transmissionMap,combine:S.combine,vertexTangents:S.normalMap&&S.vertexTangents,vertexColors:S.vertexColors,vertexUvs:!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatMap||!!S.clearcoatRoughnessMap||!!S.clearcoatNormalMap||!!S.displacementMap||!!S.transmissionMap,uvsVertexOnly:!(!!S.map||!!S.bumpMap||!!S.normalMap||!!S.specularMap||!!S.alphaMap||!!S.emissiveMap||!!S.roughnessMap||!!S.metalnessMap||!!S.clearcoatNormalMap||!!S.transmissionMap)&&!!S.displacementMap,fog:!!L,useFog:S.fog,fogExp2:L&&L.isFogExp2,flatShading:S.flatShading,sizeAttenuation:S.sizeAttenuation,logarithmicDepthBuffer:l,skinning:S.skinning&&K>0,maxBones:K,useVertexTexture:c,morphTargets:S.morphTargets,morphNormals:S.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:S.dithering,shadowMapEnabled:e.shadowMap.enabled&&O.length>0,shadowMapType:e.shadowMap.type,toneMapping:S.toneMapped?e.toneMapping:xu,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:S.premultipliedAlpha,alphaTest:S.alphaTest,doubleSided:S.side===pm,flipSided:S.side===Nn,depthPacking:S.depthPacking!==void 0?S.depthPacking:!1,index0AttributeName:S.index0AttributeName,extensionDerivatives:S.extensions&&S.extensions.derivatives,extensionFragDepth:S.extensions&&S.extensions.fragDepth,extensionDrawBuffers:S.extensions&&S.extensions.drawBuffers,extensionShaderTextureLOD:S.extensions&&S.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:S.customProgramCacheKey()}}function g(S){const k=[];if(S.shaderID?k.push(S.shaderID):(k.push(S.fragmentShader),k.push(S.vertexShader)),S.defines!==void 0)for(const O in S.defines)k.push(O),k.push(S.defines[O]);if(S.isRawShaderMaterial===!1){for(let O=0;O<p.length;O++)k.push(S[p[O]]);k.push(e.outputEncoding),k.push(e.gammaFactor)}return k.push(S.customProgramCacheKey),k.join()}function w(S){const k=f[S.type];let O;if(k){const W=Fr[k];O=t4.clone(W.uniforms)}else O=S.uniforms;return O}function b(S,k){let O;for(let W=0,U=o.length;W<U;W++){const L=o[W];if(L.cacheKey===k){O=L,++O.usedTimes;break}}return O===void 0&&(O=new Fj(e,k,S,r),o.push(O)),O}function E(S){if(--S.usedTimes===0){const k=o.indexOf(S);o[k]=o[o.length-1],o.pop(),S.destroy()}}return{getParameters:m,getProgramCacheKey:g,getUniforms:w,acquireProgram:b,releaseProgram:E,programs:o}}function Vj(){let e=new WeakMap;function t(s){let o=e.get(s);return o===void 0&&(o={},e.set(s,o)),o}function n(s){e.delete(s)}function i(s,o,a){e.get(s)[o]=a}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function Uj(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function zj(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function YE(e){const t=[];let n=0;const i=[],r=[],s={id:-1};function o(){n=0,i.length=0,r.length=0}function a(d,f,p,y,v,m){let g=t[n];const w=e.get(p);return g===void 0?(g={id:d.id,object:d,geometry:f,material:p,program:w.program||s,groupOrder:y,renderOrder:d.renderOrder,z:v,group:m},t[n]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=p,g.program=w.program||s,g.groupOrder=y,g.renderOrder=d.renderOrder,g.z=v,g.group=m),n++,g}function l(d,f,p,y,v,m){const g=a(d,f,p,y,v,m);(p.transparent===!0?r:i).push(g)}function c(d,f,p,y,v,m){const g=a(d,f,p,y,v,m);(p.transparent===!0?r:i).unshift(g)}function h(d,f){i.length>1&&i.sort(d||Uj),r.length>1&&r.sort(f||zj)}function u(){for(let d=n,f=t.length;d<f;d++){const p=t[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:i,transparent:r,init:o,push:l,unshift:c,finish:u,sort:h}}function Hj(e){let t=new WeakMap;function n(r,s){const o=t.get(r);let a;return o===void 0?(a=new YE(e),t.set(r,new WeakMap),t.get(r).set(s,a)):(a=o.get(s),a===void 0&&(a=new YE(e),o.set(s,a))),a}function i(){t=new WeakMap}return{get:n,dispose:i}}function Wj(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new se,color:new Ke};break;case"SpotLight":n={position:new se,direction:new se,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new se,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":n={direction:new se,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":n={color:new Ke,position:new se,halfWidth:new se,halfHeight:new se};break}return e[t.id]=n,n}}}function Gj(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let $j=0;function jj(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function qj(e,t){const n=new Wj,i=Gj(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)r.probe.push(new se);const s=new se,o=new vt,a=new vt;function l(c,h,u){let d=0,f=0,p=0;for(let W=0;W<9;W++)r.probe[W].set(0,0,0);let y=0,v=0,m=0,g=0,w=0,b=0,E=0,S=0;const k=u.matrixWorldInverse;c.sort(jj);for(let W=0,U=c.length;W<U;W++){const L=c[W],D=L.color,V=L.intensity,ee=L.distance,K=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)d+=D.r*V,f+=D.g*V,p+=D.b*V;else if(L.isLightProbe)for(let Z=0;Z<9;Z++)r.probe[Z].addScaledVector(L.sh.coefficients[Z],V);else if(L.isDirectionalLight){const Z=n.get(L);if(Z.color.copy(L.color).multiplyScalar(L.intensity),Z.direction.setFromMatrixPosition(L.matrixWorld),s.setFromMatrixPosition(L.target.matrixWorld),Z.direction.sub(s),Z.direction.transformDirection(k),L.castShadow){const H=L.shadow,B=i.get(L);B.shadowBias=H.bias,B.shadowNormalBias=H.normalBias,B.shadowRadius=H.radius,B.shadowMapSize=H.mapSize,r.directionalShadow[y]=B,r.directionalShadowMap[y]=K,r.directionalShadowMatrix[y]=L.shadow.matrix,b++}r.directional[y]=Z,y++}else if(L.isSpotLight){const Z=n.get(L);if(Z.position.setFromMatrixPosition(L.matrixWorld),Z.position.applyMatrix4(k),Z.color.copy(D).multiplyScalar(V),Z.distance=ee,Z.direction.setFromMatrixPosition(L.matrixWorld),s.setFromMatrixPosition(L.target.matrixWorld),Z.direction.sub(s),Z.direction.transformDirection(k),Z.coneCos=Math.cos(L.angle),Z.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),Z.decay=L.decay,L.castShadow){const H=L.shadow,B=i.get(L);B.shadowBias=H.bias,B.shadowNormalBias=H.normalBias,B.shadowRadius=H.radius,B.shadowMapSize=H.mapSize,r.spotShadow[m]=B,r.spotShadowMap[m]=K,r.spotShadowMatrix[m]=L.shadow.matrix,S++}r.spot[m]=Z,m++}else if(L.isRectAreaLight){const Z=n.get(L);Z.color.copy(D).multiplyScalar(V),Z.position.setFromMatrixPosition(L.matrixWorld),Z.position.applyMatrix4(k),a.identity(),o.copy(L.matrixWorld),o.premultiply(k),a.extractRotation(o),Z.halfWidth.set(L.width*.5,0,0),Z.halfHeight.set(0,L.height*.5,0),Z.halfWidth.applyMatrix4(a),Z.halfHeight.applyMatrix4(a),r.rectArea[g]=Z,g++}else if(L.isPointLight){const Z=n.get(L);if(Z.position.setFromMatrixPosition(L.matrixWorld),Z.position.applyMatrix4(k),Z.color.copy(L.color).multiplyScalar(L.intensity),Z.distance=L.distance,Z.decay=L.decay,L.castShadow){const H=L.shadow,B=i.get(L);B.shadowBias=H.bias,B.shadowNormalBias=H.normalBias,B.shadowRadius=H.radius,B.shadowMapSize=H.mapSize,B.shadowCameraNear=H.camera.near,B.shadowCameraFar=H.camera.far,r.pointShadow[v]=B,r.pointShadowMap[v]=K,r.pointShadowMatrix[v]=L.shadow.matrix,E++}r.point[v]=Z,v++}else if(L.isHemisphereLight){const Z=n.get(L);Z.direction.setFromMatrixPosition(L.matrixWorld),Z.direction.transformDirection(k),Z.direction.normalize(),Z.skyColor.copy(L.color).multiplyScalar(V),Z.groundColor.copy(L.groundColor).multiplyScalar(V),r.hemi[w]=Z,w++}}g>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_FLOAT_1,r.rectAreaLTC2=Be.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Be.LTC_HALF_1,r.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const O=r.hash;(O.directionalLength!==y||O.pointLength!==v||O.spotLength!==m||O.rectAreaLength!==g||O.hemiLength!==w||O.numDirectionalShadows!==b||O.numPointShadows!==E||O.numSpotShadows!==S)&&(r.directional.length=y,r.spot.length=m,r.rectArea.length=g,r.point.length=v,r.hemi.length=w,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=E,r.spotShadowMatrix.length=S,O.directionalLength=y,O.pointLength=v,O.spotLength=m,O.rectAreaLength=g,O.hemiLength=w,O.numDirectionalShadows=b,O.numPointShadows=E,O.numSpotShadows=S,r.version=$j++)}return{setup:l,state:r}}function ZE(e,t){const n=new qj(e,t),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){n.setup(i,r,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,pushLight:o,pushShadow:a}}function Kj(e,t){let n=new WeakMap;function i(s,o){let a;return n.has(s)===!1?(a=new ZE(e,t),n.set(s,new WeakMap),n.get(s).set(o,a)):n.get(s).has(o)===!1?(a=new ZE(e,t),n.get(s).set(o,a)):a=n.get(s).get(o),a}function r(){n=new WeakMap}return{get:i,dispose:r}}function _a(e){rt.call(this),this.type="MeshDepthMaterial",this.depthPacking=BW,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}_a.prototype=Object.create(rt.prototype);_a.prototype.constructor=_a;_a.prototype.isMeshDepthMaterial=!0;_a.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function ba(e){rt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new se,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}ba.prototype=Object.create(rt.prototype);ba.prototype.constructor=ba;ba.prototype.isMeshDistanceMaterial=!0;ba.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var Xj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,Yj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function cC(e,t,n){let i=new ym;const r=new Ie,s=new Ie,o=new Vt,a=[],l=[],c={},h={0:Nn,1:fm,2:pm},u=new Ai({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:Yj,fragmentShader:Xj}),d=u.clone();d.defines.HORIZONAL_PASS=1;const f=new Ut;f.setAttribute("position",new mt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Mn(f,u),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=HA,this.render=function(E,S,k){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||E.length===0)return;const O=e.getRenderTarget(),W=e.getActiveCubeFace(),U=e.getActiveMipmapLevel(),L=e.state;L.setBlending(bu),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let D=0,V=E.length;D<V;D++){const ee=E[D],K=ee.shadow;if(K===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(K.autoUpdate===!1&&K.needsUpdate===!1)continue;r.copy(K.mapSize);const Z=K.getFrameExtents();if(r.multiply(Z),s.copy(K.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(s.x=Math.floor(n/Z.x),r.x=s.x*Z.x,K.mapSize.x=s.x),r.y>n&&(s.y=Math.floor(n/Z.y),r.y=s.y*Z.y,K.mapSize.y=s.y)),K.map===null&&!K.isPointLightShadow&&this.type===su){const B={minFilter:Zn,magFilter:Zn,format:br};K.map=new wr(r.x,r.y,B),K.map.texture.name=ee.name+".shadowMap",K.mapPass=new wr(r.x,r.y,B),K.camera.updateProjectionMatrix()}if(K.map===null){const B={minFilter:di,magFilter:di,format:br};K.map=new wr(r.x,r.y,B),K.map.texture.name=ee.name+".shadowMap",K.camera.updateProjectionMatrix()}e.setRenderTarget(K.map),e.clear();const H=K.getViewportCount();for(let B=0;B<H;B++){const te=K.getViewport(B);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),L.viewport(o),K.updateMatrices(ee,B),i=K.getFrustum(),b(S,k,K.camera,ee,this.type)}!K.isPointLightShadow&&this.type===su&&v(K,k),K.needsUpdate=!1}y.needsUpdate=!1,e.setRenderTarget(O,W,U)};function v(E,S){const k=t.update(p);u.uniforms.shadow_pass.value=E.map.texture,u.uniforms.resolution.value=E.mapSize,u.uniforms.radius.value=E.radius,e.setRenderTarget(E.mapPass),e.clear(),e.renderBufferDirect(S,null,k,u,p,null),d.uniforms.shadow_pass.value=E.mapPass.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,e.setRenderTarget(E.map),e.clear(),e.renderBufferDirect(S,null,k,d,p,null)}function m(E,S,k){const O=E<<0|S<<1|k<<2;let W=a[O];return W===void 0&&(W=new _a({depthPacking:VW,morphTargets:E,skinning:S}),a[O]=W),W}function g(E,S,k){const O=E<<0|S<<1|k<<2;let W=l[O];return W===void 0&&(W=new ba({morphTargets:E,skinning:S}),l[O]=W),W}function w(E,S,k,O,W,U,L){let D=null,V=m,ee=E.customDepthMaterial;if(O.isPointLight===!0&&(V=g,ee=E.customDistanceMaterial),ee===void 0){let K=!1;k.morphTargets===!0&&(K=S.morphAttributes&&S.morphAttributes.position&&S.morphAttributes.position.length>0);let Z=!1;E.isSkinnedMesh===!0&&(k.skinning===!0?Z=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",E));const H=E.isInstancedMesh===!0;D=V(K,Z,H)}else D=ee;if(e.localClippingEnabled&&k.clipShadows===!0&&k.clippingPlanes.length!==0){const K=D.uuid,Z=k.uuid;let H=c[K];H===void 0&&(H={},c[K]=H);let B=H[Z];B===void 0&&(B=D.clone(),H[Z]=B),D=B}return D.visible=k.visible,D.wireframe=k.wireframe,L===su?D.side=k.shadowSide!==null?k.shadowSide:k.side:D.side=k.shadowSide!==null?k.shadowSide:h[k.side],D.clipShadows=k.clipShadows,D.clippingPlanes=k.clippingPlanes,D.clipIntersection=k.clipIntersection,D.wireframeLinewidth=k.wireframeLinewidth,D.linewidth=k.linewidth,O.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(O.matrixWorld),D.nearDistance=W,D.farDistance=U),D}function b(E,S,k,O,W){if(E.visible===!1)return;if(E.layers.test(S.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&W===su)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,E.matrixWorld);const D=t.update(E),V=E.material;if(Array.isArray(V)){const ee=D.groups;for(let K=0,Z=ee.length;K<Z;K++){const H=ee[K],B=V[H.materialIndex];if(B&&B.visible){const te=w(E,D,B,O,k.near,k.far,W);e.renderBufferDirect(k,null,D,te,E,H)}}}else if(V.visible){const ee=w(E,D,V,O,k.near,k.far,W);e.renderBufferDirect(k,null,D,ee,E,null)}}const L=E.children;for(let D=0,V=L.length;D<V;D++)b(L[D],S,k,O,W)}}function Zj(e,t,n){const i=n.isWebGL2;function r(){let I=!1;const z=new Vt;let de=null;const pe=new Vt(0,0,0,0);return{setMask:function(fe){de!==fe&&!I&&(e.colorMask(fe,fe,fe,fe),de=fe)},setLocked:function(fe){I=fe},setClear:function(fe,ve,ye,Ne,Ae){Ae===!0&&(fe*=Ne,ve*=Ne,ye*=Ne),z.set(fe,ve,ye,Ne),pe.equals(z)===!1&&(e.clearColor(fe,ve,ye,Ne),pe.copy(z))},reset:function(){I=!1,de=null,pe.set(-1,0,0,0)}}}function s(){let I=!1,z=null,de=null,pe=null;return{setTest:function(fe){fe?ae(2929):G(2929)},setMask:function(fe){z!==fe&&!I&&(e.depthMask(fe),z=fe)},setFunc:function(fe){if(de!==fe){if(fe)switch(fe){case xH:e.depthFunc(512);break;case EH:e.depthFunc(519);break;case SH:e.depthFunc(513);break;case yy:e.depthFunc(515);break;case TH:e.depthFunc(514);break;case MH:e.depthFunc(518);break;case AH:e.depthFunc(516);break;case CH:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);de=fe}},setLocked:function(fe){I=fe},setClear:function(fe){pe!==fe&&(e.clearDepth(fe),pe=fe)},reset:function(){I=!1,z=null,de=null,pe=null}}}function o(){let I=!1,z=null,de=null,pe=null,fe=null,ve=null,ye=null,Ne=null,Ae=null;return{setTest:function(Oe){I||(Oe?ae(2960):G(2960))},setMask:function(Oe){z!==Oe&&!I&&(e.stencilMask(Oe),z=Oe)},setFunc:function(Oe,ht,At){(de!==Oe||pe!==ht||fe!==At)&&(e.stencilFunc(Oe,ht,At),de=Oe,pe=ht,fe=At)},setOp:function(Oe,ht,At){(ve!==Oe||ye!==ht||Ne!==At)&&(e.stencilOp(Oe,ht,At),ve=Oe,ye=ht,Ne=At)},setLocked:function(Oe){I=Oe},setClear:function(Oe){Ae!==Oe&&(e.clearStencil(Oe),Ae=Oe)},reset:function(){I=!1,z=null,de=null,pe=null,fe=null,ve=null,ye=null,Ne=null,Ae=null}}}const a=new r,l=new s,c=new o;let h={},u=null,d=null,f=null,p=null,y=null,v=null,m=null,g=null,w=null,b=!1,E=null,S=null,k=null,O=null,W=null;const U=e.getParameter(35661);let L=!1,D=0;const V=e.getParameter(7938);V.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL\ ([0-9])/.exec(V)[1]),L=D>=1):V.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(V)[1]),L=D>=2);let ee=null,K={};const Z=new Vt,H=new Vt;function B(I,z,de){const pe=new Uint8Array(4),fe=e.createTexture();e.bindTexture(I,fe),e.texParameteri(I,10241,9728),e.texParameteri(I,10240,9728);for(let ve=0;ve<de;ve++)e.texImage2D(z+ve,0,6408,1,1,0,6408,5121,pe);return fe}const te={};te[3553]=B(3553,3553,1),te[34067]=B(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ae(2929),l.setFunc(yy),Q(!1),oe(oE),ae(2884),T(bu);function ae(I){h[I]!==!0&&(e.enable(I),h[I]=!0)}function G(I){h[I]!==!1&&(e.disable(I),h[I]=!1)}function le(I){return u!==I?(e.useProgram(I),u=I,!0):!1}const X={[Sl]:32774,[hH]:32778,[dH]:32779};if(i)X[uE]=32775,X[hE]=32776;else{const I=t.get("EXT_blend_minmax");I!==null&&(X[uE]=I.MIN_EXT,X[hE]=I.MAX_EXT)}const J={[fH]:0,[pH]:1,[mH]:768,[GA]:770,[wH]:776,[_H]:774,[vH]:772,[gH]:769,[$A]:771,[bH]:775,[yH]:773};function T(I,z,de,pe,fe,ve,ye,Ne){if(I===bu){d&&(G(3042),d=!1);return}if(d||(ae(3042),d=!0),I!==uH){if(I!==f||Ne!==b){if((p!==Sl||m!==Sl)&&(e.blendEquation(32774),p=Sl,m=Sl),Ne)switch(I){case wu:e.blendFuncSeparate(1,771,1,771);break;case aE:e.blendFunc(1,1);break;case lE:e.blendFuncSeparate(0,0,769,771);break;case cE:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",I);break}else switch(I){case wu:e.blendFuncSeparate(770,771,1,771);break;case aE:e.blendFunc(770,1);break;case lE:e.blendFunc(0,769);break;case cE:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",I);break}y=null,v=null,g=null,w=null,f=I,b=Ne}return}fe=fe||z,ve=ve||de,ye=ye||pe,(z!==p||fe!==m)&&(e.blendEquationSeparate(X[z],X[fe]),p=z,m=fe),(de!==y||pe!==v||ve!==g||ye!==w)&&(e.blendFuncSeparate(J[de],J[pe],J[ve],J[ye]),y=de,v=pe,g=ve,w=ye),f=I,b=null}function ne(I,z){I.side===pm?G(2884):ae(2884);let de=I.side===Nn;z&&(de=!de),Q(de),I.blending===wu&&I.transparent===!1?T(bu):T(I.blending,I.blendEquation,I.blendSrc,I.blendDst,I.blendEquationAlpha,I.blendSrcAlpha,I.blendDstAlpha,I.premultipliedAlpha),l.setFunc(I.depthFunc),l.setTest(I.depthTest),l.setMask(I.depthWrite),a.setMask(I.colorWrite);const pe=I.stencilWrite;c.setTest(pe),pe&&(c.setMask(I.stencilWriteMask),c.setFunc(I.stencilFunc,I.stencilRef,I.stencilFuncMask),c.setOp(I.stencilFail,I.stencilZFail,I.stencilZPass)),$(I.polygonOffset,I.polygonOffsetFactor,I.polygonOffsetUnits)}function Q(I){E!==I&&(I?e.frontFace(2304):e.frontFace(2305),E=I)}function oe(I){I!==lH?(ae(2884),I!==S&&(I===oE?e.cullFace(1029):I===cH?e.cullFace(1028):e.cullFace(1032))):G(2884),S=I}function ie(I){I!==k&&(L&&e.lineWidth(I),k=I)}function $(I,z,de){I?(ae(32823),(O!==z||W!==de)&&(e.polygonOffset(z,de),O=z,W=de)):G(32823)}function A(I){I?ae(3089):G(3089)}function P(I){I===void 0&&(I=33984+U-1),ee!==I&&(e.activeTexture(I),ee=I)}function x(I,z){ee===null&&P();let de=K[ee];de===void 0&&(de={type:void 0,texture:void 0},K[ee]=de),(de.type!==I||de.texture!==z)&&(e.bindTexture(I,z||te[I]),de.type=I,de.texture=z)}function M(){const I=K[ee];I!==void 0&&I.type!==void 0&&(e.bindTexture(I.type,null),I.type=void 0,I.texture=void 0)}function N(){try{e.compressedTexImage2D.apply(e,arguments)}catch(I){console.error("THREE.WebGLState:",I)}}function F(){try{e.texImage2D.apply(e,arguments)}catch(I){console.error("THREE.WebGLState:",I)}}function R(){try{e.texImage3D.apply(e,arguments)}catch(I){console.error("THREE.WebGLState:",I)}}function C(I){Z.equals(I)===!1&&(e.scissor(I.x,I.y,I.z,I.w),Z.copy(I))}function ce(I){H.equals(I)===!1&&(e.viewport(I.x,I.y,I.z,I.w),H.copy(I))}function Y(){h={},ee=null,K={},u=null,f=null,E=null,S=null,a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:ae,disable:G,useProgram:le,setBlending:T,setMaterial:ne,setFlipSided:Q,setCullFace:oe,setLineWidth:ie,setPolygonOffset:$,setScissorTest:A,activeTexture:P,bindTexture:x,unbindTexture:M,compressedTexImage2D:N,texImage2D:F,texImage3D:R,scissor:C,viewport:ce,reset:Y}}function Jj(e,t,n,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=new WeakMap;let f,p=!1;try{p=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(R,C){return p?new OffscreenCanvas(R,C):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(R,C,ce,Y){let I=1;if((R.width>Y||R.height>Y)&&(I=Y/Math.max(R.width,R.height)),I<1||C===!0)if(typeof HTMLImageElement!="undefined"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&R instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&R instanceof ImageBitmap){const z=C?gt.floorPowerOfTwo:Math.floor,de=z(I*R.width),pe=z(I*R.height);f===void 0&&(f=y(de,pe));const fe=ce?y(de,pe):f;return fe.width=de,fe.height=pe,fe.getContext("2d").drawImage(R,0,0,de,pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+de+"x"+pe+")."),fe}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function m(R){return gt.isPowerOfTwo(R.width)&&gt.isPowerOfTwo(R.height)}function g(R){return a?!1:R.wrapS!==Oi||R.wrapT!==Oi||R.minFilter!==di&&R.minFilter!==Zn}function w(R,C){return R.generateMipmaps&&C&&R.minFilter!==di&&R.minFilter!==Zn}function b(R,C,ce,Y){e.generateMipmap(R);const I=i.get(C);I.__maxMipLevel=Math.log(Math.max(ce,Y))*Math.LOG2E}function E(R,C,ce){if(a===!1)return C;if(R!==null){if(e[R]!==void 0)return e[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let Y=C;return C===6403&&(ce===5126&&(Y=33326),ce===5131&&(Y=33325),ce===5121&&(Y=33321)),C===6407&&(ce===5126&&(Y=34837),ce===5131&&(Y=34843),ce===5121&&(Y=32849)),C===6408&&(ce===5126&&(Y=34836),ce===5131&&(Y=34842),ce===5121&&(Y=32856)),(Y===33325||Y===33326||Y===34842||Y===34836)&&t.get("EXT_color_buffer_float"),Y}function S(R){return R===di||R===pE||R===mE?9728:9729}function k(R){const C=R.target;C.removeEventListener("dispose",k),W(C),C.isVideoTexture&&d.delete(C),o.memory.textures--}function O(R){const C=R.target;C.removeEventListener("dispose",O),U(C),o.memory.textures--}function W(R){const C=i.get(R);C.__webglInit!==void 0&&(e.deleteTexture(C.__webglTexture),i.remove(R))}function U(R){const C=i.get(R),ce=i.get(R.texture);if(!!R){if(ce.__webglTexture!==void 0&&e.deleteTexture(ce.__webglTexture),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let Y=0;Y<6;Y++)e.deleteFramebuffer(C.__webglFramebuffer[Y]),C.__webglDepthbuffer&&e.deleteRenderbuffer(C.__webglDepthbuffer[Y]);else e.deleteFramebuffer(C.__webglFramebuffer),C.__webglDepthbuffer&&e.deleteRenderbuffer(C.__webglDepthbuffer),C.__webglMultisampledFramebuffer&&e.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer&&e.deleteRenderbuffer(C.__webglColorRenderbuffer),C.__webglDepthRenderbuffer&&e.deleteRenderbuffer(C.__webglDepthRenderbuffer);i.remove(R.texture),i.remove(R)}}let L=0;function D(){L=0}function V(){const R=L;return R>=l&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+l),L+=1,R}function ee(R,C){const ce=i.get(R);if(R.isVideoTexture&&P(R),R.version>0&&ce.__version!==R.version){const Y=R.image;if(Y===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Y.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(ce,R,C);return}}n.activeTexture(33984+C),n.bindTexture(3553,ce.__webglTexture)}function K(R,C){const ce=i.get(R);if(R.version>0&&ce.__version!==R.version){le(ce,R,C);return}n.activeTexture(33984+C),n.bindTexture(35866,ce.__webglTexture)}function Z(R,C){const ce=i.get(R);if(R.version>0&&ce.__version!==R.version){le(ce,R,C);return}n.activeTexture(33984+C),n.bindTexture(32879,ce.__webglTexture)}function H(R,C){const ce=i.get(R);if(R.version>0&&ce.__version!==R.version){X(ce,R,C);return}n.activeTexture(33984+C),n.bindTexture(34067,ce.__webglTexture)}const B={[_y]:10497,[Oi]:33071,[by]:33648},te={[di]:9728,[pE]:9984,[mE]:9986,[Zn]:9729,[DH]:9985,[gm]:9987};function ae(R,C,ce){ce?(e.texParameteri(R,10242,B[C.wrapS]),e.texParameteri(R,10243,B[C.wrapT]),(R===32879||R===35866)&&e.texParameteri(R,32882,B[C.wrapR]),e.texParameteri(R,10240,te[C.magFilter]),e.texParameteri(R,10241,te[C.minFilter])):(e.texParameteri(R,10242,33071),e.texParameteri(R,10243,33071),(R===32879||R===35866)&&e.texParameteri(R,32882,33071),(C.wrapS!==Oi||C.wrapT!==Oi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(R,10240,S(C.magFilter)),e.texParameteri(R,10241,S(C.minFilter)),C.minFilter!==di&&C.minFilter!==Zn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const Y=t.get("EXT_texture_filter_anisotropic");if(Y){if(C.type===oo&&t.get("OES_texture_float_linear")===null||C.type===Yf&&(a||t.get("OES_texture_half_float_linear"))===null)return;(C.anisotropy>1||i.get(C).__currentAnisotropy)&&(e.texParameterf(R,Y.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,r.getMaxAnisotropy())),i.get(C).__currentAnisotropy=C.anisotropy)}}function G(R,C){R.__webglInit===void 0&&(R.__webglInit=!0,C.addEventListener("dispose",k),R.__webglTexture=e.createTexture(),o.memory.textures++)}function le(R,C,ce){let Y=3553;C.isDataTexture2DArray&&(Y=35866),C.isDataTexture3D&&(Y=32879),G(R,C),n.activeTexture(33984+ce),n.bindTexture(Y,R.__webglTexture),e.pixelStorei(37440,C.flipY),e.pixelStorei(37441,C.premultiplyAlpha),e.pixelStorei(3317,C.unpackAlignment);const I=g(C)&&m(C.image)===!1,z=v(C.image,I,!1,h),de=m(z)||a,pe=s.convert(C.format);let fe=s.convert(C.type),ve=E(C.internalFormat,pe,fe);ae(Y,C,de);let ye;const Ne=C.mipmaps;if(C.isDepthTexture)ve=6402,a?C.type===oo?ve=36012:C.type===wf?ve=33190:C.type===Eu?ve=35056:ve=33189:C.type===oo&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),C.format===Hl&&ve===6402&&C.type!==Xf&&C.type!==wf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),C.type=Xf,fe=s.convert(C.type)),C.format===Xu&&ve===6402&&(ve=34041,C.type!==Eu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),C.type=Eu,fe=s.convert(C.type))),n.texImage2D(3553,0,ve,z.width,z.height,0,pe,fe,null);else if(C.isDataTexture)if(Ne.length>0&&de){for(let Ae=0,Oe=Ne.length;Ae<Oe;Ae++)ye=Ne[Ae],n.texImage2D(3553,Ae,ve,ye.width,ye.height,0,pe,fe,ye.data);C.generateMipmaps=!1,R.__maxMipLevel=Ne.length-1}else n.texImage2D(3553,0,ve,z.width,z.height,0,pe,fe,z.data),R.__maxMipLevel=0;else if(C.isCompressedTexture){for(let Ae=0,Oe=Ne.length;Ae<Oe;Ae++)ye=Ne[Ae],C.format!==br&&C.format!==ha?pe!==null?n.compressedTexImage2D(3553,Ae,ve,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Ae,ve,ye.width,ye.height,0,pe,fe,ye.data);R.__maxMipLevel=Ne.length-1}else if(C.isDataTexture2DArray)n.texImage3D(35866,0,ve,z.width,z.height,z.depth,0,pe,fe,z.data),R.__maxMipLevel=0;else if(C.isDataTexture3D)n.texImage3D(32879,0,ve,z.width,z.height,z.depth,0,pe,fe,z.data),R.__maxMipLevel=0;else if(Ne.length>0&&de){for(let Ae=0,Oe=Ne.length;Ae<Oe;Ae++)ye=Ne[Ae],n.texImage2D(3553,Ae,ve,pe,fe,ye);C.generateMipmaps=!1,R.__maxMipLevel=Ne.length-1}else n.texImage2D(3553,0,ve,pe,fe,z),R.__maxMipLevel=0;w(C,de)&&b(Y,C,z.width,z.height),R.__version=C.version,C.onUpdate&&C.onUpdate(C)}function X(R,C,ce){if(C.image.length!==6)return;G(R,C),n.activeTexture(33984+ce),n.bindTexture(34067,R.__webglTexture),e.pixelStorei(37440,C.flipY);const Y=C&&(C.isCompressedTexture||C.image[0].isCompressedTexture),I=C.image[0]&&C.image[0].isDataTexture,z=[];for(let Ae=0;Ae<6;Ae++)!Y&&!I?z[Ae]=v(C.image[Ae],!1,!0,c):z[Ae]=I?C.image[Ae].image:C.image[Ae];const de=z[0],pe=m(de)||a,fe=s.convert(C.format),ve=s.convert(C.type),ye=E(C.internalFormat,fe,ve);ae(34067,C,pe);let Ne;if(Y){for(let Ae=0;Ae<6;Ae++){Ne=z[Ae].mipmaps;for(let Oe=0;Oe<Ne.length;Oe++){const ht=Ne[Oe];C.format!==br&&C.format!==ha?fe!==null?n.compressedTexImage2D(34069+Ae,Oe,ye,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+Ae,Oe,ye,ht.width,ht.height,0,fe,ve,ht.data)}}R.__maxMipLevel=Ne.length-1}else{Ne=C.mipmaps;for(let Ae=0;Ae<6;Ae++)if(I){n.texImage2D(34069+Ae,0,ye,z[Ae].width,z[Ae].height,0,fe,ve,z[Ae].data);for(let Oe=0;Oe<Ne.length;Oe++){const At=Ne[Oe].image[Ae].image;n.texImage2D(34069+Ae,Oe+1,ye,At.width,At.height,0,fe,ve,At.data)}}else{n.texImage2D(34069+Ae,0,ye,fe,ve,z[Ae]);for(let Oe=0;Oe<Ne.length;Oe++){const ht=Ne[Oe];n.texImage2D(34069+Ae,Oe+1,ye,fe,ve,ht.image[Ae])}}R.__maxMipLevel=Ne.length}w(C,pe)&&b(34067,C,de.width,de.height),R.__version=C.version,C.onUpdate&&C.onUpdate(C)}function J(R,C,ce,Y){const I=s.convert(C.texture.format),z=s.convert(C.texture.type),de=E(C.texture.internalFormat,I,z);n.texImage2D(Y,0,de,C.width,C.height,0,I,z,null),e.bindFramebuffer(36160,R),e.framebufferTexture2D(36160,ce,Y,i.get(C.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function T(R,C,ce){if(e.bindRenderbuffer(36161,R),C.depthBuffer&&!C.stencilBuffer){let Y=33189;if(ce){const I=C.depthTexture;I&&I.isDepthTexture&&(I.type===oo?Y=36012:I.type===wf&&(Y=33190));const z=A(C);e.renderbufferStorageMultisample(36161,z,Y,C.width,C.height)}else e.renderbufferStorage(36161,Y,C.width,C.height);e.framebufferRenderbuffer(36160,36096,36161,R)}else if(C.depthBuffer&&C.stencilBuffer){if(ce){const Y=A(C);e.renderbufferStorageMultisample(36161,Y,35056,C.width,C.height)}else e.renderbufferStorage(36161,34041,C.width,C.height);e.framebufferRenderbuffer(36160,33306,36161,R)}else{const Y=s.convert(C.texture.format),I=s.convert(C.texture.type),z=E(C.texture.internalFormat,Y,I);if(ce){const de=A(C);e.renderbufferStorageMultisample(36161,de,z,C.width,C.height)}else e.renderbufferStorage(36161,z,C.width,C.height)}e.bindRenderbuffer(36161,null)}function ne(R,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,R),!(C.depthTexture&&C.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(C.depthTexture).__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),ee(C.depthTexture,0);const Y=i.get(C.depthTexture).__webglTexture;if(C.depthTexture.format===Hl)e.framebufferTexture2D(36160,36096,3553,Y,0);else if(C.depthTexture.format===Xu)e.framebufferTexture2D(36160,33306,3553,Y,0);else throw new Error("Unknown depthTexture format")}function Q(R){const C=i.get(R),ce=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");ne(C.__webglFramebuffer,R)}else if(ce){C.__webglDepthbuffer=[];for(let Y=0;Y<6;Y++)e.bindFramebuffer(36160,C.__webglFramebuffer[Y]),C.__webglDepthbuffer[Y]=e.createRenderbuffer(),T(C.__webglDepthbuffer[Y],R,!1)}else e.bindFramebuffer(36160,C.__webglFramebuffer),C.__webglDepthbuffer=e.createRenderbuffer(),T(C.__webglDepthbuffer,R,!1);e.bindFramebuffer(36160,null)}function oe(R){const C=i.get(R),ce=i.get(R.texture);R.addEventListener("dispose",O),ce.__webglTexture=e.createTexture(),o.memory.textures++;const Y=R.isWebGLCubeRenderTarget===!0,I=R.isWebGLMultisampleRenderTarget===!0,z=m(R)||a;if(a&&R.texture.format===ha&&(R.texture.type===oo||R.texture.type===Yf)&&(R.texture.format=br,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Y){C.__webglFramebuffer=[];for(let de=0;de<6;de++)C.__webglFramebuffer[de]=e.createFramebuffer()}else if(C.__webglFramebuffer=e.createFramebuffer(),I)if(a){C.__webglMultisampledFramebuffer=e.createFramebuffer(),C.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,C.__webglColorRenderbuffer);const de=s.convert(R.texture.format),pe=s.convert(R.texture.type),fe=E(R.texture.internalFormat,de,pe),ve=A(R);e.renderbufferStorageMultisample(36161,ve,fe,R.width,R.height),e.bindFramebuffer(36160,C.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,C.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),R.depthBuffer&&(C.__webglDepthRenderbuffer=e.createRenderbuffer(),T(C.__webglDepthRenderbuffer,R,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Y){n.bindTexture(34067,ce.__webglTexture),ae(34067,R.texture,z);for(let de=0;de<6;de++)J(C.__webglFramebuffer[de],R,36064,34069+de);w(R.texture,z)&&b(34067,R.texture,R.width,R.height),n.bindTexture(34067,null)}else n.bindTexture(3553,ce.__webglTexture),ae(3553,R.texture,z),J(C.__webglFramebuffer,R,36064,3553),w(R.texture,z)&&b(3553,R.texture,R.width,R.height),n.bindTexture(3553,null);R.depthBuffer&&Q(R)}function ie(R){const C=R.texture,ce=m(R)||a;if(w(C,ce)){const Y=R.isWebGLCubeRenderTarget?34067:3553,I=i.get(C).__webglTexture;n.bindTexture(Y,I),b(Y,C,R.width,R.height),n.bindTexture(Y,null)}}function $(R){if(R.isWebGLMultisampleRenderTarget)if(a){const C=i.get(R);e.bindFramebuffer(36008,C.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,C.__webglFramebuffer);const ce=R.width,Y=R.height;let I=16384;R.depthBuffer&&(I|=256),R.stencilBuffer&&(I|=1024),e.blitFramebuffer(0,0,ce,Y,0,0,ce,Y,I,9728),e.bindFramebuffer(36160,C.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function A(R){return a&&R.isWebGLMultisampleRenderTarget?Math.min(u,R.samples):0}function P(R){const C=o.render.frame;d.get(R)!==C&&(d.set(R,C),R.update())}let x=!1,M=!1;function N(R,C){R&&R.isWebGLRenderTarget&&(x===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),x=!0),R=R.texture),ee(R,C)}function F(R,C){R&&R.isWebGLCubeRenderTarget&&(M===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),M=!0),R=R.texture),H(R,C)}this.allocateTextureUnit=V,this.resetTextureUnits=D,this.setTexture2D=ee,this.setTexture2DArray=K,this.setTexture3D=Z,this.setTextureCube=H,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=ie,this.updateMultisampleRenderTarget=$,this.safeSetTexture2D=N,this.safeSetTextureCube=F}function Qj(e,t,n){const i=n.isWebGL2;function r(s){let o;if(s===A_)return 5121;if(s===UH)return 32819;if(s===zH)return 32820;if(s===HH)return 33635;if(s===FH)return 5120;if(s===BH)return 5122;if(s===Xf)return 5123;if(s===VH)return 5124;if(s===wf)return 5125;if(s===oo)return 5126;if(s===Yf)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===WH)return 6406;if(s===ha)return 6407;if(s===br)return 6408;if(s===GH)return 6409;if(s===$H)return 6410;if(s===Hl)return 6402;if(s===Xu)return 34041;if(s===jH)return 6403;if(s===qH)return 36244;if(s===KH)return 33319;if(s===XH)return 33320;if(s===YH)return 36248;if(s===ZH)return 36249;if(s===gE||s===vE||s===yE||s===_E)if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===gE)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===vE)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===yE)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===_E)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===bE||s===wE||s===xE||s===EE)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===bE)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===wE)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===xE)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===EE)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===JH)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===SE||s===TE)&&(o=t.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===SE)return o.COMPRESSED_RGB8_ETC2;if(s===TE)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===QH||s===eW||s===tW||s===nW||s===iW||s===rW||s===sW||s===oW||s===aW||s===lW||s===cW||s===uW||s===hW||s===dW||s===pW||s===mW||s===gW||s===vW||s===yW||s===_W||s===bW||s===wW||s===xW||s===EW||s===SW||s===TW||s===MW||s===AW)return o=t.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===fW)return o=t.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===Eu)return i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function Cy(e){Sn.call(this),this.cameras=e||[]}Cy.prototype=Object.assign(Object.create(Sn.prototype),{constructor:Cy,isArrayCamera:!0});function Nl(){Ye.call(this),this.type="Group"}Nl.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Nl,isGroup:!0});function Tu(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Tu.prototype,{constructor:Tu,getHandSpace:function(){if(this._hand===null&&(this._hand=new Nl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let e=0;e<=window.XRHand.LITTLE_PHALANX_TIP;e++){const t=new Nl;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Nl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Nl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e)if(l&&e.hand){s=!0;for(let c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(e.hand[c]){const h=t.getJointPose(e.hand[c],n),u=l.joints[c];h!==null&&(u.matrix.fromArray(h.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.jointRadius=h.radius),u.visible=h!==null;const d=l.joints[window.XRHand.INDEX_PHALANX_TIP],f=l.joints[window.XRHand.THUMB_PHALANX_TIP],p=d.position.distanceTo(f.position),y=.02,v=.005;l.inputState.pinching&&p>y+v?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&p<=y-v&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}}else o!==null&&(i=t.getPose(e.targetRaySpace,n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),a!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),this}});function uC(e,t){const n=this;let i=null,r=1,s=null,o="local-floor",a=null;const l=[],c=new Map,h=new Sn;h.layers.enable(1),h.viewport=new Vt;const u=new Sn;u.layers.enable(2),u.viewport=new Vt;const d=[h,u],f=new Cy;f.layers.enable(1),f.layers.enable(2);let p=null,y=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let D=l[L];return D===void 0&&(D=new Tu,l[L]=D),D.getTargetRaySpace()},this.getControllerGrip=function(L){let D=l[L];return D===void 0&&(D=new Tu,l[L]=D),D.getGripSpace()},this.getHand=function(L){let D=l[L];return D===void 0&&(D=new Tu,l[L]=D),D.getHandSpace()};function v(L){const D=c.get(L.inputSource);D&&D.dispatchEvent({type:L.type,data:L.inputSource})}function m(){c.forEach(function(L,D){L.disconnect(D)}),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),U.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function g(L){s=L,U.setContext(i),U.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(L){r=L,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){o=L,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return i},this.setSession=function(L){if(i=L,i!==null){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",m);const D=t.getContextAttributes();D.xrCompatible!==!0&&t.makeXRCompatible();const V={antialias:D.antialias,alpha:D.alpha,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:r},ee=new XRWebGLLayer(i,t,V);i.updateRenderState({baseLayer:ee}),i.requestReferenceSpace(o).then(g),i.addEventListener("inputsourceschange",w)}};function w(L){const D=i.inputSources;for(let V=0;V<l.length;V++)c.set(D[V],l[V]);for(let V=0;V<L.removed.length;V++){const ee=L.removed[V],K=c.get(ee);K&&(K.dispatchEvent({type:"disconnected",data:ee}),c.delete(ee))}for(let V=0;V<L.added.length;V++){const ee=L.added[V],K=c.get(ee);K&&K.dispatchEvent({type:"connected",data:ee})}}const b=new se,E=new se;function S(L,D,V){b.setFromMatrixPosition(D.matrixWorld),E.setFromMatrixPosition(V.matrixWorld);const ee=b.distanceTo(E),K=D.projectionMatrix.elements,Z=V.projectionMatrix.elements,H=K[14]/(K[10]-1),B=K[14]/(K[10]+1),te=(K[9]+1)/K[5],ae=(K[9]-1)/K[5],G=(K[8]-1)/K[0],le=(Z[8]+1)/Z[0],X=H*G,J=H*le,T=ee/(-G+le),ne=T*-G;D.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(ne),L.translateZ(T),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.getInverse(L.matrixWorld);const Q=H+T,oe=B+T,ie=X-ne,$=J+(ee-ne),A=te*B/oe*Q,P=ae*B/oe*Q;L.projectionMatrix.makePerspective(ie,$,A,P,Q,oe)}function k(L,D){D===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(D.matrixWorld,L.matrix),L.matrixWorldInverse.getInverse(L.matrixWorld)}this.getCamera=function(L){f.near=u.near=h.near=L.near,f.far=u.far=h.far=L.far,(p!==f.near||y!==f.far)&&(i.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,y=f.far);const D=L.parent,V=f.cameras;k(f,D);for(let K=0;K<V.length;K++)k(V[K],D);L.matrixWorld.copy(f.matrixWorld);const ee=L.children;for(let K=0,Z=ee.length;K<Z;K++)ee[K].updateMatrixWorld(!0);return V.length===2?S(f,h,u):f.projectionMatrix.copy(h.projectionMatrix),f};let O=null;function W(L,D){if(a=D.getViewerPose(s),a!==null){const ee=a.views,K=i.renderState.baseLayer;e.setFramebuffer(K.framebuffer);let Z=!1;ee.length!==f.cameras.length&&(f.cameras.length=0,Z=!0);for(let H=0;H<ee.length;H++){const B=ee[H],te=K.getViewport(B),ae=d[H];ae.matrix.fromArray(B.transform.matrix),ae.projectionMatrix.fromArray(B.projectionMatrix),ae.viewport.set(te.x,te.y,te.width,te.height),H===0&&f.matrix.copy(ae.matrix),Z===!0&&f.cameras.push(ae)}}const V=i.inputSources;for(let ee=0;ee<l.length;ee++){const K=l[ee],Z=V[ee];K.update(Z,D,s)}O&&O(L,D)}const U=new eC;U.setAnimationLoop(W),this.setAnimationLoop=function(L){O=L},this.dispose=function(){}}Object.assign(uC.prototype,Fs.prototype);function e5(e){function t(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function n(m,g,w,b){g.isMeshBasicMaterial?i(m,g):g.isMeshLambertMaterial?(i(m,g),l(m,g)):g.isMeshToonMaterial?(i(m,g),h(m,g)):g.isMeshPhongMaterial?(i(m,g),c(m,g)):g.isMeshStandardMaterial?(i(m,g),g.isMeshPhysicalMaterial?d(m,g):u(m,g)):g.isMeshMatcapMaterial?(i(m,g),f(m,g)):g.isMeshDepthMaterial?(i(m,g),p(m,g)):g.isMeshDistanceMaterial?(i(m,g),y(m,g)):g.isMeshNormalMaterial?(i(m,g),v(m,g)):g.isLineBasicMaterial?(r(m,g),g.isLineDashedMaterial&&s(m,g)):g.isPointsMaterial?o(m,g,w,b):g.isSpriteMaterial?a(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.specularMap&&(m.specularMap.value=g.specularMap);const w=e.get(g).envMap;if(w){m.envMap.value=w,m.flipEnvMap.value=w.isCubeTexture&&w._needsFlipEnvMap?-1:1,m.reflectivity.value=g.reflectivity,m.refractionRatio.value=g.refractionRatio;const S=e.get(w).__maxMipLevel;S!==void 0&&(m.maxMipLevel.value=S)}g.lightMap&&(m.lightMap.value=g.lightMap,m.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let b;g.map?b=g.map:g.specularMap?b=g.specularMap:g.displacementMap?b=g.displacementMap:g.normalMap?b=g.normalMap:g.bumpMap?b=g.bumpMap:g.roughnessMap?b=g.roughnessMap:g.metalnessMap?b=g.metalnessMap:g.alphaMap?b=g.alphaMap:g.emissiveMap?b=g.emissiveMap:g.clearcoatMap?b=g.clearcoatMap:g.clearcoatNormalMap?b=g.clearcoatNormalMap:g.clearcoatRoughnessMap&&(b=g.clearcoatRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix));let E;g.aoMap?E=g.aoMap:g.lightMap&&(E=g.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),m.uv2Transform.value.copy(E.matrix))}function r(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function s(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function o(m,g,w,b){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*w,m.scale.value=b*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap);let E;g.map?E=g.map:g.alphaMap&&(E=g.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),m.uvTransform.value.copy(E.matrix))}function a(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap);let w;g.map?w=g.map:g.alphaMap&&(w=g.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),m.uvTransform.value.copy(w.matrix))}function l(m,g){g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap)}function c(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Nn&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Nn&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias)}function h(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Nn&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Nn&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Nn&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Nn&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g){u(m,g),m.reflectivity.value=g.reflectivity,m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.sheen&&m.sheen.value.copy(g.sheen),g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Nn&&m.clearcoatNormalScale.value.negate()),m.transmission.value=g.transmission,g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap)}function f(m,g){g.matcap&&(m.matcap.value=g.matcap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Nn&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Nn&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias)}function p(m,g){g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias)}function y(m,g){g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}function v(m,g){g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Nn&&(m.bumpScale.value*=-1)),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Nn&&m.normalScale.value.negate()),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function zh(e){e=e||{};const t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,i=e.alpha!==void 0?e.alpha:!1,r=e.depth!==void 0?e.depth:!0,s=e.stencil!==void 0?e.stencil:!0,o=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,c=e.powerPreference!==void 0?e.powerPreference:"default",h=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1;let u=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Bh,this.physicallyCorrectLights=!1,this.toneMapping=xu,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const f=this;let p=!1,y=null,v=0,m=0,g=null,w=null,b=-1,E=null,S=null;const k=new Vt,O=new Vt;let W=null,U=t.width,L=t.height,D=1,V=null,ee=null;const K=new Vt(0,0,U,L),Z=new Vt(0,0,U,L);let H=!1;const B=new ym;let te=!1,ae=!1;const G=new vt,le=new se,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return g===null?D:1}let T=n;function ne(j,me){for(let q=0;q<j.length;q++){const re=j[q],ue=t.getContext(re,me);if(ue!==null)return ue}return null}try{const j={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:h};if(t.addEventListener("webglcontextlost",ht,!1),t.addEventListener("webglcontextrestored",At,!1),T===null){const me=["webgl2","webgl","experimental-webgl"];if(f.isWebGL1Renderer===!0&&me.shift(),T=ne(me,j),T===null)throw ne(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}T.getShaderPrecisionFormat===void 0&&(T.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(j){throw console.error("THREE.WebGLRenderer: "+j.message),j}let Q,oe,ie,$,A,P,x,M,N,F,R,C,ce,Y,I,z,de,pe,fe,ve,ye;function Ne(){Q=new P$(T),oe=new I$(T,Q,e),oe.isWebGL2===!1&&(Q.get("WEBGL_depth_texture"),Q.get("OES_texture_float"),Q.get("OES_texture_half_float"),Q.get("OES_texture_half_float_linear"),Q.get("OES_standard_derivatives"),Q.get("OES_element_index_uint"),Q.get("OES_vertex_array_object"),Q.get("ANGLE_instanced_arrays")),Q.get("OES_texture_float_linear"),ve=new Qj(T,Q,oe),ie=new Zj(T,Q,oe),ie.scissor(O.copy(Z).multiplyScalar(D).floor()),ie.viewport(k.copy(K).multiplyScalar(D).floor()),$=new O$(T),A=new Vj,P=new Jj(T,Q,ie,A,oe,ve,$),x=new L$(f),M=new r4(T,oe),ye=new A$(T,Q,M,oe),N=new N$(T,M,$,ye),F=new V$(T,N,M,$),de=new B$(T),I=new R$(A),R=new Bj(f,x,Q,oe,ye,I),C=new e5(A),ce=new Hj(A),Y=new Kj(Q,oe),z=new M$(f,x,ie,F,a),pe=new C$(T,Q,$,oe),fe=new k$(T,Q,$,oe),$.programs=R.programs,f.capabilities=oe,f.extensions=Q,f.properties=A,f.renderLists=ce,f.state=ie,f.info=$}Ne();const Ae=new uC(f,T);this.xr=Ae;const Oe=new cC(f,F,oe.maxTextureSize);this.shadowMap=Oe,this.getContext=function(){return T},this.getContextAttributes=function(){return T.getContextAttributes()},this.forceContextLoss=function(){const j=Q.get("WEBGL_lose_context");j&&j.loseContext()},this.forceContextRestore=function(){const j=Q.get("WEBGL_lose_context");j&&j.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(j){j!==void 0&&(D=j,this.setSize(U,L,!1))},this.getSize=function(j){return j===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),j=new Ie),j.set(U,L)},this.setSize=function(j,me,q){if(Ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=j,L=me,t.width=Math.floor(j*D),t.height=Math.floor(me*D),q!==!1&&(t.style.width=j+"px",t.style.height=me+"px"),this.setViewport(0,0,j,me)},this.getDrawingBufferSize=function(j){return j===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),j=new Ie),j.set(U*D,L*D).floor()},this.setDrawingBufferSize=function(j,me,q){U=j,L=me,D=q,t.width=Math.floor(j*q),t.height=Math.floor(me*q),this.setViewport(0,0,j,me)},this.getCurrentViewport=function(j){return j===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),j=new Vt),j.copy(k)},this.getViewport=function(j){return j.copy(K)},this.setViewport=function(j,me,q,re){j.isVector4?K.set(j.x,j.y,j.z,j.w):K.set(j,me,q,re),ie.viewport(k.copy(K).multiplyScalar(D).floor())},this.getScissor=function(j){return j.copy(Z)},this.setScissor=function(j,me,q,re){j.isVector4?Z.set(j.x,j.y,j.z,j.w):Z.set(j,me,q,re),ie.scissor(O.copy(Z).multiplyScalar(D).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(j){ie.setScissorTest(H=j)},this.setOpaqueSort=function(j){V=j},this.setTransparentSort=function(j){ee=j},this.getClearColor=function(){return z.getClearColor()},this.setClearColor=function(){z.setClearColor.apply(z,arguments)},this.getClearAlpha=function(){return z.getClearAlpha()},this.setClearAlpha=function(){z.setClearAlpha.apply(z,arguments)},this.clear=function(j,me,q){let re=0;(j===void 0||j)&&(re|=16384),(me===void 0||me)&&(re|=256),(q===void 0||q)&&(re|=1024),T.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ht,!1),t.removeEventListener("webglcontextrestored",At,!1),ce.dispose(),Y.dispose(),A.dispose(),x.dispose(),F.dispose(),ye.dispose(),Ae.dispose(),mn.stop()};function ht(j){j.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function At(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,Ne()}function yn(j){const me=j.target;me.removeEventListener("dispose",yn),cn(me)}function cn(j){Ii(j),A.remove(j)}function Ii(j){const me=A.get(j).program;me!==void 0&&R.releaseProgram(me)}function Xt(j,me){j.render(function(q){f.renderBufferImmediate(q,me)})}this.renderBufferImmediate=function(j,me){ye.initAttributes();const q=A.get(j);j.hasPositions&&!q.position&&(q.position=T.createBuffer()),j.hasNormals&&!q.normal&&(q.normal=T.createBuffer()),j.hasUvs&&!q.uv&&(q.uv=T.createBuffer()),j.hasColors&&!q.color&&(q.color=T.createBuffer());const re=me.getAttributes();j.hasPositions&&(T.bindBuffer(34962,q.position),T.bufferData(34962,j.positionArray,35048),ye.enableAttribute(re.position),T.vertexAttribPointer(re.position,3,5126,!1,0,0)),j.hasNormals&&(T.bindBuffer(34962,q.normal),T.bufferData(34962,j.normalArray,35048),ye.enableAttribute(re.normal),T.vertexAttribPointer(re.normal,3,5126,!1,0,0)),j.hasUvs&&(T.bindBuffer(34962,q.uv),T.bufferData(34962,j.uvArray,35048),ye.enableAttribute(re.uv),T.vertexAttribPointer(re.uv,2,5126,!1,0,0)),j.hasColors&&(T.bindBuffer(34962,q.color),T.bufferData(34962,j.colorArray,35048),ye.enableAttribute(re.color),T.vertexAttribPointer(re.color,3,5126,!1,0,0)),ye.disableUnusedAttributes(),T.drawArrays(4,0,j.count),j.count=0},this.renderBufferDirect=function(j,me,q,re,ue,ge){me===null&&(me=X);const ke=ue.isMesh&&ue.matrixWorld.determinant()<0,xe=Ar(j,me,re,ue);ie.setMaterial(re,ke);let be=q.index;const Le=q.attributes.position;if(be===null){if(Le===void 0||Le.count===0)return}else if(be.count===0)return;let he=1;re.wireframe===!0&&(be=N.getWireframeAttribute(q),he=2),(re.morphTargets||re.morphNormals)&&de.update(ue,q,re,xe),ye.setup(ue,re,xe,q,be);let _e,Me=pe;be!==null&&(_e=M.get(be),Me=fe,Me.setIndex(_e));const Fe=be!==null?be.count:Le.count,Se=q.drawRange.start*he,Pe=q.drawRange.count*he,Re=ge!==null?ge.start*he:0,We=ge!==null?ge.count*he:1/0,Ge=Math.max(Se,Re),Ce=Math.min(Fe,Se+Pe,Re+We)-1,it=Math.max(0,Ce-Ge+1);if(it!==0){if(ue.isMesh)re.wireframe===!0?(ie.setLineWidth(re.wireframeLinewidth*J()),Me.setMode(1)):Me.setMode(4);else if(ue.isLine){let lt=re.linewidth;lt===void 0&&(lt=1),ie.setLineWidth(lt*J()),ue.isLineSegments?Me.setMode(1):ue.isLineLoop?Me.setMode(2):Me.setMode(3)}else ue.isPoints?Me.setMode(0):ue.isSprite&&Me.setMode(4);if(ue.isInstancedMesh)Me.renderInstances(Ge,it,ue.count);else if(q.isInstancedBufferGeometry){const lt=Math.min(q.instanceCount,q._maxInstanceCount);Me.renderInstances(Ge,it,lt)}else Me.render(Ge,it)}},this.compile=function(j,me){d=Y.get(j,me),d.init(),j.traverseVisible(function(re){re.isLight&&re.layers.test(me.layers)&&(d.pushLight(re),re.castShadow&&d.pushShadow(re))}),d.setupLights(me);const q=new WeakMap;j.traverse(function(re){const ue=re.material;if(ue)if(Array.isArray(ue))for(let ge=0;ge<ue.length;ge++){const ke=ue[ge];q.has(ke)===!1&&(Rn(ke,j,re),q.set(ke))}else q.has(ue)===!1&&(Rn(ue,j,re),q.set(ue))})};let jt=null;function Hn(j){Ae.isPresenting||jt&&jt(j)}const mn=new eC;mn.setAnimationLoop(Hn),typeof window!="undefined"&&mn.setContext(window),this.setAnimationLoop=function(j){jt=j,Ae.setAnimationLoop(j),j===null?mn.stop():mn.start()},this.render=function(j,me){let q,re;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),q=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),re=arguments[3]),me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;ye.resetDefaultState(),b=-1,E=null,j.autoUpdate===!0&&j.updateMatrixWorld(),me.parent===null&&me.updateMatrixWorld(),Ae.enabled===!0&&Ae.isPresenting===!0&&(me=Ae.getCamera(me)),j.isScene===!0&&j.onBeforeRender(f,j,me,q||g),d=Y.get(j,me),d.init(),G.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),B.setFromProjectionMatrix(G),ae=this.localClippingEnabled,te=I.init(this.clippingPlanes,ae,me),u=ce.get(j,me),u.init(),Ri(j,me,0,f.sortObjects),u.finish(),f.sortObjects===!0&&u.sort(V,ee),te===!0&&I.beginShadows();const ue=d.state.shadowsArray;Oe.render(ue,j,me),d.setupLights(me),te===!0&&I.endShadows(),this.info.autoReset===!0&&this.info.reset(),q!==void 0&&this.setRenderTarget(q),z.render(u,j,me,re);const ge=u.opaque,ke=u.transparent;ge.length>0&&vi(ge,j,me),ke.length>0&&vi(ke,j,me),j.isScene===!0&&j.onAfterRender(f,j,me),g!==null&&(P.updateRenderTargetMipmap(g),P.updateMultisampleRenderTarget(g)),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1),u=null,d=null};function Ri(j,me,q,re){if(j.visible===!1)return;if(j.layers.test(me.layers)){if(j.isGroup)q=j.renderOrder;else if(j.isLOD)j.autoUpdate===!0&&j.update(me);else if(j.isLight)d.pushLight(j),j.castShadow&&d.pushShadow(j);else if(j.isSprite){if(!j.frustumCulled||B.intersectsSprite(j)){re&&le.setFromMatrixPosition(j.matrixWorld).applyMatrix4(G);const ke=F.update(j),xe=j.material;xe.visible&&u.push(j,ke,xe,q,le.z,null)}}else if(j.isImmediateRenderObject)re&&le.setFromMatrixPosition(j.matrixWorld).applyMatrix4(G),u.push(j,null,j.material,q,le.z,null);else if((j.isMesh||j.isLine||j.isPoints)&&(j.isSkinnedMesh&&j.skeleton.frame!==$.render.frame&&(j.skeleton.update(),j.skeleton.frame=$.render.frame),!j.frustumCulled||B.intersectsObject(j))){re&&le.setFromMatrixPosition(j.matrixWorld).applyMatrix4(G);const ke=F.update(j),xe=j.material;if(Array.isArray(xe)){const be=ke.groups;for(let Le=0,he=be.length;Le<he;Le++){const _e=be[Le],Me=xe[_e.materialIndex];Me&&Me.visible&&u.push(j,ke,Me,q,le.z,_e)}}else xe.visible&&u.push(j,ke,xe,q,le.z,null)}}const ge=j.children;for(let ke=0,xe=ge.length;ke<xe;ke++)Ri(ge[ke],me,q,re)}function vi(j,me,q){const re=me.isScene===!0?me.overrideMaterial:null;for(let ue=0,ge=j.length;ue<ge;ue++){const ke=j[ue],xe=ke.object,be=ke.geometry,Le=re===null?ke.material:re,he=ke.group;if(q.isArrayCamera){S=q;const _e=q.cameras;for(let Me=0,Fe=_e.length;Me<Fe;Me++){const Se=_e[Me];xe.layers.test(Se.layers)&&(ie.viewport(k.copy(Se.viewport)),d.setupLights(Se),_n(xe,me,Se,be,Le,he))}}else S=null,_n(xe,me,q,be,Le,he)}}function _n(j,me,q,re,ue,ge){if(j.onBeforeRender(f,me,q,re,ue,ge),d=Y.get(me,S||q),j.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,j.matrixWorld),j.normalMatrix.getNormalMatrix(j.modelViewMatrix),j.isImmediateRenderObject){const ke=Ar(q,me,ue,j);ie.setMaterial(ue),ye.reset(),Xt(j,ke)}else f.renderBufferDirect(q,me,re,ue,j,ge);j.onAfterRender(f,me,q,re,ue,ge),d=Y.get(me,S||q)}function Rn(j,me,q){me.isScene!==!0&&(me=X);const re=A.get(j),ue=d.state.lights,ge=d.state.shadowsArray,ke=ue.state.version,xe=R.getParameters(j,ue.state,ge,me,q),be=R.getProgramCacheKey(xe);let Le=re.program,he=!0;if(Le===void 0)j.addEventListener("dispose",yn);else if(Le.cacheKey!==be)Ii(j);else if(re.lightsStateVersion!==ke)he=!1;else if(xe.shaderID!==void 0){const Se=j.isMeshStandardMaterial?me.environment:null;re.envMap=x.get(j.envMap||Se);return}else he=!1;he&&(xe.uniforms=R.getUniforms(j),j.onBeforeCompile(xe,f),Le=R.acquireProgram(xe,be),re.program=Le,re.uniforms=xe.uniforms,re.outputEncoding=xe.outputEncoding);const _e=re.uniforms;(!j.isShaderMaterial&&!j.isRawShaderMaterial||j.clipping===!0)&&(re.numClippingPlanes=I.numPlanes,re.numIntersection=I.numIntersection,_e.clippingPlanes=I.uniform),re.environment=j.isMeshStandardMaterial?me.environment:null,re.fog=me.fog,re.envMap=x.get(j.envMap||re.environment),re.needsLights=Vs(j),re.lightsStateVersion=ke,re.needsLights&&(_e.ambientLightColor.value=ue.state.ambient,_e.lightProbe.value=ue.state.probe,_e.directionalLights.value=ue.state.directional,_e.directionalLightShadows.value=ue.state.directionalShadow,_e.spotLights.value=ue.state.spot,_e.spotLightShadows.value=ue.state.spotShadow,_e.rectAreaLights.value=ue.state.rectArea,_e.ltc_1.value=ue.state.rectAreaLTC1,_e.ltc_2.value=ue.state.rectAreaLTC2,_e.pointLights.value=ue.state.point,_e.pointLightShadows.value=ue.state.pointShadow,_e.hemisphereLights.value=ue.state.hemi,_e.directionalShadowMap.value=ue.state.directionalShadowMap,_e.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,_e.spotShadowMap.value=ue.state.spotShadowMap,_e.spotShadowMatrix.value=ue.state.spotShadowMatrix,_e.pointShadowMap.value=ue.state.pointShadowMap,_e.pointShadowMatrix.value=ue.state.pointShadowMatrix);const Me=re.program.getUniforms(),Fe=po.seqWithValue(Me.seq,_e);re.uniformsList=Fe}function Ar(j,me,q,re){me.isScene!==!0&&(me=X),P.resetTextureUnits();const ue=me.fog,ge=q.isMeshStandardMaterial?me.environment:null,ke=g===null?f.outputEncoding:g.texture.encoding,xe=x.get(q.envMap||ge),be=A.get(q),Le=d.state.lights;if(te===!0&&(ae===!0||j!==E)){const Re=j===E&&q.id===b;I.setState(q,j,Re)}q.version===be.__version?(q.fog&&be.fog!==ue||be.environment!==ge||be.needsLights&&be.lightsStateVersion!==Le.state.version||be.numClippingPlanes!==void 0&&(be.numClippingPlanes!==I.numPlanes||be.numIntersection!==I.numIntersection)||be.outputEncoding!==ke||be.envMap!==xe)&&Rn(q,me,re):(Rn(q,me,re),be.__version=q.version);let he=!1,_e=!1,Me=!1;const Fe=be.program,Se=Fe.getUniforms(),Pe=be.uniforms;if(ie.useProgram(Fe.program)&&(he=!0,_e=!0,Me=!0),q.id!==b&&(b=q.id,_e=!0),he||E!==j){if(Se.setValue(T,"projectionMatrix",j.projectionMatrix),oe.logarithmicDepthBuffer&&Se.setValue(T,"logDepthBufFC",2/(Math.log(j.far+1)/Math.LN2)),E!==j&&(E=j,_e=!0,Me=!0),q.isShaderMaterial||q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshStandardMaterial||q.envMap){const Re=Se.map.cameraPosition;Re!==void 0&&Re.setValue(T,le.setFromMatrixPosition(j.matrixWorld))}(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial)&&Se.setValue(T,"isOrthographic",j.isOrthographicCamera===!0),(q.isMeshPhongMaterial||q.isMeshToonMaterial||q.isMeshLambertMaterial||q.isMeshBasicMaterial||q.isMeshStandardMaterial||q.isShaderMaterial||q.isShadowMaterial||q.skinning)&&Se.setValue(T,"viewMatrix",j.matrixWorldInverse)}if(q.skinning){Se.setOptional(T,re,"bindMatrix"),Se.setOptional(T,re,"bindMatrixInverse");const Re=re.skeleton;if(Re){const We=Re.bones;if(oe.floatVertexTextures){if(Re.boneTexture===void 0){let Ge=Math.sqrt(We.length*4);Ge=gt.ceilPowerOfTwo(Ge),Ge=Math.max(Ge,4);const Ce=new Float32Array(Ge*Ge*4);Ce.set(Re.boneMatrices);const it=new nc(Ce,Ge,Ge,br,oo);Re.boneMatrices=Ce,Re.boneTexture=it,Re.boneTextureSize=Ge}Se.setValue(T,"boneTexture",Re.boneTexture,P),Se.setValue(T,"boneTextureSize",Re.boneTextureSize)}else Se.setOptional(T,Re,"boneMatrices")}}return(_e||be.receiveShadow!==re.receiveShadow)&&(be.receiveShadow=re.receiveShadow,Se.setValue(T,"receiveShadow",re.receiveShadow)),_e&&(Se.setValue(T,"toneMappingExposure",f.toneMappingExposure),be.needsLights&&Jr(Pe,Me),ue&&q.fog&&C.refreshFogUniforms(Pe,ue),C.refreshMaterialUniforms(Pe,q,D,L),po.upload(T,be.uniformsList,Pe,P)),q.isShaderMaterial&&q.uniformsNeedUpdate===!0&&(po.upload(T,be.uniformsList,Pe,P),q.uniformsNeedUpdate=!1),q.isSpriteMaterial&&Se.setValue(T,"center",re.center),Se.setValue(T,"modelViewMatrix",re.modelViewMatrix),Se.setValue(T,"normalMatrix",re.normalMatrix),Se.setValue(T,"modelMatrix",re.matrixWorld),Fe}function Jr(j,me){j.ambientLightColor.needsUpdate=me,j.lightProbe.needsUpdate=me,j.directionalLights.needsUpdate=me,j.directionalLightShadows.needsUpdate=me,j.pointLights.needsUpdate=me,j.pointLightShadows.needsUpdate=me,j.spotLights.needsUpdate=me,j.spotLightShadows.needsUpdate=me,j.rectAreaLights.needsUpdate=me,j.hemisphereLights.needsUpdate=me}function Vs(j){return j.isMeshLambertMaterial||j.isMeshToonMaterial||j.isMeshPhongMaterial||j.isMeshStandardMaterial||j.isShadowMaterial||j.isShaderMaterial&&j.lights===!0}this.setFramebuffer=function(j){y!==j&&g===null&&T.bindFramebuffer(36160,j),y=j},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return m},this.getRenderList=function(){return u},this.setRenderList=function(j){u=j},this.getRenderState=function(){return d},this.setRenderState=function(j){d=j},this.getRenderTarget=function(){return g},this.setRenderTarget=function(j,me=0,q=0){g=j,v=me,m=q,j&&A.get(j).__webglFramebuffer===void 0&&P.setupRenderTarget(j);let re=y,ue=!1;if(j){const ge=A.get(j).__webglFramebuffer;j.isWebGLCubeRenderTarget?(re=ge[me],ue=!0):j.isWebGLMultisampleRenderTarget?re=A.get(j).__webglMultisampledFramebuffer:re=ge,k.copy(j.viewport),O.copy(j.scissor),W=j.scissorTest}else k.copy(K).multiplyScalar(D).floor(),O.copy(Z).multiplyScalar(D).floor(),W=H;if(w!==re&&(T.bindFramebuffer(36160,re),w=re),ie.viewport(k),ie.scissor(O),ie.setScissorTest(W),ue){const ge=A.get(j.texture);T.framebufferTexture2D(36160,36064,34069+me,ge.__webglTexture,q)}},this.readRenderTargetPixels=function(j,me,q,re,ue,ge,ke){if(!(j&&j.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xe=A.get(j).__webglFramebuffer;if(j.isWebGLCubeRenderTarget&&ke!==void 0&&(xe=xe[ke]),xe){let be=!1;xe!==w&&(T.bindFramebuffer(36160,xe),be=!0);try{const Le=j.texture,he=Le.format,_e=Le.type;if(he!==br&&ve.convert(he)!==T.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(_e!==A_&&ve.convert(_e)!==T.getParameter(35738)&&!(_e===oo&&(oe.isWebGL2||Q.get("OES_texture_float")||Q.get("WEBGL_color_buffer_float")))&&!(_e===Yf&&(oe.isWebGL2?Q.get("EXT_color_buffer_float"):Q.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}T.checkFramebufferStatus(36160)===36053?me>=0&&me<=j.width-re&&q>=0&&q<=j.height-ue&&T.readPixels(me,q,re,ue,ve.convert(he),ve.convert(_e),ge):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{be&&T.bindFramebuffer(36160,w)}}},this.copyFramebufferToTexture=function(j,me,q){q===void 0&&(q=0);const re=Math.pow(2,-q),ue=Math.floor(me.image.width*re),ge=Math.floor(me.image.height*re),ke=ve.convert(me.format);P.setTexture2D(me,0),T.copyTexImage2D(3553,q,ke,j.x,j.y,ue,ge,0),ie.unbindTexture()},this.copyTextureToTexture=function(j,me,q,re){re===void 0&&(re=0);const ue=me.image.width,ge=me.image.height,ke=ve.convert(q.format),xe=ve.convert(q.type);P.setTexture2D(q,0),T.pixelStorei(37440,q.flipY),T.pixelStorei(37441,q.premultiplyAlpha),T.pixelStorei(3317,q.unpackAlignment),me.isDataTexture?T.texSubImage2D(3553,re,j.x,j.y,ue,ge,ke,xe,me.image.data):me.isCompressedTexture?T.compressedTexSubImage2D(3553,re,j.x,j.y,me.mipmaps[0].width,me.mipmaps[0].height,ke,me.mipmaps[0].data):T.texSubImage2D(3553,re,j.x,j.y,ke,xe,me.image),re===0&&q.generateMipmaps&&T.generateMipmap(3553),ie.unbindTexture()},this.initTexture=function(j){P.setTexture2D(j,0),ie.unbindTexture()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function JE(e){zh.call(this,e)}JE.prototype=Object.assign(Object.create(zh.prototype),{constructor:JE,isWebGL1Renderer:!0});class hC extends Ye{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.background!==null&&(n.object.background=this.background.toJSON(t)),this.environment!==null&&(n.object.environment=this.environment.toJSON(t)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}function nr(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=vm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gt.generateUUID()}Object.defineProperty(nr.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(nr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gt.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new nr(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gt.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const jo=new se;function wa(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}Object.defineProperties(wa.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}});Object.assign(wa.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)jo.x=this.getX(t),jo.y=this.getY(t),jo.z=this.getZ(t),jo.applyMatrix4(e),this.setXYZ(t,jo.x,jo.y,jo.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new mt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function xa(e){rt.call(this),this.type="SpriteMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}xa.prototype=Object.create(rt.prototype);xa.prototype.constructor=xa;xa.prototype.isSpriteMaterial=!0;xa.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};let dl;const Xc=new se,fl=new se,pl=new se,ml=new Ie,Yc=new Ie,dC=new vt,Fd=new se,Zc=new se,Bd=new se,QE=new Ie,rv=new Ie,eS=new Ie;function tS(e){if(Ye.call(this),this.type="Sprite",dl===void 0){dl=new Ut;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new nr(t,5);dl.setIndex([0,1,2,0,2,3]),dl.setAttribute("position",new wa(n,3,0,!1)),dl.setAttribute("uv",new wa(n,2,3,!1))}this.geometry=dl,this.material=e!==void 0?e:new xa,this.center=new Ie(.5,.5)}tS.prototype=Object.assign(Object.create(Ye.prototype),{constructor:tS,isSprite:!0,raycast:function(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),fl.setFromMatrixScale(this.matrixWorld),dC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),pl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&fl.multiplyScalar(-pl.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;Vd(Fd.set(-.5,-.5,0),pl,s,fl,i,r),Vd(Zc.set(.5,-.5,0),pl,s,fl,i,r),Vd(Bd.set(.5,.5,0),pl,s,fl,i,r),QE.set(0,0),rv.set(1,0),eS.set(1,1);let o=e.ray.intersectTriangle(Fd,Zc,Bd,!1,Xc);if(o===null&&(Vd(Zc.set(-.5,.5,0),pl,s,fl,i,r),rv.set(0,1),o=e.ray.intersectTriangle(Fd,Bd,Zc,!1,Xc),o===null))return;const a=e.ray.origin.distanceTo(Xc);a<e.near||a>e.far||t.push({distance:a,point:Xc.clone(),uv:Kn.getUV(Xc,Fd,Zc,Bd,QE,rv,eS,new Ie),face:null,object:this})},copy:function(e){return Ye.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}});function Vd(e,t,n,i,r,s){ml.subVectors(e,n).addScalar(.5).multiply(i),r!==void 0?(Yc.x=s*ml.x-r*ml.y,Yc.y=r*ml.x+s*ml.y):Yc.copy(ml),e.copy(t),e.x+=Yc.x,e.y+=Yc.y,e.applyMatrix4(dC)}const Ud=new se,nS=new se;function Iy(){Ye.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Iy.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Iy,isLOD:!0,copy:function(e){Ye.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Ud.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Ud);this.getObjectForDistance(i).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){Ud.setFromMatrixPosition(e.matrixWorld),nS.setFromMatrixPosition(this.matrixWorld);const n=Ud.distanceTo(nS)/e.zoom;t[0].object.visible=!0;let i,r;for(i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=Ye.prototype.toJSON.call(this,e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const s=n[i];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}});function Ry(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new vt,this.bindMatrixInverse=new vt}Ry.prototype=Object.assign(Object.create(Mn.prototype),{constructor:Ry,isSkinnedMesh:!0,copy:function(e){return Mn.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Vt,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Mn.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new se,t=new Vt,n=new Vt,i=new se,r=new vt;return function(s,o){const a=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,s),n.fromBufferAttribute(l.attributes.skinWeight,s),e.fromBufferAttribute(l.attributes.position,s).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let c=0;c<4;c++){const h=n.getComponent(c);if(h!==0){const u=t.getComponent(c);r.multiplyMatrices(a.bones[u].matrixWorld,a.boneInverses[u]),o.addScaledVector(i.copy(e).applyMatrix4(r),h)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});const iS=new vt,t5=new vt;function Ly(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new vt)}}Object.assign(Ly.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const n=new vt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.getInverse(n.parent.matrixWorld),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const o=e[r]?e[r].matrixWorld:t5;iS.multiplyMatrices(o,t[r]),iS.toArray(n,r*16)}i!==void 0&&(i.needsUpdate=!0)},clone:function(){return new Ly(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function rS(){Ye.call(this),this.type="Bone"}rS.prototype=Object.assign(Object.create(Ye.prototype),{constructor:rS,isBone:!0});const sS=new vt,oS=new vt,zd=[],Jc=new Mn;function aS(e,t,n){Mn.call(this,e,t),this.instanceMatrix=new mt(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}aS.prototype=Object.assign(Object.create(Mn.prototype),{constructor:aS,isInstancedMesh:!0,copy:function(e){return Mn.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},setColorAt:function(e,t){this.instanceColor===null&&(this.instanceColor=new mt(new Float32Array(this.count*3),3)),t.toArray(this.instanceColor.array,e*3)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,e*16)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(Jc.geometry=this.geometry,Jc.material=this.material,Jc.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,sS),oS.multiplyMatrices(n,sS),Jc.matrixWorld=oS,Jc.raycast(e,zd);for(let s=0,o=zd.length;s<o;s++){const a=zd[s];a.instanceId=r,a.object=this,t.push(a)}zd.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,e*16)},updateMorphTargets:function(){}});function ar(e){rt.call(this),this.type="LineBasicMaterial",this.color=new Ke(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}ar.prototype=Object.create(rt.prototype);ar.prototype.constructor=ar;ar.prototype.isLineBasicMaterial=!0;ar.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const lS=new se,cS=new se,uS=new vt,Hd=new Vh,Wd=new Bs;function ic(e,t,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Ye.call(this),this.type="Line",this.geometry=e!==void 0?e:new Ut,this.material=t!==void 0?t:new ar,this.updateMorphTargets()}ic.prototype=Object.assign(Object.create(Ye.prototype),{constructor:ic,isLine:!0,copy:function(e){return Ye.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)lS.fromBufferAttribute(t,i-1),cS.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=lS.distanceTo(cS);e.setAttribute("lineDistance",new Lt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let i=1,r=t.length;i<r;i++)n[i]=n[i-1],n[i]+=t[i-1].distanceTo(t[i])}return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Wd.copy(n.boundingSphere),Wd.applyMatrix4(i),Wd.radius+=r,e.ray.intersectsSphere(Wd)===!1)return;uS.getInverse(i),Hd.copy(e.ray).applyMatrix4(uS);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new se,l=new se,c=new se,h=new se,u=this.isLineSegments?2:1;if(n.isBufferGeometry){const d=n.index,p=n.attributes.position;if(d!==null){const y=d.array;for(let v=0,m=y.length-1;v<m;v+=u){const g=y[v],w=y[v+1];if(a.fromBufferAttribute(p,g),l.fromBufferAttribute(p,w),Hd.distanceSqToSegment(a,l,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const E=e.ray.origin.distanceTo(h);E<e.near||E>e.far||t.push({distance:E,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(let y=0,v=p.count-1;y<v;y+=u){if(a.fromBufferAttribute(p,y),l.fromBufferAttribute(p,y+1),Hd.distanceSqToSegment(a,l,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const g=e.ray.origin.distanceTo(h);g<e.near||g>e.far||t.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const d=n.vertices,f=d.length;for(let p=0;p<f-1;p+=u){if(Hd.distanceSqToSegment(d[p],d[p+1],h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const v=e.ray.origin.distanceTo(h);v<e.near||v>e.far||t.push({distance:v,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Gd=new se,$d=new se;function ep(e,t){ic.call(this,e,t),this.type="LineSegments"}ep.prototype=Object.assign(Object.create(ic.prototype),{constructor:ep,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)Gd.fromBufferAttribute(t,i),$d.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Gd.distanceTo($d);e.setAttribute("lineDistance",new Lt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let i=0,r=t.length;i<r;i+=2)Gd.copy(t[i]),$d.copy(t[i+1]),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Gd.distanceTo($d)}return this}});function hS(e,t){ic.call(this,e,t),this.type="LineLoop"}hS.prototype=Object.assign(Object.create(ic.prototype),{constructor:hS,isLineLoop:!0});function Ea(e){rt.call(this),this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}Ea.prototype=Object.create(rt.prototype);Ea.prototype.constructor=Ea;Ea.prototype.isPointsMaterial=!0;Ea.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const dS=new vt,Py=new Vh,jd=new Bs,qd=new se;function fS(e,t){Ye.call(this),this.type="Points",this.geometry=e!==void 0?e:new Ut,this.material=t!==void 0?t:new Ea,this.updateMorphTargets()}fS.prototype=Object.assign(Object.create(Ye.prototype),{constructor:fS,isPoints:!0,copy:function(e){return Ye.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),jd.copy(n.boundingSphere),jd.applyMatrix4(i),jd.radius+=r,e.ray.intersectsSphere(jd)===!1)return;dS.getInverse(i),Py.copy(e.ray).applyMatrix4(dS);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){const a=n.index,c=n.attributes.position;if(a!==null){const h=a.array;for(let u=0,d=h.length;u<d;u++){const f=h[u];qd.fromBufferAttribute(c,f),sv(qd,f,o,i,e,t,this)}}else for(let h=0,u=c.count;h<u;h++)qd.fromBufferAttribute(c,h),sv(qd,h,o,i,e,t,this)}else{const a=n.vertices;for(let l=0,c=a.length;l<c;l++)sv(a[l],l,o,i,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function sv(e,t,n,i,r,s,o){const a=Py.distanceSqToPoint(e);if(a<n){const l=new se;Py.closestPointToPoint(e,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}function pS(e,t,n,i,r,s,o,a,l){Ot.call(this,e,t,n,i,r,s,o,a,l),this.format=o!==void 0?o:ha,this.minFilter=s!==void 0?s:Zn,this.magFilter=r!==void 0?r:Zn,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}pS.prototype=Object.assign(Object.create(Ot.prototype),{constructor:pS,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function th(e,t,n,i,r,s,o,a,l,c,h,u){Ot.call(this,null,s,o,a,l,c,i,r,h,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}th.prototype=Object.create(Ot.prototype);th.prototype.constructor=th;th.prototype.isCompressedTexture=!0;function tp(e,t,n,i,r,s,o,a,l){Ot.call(this,e,t,n,i,r,s,o,a,l),this.needsUpdate=!0}tp.prototype=Object.create(Ot.prototype);tp.prototype.constructor=tp;tp.prototype.isCanvasTexture=!0;function np(e,t,n,i,r,s,o,a,l,c){if(c=c!==void 0?c:Hl,c!==Hl&&c!==Xu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Hl&&(n=Xf),n===void 0&&c===Xu&&(n=Eu),Ot.call(this,null,i,r,s,o,a,c,n,l),this.image={width:e,height:t},this.magFilter=o!==void 0?o:di,this.minFilter=a!==void 0?a:di,this.flipY=!1,this.generateMipmaps=!1}np.prototype=Object.create(Ot.prototype);np.prototype.constructor=np;np.prototype.isDepthTexture=!0;let n5=0;const Lr=new vt,ov=new Ye,Kd=new se;function Fi(){Object.defineProperty(this,"id",{value:n5+=2}),this.uuid=gt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Fi.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Fi,isGeometry:!0,applyMatrix4:function(e){const t=new Ti().getNormalMatrix(e);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(e);for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(let s=0,o=r.vertexNormals.length;s<o;s++)r.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Lr.makeRotationX(e),this.applyMatrix4(Lr),this},rotateY:function(e){return Lr.makeRotationY(e),this.applyMatrix4(Lr),this},rotateZ:function(e){return Lr.makeRotationZ(e),this.applyMatrix4(Lr),this},translate:function(e,t,n){return Lr.makeTranslation(e,t,n),this.applyMatrix4(Lr),this},scale:function(e,t,n){return Lr.makeScale(e,t,n),this.applyMatrix4(Lr),this},lookAt:function(e){return ov.lookAt(e),ov.updateMatrix(),this.applyMatrix4(ov.matrix),this},fromBufferGeometry:function(e){const t=this,n=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,s=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<r.count;u++)t.vertices.push(new se().fromBufferAttribute(r,u)),o!==void 0&&t.colors.push(new Ke().fromBufferAttribute(o,u));function c(u,d,f,p){const y=o===void 0?[]:[t.colors[u].clone(),t.colors[d].clone(),t.colors[f].clone()],v=s===void 0?[]:[new se().fromBufferAttribute(s,u),new se().fromBufferAttribute(s,d),new se().fromBufferAttribute(s,f)],m=new Qf(u,d,f,v,y,p);t.faces.push(m),a!==void 0&&t.faceVertexUvs[0].push([new Ie().fromBufferAttribute(a,u),new Ie().fromBufferAttribute(a,d),new Ie().fromBufferAttribute(a,f)]),l!==void 0&&t.faceVertexUvs[1].push([new Ie().fromBufferAttribute(l,u),new Ie().fromBufferAttribute(l,d),new Ie().fromBufferAttribute(l,f)])}const h=e.groups;if(h.length>0)for(let u=0;u<h.length;u++){const d=h[u],f=d.start,p=d.count;for(let y=f,v=f+p;y<v;y+=3)n!==void 0?c(n.getX(y),n.getX(y+1),n.getX(y+2),d.materialIndex):c(y,y+1,y+2,d.materialIndex)}else if(n!==void 0)for(let u=0;u<n.count;u+=3)c(n.getX(u),n.getX(u+1),n.getX(u+2));else for(let u=0;u<r.count;u+=3)c(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kd).negate(),this.translate(Kd.x,Kd.y,Kd.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,i=new vt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const e=new se,t=new se;for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n],s=this.vertices[r.a],o=this.vertices[r.b],a=this.vertices[r.c];e.subVectors(a,o),t.subVectors(s,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);const t=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)t[n]=new se;if(e){const n=new se,i=new se;for(let r=0,s=this.faces.length;r<s;r++){const o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),t[o.a].add(n),t[o.b].add(n),t[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n];t[r.a].add(r.normal),t[r.b].add(r.normal),t[r.c].add(r.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)t[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){const r=this.faces[n],s=r.vertexNormals;s.length===3?(s[0].copy(t[r.a]),s[1].copy(t[r.b]),s[2].copy(t[r.c])):(s[0]=t[r.a].clone(),s[1]=t[r.b].clone(),s[2]=t[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const n=this.faces[e],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,n=this.faces.length;t<n;t++){const i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let r=0,s=i.vertexNormals.length;r<s;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}const e=new Fi;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const r=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){const l=new se,c={a:new se,b:new se,c:new se};r.push(l),s.push(c)}}const i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let r=0,s=this.faces.length;r<s;r++){const o=this.faces[r],a=i.faceNormals[r],l=i.vertexNormals[r];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){const i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Ro),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Bs),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i;const r=this.vertices.length,s=this.vertices,o=e.vertices,a=this.faces,l=e.faces,c=this.colors,h=e.colors;n===void 0&&(n=0),t!==void 0&&(i=new Ti().getNormalMatrix(t));for(let u=0,d=o.length;u<d;u++){const p=o[u].clone();t!==void 0&&p.applyMatrix4(t),s.push(p)}for(let u=0,d=h.length;u<d;u++)c.push(h[u].clone());for(let u=0,d=l.length;u<d;u++){const f=l[u];let p,y;const v=f.vertexNormals,m=f.vertexColors,g=new Qf(f.a+r,f.b+r,f.c+r);g.normal.copy(f.normal),i!==void 0&&g.normal.applyMatrix3(i).normalize();for(let w=0,b=v.length;w<b;w++)p=v[w].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),g.vertexNormals.push(p);g.color.copy(f.color);for(let w=0,b=m.length;w<b;w++)y=m[w],g.vertexColors.push(y.clone());g.materialIndex=f.materialIndex+n,a.push(g)}for(let u=0,d=e.faceVertexUvs.length;u<d;u++){const f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,y=f.length;p<y;p++){const v=f[p],m=[];for(let g=0,w=v.length;g<w;g++)m.push(v[g].clone());this.faceVertexUvs[u].push(m)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){const e={},t=[],n=[],r=Math.pow(10,4);for(let a=0,l=this.vertices.length;a<l;a++){const c=this.vertices[a],h=Math.round(c.x*r)+"_"+Math.round(c.y*r)+"_"+Math.round(c.z*r);e[h]===void 0?(e[h]=a,t.push(this.vertices[a]),n[a]=t.length-1):n[a]=n[e[h]]}const s=[];for(let a=0,l=this.faces.length;a<l;a++){const c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];const h=[c.a,c.b,c.c];for(let u=0;u<3;u++)if(h[u]===h[(u+1)%3]){s.push(a);break}}for(let a=s.length-1;a>=0;a--){const l=s[a];this.faces.splice(l,1);for(let c=0,h=this.faceVertexUvs.length;c<h;c++)this.faceVertexUvs[c].splice(l,1)}const o=this.vertices.length-t.length;return this.vertices=t,o},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const i=e[t];this.vertices.push(new se(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}e.sort(n);const i=this.faceVertexUvs[0],r=this.faceVertexUvs[1];let s,o;i&&i.length===t&&(s=[]),r&&r.length===t&&(o=[]);for(let a=0;a<t;a++){const l=e[a]._id;s&&s.push(i[l]),o&&o.push(r[l])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){const f=this.parameters;for(const p in f)f[p]!==void 0&&(e[p]=f[p]);return e}const t=[];for(let f=0;f<this.vertices.length;f++){const p=this.vertices[f];t.push(p.x,p.y,p.z)}const n=[],i=[],r={},s=[],o={},a=[],l={};for(let f=0;f<this.faces.length;f++){const p=this.faces[f],y=!0,v=!1,m=this.faceVertexUvs[0][f]!==void 0,g=p.normal.length()>0,w=p.vertexNormals.length>0,b=p.color.r!==1||p.color.g!==1||p.color.b!==1,E=p.vertexColors.length>0;let S=0;if(S=c(S,0,0),S=c(S,1,y),S=c(S,2,v),S=c(S,3,m),S=c(S,4,g),S=c(S,5,w),S=c(S,6,b),S=c(S,7,E),n.push(S),n.push(p.a,p.b,p.c),n.push(p.materialIndex),m){const k=this.faceVertexUvs[0][f];n.push(d(k[0]),d(k[1]),d(k[2]))}if(g&&n.push(h(p.normal)),w){const k=p.vertexNormals;n.push(h(k[0]),h(k[1]),h(k[2]))}if(b&&n.push(u(p.color)),E){const k=p.vertexColors;n.push(u(k[0]),u(k[1]),u(k[2]))}}function c(f,p,y){return y?f|1<<p:f&~(1<<p)}function h(f){const p=f.x.toString()+f.y.toString()+f.z.toString();return r[p]!==void 0||(r[p]=i.length/3,i.push(f.x,f.y,f.z)),r[p]}function u(f){const p=f.r.toString()+f.g.toString()+f.b.toString();return o[p]!==void 0||(o[p]=s.length,s.push(f.getHex())),o[p]}function d(f){const p=f.x.toString()+f.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(f.x,f.y)),l[p]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e},clone:function(){return new Fi().copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let u=0,d=t.length;u<d;u++)this.vertices.push(t[u].clone());const n=e.colors;for(let u=0,d=n.length;u<d;u++)this.colors.push(n[u].clone());const i=e.faces;for(let u=0,d=i.length;u<d;u++)this.faces.push(i[u].clone());for(let u=0,d=e.faceVertexUvs.length;u<d;u++){const f=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let p=0,y=f.length;p<y;p++){const v=f[p],m=[];for(let g=0,w=v.length;g<w;g++){const b=v[g];m.push(b.clone())}this.faceVertexUvs[u].push(m)}}const r=e.morphTargets;for(let u=0,d=r.length;u<d;u++){const f={};if(f.name=r[u].name,r[u].vertices!==void 0){f.vertices=[];for(let p=0,y=r[u].vertices.length;p<y;p++)f.vertices.push(r[u].vertices[p].clone())}if(r[u].normals!==void 0){f.normals=[];for(let p=0,y=r[u].normals.length;p<y;p++)f.normals.push(r[u].normals[p].clone())}this.morphTargets.push(f)}const s=e.morphNormals;for(let u=0,d=s.length;u<d;u++){const f={};if(s[u].vertexNormals!==void 0){f.vertexNormals=[];for(let p=0,y=s[u].vertexNormals.length;p<y;p++){const v=s[u].vertexNormals[p],m={};m.a=v.a.clone(),m.b=v.b.clone(),m.c=v.c.clone(),f.vertexNormals.push(m)}}if(s[u].faceNormals!==void 0){f.faceNormals=[];for(let p=0,y=s[u].faceNormals.length;p<y;p++)f.faceNormals.push(s[u].faceNormals[p].clone())}this.morphNormals.push(f)}const o=e.skinWeights;for(let u=0,d=o.length;u<d;u++)this.skinWeights.push(o[u].clone());const a=e.skinIndices;for(let u=0,d=a.length;u<d;u++)this.skinIndices.push(a[u].clone());const l=e.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});new se;new se;new se;new Kn;const i5={triangulate:function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let s=fC(e,0,r,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,h,u,d,f;if(i&&(s=l5(e,t,s,n)),e.length>80*n){a=c=e[0],l=h=e[1];for(let p=n;p<r;p+=n)u=e[p],d=e[p+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?1/f:0}return nh(s,o,n,a,l,f),o}};function fC(e,t,n,i,r){let s,o;if(r===_5(e,t,n,i)>0)for(s=t;s<n;s+=i)o=mS(s,e[s],e[s+1],o);else for(s=n-i;s>=t;s-=i)o=mS(s,e[s],e[s+1],o);return o&&_m(o,o.next)&&(rh(o),o=o.next),o}function xo(e,t){if(!e)return e;t||(t=e);let n=e,i;do if(i=!1,!n.steiner&&(_m(n,n.next)||nn(n.prev,n,n.next)===0)){if(rh(n),n=t=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==t);return t}function nh(e,t,n,i,r,s,o){if(!e)return;!o&&s&&f5(e,i,r,s);let a=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,s?s5(e,i,r,s):r5(e)){t.push(l.i/n),t.push(e.i/n),t.push(c.i/n),rh(e),e=c.next,a=c.next;continue}if(e=c,e===a){o?o===1?(e=o5(xo(e),t,n),nh(e,t,n,i,r,s,2)):o===2&&a5(e,t,n,i,r,s):nh(xo(e),t,n,i,r,s,1);break}}}function r5(e){const t=e.prev,n=e,i=e.next;if(nn(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(kl(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&nn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function s5(e,t,n,i){const r=e.prev,s=e,o=e.next;if(nn(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,h=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,u=Ny(a,l,t,n,i),d=Ny(c,h,t,n,i);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=u&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&kl(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&nn(f.prev,f,f.next)>=0||(f=f.prevZ,p!==e.prev&&p!==e.next&&kl(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&nn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==e.prev&&f!==e.next&&kl(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&nn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&kl(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&nn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function o5(e,t,n){let i=e;do{const r=i.prev,s=i.next.next;!_m(r,s)&&pC(r,i,i.next,s)&&ih(r,s)&&ih(s,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(s.i/n),rh(i),rh(i.next),i=e=s),i=i.next}while(i!==e);return xo(i)}function a5(e,t,n,i,r,s){let o=e;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&g5(o,a)){let l=mC(o,a);o=xo(o,o.next),l=xo(l,l.next),nh(o,t,n,i,r,s),nh(l,t,n,i,r,s);return}a=a.next}o=o.next}while(o!==e)}function l5(e,t,n,i){const r=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*i,l=s<o-1?t[s+1]*i:e.length,c=fC(e,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(m5(c));for(r.sort(c5),s=0;s<r.length;s++)u5(r[s],n),n=xo(n,n.next);return n}function c5(e,t){return e.x-t.x}function u5(e,t){if(t=h5(e,t),t){const n=mC(t,e);xo(t,t.next),xo(n,n.next)}}function h5(e,t){let n=t;const i=e.x,r=e.y;let s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const d=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=i&&d>s){if(s=d,d===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let h=1/0,u;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&kl(r<c?i:s,r,l,c,r<c?s:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),ih(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&d5(o,n)))&&(o=n,h=u)),n=n.next;while(n!==a);return o}function d5(e,t){return nn(e.prev,e,t.prev)<0&&nn(t.next,e,e.next)<0}function f5(e,t,n,i){let r=e;do r.z===null&&(r.z=Ny(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,p5(r)}function p5(e){let t,n,i,r,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ,!!i);t++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return e}function Ny(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function m5(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function kl(e,t,n,i,r,s,o,a){return(r-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(i-a)-(n-o)*(t-a)>=0&&(n-o)*(s-a)-(r-o)*(i-a)>=0}function g5(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!v5(e,t)&&(ih(e,t)&&ih(t,e)&&y5(e,t)&&(nn(e.prev,e,t.prev)||nn(e,t.prev,t))||_m(e,t)&&nn(e.prev,e,e.next)>0&&nn(t.prev,t,t.next)>0)}function nn(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _m(e,t){return e.x===t.x&&e.y===t.y}function pC(e,t,n,i){const r=Yd(nn(e,t,n)),s=Yd(nn(e,t,i)),o=Yd(nn(n,i,e)),a=Yd(nn(n,i,t));return!!(r!==s&&o!==a||r===0&&Xd(e,n,t)||s===0&&Xd(e,i,t)||o===0&&Xd(n,e,i)||a===0&&Xd(n,t,i))}function Xd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Yd(e){return e>0?1:e<0?-1:0}function v5(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&pC(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function ih(e,t){return nn(e.prev,e,e.next)<0?nn(e,t,e.next)>=0&&nn(e,e.prev,t)>=0:nn(e,t,e.prev)<0||nn(e,e.next,t)<0}function y5(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function mC(e,t){const n=new ky(e.i,e.x,e.y),i=new ky(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function mS(e,t,n,i){const r=new ky(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function rh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ky(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _5(e,t,n,i){let r=0;for(let s=t,o=n-i;s<n;s+=i)r+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return r}const mo={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return n*.5},isClockWise:function(e){return mo.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];gS(e),vS(n,e);let s=e.length;t.forEach(gS);for(let a=0;a<t.length;a++)i.push(s),s+=t[a].length,vS(n,t[a]);const o=i5.triangulate(n,i);for(let a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};function gS(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function vS(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class gC extends Ut{constructor(t,n){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const i=this,r=[],s=[];for(let a=0,l=t.length;a<l;a++){const c=t[a];o(c)}this.setAttribute("position",new Lt(r,3)),this.setAttribute("uv",new Lt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,h=n.steps!==void 0?n.steps:1;let u=n.depth!==void 0?n.depth:100,d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,f=n.bevelThickness!==void 0?n.bevelThickness:6,p=n.bevelSize!==void 0?n.bevelSize:f-2,y=n.bevelOffset!==void 0?n.bevelOffset:0,v=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,g=n.UVGenerator!==void 0?n.UVGenerator:b5;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=n.amount);let w,b=!1,E,S,k,O;m&&(w=m.getSpacedPoints(h),b=!0,d=!1,E=m.computeFrenetFrames(h,!1),S=new se,k=new se,O=new se),d||(v=0,f=0,p=0,y=0);const W=a.extractPoints(c);let U=W.shape;const L=W.holes;if(!mo.isClockWise(U)){U=U.reverse();for(let P=0,x=L.length;P<x;P++){const M=L[P];mo.isClockWise(M)&&(L[P]=M.reverse())}}const V=mo.triangulateShape(U,L),ee=U;for(let P=0,x=L.length;P<x;P++){const M=L[P];U=U.concat(M)}function K(P,x,M){return x||console.error("THREE.ExtrudeGeometry: vec does not exist"),x.clone().multiplyScalar(M).add(P)}const Z=U.length,H=V.length;function B(P,x,M){let N,F,R;const C=P.x-x.x,ce=P.y-x.y,Y=M.x-P.x,I=M.y-P.y,z=C*C+ce*ce,de=C*I-ce*Y;if(Math.abs(de)>Number.EPSILON){const pe=Math.sqrt(z),fe=Math.sqrt(Y*Y+I*I),ve=x.x-ce/pe,ye=x.y+C/pe,Ne=M.x-I/fe,Ae=M.y+Y/fe,Oe=((Ne-ve)*I-(Ae-ye)*Y)/(C*I-ce*Y);N=ve+C*Oe-P.x,F=ye+ce*Oe-P.y;const ht=N*N+F*F;if(ht<=2)return new Ie(N,F);R=Math.sqrt(ht/2)}else{let pe=!1;C>Number.EPSILON?Y>Number.EPSILON&&(pe=!0):C<-Number.EPSILON?Y<-Number.EPSILON&&(pe=!0):Math.sign(ce)===Math.sign(I)&&(pe=!0),pe?(N=-ce,F=C,R=Math.sqrt(z)):(N=C,F=ce,R=Math.sqrt(z/2))}return new Ie(N/R,F/R)}const te=[];for(let P=0,x=ee.length,M=x-1,N=P+1;P<x;P++,M++,N++)M===x&&(M=0),N===x&&(N=0),te[P]=B(ee[P],ee[M],ee[N]);const ae=[];let G,le=te.concat();for(let P=0,x=L.length;P<x;P++){const M=L[P];G=[];for(let N=0,F=M.length,R=F-1,C=N+1;N<F;N++,R++,C++)R===F&&(R=0),C===F&&(C=0),G[N]=B(M[N],M[R],M[C]);ae.push(G),le=le.concat(G)}for(let P=0;P<v;P++){const x=P/v,M=f*Math.cos(x*Math.PI/2),N=p*Math.sin(x*Math.PI/2)+y;for(let F=0,R=ee.length;F<R;F++){const C=K(ee[F],te[F],N);Q(C.x,C.y,-M)}for(let F=0,R=L.length;F<R;F++){const C=L[F];G=ae[F];for(let ce=0,Y=C.length;ce<Y;ce++){const I=K(C[ce],G[ce],N);Q(I.x,I.y,-M)}}}const X=p+y;for(let P=0;P<Z;P++){const x=d?K(U[P],le[P],X):U[P];b?(k.copy(E.normals[0]).multiplyScalar(x.x),S.copy(E.binormals[0]).multiplyScalar(x.y),O.copy(w[0]).add(k).add(S),Q(O.x,O.y,O.z)):Q(x.x,x.y,0)}for(let P=1;P<=h;P++)for(let x=0;x<Z;x++){const M=d?K(U[x],le[x],X):U[x];b?(k.copy(E.normals[P]).multiplyScalar(M.x),S.copy(E.binormals[P]).multiplyScalar(M.y),O.copy(w[P]).add(k).add(S),Q(O.x,O.y,O.z)):Q(M.x,M.y,u/h*P)}for(let P=v-1;P>=0;P--){const x=P/v,M=f*Math.cos(x*Math.PI/2),N=p*Math.sin(x*Math.PI/2)+y;for(let F=0,R=ee.length;F<R;F++){const C=K(ee[F],te[F],N);Q(C.x,C.y,u+M)}for(let F=0,R=L.length;F<R;F++){const C=L[F];G=ae[F];for(let ce=0,Y=C.length;ce<Y;ce++){const I=K(C[ce],G[ce],N);b?Q(I.x,I.y+w[h-1].y,w[h-1].x+M):Q(I.x,I.y,u+M)}}}J(),T();function J(){const P=r.length/3;if(d){let x=0,M=Z*x;for(let N=0;N<H;N++){const F=V[N];oe(F[2]+M,F[1]+M,F[0]+M)}x=h+v*2,M=Z*x;for(let N=0;N<H;N++){const F=V[N];oe(F[0]+M,F[1]+M,F[2]+M)}}else{for(let x=0;x<H;x++){const M=V[x];oe(M[2],M[1],M[0])}for(let x=0;x<H;x++){const M=V[x];oe(M[0]+Z*h,M[1]+Z*h,M[2]+Z*h)}}i.addGroup(P,r.length/3-P,0)}function T(){const P=r.length/3;let x=0;ne(ee,x),x+=ee.length;for(let M=0,N=L.length;M<N;M++){const F=L[M];ne(F,x),x+=F.length}i.addGroup(P,r.length/3-P,1)}function ne(P,x){let M=P.length;for(;--M>=0;){const N=M;let F=M-1;F<0&&(F=P.length-1);for(let R=0,C=h+v*2;R<C;R++){const ce=Z*R,Y=Z*(R+1),I=x+N+ce,z=x+F+ce,de=x+F+Y,pe=x+N+Y;ie(I,z,de,pe)}}}function Q(P,x,M){l.push(P),l.push(x),l.push(M)}function oe(P,x,M){$(P),$(x),$(M);const N=r.length/3,F=g.generateTopUV(i,r,N-3,N-2,N-1);A(F[0]),A(F[1]),A(F[2])}function ie(P,x,M,N){$(P),$(x),$(N),$(x),$(M),$(N);const F=r.length/3,R=g.generateSideWallUV(i,r,F-6,F-3,F-2,F-1);A(R[0]),A(R[1]),A(R[3]),A(R[1]),A(R[2]),A(R[3])}function $(P){r.push(l[P*3+0]),r.push(l[P*3+1]),r.push(l[P*3+2])}function A(P){s.push(P.x),s.push(P.y)}}}toJSON(){const t=Ut.prototype.toJSON.call(this),n=this.parameters.shapes,i=this.parameters.options;return w5(n,i,t)}}const b5={generateTopUV:function(e,t,n,i,r){const s=t[n*3],o=t[n*3+1],a=t[i*3],l=t[i*3+1],c=t[r*3],h=t[r*3+1];return[new Ie(s,o),new Ie(a,l),new Ie(c,h)]},generateSideWallUV:function(e,t,n,i,r,s){const o=t[n*3],a=t[n*3+1],l=t[n*3+2],c=t[i*3],h=t[i*3+1],u=t[i*3+2],d=t[r*3],f=t[r*3+1],p=t[r*3+2],y=t[s*3],v=t[s*3+1],m=t[s*3+2];return Math.abs(a-h)<.01?[new Ie(o,1-l),new Ie(c,1-u),new Ie(d,1-p),new Ie(y,1-m)]:[new Ie(a,1-l),new Ie(h,1-u),new Ie(f,1-p),new Ie(v,1-m)]}};function w5(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const s=e[i];n.shapes.push(s.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}class x5 extends Fi{constructor(t,n){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},this.fromBufferGeometry(new gC(t,n)),this.mergeVertices()}toJSON(){const t=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return E5(n,i,t)}}function E5(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const s=e[i];n.shapes.push(s.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function ip(e,t,n){Ut.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],s=[],o=[],a=1e-5,l=new se,c=new se,h=new se,u=new se,d=new se;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=t+1;for(let p=0;p<=n;p++){const y=p/n;for(let v=0;v<=t;v++){const m=v/t;e(m,y,c),r.push(c.x,c.y,c.z),m-a>=0?(e(m-a,y,h),u.subVectors(c,h)):(e(m+a,y,h),u.subVectors(h,c)),y-a>=0?(e(m,y-a,h),d.subVectors(c,h)):(e(m,y+a,h),d.subVectors(h,c)),l.crossVectors(u,d).normalize(),s.push(l.x,l.y,l.z),o.push(m,y)}}for(let p=0;p<n;p++)for(let y=0;y<t;y++){const v=p*f+y,m=p*f+y+1,g=(p+1)*f+y+1,w=(p+1)*f+y;i.push(v,m,w),i.push(m,g,w)}this.setIndex(i),this.setAttribute("position",new Lt(r,3)),this.setAttribute("normal",new Lt(s,3)),this.setAttribute("uv",new Lt(o,2))}ip.prototype=Object.create(Ut.prototype);ip.prototype.constructor=ip;function Oy(e,t,n){Fi.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new ip(e,t,n)),this.mergeVertices()}Oy.prototype=Object.create(Fi.prototype);Oy.prototype.constructor=Oy;class S5 extends Fi{constructor(t,n,i,r){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new tC(t,n,i,r)),this.mergeVertices()}}class T5 extends Ut{constructor(t,n){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:n},n=n||12;const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(t)===!1)c(t);else for(let h=0;h<t.length;h++)c(t[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Lt(r,3)),this.setAttribute("normal",new Lt(s,3)),this.setAttribute("uv",new Lt(o,2));function c(h){const u=r.length/3,d=h.extractPoints(n);let f=d.shape;const p=d.holes;mo.isClockWise(f)===!1&&(f=f.reverse());for(let v=0,m=p.length;v<m;v++){const g=p[v];mo.isClockWise(g)===!0&&(p[v]=g.reverse())}const y=mo.triangulateShape(f,p);for(let v=0,m=p.length;v<m;v++){const g=p[v];f=f.concat(g)}for(let v=0,m=f.length;v<m;v++){const g=f[v];r.push(g.x,g.y,0),s.push(0,0,1),o.push(g.x,g.y)}for(let v=0,m=y.length;v<m;v++){const g=y[v],w=g[0]+u,b=g[1]+u,E=g[2]+u;i.push(w,b,E),l+=3}}}toJSON(){const t=Ut.prototype.toJSON.call(this),n=this.parameters.shapes;return M5(n,t)}}function M5(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}class A5 extends Fi{constructor(t,n){super(),this.type="ShapeGeometry",typeof n=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),this.parameters={shapes:t,curveSegments:n},this.fromBufferGeometry(new T5(t,n)),this.mergeVertices()}toJSON(){const t=Fi.prototype.toJSON.call(this),n=this.parameters.shapes;return C5(n,t)}}function C5(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function Sa(e){rt.call(this),this.type="ShadowMaterial",this.color=new Ke(0),this.transparent=!0,this.setValues(e)}Sa.prototype=Object.create(rt.prototype);Sa.prototype.constructor=Sa;Sa.prototype.isShadowMaterial=!0;Sa.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this};function sh(e){Ai.call(this,e),this.type="RawShaderMaterial"}sh.prototype=Object.create(Ai.prototype);sh.prototype.constructor=sh;sh.prototype.isRawShaderMaterial=!0;function Ss(e){rt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}Ss.prototype=Object.create(rt.prototype);Ss.prototype.constructor=Ss;Ss.prototype.isMeshStandardMaterial=!0;Ss.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this};function Ta(e){Ss.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=gt.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}Ta.prototype=Object.create(Ss.prototype);Ta.prototype.constructor=Ta;Ta.prototype.isMeshPhysicalMaterial=!0;Ta.prototype.copy=function(e){return Ss.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Ke).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this};function Eo(e){rt.call(this),this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Eo.prototype=Object.create(rt.prototype);Eo.prototype.constructor=Eo;Eo.prototype.isMeshPhongMaterial=!0;Eo.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function rc(e){rt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}rc.prototype=Object.create(rt.prototype);rc.prototype.constructor=rc;rc.prototype.isMeshToonMaterial=!0;rc.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function sc(e){rt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}sc.prototype=Object.create(rt.prototype);sc.prototype.constructor=sc;sc.prototype.isMeshNormalMaterial=!0;sc.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function oc(e){rt.call(this),this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}oc.prototype=Object.create(rt.prototype);oc.prototype.constructor=oc;oc.prototype.isMeshLambertMaterial=!0;oc.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function ac(e){rt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}ac.prototype=Object.create(rt.prototype);ac.prototype.constructor=ac;ac.prototype.isMeshMatcapMaterial=!0;ac.prototype.copy=function(e){return rt.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function lc(e){ar.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}lc.prototype=Object.create(ar.prototype);lc.prototype.constructor=lc;lc.prototype.isLineDashedMaterial=!0;lc.prototype.copy=function(e){return ar.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var I5=Object.freeze({__proto__:null,ShadowMaterial:Sa,SpriteMaterial:xa,RawShaderMaterial:sh,ShaderMaterial:Ai,PointsMaterial:Ea,MeshPhysicalMaterial:Ta,MeshStandardMaterial:Ss,MeshPhongMaterial:Eo,MeshToonMaterial:rc,MeshNormalMaterial:sc,MeshLambertMaterial:oc,MeshDepthMaterial:_a,MeshDistanceMaterial:ba,MeshBasicMaterial:va,MeshMatcapMaterial:ac,LineDashedMaterial:lc,LineBasicMaterial:ar,Material:rt});const Jt={arraySlice:function(e,t,n){return Jt.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(r,s){return e[r]-e[s]}const n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(t),i},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let s=0,o=0;o!==i;++s){const a=n[s]*t;for(let l=0;l!==t;++l)r[o++]=e[a+l]}return r},flattenJSON:function(e,t,n,i){let r=1,s=e[0];for(;s!==void 0&&s[i]===void 0;)s=e[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(t.push(s.time),n.push.apply(n,o)),s=e[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(t.push(s.time),o.toArray(n,n.length)),s=e[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(t.push(s.time),n.push(o)),s=e[r++];while(s!==void 0)},subclip:function(e,t,n,i,r){r=r||30;const s=e.clone();s.name=t;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],h=c.getValueSize(),u=[],d=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*r;if(!(p<n||p>=i)){u.push(c.times[f]);for(let y=0;y<h;++y)d.push(c.values[f*h+y])}}u.length!==0&&(c.times=Jt.convertArray(u,c.times.constructor),c.values=Jt.convertArray(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(e,t,n,i){t===void 0&&(t=0),n===void 0&&(n=e),(i===void 0||i<=0)&&(i=30);const r=n.tracks.length,s=t/i;for(let o=0;o<r;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=e.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(c===void 0)continue;let h=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=u/3);let d=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=a.times.length-1;let y;if(s<=a.times[0]){const m=h,g=u-h;y=Jt.arraySlice(a.values,m,g)}else if(s>=a.times[p]){const m=p*u+h,g=m+u-h;y=Jt.arraySlice(a.values,m,g)}else{const m=a.createInterpolant(),g=h,w=u-h;m.evaluate(s),y=Jt.arraySlice(m.resultBuffer,g,w)}l==="quaternion"&&new Ui().fromArray(y).normalize().conjugate().toArray(y);const v=c.times.length;for(let m=0;m<v;++m){const g=m*f+d;if(l==="quaternion")Ui.multiplyQuaternionsFlat(c.values,g,y,0,c.values,g);else{const w=f-d*2;for(let b=0;b<w;++b)c.values[g+b]-=y[b]}}}return e.blendMode=qA,e}};function sr(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(sr.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(!(e>=r)){const o=t[1];e<o&&(n=2,r=o);for(let a=n-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0;break n}break e}for(;n<s;){const o=n+s>>>1;e<t[o]?s=o:n=o+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(sr.prototype,{beforeStart_:sr.prototype.copySampleValue_,afterEnd_:sr.prototype.copySampleValue_});function Dy(e,t,n,i){sr.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Dy.prototype=Object.assign(Object.create(sr.prototype),{constructor:Dy,DefaultSettings_:{endingStart:Cl,endingEnd:Cl},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,o=i[r],a=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Il:r=e,o=2*t-n;break;case Jf:r=i.length-2,o=t+i[r]-i[r+1];break;default:r=e,o=n}if(a===void 0)switch(this.getSettings_().endingEnd){case Il:s=e,a=2*n-t;break;case Jf:s=1,a=n+i[1]-i[0];break;default:s=e-1,a=t}const l=(n-t)*.5,c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=s*c},interpolate_:function(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,y=p*f,v=-u*y+2*u*p-u*f,m=(1+u)*y+(-1.5-2*u)*p+(-.5+u)*f+1,g=(-1-d)*y+(1.5+d)*p+.5*f,w=d*y-d*p;for(let b=0;b!==o;++b)r[b]=v*s[c+b]+m*s[l+b]+g*s[a+b]+w*s[h+b];return r}});function rp(e,t,n,i){sr.call(this,e,t,n,i)}rp.prototype=Object.assign(Object.create(sr.prototype),{constructor:rp,interpolate_:function(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(i-t),h=1-c;for(let u=0;u!==o;++u)r[u]=s[l+u]*h+s[a+u]*c;return r}});function Fy(e,t,n,i){sr.call(this,e,t,n,i)}Fy.prototype=Object.assign(Object.create(sr.prototype),{constructor:Fy,interpolate_:function(e){return this.copySampleValue_(e-1)}});function ii(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jt.convertArray(t,this.TimeBufferType),this.values=Jt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(ii,{toJSON:function(e){const t=e.constructor;let n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:Jt.convertArray(e.times,Array),values:Jt.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}});Object.assign(ii.prototype,{constructor:ii,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:xf,InterpolantFactoryMethodDiscrete:function(e){return new Fy(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new rp(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Dy(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case Zf:t=this.InterpolantFactoryMethodDiscrete;break;case xf:t=this.InterpolantFactoryMethodLinear;break;case Dg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zf;case this.InterpolantFactoryMethodLinear:return xf;case this.InterpolantFactoryMethodSmooth:return Dg}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;s!==-1&&n[s]>t;)--s;if(++s,r!==0||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const o=this.getValueSize();this.times=Jt.arraySlice(n,r,s),this.values=Jt.arraySlice(this.values,r*o,s*o)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==r;o++){const a=n[o];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;break}if(s!==null&&s>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,s),e=!1;break}s=a}if(i!==void 0&&Jt.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e},optimize:function(){const e=Jt.arraySlice(this.times),t=Jt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Dg,r=e.length-1;let s=1;for(let o=1;o<r;++o){let a=!1;const l=e[o],c=e[o+1];if(l!==c&&(o!==1||l!==l[0]))if(i)a=!0;else{const h=o*n,u=h-n,d=h+n;for(let f=0;f!==n;++f){const p=t[h+f];if(p!==t[u+f]||p!==t[d+f]){a=!0;break}}}if(a){if(o!==s){e[s]=e[o];const h=o*n,u=s*n;for(let d=0;d!==n;++d)t[u+d]=t[h+d]}++s}}if(r>0){e[s]=e[r];for(let o=r*n,a=s*n,l=0;l!==n;++l)t[a+l]=t[o+l];++s}return s!==e.length?(this.times=Jt.arraySlice(e,0,s),this.values=Jt.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this},clone:function(){const e=Jt.arraySlice(this.times,0),t=Jt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}});function By(e,t,n){ii.call(this,e,t,n)}By.prototype=Object.assign(Object.create(ii.prototype),{constructor:By,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Zf,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Vy(e,t,n,i){ii.call(this,e,t,n,i)}Vy.prototype=Object.assign(Object.create(ii.prototype),{constructor:Vy,ValueTypeName:"color"});function oh(e,t,n,i){ii.call(this,e,t,n,i)}oh.prototype=Object.assign(Object.create(ii.prototype),{constructor:oh,ValueTypeName:"number"});function Uy(e,t,n,i){sr.call(this,e,t,n,i)}Uy.prototype=Object.assign(Object.create(sr.prototype),{constructor:Uy,interpolate_:function(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(i-t);let l=e*o;for(let c=l+o;l!==c;l+=4)Ui.slerpFlat(r,0,s,l-o,s,l,a);return r}});function sp(e,t,n,i){ii.call(this,e,t,n,i)}sp.prototype=Object.assign(Object.create(ii.prototype),{constructor:sp,ValueTypeName:"quaternion",DefaultInterpolation:xf,InterpolantFactoryMethodLinear:function(e){return new Uy(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function zy(e,t,n,i){ii.call(this,e,t,n,i)}zy.prototype=Object.assign(Object.create(ii.prototype),{constructor:zy,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Zf,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function ah(e,t,n,i){ii.call(this,e,t,n,i)}ah.prototype=Object.assign(Object.create(ii.prototype),{constructor:ah,ValueTypeName:"vector"});function Br(e,t,n,i){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.blendMode=i!==void 0?i:C_,this.uuid=gt.generateUUID(),this.duration<0&&this.resetDuration()}function R5(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return oh;case"vector":case"vector2":case"vector3":case"vector4":return ah;case"color":return Vy;case"quaternion":return sp;case"bool":case"boolean":return By;case"string":return zy}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function L5(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=R5(e.type);if(e.times===void 0){const n=[],i=[];Jt.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Br,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let r=0,s=n.length;r!==s;++r)t.push(L5(n[r]).scale(i));return new Br(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(ii.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,s=[];for(let o=0;o<r;o++){let a=[],l=[];a.push((o+r-1)%r,o,(o+1)%r),l.push(0,1,0);const c=Jt.getKeyframeOrder(a);a=Jt.sortedArray(a,1,c),l=Jt.sortedArray(l,1,c),!i&&a[0]===0&&(a.push(r),l.push(l[0])),s.push(new oh(".morphTargetInfluences["+t[o].name+"]",a,l).scale(1/n))}return new Br(e,-1,s)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.name.match(r);if(c&&c.length>1){const h=c[1];let u=i[h];u||(i[h]=u=[]),u.push(l)}}const s=[];for(const o in i)s.push(Br.CreateFromMorphTargetSequence(o,i[o],t,n));return s},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,u,d,f,p){if(d.length!==0){const y=[],v=[];Jt.flattenJSON(d,y,v,f),y.length!==0&&p.push(new h(u,y,v))}},i=[],r=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let h=0;h<l.length;h++){const u=l[h].keys;if(!(!u||u.length===0))if(u[0].morphTargets){const d={};let f;for(f=0;f<u.length;f++)if(u[f].morphTargets)for(let p=0;p<u[f].morphTargets.length;p++)d[u[f].morphTargets[p]]=-1;for(const p in d){const y=[],v=[];for(let m=0;m!==u[f].morphTargets.length;++m){const g=u[f];y.push(g.time),v.push(g.morphTarget===p?1:0)}i.push(new oh(".morphTargetInfluence["+p+"]",y,v))}a=d.length*(s||1)}else{const d=".bones["+t[h].name+"]";n(ah,d+".position",u,"pos",i),n(sp,d+".quaternion",u,"rot",i),n(ah,d+".scale",u,"scl",i)}}return i.length===0?null:new Br(r,a,i,o)}});Object.assign(Br.prototype,{resetDuration:function(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Br(this.name,this.duration,e,this.blendMode)}});const cc={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function P5(e,t,n){const i=this;let r=!1,s=0,o=0,a;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){o++,r===!1&&i.onStart!==void 0&&i.onStart(c,s,o),r=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,h){return l.push(c,h),this},this.removeHandler=function(c){const h=l.indexOf(c);return h!==-1&&l.splice(h,2),this},this.getHandler=function(c){for(let h=0,u=l.length;h<u;h+=2){const d=l[h],f=l[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return f}return null}}const N5=new P5;function Wt(e){this.manager=e!==void 0?e:N5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Wt.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const mr={};function Ts(e){Wt.call(this,e)}Ts.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Ts,load:function(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=cc.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;if(mr[e]!==void 0){mr[e].push({onLoad:t,onProgress:n,onError:i});return}const o=/^data:(.*?)(;base64)?,(.*)$/,a=e.match(o);let l;if(a){const c=a[1],h=!!a[2];let u=a[3];u=decodeURIComponent(u),h&&(u=atob(u));try{let d;const f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":const p=new Uint8Array(u.length);for(let v=0;v<u.length;v++)p[v]=u.charCodeAt(v);f==="blob"?d=new Blob([p.buffer],{type:c}):d=p.buffer;break;case"document":d=new DOMParser().parseFromString(u,c);break;case"json":d=JSON.parse(u);break;default:d=u;break}setTimeout(function(){t&&t(d),r.manager.itemEnd(e)},0)}catch(d){setTimeout(function(){i&&i(d),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{mr[e]=[],mr[e].push({onLoad:t,onProgress:n,onError:i}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(c){const h=this.response,u=mr[e];if(delete mr[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),cc.add(e,h);for(let d=0,f=u.length;d<f;d++){const p=u[d];p.onLoad&&p.onLoad(h)}r.manager.itemEnd(e)}else{for(let d=0,f=u.length;d<f;d++){const p=u[d];p.onError&&p.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(c){const h=mr[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onProgress&&f.onProgress(c)}},!1),l.addEventListener("error",function(c){const h=mr[e];delete mr[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onError&&f.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),l.addEventListener("abort",function(c){const h=mr[e];delete mr[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onError&&f.onError(c)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return r.manager.itemStart(e),l},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}});function yS(e){Wt.call(this,e)}yS.prototype=Object.assign(Object.create(Wt.prototype),{constructor:yS,load:function(e,t,n,i){const r=this,s=new Ts(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=Br.parse(e[n]);t.push(i)}return t}});function _S(e){Wt.call(this,e)}_S.prototype=Object.assign(Object.create(Wt.prototype),{constructor:_S,load:function(e,t,n,i){const r=this,s=[],o=new th;o.image=s;const a=new Ts(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function c(h){a.load(e[h],function(u){const d=r.parse(u,!0);s[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},l+=1,l===6&&(d.mipmapCount===1&&(o.minFilter=Zn),o.format=d.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(Array.isArray(e))for(let h=0,u=e.length;h<u;++h)c(h);else a.load(e,function(h){const u=r.parse(h,!0);if(u.isCubemap){const d=u.mipmaps.length/u.mipmapCount;for(let f=0;f<d;f++){s[f]={mipmaps:[]};for(let p=0;p<u.mipmapCount;p++)s[f].mipmaps.push(u.mipmaps[f*u.mipmapCount+p]),s[f].format=u.format,s[f].width=u.width,s[f].height=u.height}}else o.image.width=u.width,o.image.height=u.height,o.mipmaps=u.mipmaps;u.mipmapCount===1&&(o.minFilter=Zn),o.format=u.format,o.needsUpdate=!0,t&&t(o)},n,i);return o}});function op(e){Wt.call(this,e)}op.prototype=Object.assign(Object.create(Wt.prototype),{constructor:op,load:function(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=cc.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),cc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(c){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(c),r.manager.itemError(e),r.manager.itemEnd(e)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}});function Hy(e){Wt.call(this,e)}Hy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Hy,load:function(e,t,n,i){const r=new wo,s=new op(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(l){s.load(e[l],function(c){r.images[l]=c,o++,o===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)a(l);return r}});function bS(e){Wt.call(this,e)}bS.prototype=Object.assign(Object.create(Wt.prototype),{constructor:bS,load:function(e,t,n,i){const r=this,s=new nc,o=new Ts(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(a){const l=r.parse(a);!l||(l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:Oi,s.wrapT=l.wrapT!==void 0?l.wrapT:Oi,s.magFilter=l.magFilter!==void 0?l.magFilter:Zn,s.minFilter=l.minFilter!==void 0?l.minFilter:Zn,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=gm),l.mipmapCount===1&&(s.minFilter=Zn),s.needsUpdate=!0,t&&t(s,l))},n,i),s}});function Wy(e){Wt.call(this,e)}Wy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Wy,load:function(e,t,n,i){const r=new Ot,s=new op(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){r.image=o;const a=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;r.format=a?ha:br,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}});function Xe(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Xe.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;t?s=t:s=e*n[r-1];let o=0,a=r-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===s)return i/(r-1);const c=n[i],u=n[i+1]-c,d=(s-c)/u;return(i+d)/(r-1)},getTangent:function(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),o=this.getPoint(r),a=t||(s.isVector2?new Ie:new se);return a.copy(o).sub(s).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new se,i=[],r=[],s=[],o=new se,a=new vt;for(let d=0;d<=e;d++){const f=d/e;i[d]=this.getTangentAt(f,new se),i[d].normalize()}r[0]=new se,s[0]=new se;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),u=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),u<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();const f=Math.acos(gt.clamp(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(a.makeRotationAxis(o,f))}s[d].crossVectors(i[d],r[d])}if(t===!0){let d=Math.acos(gt.clamp(r[0].dot(r[e]),-1,1));d/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(d=-d);for(let f=1;f<=e;f++)r[f].applyMatrix4(a.makeRotationAxis(i[f],d*f)),s[f].crossVectors(i[f],r[f])}return{tangents:i,normals:r,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function lr(e,t,n,i,r,s,o,a){Xe.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}lr.prototype=Object.create(Xe.prototype);lr.prototype.constructor=lr;lr.prototype.isEllipseCurve=!0;lr.prototype.getPoint=function(e,t){const n=t||new Ie,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);const o=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=a-this.aX,d=l-this.aY;a=u*c-d*h+this.aX,l=u*h+d*c+this.aY}return n.set(a,l)};lr.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};lr.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};lr.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function lh(e,t,n,i,r,s){lr.call(this,e,t,n,n,i,r,s),this.type="ArcCurve"}lh.prototype=Object.create(lr.prototype);lh.prototype.constructor=lh;lh.prototype.isArcCurve=!0;function I_(){let e=0,t=0,n=0,i=0;function r(s,o,a,l){e=s,t=a,n=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,h,u){let d=(o-s)/c-(a-s)/(c+h)+(a-o)/h,f=(a-o)/h-(l-o)/(h+u)+(l-a)/u;d*=h,f*=h,r(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return e+t*s+n*o+i*a}}}const Zd=new se,av=new I_,lv=new I_,cv=new I_;function xr(e,t,n,i){Xe.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i!==void 0?i:.5}xr.prototype=Object.create(Xe.prototype);xr.prototype.constructor=xr;xr.prototype.isCatmullRomCurve3=!0;xr.prototype.getPoint=function(e,t){const n=t||new se,i=this.points,r=i.length,s=(r-(this.closed?0:1))*e;let o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:a===0&&o===r-1&&(o=r-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%r]:(Zd.subVectors(i[0],i[1]).add(i[0]),l=Zd);const h=i[o%r],u=i[(o+1)%r];if(this.closed||o+2<r?c=i[(o+2)%r]:(Zd.subVectors(i[r-1],i[r-2]).add(i[r-1]),c=Zd),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let f=Math.pow(l.distanceToSquared(h),d),p=Math.pow(h.distanceToSquared(u),d),y=Math.pow(u.distanceToSquared(c),d);p<1e-4&&(p=1),f<1e-4&&(f=p),y<1e-4&&(y=p),av.initNonuniformCatmullRom(l.x,h.x,u.x,c.x,f,p,y),lv.initNonuniformCatmullRom(l.y,h.y,u.y,c.y,f,p,y),cv.initNonuniformCatmullRom(l.z,h.z,u.z,c.z,f,p,y)}else this.curveType==="catmullrom"&&(av.initCatmullRom(l.x,h.x,u.x,c.x,this.tension),lv.initCatmullRom(l.y,h.y,u.y,c.y,this.tension),cv.initCatmullRom(l.z,h.z,u.z,c.z,this.tension));return n.set(av.calc(a),lv.calc(a),cv.calc(a)),n};xr.prototype.copy=function(e){Xe.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};xr.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};xr.prototype.fromJSON=function(e){Xe.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new se().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function wS(e,t,n,i,r){const s=(i-t)*.5,o=(r-n)*.5,a=e*e,l=e*a;return(2*n-2*i+s+o)*l+(-3*n+3*i-2*s-o)*a+s*e+n}function k5(e,t){const n=1-e;return n*n*t}function O5(e,t){return 2*(1-e)*e*t}function D5(e,t){return e*e*t}function Mu(e,t,n,i){return k5(e,t)+O5(e,n)+D5(e,i)}function F5(e,t){const n=1-e;return n*n*n*t}function B5(e,t){const n=1-e;return 3*n*n*e*t}function V5(e,t){return 3*(1-e)*e*e*t}function U5(e,t){return e*e*e*t}function Au(e,t,n,i,r){return F5(e,t)+B5(e,n)+V5(e,i)+U5(e,r)}function jr(e,t,n,i){Xe.call(this),this.type="CubicBezierCurve",this.v0=e||new Ie,this.v1=t||new Ie,this.v2=n||new Ie,this.v3=i||new Ie}jr.prototype=Object.create(Xe.prototype);jr.prototype.constructor=jr;jr.prototype.isCubicBezierCurve=!0;jr.prototype.getPoint=function(e,t){const n=t||new Ie,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Au(e,i.x,r.x,s.x,o.x),Au(e,i.y,r.y,s.y,o.y)),n};jr.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};jr.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};jr.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function Ms(e,t,n,i){Xe.call(this),this.type="CubicBezierCurve3",this.v0=e||new se,this.v1=t||new se,this.v2=n||new se,this.v3=i||new se}Ms.prototype=Object.create(Xe.prototype);Ms.prototype.constructor=Ms;Ms.prototype.isCubicBezierCurve3=!0;Ms.prototype.getPoint=function(e,t){const n=t||new se,i=this.v0,r=this.v1,s=this.v2,o=this.v3;return n.set(Au(e,i.x,r.x,s.x,o.x),Au(e,i.y,r.y,s.y,o.y),Au(e,i.z,r.z,s.z,o.z)),n};Ms.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Ms.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Ms.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function ji(e,t){Xe.call(this),this.type="LineCurve",this.v1=e||new Ie,this.v2=t||new Ie}ji.prototype=Object.create(Xe.prototype);ji.prototype.constructor=ji;ji.prototype.isLineCurve=!0;ji.prototype.getPoint=function(e,t){const n=t||new Ie;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};ji.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};ji.prototype.getTangent=function(e,t){const n=t||new Ie;return n.copy(this.v2).sub(this.v1).normalize(),n};ji.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};ji.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};ji.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function qr(e,t){Xe.call(this),this.type="LineCurve3",this.v1=e||new se,this.v2=t||new se}qr.prototype=Object.create(Xe.prototype);qr.prototype.constructor=qr;qr.prototype.isLineCurve3=!0;qr.prototype.getPoint=function(e,t){const n=t||new se;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};qr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};qr.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};qr.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};qr.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Kr(e,t,n){Xe.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Ie,this.v1=t||new Ie,this.v2=n||new Ie}Kr.prototype=Object.create(Xe.prototype);Kr.prototype.constructor=Kr;Kr.prototype.isQuadraticBezierCurve=!0;Kr.prototype.getPoint=function(e,t){const n=t||new Ie,i=this.v0,r=this.v1,s=this.v2;return n.set(Mu(e,i.x,r.x,s.x),Mu(e,i.y,r.y,s.y)),n};Kr.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Kr.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Kr.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function As(e,t,n){Xe.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new se,this.v1=t||new se,this.v2=n||new se}As.prototype=Object.create(Xe.prototype);As.prototype.constructor=As;As.prototype.isQuadraticBezierCurve3=!0;As.prototype.getPoint=function(e,t){const n=t||new se,i=this.v0,r=this.v1,s=this.v2;return n.set(Mu(e,i.x,r.x,s.x),Mu(e,i.y,r.y,s.y),Mu(e,i.z,r.z,s.z)),n};As.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};As.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};As.prototype.fromJSON=function(e){return Xe.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Xr(e){Xe.call(this),this.type="SplineCurve",this.points=e||[]}Xr.prototype=Object.create(Xe.prototype);Xr.prototype.constructor=Xr;Xr.prototype.isSplineCurve=!0;Xr.prototype.getPoint=function(e,t){const n=t||new Ie,i=this.points,r=(i.length-1)*e,s=Math.floor(r),o=r-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return n.set(wS(o,a.x,l.x,c.x,h.x),wS(o,a.y,l.y,c.y,h.y)),n};Xr.prototype.copy=function(e){Xe.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this};Xr.prototype.toJSON=function(){const e=Xe.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e};Xr.prototype.fromJSON=function(e){Xe.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ie().fromArray(i))}return this};var z5=Object.freeze({__proto__:null,ArcCurve:lh,CatmullRomCurve3:xr,CubicBezierCurve:jr,CubicBezierCurve3:Ms,EllipseCurve:lr,LineCurve:ji,LineCurve3:qr,QuadraticBezierCurve:Kr,QuadraticBezierCurve3:As,SplineCurve:Xr});function ho(){Xe.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}ho.prototype=Object.assign(Object.create(Xe.prototype),{constructor:ho,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ji(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const r=n[i]-t,s=this.curves[i],o=s.getLength(),a=o===0?0:1-r/o;return s.getPointAt(a)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],o=s&&s.isEllipseCurve?e*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let l=0;l<a.length;l++){const c=a[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Xe.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Xe.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Xe.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new z5[i.type]().fromJSON(i))}return this}});function Vr(e){ho.call(this),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}Vr.prototype=Object.assign(Object.create(ho.prototype),{constructor:Vr,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new ji(this.currentPoint.clone(),new Ie(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new Kr(this.currentPoint.clone(),new Ie(e,t),new Ie(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,s){const o=new jr(this.currentPoint.clone(),new Ie(e,t),new Ie(n,i),new Ie(r,s));return this.curves.push(o),this.currentPoint.set(r,s),this},splineThru:function(e){const t=[this.currentPoint.clone()].concat(e),n=new Xr(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,i,r,s),this},absarc:function(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this},ellipse:function(e,t,n,i,r,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,s,o,a),this},absellipse:function(e,t,n,i,r,s,o,a){const l=new lr(e,t,n,i,r,s,o,a);if(this.curves.length>0){const h=l.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return ho.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=ho.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ho.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function Wl(e){Vr.call(this,e),this.uuid=gt.generateUUID(),this.type="Shape",this.holes=[]}Wl.prototype=Object.assign(Object.create(Vr.prototype),{constructor:Wl,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Vr.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){const e=Vr.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Vr.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Vr().fromJSON(i))}return this}});function Kt(e,t){Ye.call(this),this.type="Light",this.color=new Ke(e),this.intensity=t!==void 0?t:1}Kt.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Kt,isLight:!0,copy:function(e){return Ye.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=Ye.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function xS(e,t,n){Kt.call(this,e,n),this.type="HemisphereLight",this.position.copy(Ye.DefaultUp),this.updateMatrix(),this.groundColor=new Ke(t)}xS.prototype=Object.assign(Object.create(Kt.prototype),{constructor:xS,isHemisphereLight:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Cs(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ym,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}Object.assign(Cs.prototype,{_projScreenMatrix:new vt,_lightPositionWorld:new se,_lookTarget:new se,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(e.matrixWorld),t.position.copy(s),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function Gy(){Cs.call(this,new Sn(50,1,.5,500)),this.focus=1}Gy.prototype=Object.assign(Object.create(Cs.prototype),{constructor:Gy,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=gt.RAD2DEG*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),Cs.prototype.updateMatrices.call(this,e)}});function $y(e,t,n,i,r,s){Kt.call(this,e,t),this.type="SpotLight",this.position.copy(Ye.DefaultUp),this.updateMatrix(),this.target=new Ye,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=s!==void 0?s:1,this.shadow=new Gy}$y.prototype=Object.assign(Object.create(Kt.prototype),{constructor:$y,isSpotLight:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function jy(){Cs.call(this,new Sn(90,1,.5,500)),this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new se(1,0,0),new se(-1,0,0),new se(0,0,1),new se(0,0,-1),new se(0,1,0),new se(0,-1,0)],this._cubeUps=[new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,0,1),new se(0,0,-1)]}jy.prototype=Object.assign(Object.create(Cs.prototype),{constructor:jy,isPointLightShadow:!0,updateMatrices:function(e,t){t===void 0&&(t=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,s=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),s.copy(n.position),s.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(s),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}});function ES(e,t,n,i){Kt.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=i!==void 0?i:1,this.shadow=new jy}ES.prototype=Object.assign(Object.create(Kt.prototype),{constructor:ES,isPointLight:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function qy(e,t,n,i,r,s){bo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=t!==void 0?t:1,this.top=n!==void 0?n:1,this.bottom=i!==void 0?i:-1,this.near=r!==void 0?r:.1,this.far=s!==void 0?s:2e3,this.updateProjectionMatrix()}qy.prototype=Object.assign(Object.create(bo.prototype),{constructor:qy,isOrthographicCamera:!0,copy:function(e,t){return bo.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,o=i+t,a=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=Ye.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function Ky(){Cs.call(this,new qy(-5,5,5,-5,.5,500))}Ky.prototype=Object.assign(Object.create(Cs.prototype),{constructor:Ky,isDirectionalLightShadow:!0,updateMatrices:function(e){Cs.prototype.updateMatrices.call(this,e)}});function SS(e,t){Kt.call(this,e,t),this.type="DirectionalLight",this.position.copy(Ye.DefaultUp),this.updateMatrix(),this.target=new Ye,this.shadow=new Ky}SS.prototype=Object.assign(Object.create(Kt.prototype),{constructor:SS,isDirectionalLight:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function Xy(e,t){Kt.call(this,e,t),this.type="AmbientLight"}Xy.prototype=Object.assign(Object.create(Kt.prototype),{constructor:Xy,isAmbientLight:!0});function TS(e,t,n,i){Kt.call(this,e,t),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=i!==void 0?i:10}TS.prototype=Object.assign(Object.create(Kt.prototype),{constructor:TS,isRectAreaLight:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=Kt.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class H5{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new se)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*r),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*r)),n.addScaledVector(o[5],1.092548*(r*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(i*s)),n.addScaledVector(o[8],.546274*(i*i-r*r)),n}getIrradianceAt(t,n){const i=t.x,r=t.y,s=t.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*r),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*r),n.addScaledVector(o[5],2*.429043*r*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*i*s),n.addScaledVector(o[8],.429043*(i*i-r*r)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,n+r*3);return this}toArray(t=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,n+r*3);return t}static getBasisAt(t,n){const i=t.x,r=t.y,s=t.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*s,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*i*s,n[8]=.546274*(i*i-r*r)}}function zr(e,t){Kt.call(this,void 0,t),this.type="LightProbe",this.sh=e!==void 0?e:new H5}zr.prototype=Object.assign(Object.create(Kt.prototype),{constructor:zr,isLightProbe:!0,copy:function(e){return Kt.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=Kt.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}});function MS(e){Wt.call(this,e),this.textures={}}MS.prototype=Object.assign(Object.create(Wt.prototype),{constructor:MS,load:function(e,t,n,i){const r=this,s=new Ts(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const i=new I5[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=new Ke().setHex(e.sheen)),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(i.skinning=e.skinning),e.morphTargets!==void 0&&(i.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(i.morphNormals=e.morphNormals),e.dithering!==void 0&&(i.dithering=e.dithering),e.vertexTangents!==void 0&&(i.vertexTangents=e.vertexTangents),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const s=e.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=n(s.value);break;case"c":i.uniforms[r].value=new Ke().setHex(s.value);break;case"v2":i.uniforms[r].value=new Ie().fromArray(s.value);break;case"v3":i.uniforms[r].value=new se().fromArray(s.value);break;case"v4":i.uniforms[r].value=new Vt().fromArray(s.value);break;case"m3":i.uniforms[r].value=new Ti().fromArray(s.value);break;case"m4":i.uniforms[r].value=new vt().fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new Ie().fromArray(r)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.transmission!==void 0&&(i.transmission=e.transmission),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const W5={decodeText:function(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};function ap(){Ut.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}ap.prototype=Object.assign(Object.create(Ut.prototype),{constructor:ap,isInstancedBufferGeometry:!0,copy:function(e){return Ut.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e=Ut.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}});function Yy(e,t,n,i){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),mt.call(this,e,t,n),this.meshPerAttribute=i||1}Yy.prototype=Object.assign(Object.create(mt.prototype),{constructor:Yy,isInstancedBufferAttribute:!0,copy:function(e){return mt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=mt.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function AS(e){Wt.call(this,e)}AS.prototype=Object.assign(Object.create(Wt.prototype),{constructor:AS,load:function(e,t,n,i){const r=this,s=new Ts(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{t(r.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t={},n={};function i(d,f){if(t[f]!==void 0)return t[f];const y=d.interleavedBuffers[f],v=r(d,y.buffer),m=new Jd[y.type](v),g=new nr(m,y.stride);return g.uuid=y.uuid,t[f]=g,g}function r(d,f){if(n[f]!==void 0)return n[f];const y=d.arrayBuffers[f],v=new Uint32Array(y).buffer;return n[f]=v,v}const s=e.isInstancedBufferGeometry?new ap:new Ut,o=e.data.index;if(o!==void 0){const d=new Jd[o.type](o.array);s.setIndex(new mt(d,1))}const a=e.data.attributes;for(const d in a){const f=a[d];let p;if(f.isInterleavedBufferAttribute){const y=i(e.data,f.data);p=new wa(y,f.itemSize,f.offset,f.normalized)}else{const y=new Jd[f.type](f.array),v=f.isInstancedBufferAttribute?Yy:mt;p=new v(y,f.itemSize,f.normalized)}f.name!==void 0&&(p.name=f.name),s.setAttribute(d,p)}const l=e.data.morphAttributes;if(l)for(const d in l){const f=l[d],p=[];for(let y=0,v=f.length;y<v;y++){const m=f[y];let g;if(m.isInterleavedBufferAttribute){const w=i(e.data,m.data);g=new wa(w,m.itemSize,m.offset,m.normalized)}else{const w=new Jd[m.type](m.array);g=new mt(w,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),p.push(g)}s.morphAttributes[d]=p}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,f=h.length;d!==f;++d){const p=h[d];s.addGroup(p.start,p.count,p.materialIndex)}const u=e.data.boundingSphere;if(u!==void 0){const d=new se;u.center!==void 0&&d.fromArray(u.center),s.boundingSphere=new Bs(d,u.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}});const Jd={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function CS(e){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Wt.call(this,e),this.options={premultiplyAlpha:"none"}}CS.prototype=Object.assign(Object.create(Wt.prototype),{constructor:CS,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=cc.get(e);if(s!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(e,o).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,r.options)}).then(function(a){cc.add(e,a),t&&t(a),r.manager.itemEnd(e)}).catch(function(a){i&&i(a),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}});function vC(){this.type="ShapePath",this.color=new Ke,this.subPaths=[],this.currentPath=null}Object.assign(vC.prototype,{moveTo:function(e,t){return this.currentPath=new Vr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(m){const g=[];for(let w=0,b=m.length;w<b;w++){const E=m[w],S=new Wl;S.curves=E.curves,g.push(S)}return g}function i(m,g){const w=g.length;let b=!1;for(let E=w-1,S=0;S<w;E=S++){let k=g[E],O=g[S],W=O.x-k.x,U=O.y-k.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(k=g[S],W=-W,O=g[E],U=-U),m.y<k.y||m.y>O.y)continue;if(m.y===k.y){if(m.x===k.x)return!0}else{const L=U*(m.x-k.x)-W*(m.y-k.y);if(L===0)return!0;if(L<0)continue;b=!b}}else{if(m.y!==k.y)continue;if(O.x<=m.x&&m.x<=k.x||k.x<=m.x&&m.x<=O.x)return!0}}return b}const r=mo.isClockWise,s=this.subPaths;if(s.length===0)return[];if(t===!0)return n(s);let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Wl,l.curves=a.curves,c.push(l),c;let h=!r(s[0].getPoints());h=e?!h:h;const u=[],d=[];let f=[],p=0,y;d[p]=void 0,f[p]=[];for(let m=0,g=s.length;m<g;m++)a=s[m],y=a.getPoints(),o=r(y),o=e?!o:o,o?(!h&&d[p]&&p++,d[p]={s:new Wl,p:y},d[p].s.curves=a.curves,h&&p++,f[p]=[]):f[p].push({h:a,p:y[0]});if(!d[0])return n(s);if(d.length>1){let m=!1;const g=[];for(let w=0,b=d.length;w<b;w++)u[w]=[];for(let w=0,b=d.length;w<b;w++){const E=f[w];for(let S=0;S<E.length;S++){const k=E[S];let O=!0;for(let W=0;W<d.length;W++)i(k.p,d[W].p)&&(w!==W&&g.push({froms:w,tos:W,hole:S}),O?(O=!1,u[W].push(k)):m=!0);O&&u[w].push(k)}}g.length>0&&(m||(f=u))}let v;for(let m=0,g=d.length;m<g;m++){l=d[m].s,c.push(l),v=f[m];for(let w=0,b=v.length;w<b;w++)l.holes.push(v[w].h)}return c}});function yC(e){this.type="Font",this.data=e}Object.assign(yC.prototype,{isFont:!0,generateShapes:function(e,t){t===void 0&&(t=100);const n=[],i=G5(e,t,this.data);for(let r=0,s=i.length;r<s;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}});function G5(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[];let a=0,l=0;for(let c=0;c<i.length;c++){const h=i[c];if(h===`
`)a=0,l-=s;else{const u=$5(h,r,a,l,n);a+=u.offsetX,o.push(u.path)}}return o}function $5(e,t,n,i,r){const s=r.glyphs[e]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");return}const o=new vC;let a,l,c,h,u,d,f,p;if(s.o){const y=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let v=0,m=y.length;v<m;)switch(y[v++]){case"m":a=y[v++]*t+n,l=y[v++]*t+i,o.moveTo(a,l);break;case"l":a=y[v++]*t+n,l=y[v++]*t+i,o.lineTo(a,l);break;case"q":c=y[v++]*t+n,h=y[v++]*t+i,u=y[v++]*t+n,d=y[v++]*t+i,o.quadraticCurveTo(u,d,c,h);break;case"b":c=y[v++]*t+n,h=y[v++]*t+i,u=y[v++]*t+n,d=y[v++]*t+i,f=y[v++]*t+n,p=y[v++]*t+i,o.bezierCurveTo(u,d,f,p,c,h);break}}return{offsetX:s.ha*t,path:o}}function IS(e){Wt.call(this,e)}IS.prototype=Object.assign(Object.create(Wt.prototype),{constructor:IS,load:function(e,t,n,i){const r=this,s=new Ts(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){let a;try{a=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(o.substring(65,o.length-2))}const l=r.parse(a);t&&t(l)},n,i)},parse:function(e){return new yC(e)}});let Qd;const j5={getContext:function(){return Qd===void 0&&(Qd=new(window.AudioContext||window.webkitAudioContext)),Qd},setContext:function(e){Qd=e}};function Zy(e){Wt.call(this,e)}Zy.prototype=Object.assign(Object.create(Wt.prototype),{constructor:Zy,load:function(e,t,n,i){const r=this,s=new Ts(r.manager);s.setResponseType("arraybuffer"),s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(o){try{const a=o.slice(0);j5.getContext().decodeAudioData(a,function(c){t(c)})}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}});function RS(e,t,n){zr.call(this,void 0,n);const i=new Ke().set(e),r=new Ke().set(t),s=new se(i.r,i.g,i.b),o=new se(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}RS.prototype=Object.assign(Object.create(zr.prototype),{constructor:RS,isHemisphereLightProbe:!0,copy:function(e){return zr.prototype.copy.call(this,e),this},toJSON:function(e){return zr.prototype.toJSON.call(this,e)}});function LS(e,t){zr.call(this,void 0,t);const n=new Ke().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}LS.prototype=Object.assign(Object.create(zr.prototype),{constructor:LS,isAmbientLightProbe:!0,copy:function(e){return zr.prototype.copy.call(this,e),this},toJSON:function(e){return zr.prototype.toJSON.call(this,e)}});const PS=new vt,NS=new vt;function q5(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Sn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Sn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(q5.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(gt.DEG2RAD*t.fov*.5)/t.zoom;let a,l;NS.elements[12]=-r,PS.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,i.elements[0]=2*t.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(i),a=-o*t.aspect-s,l=o*t.aspect-s,i.elements[0]=2*t.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(NS),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PS)}});class K5 extends Ye{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t){if(t===void 0&&(t=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,n=this.filters.length;t<n;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}function _C(e,t,n){this.binding=e,this.valueSize=n;let i,r,s;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(_C.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)n[r+o]=n[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(n,r,0,o,i)}this.cumulativeWeight=s},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const a=t*this._origIndex;this._mixBufferRegion(n,i,a,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){o.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]},_slerp:function(e,t,n,i){Ui.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const s=this._workIndex*r;Ui.multiplyQuaternionsFlat(e,s,e,t,e,n),Ui.slerpFlat(e,t,e,t,e,s,i)},_lerp:function(e,t,n,i,r){const s=1-i;for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]*s+e[n+o]*i}},_lerpAdditive:function(e,t,n,i,r){for(let s=0;s!==r;++s){const o=t+s;e[o]=e[o]+e[n+s]*i}}});const R_="\\[\\]\\.:\\/",X5=new RegExp("["+R_+"]","g"),L_="[^"+R_+"]",Y5="[^"+R_.replace("\\.","")+"]",Z5=/((?:WC+[\/:])*)/.source.replace("WC",L_),J5=/(WCOD+)?/.source.replace("WCOD",Y5),Q5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",L_),eq=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",L_),tq=new RegExp("^"+Z5+J5+Q5+eq+"$"),nq=["material","materials","bones"];function bC(e,t,n){const i=n||gi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}Object.assign(bC.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function gi(e,t,n){this.path=t,this.parsedPath=n||gi.parseTrackName(t),this.node=gi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(gi,{Composite:bC,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new gi.Composite(e,t,n):new gi(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(X5,"")},parseTrackName:function(e){const t=tq.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);nq.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let s=0;s<r.length;s++){const o=r[s];if(o.name===t||o.uuid===t)return o;const a=n(o.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}});Object.assign(gi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)t[n++]=i[r]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[n++]},function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=gi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const s=e[i];if(s===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else s.fromArray!==void 0&&s.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(gi.prototype,{_getValue_unbound:gi.prototype.getValue,_setValue_unbound:gi.prototype.setValue});function iq(){this.uuid=gt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(iq.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let o,a=e.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const u=arguments[c],d=u.uuid;let f=t[d];if(f===void 0){f=a++,t[d]=f,e.push(u);for(let p=0,y=s;p!==y;++p)r[p].push(new gi(u,n[p],i[p]))}else if(f<l){o=e[f];const p=--l,y=e[p];t[y.uuid]=f,e[f]=y,t[d]=p,e[p]=u;for(let v=0,m=s;v!==m;++v){const g=r[v],w=g[p];let b=g[f];g[f]=w,b===void 0&&(b=new gi(u,n[v],i[v])),g[p]=b}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const a=arguments[s],l=a.uuid,c=t[l];if(c!==void 0&&c>=r){const h=r++,u=e[h];t[u.uuid]=c,e[c]=u,t[l]=h,e[h]=a;for(let d=0,f=i;d!==f;++d){const p=n[d],y=p[h],v=p[c];p[c]=y,p[h]=v}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=e.length;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<r){const u=--r,d=e[u],f=--s,p=e[f];t[d.uuid]=h,e[h]=d,t[p.uuid]=u,e[u]=p,e.pop();for(let y=0,v=i;y!==v;++y){const m=n[y],g=m[u],w=m[f];m[h]=g,m[u]=w,m.pop()}}else{const u=--s,d=e[u];u>0&&(t[d.uuid]=h),e[h]=d,e.pop();for(let f=0,p=i;f!==p;++f){const y=n[f];y[h]=y[u],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(i!==void 0)return r[i];const s=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,h=new Array(l);i=r.length,n[e]=i,s.push(e),o.push(t),r.push(h);for(let u=c,d=a.length;u!==d;++u){const f=a[u];h[u]=new gi(f,e,t)}return h},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o],l=e[o];t[l]=n,s[n]=a,s.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}});class rq{constructor(t,n,i,r){this._mixer=t,this._clip=n,this._localRoot=i||null,this.blendMode=r||n.blendMode;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Cl,endingEnd:Cl};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=IW,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,i){if(t.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,s=t._clip.duration,o=s/r,a=r/s;t.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(t,n,i){return t.crossFadeFrom(this,n,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=t/o,c[1]=n/o,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,i,r){if(!this.enabled){this._updateWeight(t);return}const s=this._startTime;if(s!==null){const l=(t-s)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(t);const o=this._updateTime(n),a=this._updateWeight(t);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case qA:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case C_:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(t)[0];n*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(n*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n))}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,i=this.loop;let r=this.time+t,s=this._loopCount;const o=i===RW;if(t===0)return s===-1?r:o&&(s&1)===1?n-r:r;if(i===CW){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(s===-1&&(t>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const c=t<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return n-r}return r}_setEndings(t,n,i){const r=this._interpolantSettings;i?(r.endingStart=Il,r.endingEnd=Il):(t?r.endingStart=this.zeroSlopeAtStart?Il:Cl:r.endingStart=Jf,n?r.endingEnd=this.zeroSlopeAtEnd?Il:Cl:r.endingEnd=Jf)}_scheduleFading(t,n,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+t,l[1]=i,this}}function kS(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}kS.prototype=Object.assign(Object.create(Fs.prototype),{constructor:kS,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];c===void 0&&(c={},l[a]=c);for(let h=0;h!==r;++h){const u=i[h],d=u.name;let f=c[d];if(f!==void 0)s[h]=f;else{if(f=s[h],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,a,d));continue}const p=t&&t._propertyBindings[h].binding.parsedPath;f=new _C(gi.create(n,d,p),u.ValueTypeName,u.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,d),s[h]=f}o[h].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,o=s[r],a=o.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,u=(e._localRoot||this._root).uuid;delete h[u],a.length===0&&delete s[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,o=s[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[r],Object.keys(o).length===0&&delete s[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new rp(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let s=typeof e=="string"?Br.findByName(i,e):e;const o=s!==null?s.uuid:e,a=this._actionsByClip[o];let l=null;if(n===void 0&&(s!==null?n=s.blendMode:n=C_),a!==void 0){const h=a.actionByRoot[r];if(h!==void 0&&h.blendMode===n)return h;l=a.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;const c=new rq(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?Br.findByName(n,e):e,s=r?r.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,r,s);const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(s);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const s=r.knownActions;for(let o=0,a=s.length;o!==a;++o){const l=s[o];this._deactivateAction(l);const c=l._cacheIndex,h=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const s in n){const o=n[s].actionByRoot,a=o[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const s in r){const o=r[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class P_{constructor(t){typeof t=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new P_(this.value.clone===void 0?this.value:this.value.clone())}}function OS(e,t,n){nr.call(this,e,t),this.meshPerAttribute=n||1}OS.prototype=Object.assign(Object.create(nr.prototype),{constructor:OS,isInstancedInterleavedBuffer:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=nr.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=nr.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}});function wC(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(wC.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(wC.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}});function xC(e,t,n,i){this.ray=new Vh(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new XA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function DS(e,t){return e.distance-t.distance}function Jy(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),i===!0){const r=e.children;for(let s=0,o=r.length;s<o;s++)Jy(r[s],t,n,!0)}}Object.assign(xC.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const i=n||[];return Jy(e,this,i,t),i.sort(DS),i},intersectObjects:function(e,t,n){const i=n||[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,s=e.length;r<s;r++)Jy(e[r],this,i,t);return i.sort(DS),i}});const FS=new Ie;class sq{constructor(t,n){Object.defineProperty(this,"isBox2",{value:!0}),this.min=t!==void 0?t:new Ie(1/0,1/0),this.max=n!==void 0?n:new Ie(-1/0,-1/0)}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=FS.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ie),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ie),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new Ie),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new Ie),n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return FS.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function lp(e){Ye.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}lp.prototype=Object.create(Ye.prototype);lp.prototype.constructor=lp;lp.prototype.isImmediateRenderObject=!0;const Zs=new se,ef=new vt,uv=new vt;class oq extends ep{constructor(t){const n=EC(t),i=new Ut,r=[],s=[],o=new Ke(0,0,1),a=new Ke(0,1,0);for(let c=0;c<n.length;c++){const h=n[c];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Lt(r,3)),i.setAttribute("color",new Lt(s,3));const l=new ar({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,i=this.geometry,r=i.getAttribute("position");uv.getInverse(this.root.matrixWorld);for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(ef.multiplyMatrices(uv,a.matrixWorld),Zs.setFromMatrixPosition(ef),r.setXYZ(o,Zs.x,Zs.y,Zs.z),ef.multiplyMatrices(uv,a.parent.matrixWorld),Zs.setFromMatrixPosition(ef),r.setXYZ(o+1,Zs.x,Zs.y,Zs.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function EC(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,EC(e.children[n]));return t}class aq extends ep{constructor(t,n,i,r){t=t||10,n=n||10,i=new Ke(i!==void 0?i:4473924),r=new Ke(r!==void 0?r:8947848);const s=n/2,o=t/n,a=t/2,l=[],c=[];for(let d=0,f=0,p=-a;d<=n;d++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const y=d===s?i:r;y.toArray(c,f),f+=3,y.toArray(c,f),f+=3,y.toArray(c,f),f+=3,y.toArray(c,f),f+=3}const h=new Ut;h.setAttribute("position",new Lt(l,3)),h.setAttribute("color",new Lt(c,3));const u=new ar({vertexColors:!0,toneMapped:!1});super(h,u),this.type="GridHelper"}}Xe.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Xe.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(ho.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Fi;for(let n=0,i=e.length;n<i;n++){const r=e[n];t.vertices.push(new se(r.x,r.y,r.z||0))}return t}});Object.assign(Vr.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});function SC(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),xr.call(this,e),this.type="catmullrom"}SC.prototype=Object.create(xr.prototype);Object.assign(SC.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});aq.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};oq.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Wt.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),W5.extractUrlBase(e)}});Wt.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(sq.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Ro.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Bs.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});ym.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};Object.assign(gt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),gt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),gt.ceilPowerOfTwo(e)}});Object.assign(Ti.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(vt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new se().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,s)}});hs.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Ui.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(Vh.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(Kn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}});Object.assign(Kn,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Kn.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Kn.getNormal(e,t,n,i)}});Object.assign(Wl.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new x5(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new A5(this,e)}});Object.assign(Ie.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(se.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Vt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Fi.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.assign(Ye.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(Ye.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Mn.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Mn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),LW},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Iy.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Ly.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Ry.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Xe.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});Sn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(Kt.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(mt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Yu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Yu)}}});Object.assign(mt.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?Yu:vm),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Ut.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new mt(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(Ut.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(ap.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}});Object.defineProperties(xC.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}});Object.defineProperties(nr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Yu},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}});Object.assign(nr.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?Yu:vm),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(gC.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(hC.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(P_.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(rt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ke}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===x_}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}});Object.defineProperties(Eo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Ta.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}});Object.defineProperties(Ai.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(zh.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(zh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?KA:Bh}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(cC.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(wr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.defineProperties(K5.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new Zy().load(e,function(i){t.setBuffer(i)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});tc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};tc.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)};ga.crossOrigin=void 0;ga.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Wy;r.setCrossOrigin(this.crossOrigin);const s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s};ga.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Hy;r.setCrossOrigin(this.crossOrigin);const s=r.load(e,n,void 0,i);return t&&(s.mapping=t),s};ga.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};ga.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:aH}}));class lq{constructor(){this.world=null}setWorld(t){this.world=t,this.diceBodyMaterial=new $t.exports.Material,this.floorBodyMaterial=new $t.exports.Material,this.barrierBodyMaterial=new $t.exports.Material,t.addContactMaterial(new $t.exports.ContactMaterial(this.floorBodyMaterial,this.diceBodyMaterial,{friction:.01,restitution:.5})),t.addContactMaterial(new $t.exports.ContactMaterial(this.barrierBodyMaterial,this.diceBodyMaterial,{friction:0,restitution:1})),t.addContactMaterial(new $t.exports.ContactMaterial(this.diceBodyMaterial,this.diceBodyMaterial,{friction:0,restitution:.5}))}unpreparedRoll(t,n){if(this.throwRunning)throw new Error("Cannot start another throw. Please wait, till the current throw is finished.");this.throwRunning=!0;let i=()=>{let r=0;const s={};t.forEach(o=>{o.isFinished()?(s[o.values]=s[o.values]||[],s[o.values].push(o.getUpsideValue()),r++):r=0}),r==t.length&&(Ei.world.removeEventListener("postStep",i),this.throwRunning=!1,n(s))};this.world.addEventListener("postStep",i)}prepareValues(t){if(this.throwRunning)throw new Error("Cannot start another throw. Please wait, till the current throw is finished.");for(let i=0;i<t.length;i++)if(t[i].value<1||t[i].dice.values<t[i].value)throw new Error("Cannot throw die to value "+t[i].value+", because it has only "+t[i].dice.values+" sides.");this.throwRunning=!0;for(let i=0;i<t.length;i++)t[i].vectors=t[i].dice.getCurrentVectors(),t[i].stableCount=0;let n=()=>{let i=!0;for(let r=0;r<t.length;r++)t[r].dice.isFinished()?t[r].stableCount++:t[r].stableCount=0,t[r].stableCount<50&&(i=!1);if(i){console.log("all stable"),Ei.world.removeEventListener("postStep",n);for(let r=0;r<t.length;r++)t[r].dice.shiftUpperValue(t[r].value),t[r].dice.setVectors(t[r].vectors);this.throwRunning=!1}else Ei.world.step(Ei.world.dt)};this.world.addEventListener("postStep",n)}}class Tc{constructor(t){t=this.setDefaults(t,{size:2,fontColor:"#ffffff",backColor:"#ff0000"}),this.object=null,this.size=t.size,this.invertUpside=!1,this.materialOptions={specular:1515554,color:15790320,shininess:40,flatShading:x_,transparent:!0,opacity:1},this.labelColor=t.fontColor,this.diceColor=t.backColor}setDefaults(t,n){t=t||{};for(let i in n)!Object.prototype.hasOwnProperty.call(n,i)||i in t||(t[i]=n[i]);return t}isFinished(){let t=1,n=this.object.body.angularVelocity,i=this.object.body.velocity;return Math.abs(n.x)<t&&Math.abs(n.y)<t&&Math.abs(n.z)<t&&Math.abs(i.x)<t&&Math.abs(i.y)<t&&Math.abs(i.z)<t}getUpsideValue(){let t=new se(0,0,this.invertUpside?-1:1),n,i=Math.PI*2;for(let r=0;r<this.object.geometry.faces.length;++r){let s=this.object.geometry.faces[r];if(s.materialIndex===0)continue;let o=s.normal.clone().applyQuaternion(this.object.body.quaternion).angleTo(t);o<i&&(i=o,n=s)}return n.materialIndex-1}getCurrentVectors(){return{position:this.object.body.position.clone(),quaternion:this.object.body.quaternion.clone(),velocity:this.object.body.velocity.clone(),angularVelocity:this.object.body.angularVelocity.clone()}}setVectors(t){this.object.body.position=t.position,this.object.body.quaternion=t.quaternion,this.object.body.velocity=t.velocity,this.object.body.angularVelocity=t.angularVelocity}shiftUpperValue(t){let n=this.object.geometry.clone(),i=this.getUpsideValue();for(let r=0,s=n.faces.length;r<s;++r){let o=n.faces[r].materialIndex;if(o!==0){for(o+=t-i-1;o>this.values;)o-=this.values;for(;o<1;)o+=this.values;n.faces[r].materialIndex=o+1}}this.values==4&&this.updateMaterialsForValue(t-i),this.object.geometry=n}getChamferGeometry(t,n,i){let r=[],s=[],o=new Array(t.length);for(let a=0;a<t.length;++a)o[a]=[];for(let a=0;a<n.length;++a){let l=n[a],c=l.length-1,h=new se,u=new Array(c);for(let d=0;d<c;++d){let f=t[l[d]].clone();h.add(f),o[l[d]].push(u[d]=r.push(f)-1)}h.divideScalar(c);for(let d=0;d<c;++d){let f=r[u[d]];f.subVectors(f,h).multiplyScalar(i).addVectors(f,h)}u.push(l[c]),s.push(u)}for(let a=0;a<n.length-1;++a)for(let l=a+1;l<n.length;++l){let c=[],h=-1;for(let u=0;u<n[a].length-1;++u){let d=n[l].indexOf(n[a][u]);d>=0&&d<n[l].length-1&&(h>=0&&u!==h+1?c.unshift([a,u],[l,d]):c.push([a,u],[l,d]),h=u)}c.length===4&&s.push([s[c[0][0]][c[0][1]],s[c[1][0]][c[1][1]],s[c[3][0]][c[3][1]],s[c[2][0]][c[2][1]],-1])}for(let a=0;a<o.length;++a){let l=o[a],c=[l[0]],h=l.length-1;for(;h;){for(let u=n.length;u<s.length;++u){let d=s[u].indexOf(c[c.length-1]);if(d>=0&&d<4){--d===-1&&(d=3);let f=s[u][d];if(l.indexOf(f)>=0){c.push(f);break}}}--h}c.push(-1),s.push(c)}return{vectors:r,faces:s}}makeGeometry(t,n,i,r,s){let o=new Fi;for(let a=0;a<t.length;++a){let l=t[a].multiplyScalar(i);l.index=o.vertices.push(l)-1}for(let a=0;a<n.length;++a){let l=n[a],c=l.length-1,h=Math.PI*2/c;for(let u=0;u<c-2;++u)o.faces.push(new Qf(l[0],l[u+1],l[u+2],[o.vertices[l[0]],o.vertices[l[u+1]],o.vertices[l[u+2]]],0,l[c]+1)),o.faceVertexUvs[0].push([new Ie((Math.cos(s)+1+r)/2/(1+r),(Math.sin(s)+1+r)/2/(1+r)),new Ie((Math.cos(h*(u+1)+s)+1+r)/2/(1+r),(Math.sin(h*(u+1)+s)+1+r)/2/(1+r)),new Ie((Math.cos(h*(u+2)+s)+1+r)/2/(1+r),(Math.sin(h*(u+2)+s)+1+r)/2/(1+r))])}return o.computeFaceNormals(),o.boundingSphere=new Bs(new se,i),o}createShape(t,n,i){let r=new Array(t.length),s=new Array(n.length);for(let o=0;o<t.length;++o){let a=t[o];r[o]=new $t.exports.Vec3(a.x*i,a.y*i,a.z*i)}for(let o=0;o<n.length;++o)s[o]=n[o].slice(0,n[o].length-1);return new $t.exports.ConvexPolyhedron(r,s)}getGeometry(){let t=this.size*this.scaleFactor,n=new Array(this.vertices.length);for(let s=0;s<this.vertices.length;++s)n[s]=new se().fromArray(this.vertices[s]).normalize();let i=this.getChamferGeometry(n,this.faces,this.chamfer),r=this.makeGeometry(i.vectors,i.faces,t,this.tab,this.af);return r.cannon_shape=this.createShape(n,this.faces,t),r}calculateTextureSize(t){return Math.max(128,Math.pow(2,Math.floor(Math.log(t)/Math.log(2))))}createTextTexture(t,n,i){let r=document.createElement("canvas"),s=r.getContext("2d"),o=this.calculateTextureSize(this.size/2+this.size*this.textMargin)*2;r.width=r.height=o,s.font=o/(1+2*this.textMargin)+"pt Arial",s.fillStyle=i,s.fillRect(0,0,r.width,r.height),s.textAlign="center",s.textBaseline="middle",s.fillStyle=n,s.fillText(t,r.width/2,r.height/2);let a=new Ot(r);return a.needsUpdate=!0,a}getMaterials(){let t=[];for(let n=0;n<this.faceTexts.length;++n){let i=null;this.customTextTextureFunction?i=this.customTextTextureFunction(this.faceTexts[n],this.labelColor,this.diceColor):i=this.createTextTexture(this.faceTexts[n],this.labelColor,this.diceColor),t.push(new Eo(Object.assign({},this.materialOptions,{map:i})))}return t}getObject(){return this.object}create(){if(!Ei.world)throw new Error("You must call DiceManager.setWorld(world) first.");return this.object=new Mn(this.getGeometry(),this.getMaterials()),this.object.reveiceShadow=!0,this.object.castShadow=!0,this.object.diceObject=this,this.object.body=new $t.exports.Body({mass:this.mass,shape:this.object.geometry.cannon_shape,material:Ei.diceBodyMaterial}),this.object.body.linearDamping=.1,this.object.body.angularDamping=.1,Ei.world.add(this.object.body),this.object}updateMeshFromBody(){this.object.position.copy(this.object.body.position),this.object.quaternion.copy(this.object.body.quaternion)}updateBodyFromMesh(){this.object.body.position.copy(this.object.position),this.object.body.quaternion.copy(this.object.quaternion)}}class cq extends Tc{constructor(t){super(t),this.tab=-.1,this.af=Math.PI*7/6,this.chamfer=.96,this.vertices=[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],this.faces=[[1,0,2,1],[0,1,3,2],[0,3,2,3],[1,2,3,4]],this.scaleFactor=1.2,this.values=4,this.d4FaceTexts=[[[],[0,0,0],[2,4,3],[1,3,4],[2,1,4],[1,2,3]],[[],[0,0,0],[2,3,4],[3,1,4],[2,4,1],[3,2,1]],[[],[0,0,0],[4,3,2],[3,4,1],[4,2,1],[3,1,2]],[[],[0,0,0],[4,2,3],[1,4,3],[4,1,2],[1,3,2]]],this.faceTexts=this.d4FaceTexts[0],this.updateMaterialsForValue=function(n){n<0&&(n+=4),this.faceTexts=this.d4FaceTexts[n],this.object.material=this.getMaterials()},this.customTextTextureFunction=function(n,i,r){let s=document.createElement("canvas"),o=s.getContext("2d"),a=this.calculateTextureSize(this.size/2+this.size*2)*2;s.width=s.height=a,o.font=a/5+"pt Arial",o.fillStyle=r,o.fillRect(0,0,s.width,s.height),o.textAlign="center",o.textBaseline="middle",o.fillStyle=i;for(let c in n)o.fillText(n[c],s.width/2,s.height/2-a*.3),o.translate(s.width/2,s.height/2),o.rotate(Math.PI*2/3),o.translate(-s.width/2,-s.height/2);let l=new Ot(s);return l.needsUpdate=!0,l},this.mass=300,this.inertia=5,this.invertUpside=!0,this.create()}}class uq extends Tc{constructor(t){super(t),this.tab=.1,this.af=Math.PI/4,this.chamfer=.96,this.vertices=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1]],this.faces=[[0,3,2,1,1],[1,2,6,5,2],[0,1,5,4,3],[3,7,6,2,4],[0,4,7,3,5],[4,5,6,7,6]],this.scaleFactor=.9,this.values=6,this.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],this.textMargin=1,this.mass=300,this.inertia=13,this.create()}}class hq extends Tc{constructor(t){super(t),this.tab=0,this.af=-Math.PI/4/2,this.chamfer=.965,this.vertices=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],this.faces=[[0,2,4,1],[0,4,3,2],[0,3,5,3],[0,5,2,4],[1,3,4,5],[1,4,2,6],[1,2,5,7],[1,5,3,8]],this.scaleFactor=1,this.values=8,this.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],this.textMargin=1.2,this.mass=340,this.inertia=10,this.create()}}class dq extends Tc{constructor(t){super(t),this.tab=0,this.af=Math.PI*6/5,this.chamfer=.945,this.vertices=[],this.faces=[[5,7,11,0],[4,2,10,1],[1,3,11,2],[0,8,10,3],[7,9,11,4],[8,6,10,5],[9,1,11,6],[2,0,10,7],[3,5,11,8],[6,4,10,9],[1,0,2,-1],[1,2,3,-1],[3,2,4,-1],[3,4,5,-1],[5,4,6,-1],[5,6,7,-1],[7,6,8,-1],[7,8,9,-1],[9,8,0,-1],[9,0,1,-1]];for(let n=0,i=0;n<10;++n,i+=Math.PI*2/10)this.vertices.push([Math.cos(i),Math.sin(i),.105*(n%2?1:-1)]);this.vertices.push([0,0,-1]),this.vertices.push([0,0,1]),this.scaleFactor=.9,this.values=10,this.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],this.textMargin=1,this.mass=350,this.inertia=9,this.create()}}class fq extends Tc{constructor(t){super(t);let n=(1+Math.sqrt(5))/2,i=1/n;this.tab=.2,this.af=-Math.PI/4/2,this.chamfer=.968,this.vertices=[[0,i,n],[0,i,-n],[0,-i,n],[0,-i,-n],[n,0,i],[n,0,-i],[-n,0,i],[-n,0,-i],[i,n,0],[i,-n,0],[-i,n,0],[-i,-n,0],[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]],this.faces=[[2,14,4,12,0,1],[15,9,11,19,3,2],[16,10,17,7,6,3],[6,7,19,11,18,4],[6,18,2,0,16,5],[18,11,9,14,2,6],[1,17,10,8,13,7],[1,13,5,15,3,8],[13,8,12,4,5,9],[5,4,14,9,15,10],[0,12,8,10,16,11],[3,19,7,17,1,12]],this.scaleFactor=.9,this.values=12,this.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],this.textMargin=1,this.mass=350,this.inertia=8,this.create()}}class pq extends Tc{constructor(t){super(t);let n=(1+Math.sqrt(5))/2;this.tab=-.2,this.af=-Math.PI/4/2,this.chamfer=.955,this.vertices=[[-1,n,0],[1,n,0],[-1,-n,0],[1,-n,0],[0,-1,n],[0,1,n],[0,-1,-n],[0,1,-n],[n,0,-1],[n,0,1],[-n,0,-1],[-n,0,1]],this.faces=[[0,11,5,1],[0,5,1,2],[0,1,7,3],[0,7,10,4],[0,10,11,5],[1,5,9,6],[5,11,4,7],[11,10,2,8],[10,7,6,9],[7,1,8,10],[3,9,4,11],[3,4,2,12],[3,2,6,13],[3,6,8,14],[3,8,9,15],[4,9,5,16],[2,4,11,17],[6,2,10,18],[8,6,7,19],[9,8,1,20]],this.scaleFactor=1,this.values=20,this.faceTexts=[" ","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20"],this.textMargin=1,this.mass=400,this.inertia=6,this.create()}}const Ei=new lq;function mq(){let e,t,n,i,r=[],s,o;const a={4:cq,6:uq,8:hq,10:dq,12:fq,20:pq};function l(){e=new $t.exports.World,e.gravity.set(0,0,-9.8*100),e.broadphase=new $t.exports.NaiveBroadphase,e.solver.iterations=16;let y=new $t.exports.Body({mass:0,shape:new $t.exports.Plane,material:Ei.floorBodyMaterial});e.add(y);let v;v=new $t.exports.Body({mass:0,shape:new $t.exports.Plane,material:Ei.barrierBodyMaterial}),v.quaternion.setFromAxisAngle(new $t.exports.Vec3(1,0,0),Math.PI/2),v.position.set(0,10,0),e.add(v),v=new $t.exports.Body({mass:0,shape:new $t.exports.Plane,material:Ei.barrierBodyMaterial}),v.quaternion.setFromAxisAngle(new $t.exports.Vec3(1,0,0),-Math.PI/2),v.position.set(0,-10,0),e.add(v),v=new $t.exports.Body({mass:0,shape:new $t.exports.Plane,material:Ei.barrierBodyMaterial}),v.quaternion.setFromAxisAngle(new $t.exports.Vec3(0,1,0),-Math.PI/2),v.position.set(20,0,0),e.add(v),v=new $t.exports.Body({mass:0,shape:new $t.exports.Plane,material:Ei.barrierBodyMaterial}),v.quaternion.setFromAxisAngle(new $t.exports.Vec3(0,1,0),Math.PI/2),v.position.set(-20,0,0),e.add(v),Ei.setWorld(e)}function c(y){n=new hC,o=y.clientWidth,s=y.clientHeight,t=new Sn(40,o/s,.01,200),t.position.set(0,0,40),i=new zh({antialias:!0,alpha:!0}),i.setClearColor(0,0),i.setSize(o,s),i.shadowMap.enabled=!0,i.shadowMap.type=WA,y.appendChild(i.domElement);let v=new Xy(15791611,.3);n.add(v);let m=new $y(15720405,1.3);m.position.x=20,m.position.y=20,m.position.z=30,m.target.position.set(0,0,0),m.castShadow=!0,n.add(m);const g=new Sa;g.opacity=.5;const w=new S5(o,s,1,1),b=new Mn(w,g);b.receiveShadow=!0,n.add(b)}function h(y,v){u(),Object.entries(y).forEach(m=>{const[g,w]=m;for(let b=0;b<w;b++){const E=new a[g];E.getObject().position.x=-10+b,E.getObject().position.y=-5+b,E.getObject().position.z=2,E.getObject().rotation.x=(40+b)*Math.PI/180;let S=Math.random()*10,k=Math.random()*100;E.getObject().body.velocity.set(25+k,40+S,15+k),E.getObject().body.angularVelocity.set(20*Math.random()-10,20*Math.random()-10,20*Math.random()-10),n.add(E.getObject()),E.updateBodyFromMesh(),r.push(E)}}),Ei.unpreparedRoll(r,m=>{v(m)})}function u(){r.forEach(y=>{const v=y.getObject();n.remove(v),v.body&&e.remove(v.body)}),r=[]}function d(){f(),p(),requestAnimationFrame(d)}function f(){e.step(1/60),r.forEach(y=>{y.updateMeshFromBody()})}function p(){i.render(n,t)}return{initThree:c,initCannon:l,animate:d,throwDice:h,clearDice:u}}const gq={name:"ThreeDice",setup(){const{initThree:e,initCannon:t,animate:n,throwDice:i,clearDice:r}=mq(),s=[4,6,8,10,12,20],o="d",a=ur({diceTray:null,isRolling:!1,result:Qe(()=>d()),formula:"",upsideValues:{},addition:0,diceToRoll:{6:1}});_c(()=>{a.formula=h()});function l(){console.log("setting formula");const y=new RegExp("[0-9]+"+o+"("+s.join("|")+")","g"),v=a.formula.match(y)||[],m={};let g=a.formula.slice();v.forEach(w=>{g=g.replace(w,"");let b=parseInt(w,10);const E=w.replace(b,"").replace(o,"");for(;b>0;)m[E]=m[E]||0,m[E]++,b--}),a.diceToRoll=sn({},m),a.addition=c(g)}function c(y){console.log("getting addition");let v=0;const m=new RegExp("[+|-][0-9]+","g");return(y.replace(/\s/g,"").match(m)||[]).forEach(w=>{v+=parseInt(w,10)}),v}function h(){console.log("getting formula");let y="";return Object.entries(a.diceToRoll).forEach(v=>{const[m,g]=v;y+=(y?" + ":"")+g+o+m}),y.slice()+(a.addition?" + "+a.addition:"")}function u(y){a.diceToRoll[y]=a.diceToRoll[y]||0,a.diceToRoll[y]++}function d(){console.log("getting result");let y=0;return Object.values(a.upsideValues).forEach(v=>{v.forEach(m=>{y+=m})}),y}function f(){a.upsideValues={},a.diceToRoll={},a.addition=0,r()}function p(){a.isRolling=!0,i(a.diceToRoll,y=>{a.upsideValues=y,a.isRolling=!1})}return Tr(()=>{e(a.diceTray),t(),n()}),Fo(sn({},UN(a)),{diceTypes:s,diceSymbol:o,addDice:u,clearRoll:f,formulaToDice:l,roll:p})}},vq={id:"controlpanel"},yq=["onClick"],_q=["disabled"],bq=["disabled"],wq=["disabled"],xq={id:"resultpanel"},Eq={key:0},Sq={id:"dicetray",ref:"diceTray"};function Tq(e,t,n,i,r,s){return we(),De(It,null,[(we(),bt(Yp,{to:"aside"},[Ee("div",vq,[(we(!0),De(It,null,Ur(i.diceTypes,o=>(we(),De("a",{key:o,onClick:a=>i.addDice(o)},Je(i.diceSymbol)+Je(o),9,yq))),128)),Mi(Ee("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.formula=o),type:"text",disabled:e.isRolling,onBlur:t[1]||(t[1]=(...o)=>i.formulaToDice&&i.formulaToDice(...o))},null,40,_q),[[Hu,e.formula]]),Ee("button",{disabled:e.isRolling,onClick:t[2]||(t[2]=(...o)=>i.roll&&i.roll(...o))},"Throw me maybe",8,bq),Ee("button",{disabled:e.isRolling,onClick:t[3]||(t[3]=(...o)=>i.clearRoll&&i.clearRoll(...o))},"Clear me maybe",8,wq)]),Ee("div",xq,[Ki(" RESULT: "+Je(e.result)+" ",1),e.addition?(we(),De("span",Eq,"+ "+Je(e.addition),1)):_t("",!0)])])),Ee("div",Sq,null,512)],64)}var Mq=Ht(gq,[["render",Tq],["__scopeId","data-v-019959c2"]]);const Aq={components:{ThreeDice:Mq},props:{msg:{type:String,default:"Hello World",validator:e=>["Hello App","Hello World"].includes(e)}},setup(){const e=Xi(),t=Qe(()=>e.state.auth.user),n=kA(),i=st("My def text");return{loggedUser:t,text:i,greet:()=>{n.add({severity:"info",summary:"Hello",detail:i})},showFullscreenLodaing:()=>{e.dispatch("layout/startLoading",{type:"fullscreen"}),setTimeout(function(){e.dispatch("layout/finishLoading",{type:"fullscreen"})},2e3)},showContentLodaing:()=>{e.dispatch("layout/startLoading"),setTimeout(function(){e.dispatch("layout/finishLoading")},2e3)}}}},Cq=Ki(" Playground view "),Iq=Ee("br",null,null,-1),Rq={class:"p-input-filled"},Lq=Ee("br",null,null,-1),Pq=Ee("br",null,null,-1),Nq=Ee("br",null,null,-1),kq=Ee("br",null,null,-1);function Oq(e,t,n,i,r,s){const o=nt("prime-divider"),a=nt("prime-input-text"),l=nt("prime-button"),c=nt("three-dice"),h=nt("prime-card");return we(),bt(h,null,{title:Rt(()=>[Cq,tt(o)]),content:Rt(()=>[Ee("h2",null,Je(n.msg),1),Ee("div",null,"user data: "+Je(i.loggedUser),1),Iq,Ee("div",Rq,[tt(a,{modelValue:i.text,"onUpdate:modelValue":t[0]||(t[0]=u=>i.text=u)},null,8,["modelValue"]),tt(l,{label:"greet",icon:"pi pi-user",onClick:i.greet},null,8,["onClick"])]),Lq,tt(l,{label:"try fullscreen loading",class:"p-mr-1",onClick:i.showFullscreenLodaing},null,8,["onClick"]),tt(l,{label:"try content loading",onClick:i.showContentLodaing},null,8,["onClick"]),Pq,Ki(" default date format: "+Je(e.$d(new Date("October 13, 2020 11:13:00"),"default"))+" ",1),Nq,kq,tt(c)]),_:1})}var Dq=Ht(Aq,[["render",Oq]]);const Fq=Ee("h1",{class:"p-mt-5"},null,-1),Bq=Ao({name:"TsTest",setup(e){console.log(1),console.log([1,2,3]);const i=st(238);return(r,s)=>{const o=nt("prime-card");return we(),bt(o,null,{title:Rt(()=>[Fq]),content:Rt(()=>[Ee("h2",null,Je(i.value),1)]),_:1})}}});var Vq=[{path:"/playground",name:"playground",component:Dq,meta:{layout:$r,requiresAuth:!1}},{path:"/playground/ts",name:"playground.ts",component:Bq,meta:{layout:$r}}];function bm(){const e=st({}),t=st([]),n=st([]),{makeRequest:i}=hm(),{auth:r,db:s}=dm(),o=Xi();async function a(f){await i({actions:async()=>{const p=await s.getRecord(s.tables.POSTS,f);e.value=s.getRecordData(p)},messages:{error:"posts.error while fetching post"},loading:!1})}async function l(f){await i({actions:async()=>{(await s.getRecords(s.tables.COMMENTS,{where:["postId","==",f]})).forEach(y=>{let v=s.getRecordData(y);v.id=y.id,n.value.push(v)})},messages:{error:"posts.error while fetching comments"},loading:!1})}async function c(){await i({actions:async()=>{s.watchRecords(s.tables.POSTS,f=>{t.value=[],f.forEach(p=>{const y=s.getRecordData(p);y.id=p.id,t.value.push(y)})},{order:["createdOn","desc"]})},messages:{error:"posts.error while fetching posts"},loading:!1})}async function h(f){await i({actions:async()=>await s.addRecord(s.tables.POSTS,{createdOn:s.getServerTime(),content:f.content,userId:r.getCurrentUser().uid,userName:o.state.auth.user.name,comments:0,likes:0}),messages:{error:"posts.error while creating post"}})}async function u(f,p){await i({actions:async()=>{await s.addRecord(s.tables.COMMENTS,{createdOn:new Date,content:f,postId:p.id,userId:r.getCurrentUser().uid,userName:o.state.auth.user.name}),await s.updateRecord(s.tables.POSTS,p.id,{comments:parseInt(p.comments)+1})},messages:{error:"posts.error while creating comment"}})}async function d(f){await i({actions:async()=>{const p=r.getCurrentUser().uid,y=`${p}_${f.id}`;let v=1;const m=await s.getRecord(s.tables.LIKES,y);s.doesRecordExist(m)?(await s.deleteRecord(s.tables.LIKES,y),v=-1):await s.setRecord(s.tables.LIKES,y,{postId:f.id,userId:p}),await s.updateRecord(s.tables.POSTS,f.id,{likes:parseInt(f.likes)+v})},messages:{error:"posts.error while adding like"}})}return{post:e,posts:t,fetchPost:a,fetchPosts:c,createPost:h,addComment:u,likePost:d,fetchComments:l,comments:n}}const Uq={props:{post:{type:Object,required:!0}},setup(){const{addComment:e}=bm();return{comment:st(""),addComment:e}}},zq=["disabled"];function Hq(e,t,n,i,r,s){return we(),De(It,null,[Ee("a",null,"comments "+Je(n.post.comments),1),Ee("div",null,[Ee("form",{onSubmit:t[2]||(t[2]=i_(()=>{},["prevent"]))},[Mi(Ee("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.comment=o)},null,512),[[Hu,i.comment,void 0,{trim:!0}]]),Ee("button",{disabled:i.comment=="",class:"button",onClick:t[1]||(t[1]=o=>i.addComment(i.comment,n.post))},"add comment",8,zq)],32)])],64)}var Wq=Ht(Uq,[["render",Hq]]);const Gq={components:{PostsComment:Wq},setup(){const e=Xi(),t=Qe(()=>e.state.auth.user),{posts:n,fetchPosts:i,createPost:r,likePost:s}=bm(),o=st({content:""});Tr(()=>{i()});const a=st("");return{user:t,newPost:o,posts:n,createPost:r,comment:a,likePost:s}}},$q=Ee("h1",null,"CHAT",-1),jq={class:"col1"},qq={class:"profile"},Kq={class:"create-post"},Xq=Ee("p",null,"create new post",-1),Yq=["disabled"],Zq=Ee("div",{class:"col2"},null,-1),Jq={key:0},Qq=["onClick"],e6=["onClick"],t6={key:1},n6=Ee("p",{class:"no-results"},"There are currently no posts",-1),i6=[n6];function r6(e,t,n,i,r,s){const o=nt("posts-comment"),a=nt("prime-card");return we(),bt(a,null,{title:Rt(()=>[$q]),content:Rt(()=>[Ee("div",null,[Ee("section",null,[Ee("div",jq,[Ee("div",qq,[Ee("h5",null,Je(i.user.name),1),Ee("p",null,Je(i.user.title),1),Ee("div",Kq,[Xq,Ee("form",{onSubmit:t[2]||(t[2]=i_(()=>{},["prevent"]))},[Mi(Ee("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.newPost.content=l)},null,512),[[Hu,i.newPost.content,void 0,{trim:!0}]]),Ee("button",{disabled:i.newPost.content==="",class:"button",onClick:t[1]||(t[1]=l=>i.createPost(i.newPost))},"post",8,Yq)],32)])])]),Zq])]),i.posts.length?(we(),De("div",Jq,[(we(!0),De(It,null,Ur(i.posts,l=>(we(),De("div",{key:l.id,class:"post"},[Ee("h5",null,Je(l.userName),1),Ee("span",null,Je(l.createdOn.toDate()),1),Ee("p",null,Je(l.content),1),Ee("ul",null,[Ee("li",null,[tt(o,{post:l},null,8,["post"])]),Ee("li",null,[Ee("a",{onClick:c=>i.likePost(l)},"likes "+Je(l.likes),9,Qq)]),Ee("li",null,[Ee("a",{onClick:c=>e.$router.push({name:"posts.show",params:{id:l.id}})},"view full post",8,e6)])])]))),128))])):(we(),De("div",t6,i6))]),_:1})}var s6=Ht(Gq,[["render",r6]]);const o6={setup(){const{post:e,comments:t,fetchPost:n,fetchComments:i}=bm(),r=$M();return Tr(()=>{n(r.params.id),i(r.params.id)}),{post:e,comments:t}}},a6={class:"p-container"},l6={class:"post"},c6={class:"comments"},u6=Ee("hr",null,null,-1);function h6(e,t,n,i,r,s){return we(),De("div",a6,[Ee("div",l6,[Ee("h5",null,Je(i.post.userName),1),Ee("span",null,Je(i.post.createdOn?i.post.createdOn.toDate():""),1),Ee("p",null,Je(i.post.content),1),Ee("ul",null,[Ee("li",null,[Ee("a",null,"comments "+Je(i.post.comments),1)]),Ee("li",null,[Ee("a",null,"likes "+Je(i.post.likes),1)])])]),Mi(Ee("div",c6,[(we(!0),De(It,null,Ur(i.comments,o=>(we(),De("div",{key:o.id,class:"comment"},[u6,Ee("p",null,Je(o.userName),1),Ee("span",null,Je(o.createdOn.toDate()),1),Ee("p",null,Je(o.content),1)]))),128))],512),[[PM,i.comments.length]])])}var d6=Ht(o6,[["render",h6]]),f6=[{path:"/posts",name:"posts.list",component:s6,meta:{requiresAuth:!0,layout:$r}},{path:"/posts/:id",name:"posts.show",component:d6,meta:{requiresAuth:!0,layout:$r}}];const p6={components:{DopeAuth:zA}},m6={class:"p-d-flex p-jc-center"};function g6(e,t,n,i,r,s){const o=nt("dope-auth");return we(),De("div",m6,[tt(o,{class:"auth-window"})])}var v6=Ht(p6,[["render",g6],["__scopeId","data-v-0153770e"]]),y6=[{path:"/auth",name:"auth",component:v6,meta:{layout:$r}}];const _6={components:{DopePlanner:BA}};function b6(e,t,n,i,r,s){const o=nt("dope-planner");return we(),bt(o)}var w6=Ht(_6,[["render",b6]]),x6=[{path:"/planner",name:"planner",component:w6,meta:{layout:$r,requiresAuth:!0}}];const E6={components:{PrimeBadge:w_},setup(){const e=Xi(),t=Qe(()=>e.state.auth.user),{posts:n,fetchPosts:i,createPost:r,likePost:s}=bm(),o=st({content:""}),a=st("");return Tr(i),{currentUser:t,newPost:o,posts:n,createPost:r,comment:a,likePost:s}}},S6={key:0,class:"post-list"},T6={key:0},M6=["onClick"],A6={key:0},C6={class:"post-form"};function I6(e,t,n,i,r,s){const o=nt("prime-badge"),a=nt("dope-form-field"),l=nt("prime-button");return we(),De("div",{key:i.posts.length,class:"p-component chatbox"},[i.posts.length?(we(),De("div",S6,[(we(!0),De(It,null,Ur(i.posts,c=>(we(),De("div",{key:c.id,class:kt(["post",{own:c.userName==i.currentUser.name}])},[tt(o,{value:c.userName[0],severity:"warning"},null,8,["value"]),Ee("div",null,[c.userName!==i.currentUser.name?(we(),De("small",T6,Je(c.userName),1)):_t("",!0),Ee("p",null,Je(c.content),1)]),Mi(Ee("a",{onClick:h=>i.likePost(c)},[Ee("i",{class:kt(["pi pi-thumbs-up",{temp:!c.likes}])},null,2),c.likes>1?(we(),De("span",A6,Je(c.likes),1)):_t("",!0)],8,M6),[[PM,c.likes]])],2))),128))])):_t("",!0),Ee("div",C6,[tt(a,{modelValue:i.newPost.content,"onUpdate:modelValue":t[0]||(t[0]=c=>i.newPost.content=c),modelModifiers:{trim:!0},"show-error":!1,"deep-props":{placeholder:"Aa..."},field:"textarea",name:"post",rules:"required",class:"new-post"},null,8,["modelValue","deep-props"]),tt(l,{disabled:i.newPost.content==="",class:"p-button-rounded",icon:"pi pi-send",onClick:t[1]||(t[1]=c=>{i.createPost(i.newPost),i.newPost.content=""})},null,8,["disabled"])])])}var R6=Ht(E6,[["render",I6],["__scopeId","data-v-68d2e64e"]]);const L6={components:{DopeChat:R6}};function P6(e,t,n,i,r,s){const o=nt("dope-chat");return we(),bt(o)}var N6=Ht(L6,[["render",P6]]),k6=[{path:"/chat",name:"chat",component:N6,meta:{layout:$r,requiresAuth:!0}}];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},D6=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},TC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,h=s>>2,u=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[h],n[u],n[d],n[f])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(O6(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):D6(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const u=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||u==null)throw Error();const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),u!==64){const p=c<<6&192|u;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},F6=function(e){try{return TC.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MC(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function AC(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function CC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B6(){return Cn().indexOf("Electron/")>=0}function IC(){const e=Cn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function V6(){return Cn().indexOf("MSAppHost/")>=0}function N_(){return typeof indexedDB=="object"}function U6(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}function z6(){return!(typeof navigator=="undefined"||!navigator.cookieEnabled)}function H6(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="FirebaseError";class Wa extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=W6,Object.setPrototypeOf(this,Wa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lo.prototype.create)}}class Lo{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?G6(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Wa(r,a,i)}}function G6(e,t){return e.replace($6,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const $6=/\{\$([^}]+)}/g;function j6(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function cp(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(BS(s)&&BS(o)){if(!cp(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function BS(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function au(e){const t={};return e.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function lu(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function q6(e,t){const n=new K6(e,t);return n.subscribe.bind(n)}class K6{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,i){let r;if(t===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");X6(t,["next","error","complete"])?r=t:r={next:t,error:n,complete:i},r.next===void 0&&(r.next=hv),r.error===void 0&&(r.error=hv),r.complete===void 0&&(r.complete=hv);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(i){typeof console!="undefined"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X6(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function hv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=1e3,Z6=2,J6=4*60*60*1e3,Q6=.5;function e8(e,t=Y6,n=Z6){const i=t*Math.pow(n,e),r=Math.round(Q6*i*(Math.random()-.5)*2);return Math.min(J6,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e){return e&&e._delegate?e._delegate:e}class cr{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new ch;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(i8(t))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Qo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qo){return this.instances.has(t)}getOptions(t=Qo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(!!i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:n8(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Qo){return this.component?this.component.multipleInstances?t:Qo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n8(e){return e===Qo?void 0:e}function i8(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new t8(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ct||(Ct={}));const s8={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},o8=Ct.INFO,a8={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},l8=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=a8[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wm{constructor(t){this.name=t,this._logLevel=o8,this._logHandler=l8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?s8[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...t),this._logHandler(this,Ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...t),this._logHandler(this,Ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...t),this._logHandler(this,Ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...t),this._logHandler(this,Ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...t),this._logHandler(this,Ct.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(u8(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function u8(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qy="@firebase/app",VS="0.7.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new wm("@firebase/app"),h8="@firebase/app-compat",d8="@firebase/analytics-compat",f8="@firebase/analytics",p8="@firebase/app-check-compat",m8="@firebase/app-check",g8="@firebase/auth",v8="@firebase/auth-compat",y8="@firebase/database",_8="@firebase/database-compat",b8="@firebase/functions",w8="@firebase/functions-compat",x8="@firebase/installations",E8="@firebase/installations-compat",S8="@firebase/messaging",T8="@firebase/messaging-compat",M8="@firebase/performance",A8="@firebase/performance-compat",C8="@firebase/remote-config",I8="@firebase/remote-config-compat",R8="@firebase/storage",L8="@firebase/storage-compat",P8="@firebase/firestore",N8="@firebase/firestore-compat",k8="firebase",O8="9.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="[DEFAULT]",D8={[Qy]:"fire-core",[h8]:"fire-core-compat",[f8]:"fire-analytics",[d8]:"fire-analytics-compat",[m8]:"fire-app-check",[p8]:"fire-app-check-compat",[g8]:"fire-auth",[v8]:"fire-auth-compat",[y8]:"fire-rtdb",[_8]:"fire-rtdb-compat",[b8]:"fire-fn",[w8]:"fire-fn-compat",[x8]:"fire-iid",[E8]:"fire-iid-compat",[S8]:"fire-fcm",[T8]:"fire-fcm-compat",[M8]:"fire-perf",[A8]:"fire-perf-compat",[C8]:"fire-rc",[I8]:"fire-rc-compat",[R8]:"fire-gcs",[L8]:"fire-gcs-compat",[P8]:"fire-fst",[N8]:"fire-fst-compat","fire-js":"fire-js",[k8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=new Map,e0=new Map;function F8(e,t){try{e.container.addComponent(t)}catch(n){k_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Er(e){const t=e.name;if(e0.has(t))return k_.debug(`There were multiple attempts to register component ${t}.`),!1;e0.set(t,e);for(const n of up.values())F8(n,e);return!0}function Po(e,t){return e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},hp=new Lo("app","Firebase",B8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw hp.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=O8;function U8(e,t={}){typeof t!="object"&&(t={name:t});const n=Object.assign({name:RC,automaticDataCollectionEnabled:!1},t),i=n.name;if(typeof i!="string"||!i)throw hp.create("bad-app-name",{appName:String(i)});const r=up.get(i);if(r){if(cp(e,r.options)&&cp(n,r.config))return r;throw hp.create("duplicate-app",{appName:i})}const s=new r8(i);for(const a of e0.values())s.addComponent(a);const o=new V8(e,n,s);return up.set(i,o),o}function xm(e=RC){const t=up.get(e);if(!t)throw hp.create("no-app",{appName:e});return t}function zi(e,t,n){var i;let r=(i=D8[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),k_.warn(a.join(" "));return}Er(new cr(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(e){Er(new cr("platform-logger",t=>new c8(t),"PRIVATE")),zi(Qy,VS,e),zi(Qy,VS,"esm2017"),zi("fire-js","")}z8("");var H8="firebase",W8="9.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi(H8,W8,"app");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Map,G8={activated:!1,tokenObservers:[]},$8={initialized:!1,enabled:!1};function ri(e){return LC.get(e)||G8}function Is(e,t){LC.set(e,t)}function Em(){return $8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="https://content-firebaseappcheck.googleapis.com/v1beta",j8="exchangeRecaptchaToken",q8="exchangeDebugToken",US={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},K8=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(t,n,i,r,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new ch,await Y8(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new ch,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Y8(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Bi=new Lo("appCheck","AppCheck",Z8);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function NC(e){if(!ri(e).activated)throw Bi.create("use-before-activation",{appName:e.name})}function J8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function kC(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),i=Math.floor((t-n*3600*24)/3600),r=Math.floor((t-n*3600*24-i*3600)/60),s=t-n*3600*24-i*3600-r*60;let o="";return n&&(o+=tf(n)+"d:"),i&&(o+=tf(i)+"h:"),o+=tf(r)+"m:"+tf(s)+"s",o}function tf(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC({url:e,body:t},n){const i={"Content-Type":"application/json"},r=n.getImmediate({optional:!0});r&&(i["X-Firebase-Client"]=r.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(t),headers:i};let o;try{o=await fetch(e,s)}catch(u){throw Bi.create("fetch-network-error",{originalErrorMessage:u.message})}if(o.status!==200)throw Bi.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(u){throw Bi.create("fetch-parse-error",{originalErrorMessage:u.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Bi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=Number(l[1])*1e3,h=Date.now();return{token:a.attestationToken,expireTimeMillis:h+c,issuedAtTimeMillis:h}}function Q8(e,t){const{projectId:n,appId:i,apiKey:r}=e.options;return{url:`${PC}/projects/${n}/apps/${i}:${j8}?key=${r}`,body:{recaptcha_token:t}}}function e9(e,t){const{projectId:n,appId:i,apiKey:r}=e.options;return{url:`${PC}/projects/${n}/apps/${i}:${q8}?key=${r}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9="firebase-app-check-database",n9=1,uh="firebase-app-check-store",DC="debug-token";let nf=null;function FC(){return nf||(nf=new Promise((e,t)=>{try{const n=indexedDB.open(t9,n9);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var r;t(Bi.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(uh,{keyPath:"compositeKey"})}}}catch(n){t(Bi.create("storage-open",{originalErrorMessage:n.message}))}}),nf)}function i9(e){return VC(UC(e))}function r9(e,t){return BC(UC(e),t)}function s9(e){return BC(DC,e)}function o9(){return VC(DC)}async function BC(e,t){const i=(await FC()).transaction(uh,"readwrite"),s=i.objectStore(uh).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Bi.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}async function VC(e){const n=(await FC()).transaction(uh,"readonly"),r=n.objectStore(uh).get(e);return new Promise((s,o)=>{r.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(Bi.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function UC(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new wm("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a9(e){if(N_()){let t;try{t=await i9(e)}catch(n){hh.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function HS(e,t){return N_()?r9(e,t).catch(n=>{hh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function l9(){let e;try{e=await o9()}catch{}if(e)return e;{const t=J8();return s9(t).catch(n=>hh.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return Em().enabled}async function HC(){const e=Em();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function c9(){const e=H6(),t=Em();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new ch;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(l9())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9={error:"UNKNOWN_ERROR"};function h9(e){return TC.encodeString(JSON.stringify(e),!1)}async function t0(e,t=!1){const n=e.app;NC(n);const i=ri(n);let r=i.token,s;if(!r){const l=await i.cachedTokenPromise;l&&dp(l)&&(r=l)}if(!t&&r&&dp(r))return{token:r.token};let o=!1;if(zC()){i.exchangeTokenPromise||(i.exchangeTokenPromise=OC(e9(n,await HC()),e.platformLoggerProvider).then(c=>(i.exchangeTokenPromise=void 0,c)),o=!0);const l=await i.exchangeTokenPromise;return await HS(n,l),Is(n,Object.assign(Object.assign({},i),{token:l})),{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(l=>(i.exchangeTokenPromise=void 0,l)),o=!0),r=await i.exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?hh.warn(l.message):hh.error(l),s=l}let a;return r?(a={token:r.token},Is(n,Object.assign(Object.assign({},i),{token:r})),await HS(n,r)):a=f9(s),o&&$C(n,a),a}function WC(e,t,n,i){const{app:r}=e,s=ri(r),o={next:n,error:i,type:t};if(Is(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&dp(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),WS(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>WS(e))}function GC(e,t){const n=ri(e),i=n.tokenObservers.filter(r=>r.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Is(e,Object.assign(Object.assign({},n),{tokenObservers:i}))}function WS(e){const{app:t}=e,n=ri(t);let i=n.tokenRefresher;i||(i=d9(e),Is(t,Object.assign(Object.assign({},n),{tokenRefresher:i}))),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function d9(e){const{app:t}=e;return new X8(async()=>{const n=ri(t);let i;if(n.token?i=await t0(e,!0):i=await t0(e),i.error)throw i.error},()=>!0,()=>{const n=ri(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},US.RETRIAL_MIN_WAIT,US.RETRIAL_MAX_WAIT)}function $C(e,t){const n=ri(e).tokenObservers;for(const i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function dp(e){return e.expireTimeMillis-Date.now()>0}function f9(e){return{token:h9(u9),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(t,n){this.app=t,this.platformLoggerProvider=n}_delete(){const{tokenObservers:t}=ri(this.app);for(const n of t)GC(this.app,n.next);return Promise.resolve()}}function m9(e,t){return new p9(e,t)}function g9(e){return{getToken:t=>t0(e,t),addTokenListener:t=>WC(e,"INTERNAL",t),removeTokenListener:t=>GC(e.app,t)}}const v9="@firebase/app-check",y9="0.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="https://www.google.com/recaptcha/api.js";function b9(e,t){const n=ri(e),i=new ch;Is(e,Object.assign(Object.assign({},n),{reCAPTCHAState:{initialized:i}}));const r=w9(e),s=zS(!1);return s?GS(e,t,s,r,i):S9(()=>{const o=zS(!1);if(!o)throw new Error("no recaptcha");GS(e,t,o,r,i)}),i.promise}function GS(e,t,n,i,r){n.ready(()=>{E9(e,t,n,i),r.resolve(n)})}function w9(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function x9(e){NC(e);const n=await ri(e).reCAPTCHAState.initialized.promise;return new Promise((i,r)=>{const s=ri(e).reCAPTCHAState;n.ready(()=>{i(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function E9(e,t,n,i){const r=n.render(i,{sitekey:t,size:"invisible"}),s=ri(e);Is(e,Object.assign(Object.assign({},s),{reCAPTCHAState:Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:r})}))}function S9(e){const t=document.createElement("script");t.src=_9,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t;M9(this._throttleData);const n=await x9(this._app).catch(r=>{throw Bi.create("recaptcha-error")});let i;try{i=await OC(Q8(this._app,n),this._platformLoggerProvider)}catch(r){throw r.code==="fetch-status-error"?(this._throttleData=T9(Number((t=r.customData)===null||t===void 0?void 0:t.httpStatus),this._throttleData),Bi.create("throttled",{time:kC(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):r}return this._throttleData=null,i}initialize(t){this._app=t,this._platformLoggerProvider=Po(t,"platform-logger"),b9(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof O_?this._siteKey===t._siteKey:!1}}function T9(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+K8,httpStatus:e};{const n=t?t.backoffCount:0,i=e8(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+i,httpStatus:e}}}function M9(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Bi.create("throttled",{time:kC(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(e=xm(),t){e=on(e);const n=Po(e,"app-check");if(Em().initialized||c9(),zC()&&HC().then(r=>console.log(`App Check debug token: ${r}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return r;throw Bi.create("already-initialized",{appName:e.name})}const i=n.initialize({options:t});return C9(e,t.provider,t.isTokenAutoRefreshEnabled),ri(e).isTokenAutoRefreshEnabled&&WC(i,"INTERNAL",()=>{}),i}function C9(e,t,n){const i=ri(e),r=Object.assign(Object.assign({},i),{activated:!0});r.provider=t,r.cachedTokenPromise=a9(e).then(s=>(s&&dp(s)&&(Is(e,Object.assign(Object.assign({},ri(e)),{token:s})),$C(e,{token:s.token})),s)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,Is(e,r),r.provider.initialize(e)}const I9="app-check",$S="app-check-internal";function R9(){Er(new cr(I9,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return m9(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider($S).initialize()})),Er(new cr($S,e=>{const t=e.getProvider("app-check").getImmediate();return g9(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),zi(v9,y9)}R9();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function D_(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function jC(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L9=jC,qC=new Lo("auth","Firebase",jC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new wm("@firebase/auth");function Ef(e,...t){jS.logLevel<=Ct.ERROR&&jS.error(`Auth (${Wh}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(e,...t){throw F_(e,...t)}function Hr(e,...t){return F_(e,...t)}function P9(e,t,n){const i=Object.assign(Object.assign({},L9()),{[t]:n});return new Lo("auth","Firebase",i).create(t,{appName:e.name})}function F_(e,...t){if(typeof e!="string"){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return qC.create(e,...t)}function et(e,t,...n){if(!e)throw F_(t,...n)}function ms(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ef(t),new Error(t)}function Rs(e,t){e||ms(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new Map;function gs(e){Rs(e instanceof Function,"Expected a class definition");let t=qS.get(e);return t?(Rs(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qS.set(e,t),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(e,t){const n=Po(e,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(cp(s,t!=null?t:{}))return r;Sr(r,"already-initialized")}return n.initialize({options:t})}function k9(e,t){const n=(t==null?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(gs);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){var e;return typeof self!="undefined"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function O9(){return KS()==="http:"||KS()==="https:"}function KS(){var e;return typeof self!="undefined"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O9()||AC()||"connection"in navigator)?navigator.onLine:!0}function F9(){if(typeof navigator=="undefined")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(t,n){this.shortDelay=t,this.longDelay=n,Rs(n>t,"Short delay should be less than long delay!"),this.isMobile=MC()||CC()}get(){return D9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(e,t){Rs(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9=new Gh(3e4,6e4);function Mc(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ac(e,t,n,i,r={}){return XC(e,r,async()=>{let s={},o={};i&&(t==="GET"?o=i:s={body:JSON.stringify(i)});const a=Hh(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),KC.fetch()(YC(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function XC(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},B9),t);try{const r=new U9(e),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dv(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dv(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw dv(e,"email-already-in-use",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw P9(e,h,c);Sr(e,h)}}catch(r){if(r instanceof Wa)throw r;Sr(e,"network-request-failed")}}async function $h(e,t,n,i,r={}){const s=await Ac(e,t,n,i,r);return"mfaPendingCredential"in s&&Sr(e,"multi-factor-auth-required",{_serverResponse:s}),s}function YC(e,t,n,i){const r=`${t}${n}?${i}`;return e.config.emulator?B_(e.config,r):`${e.config.apiScheme}://${r}`}class U9{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Hr(this.auth,"timeout")),V9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dv(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Hr(e,t,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(e,t){return Ac(e,"POST","/v1/accounts:delete",t)}async function H9(e,t){return Ac(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(e){if(!!e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function W9(e,t=!1){const n=on(e),i=await n.getIdToken(t),r=V_(i);et(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Cu(fv(r.auth_time)),issuedAtTime:Cu(fv(r.iat)),expirationTime:Cu(fv(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function fv(e){return Number(e)*1e3}function V_(e){const[t,n,i]=e.split(".");if(t===void 0||n===void 0||i===void 0)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const r=F6(n);return r?JSON.parse(r):(Ef("Failed to decode base64 JWT payload"),null)}catch(r){return Ef("Caught error parsing JWT payload as JSON",r),null}}function G9(e){const t=V_(e);return et(t,"internal-error"),et(typeof t.exp!="undefined","internal-error"),et(typeof t.iat!="undefined","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof Wa&&$9(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}function $9({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(e){var t;const n=e.auth,i=await e.getIdToken(),r=await dh(e,H9(n,{idToken:i}));et(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?X9(s.providerUserInfo):[],a=K9(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ZC(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,u)}async function q9(e){const t=on(e);await fp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function K9(e,t){return[...e.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function X9(e){return e.map(t=>{var{providerId:n}=t,i=D_(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y9(e,t){const n=await XC(e,{},async()=>{const i=Hh({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=YC(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",KC.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){et(t.idToken,"internal-error"),et(typeof t.idToken!="undefined","internal-error"),et(typeof t.refreshToken!="undefined","internal-error");const n="expiresIn"in t&&typeof t.expiresIn!="undefined"?Number(t.expiresIn):G9(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return et(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await Y9(t,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new fh;return i&&(et(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(et(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(et(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new fh,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(e,t){et(typeof e=="string"||typeof e=="undefined","internal-error",{appName:t})}class da{constructor(t){var{uid:n,auth:i,stsTokenManager:r}=t,s=D_(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new j9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.metadata=new ZC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await dh(this,this.stsTokenManager.getToken(this.auth,t));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return W9(this,t)}reload(){return q9(this)}_assign(t){this!==t&&(et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new da(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await fp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await dh(this,z9(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,r,s,o,a,l,c,h;const u=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:b,isAnonymous:E,providerData:S,stsTokenManager:k}=n;et(w&&k,t,"internal-error");const O=fh.fromJSON(this.name,k);et(typeof w=="string",t,"internal-error"),Js(u,t.name),Js(d,t.name),et(typeof b=="boolean",t,"internal-error"),et(typeof E=="boolean",t,"internal-error"),Js(f,t.name),Js(p,t.name),Js(y,t.name),Js(v,t.name),Js(m,t.name),Js(g,t.name);const W=new da({uid:w,auth:t,email:d,emailVerified:b,displayName:u,isAnonymous:E,photoURL:p,phoneNumber:f,tenantId:y,stsTokenManager:O,createdAt:m,lastLoginAt:g});return S&&Array.isArray(S)&&(W.providerData=S.map(U=>Object.assign({},U))),v&&(W._redirectEventId=v),W}static async _fromIdTokenResponse(t,n,i=!1){const r=new fh;r.updateFromServerResponse(n);const s=new da({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await fp(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}JC.type="NONE";const XS=JC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(e,t,n){return`firebase:${e}:${t}:${n}`}class Gl{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Sf(this.userKey,r.apiKey,s),this.fullPersistenceKey=Sf("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?da._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new Gl(gs(XS),t,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||gs(XS);const o=Sf(i,t.config.apiKey,t.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const u=da._fromJSON(t,h);c!==s&&(a=u),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Gl(s,t,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Gl(s,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(tI(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(QC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iI(t))return"Blackberry";if(rI(t))return"Webos";if(U_(t))return"Safari";if((t.includes("chrome/")||eI(t))&&!t.includes("edge/"))return"Chrome";if(nI(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=e.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function QC(e=Cn()){return/firefox\//i.test(e)}function U_(e=Cn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function eI(e=Cn()){return/crios\//i.test(e)}function tI(e=Cn()){return/iemobile/i.test(e)}function nI(e=Cn()){return/android/i.test(e)}function iI(e=Cn()){return/blackberry/i.test(e)}function rI(e=Cn()){return/webos/i.test(e)}function Sm(e=Cn()){return/iphone|ipad|ipod/i.test(e)}function Z9(e=Cn()){var t;return Sm(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function J9(){return IC()&&document.documentMode===10}function sI(e=Cn()){return Sm(e)||nI(e)||rI(e)||iI(e)||/windows phone/i.test(e)||tI(e)}function Q9(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(e,t=[]){let n;switch(e){case"Browser":n=YS(Cn());break;case"Worker":n=`${YS(Cn())}-${e}`;break;default:n=e}const i=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wh}/${i}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(t,n){this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZS(this),this.idTokenSubscription=new ZS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qC,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=gs(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Gl.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t)}}async initializeCurrentUser(t){var n;let i=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=i==null?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);(!r||r===s)&&(o==null?void 0:o.user)&&(i=o.user)}return i?i._redirectEventId?(et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await fp(t)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=F9()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?on(t):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(t))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Lo("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&gs(t)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[gs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return et(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?t.addObserver(n,i,r):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=oI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),t}}function Tm(e){return on(e)}class ZS{constructor(t){this.auth=t,this.observer=null,this.addObserver=q6(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(t){return ms("not implemented")}_linkToIdToken(t,n){return ms("not implemented")}_getReauthenticationResolver(t){return ms("not implemented")}}async function t7(e,t){return Ac(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n7(e,t){return $h(e,"POST","/v1/accounts:signInWithPassword",Mc(e,t))}async function i7(e,t){return Ac(e,"POST","/v1/accounts:sendOobCode",Mc(e,t))}async function r7(e,t){return i7(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s7(e,t){return $h(e,"POST","/v1/accounts:signInWithEmailLink",Mc(e,t))}async function o7(e,t){return $h(e,"POST","/v1/accounts:signInWithEmailLink",Mc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends z_{constructor(t,n,i,r=null){super("password",i),this._email=t,this._password=n,this._tenantId=r}static _fromEmailAndPassword(t,n){return new ph(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new ph(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return n7(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return s7(t,{email:this._email,oobCode:this._password});default:Sr(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return t7(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return o7(t,{idToken:n,email:this._email,oobCode:this._password});default:Sr(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(e,t){return $h(e,"POST","/v1/accounts:signInWithIdp",Mc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7="http://localhost";class Ma extends z_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Ma(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=n,s=D_(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Ma(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return $l(t,n)}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,$l(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,$l(t,n)}buildRequest(){const t={requestUri:a7,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Hh(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c7(e){const t=au(lu(e)).link,n=t?au(lu(t)).deep_link_id:null,i=au(lu(e)).deep_link_id;return(i?au(lu(i)).link:null)||i||n||t||e}class H_{constructor(t){var n,i,r,s,o,a;const l=au(lu(t)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,u=l7((r=l.mode)!==null&&r!==void 0?r:null);et(c&&h&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=c7(t);try{return new H_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this.providerId=Cc.PROVIDER_ID}static credential(t,n){return ph._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=H_.parseLink(n);return et(i,"argument-error"),ph._fromEmailAndCode(t,i.code,i.tenantId)}}Cc.PROVIDER_ID="password";Cc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh extends aI{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends jh{constructor(){super("facebook.com")}static credential(t){return Ma._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ao.credentialFromTaggedObject(t)}static credentialFromError(t){return ao.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ao.credential(t.oauthAccessToken)}catch{return null}}}ao.FACEBOOK_SIGN_IN_METHOD="facebook.com";ao.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends jh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ma._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return lo.credentialFromTaggedObject(t)}static credentialFromError(t){return lo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return lo.credential(n,i)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends jh{constructor(){super("github.com")}static credential(t){return Ma._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return co.credentialFromTaggedObject(t)}static credentialFromError(t){return co.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return co.credential(t.oauthAccessToken)}catch{return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo extends jh{constructor(){super("twitter.com")}static credential(t,n){return Ma._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return uo.credentialFromTaggedObject(t)}static credentialFromError(t){return uo.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return uo.credential(n,i)}catch{return null}}}uo.TWITTER_SIGN_IN_METHOD="twitter.com";uo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(e,t){return $h(e,"POST","/v1/accounts:signUp",Mc(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,r=!1){const s=await da._fromIdTokenResponse(t,i,r),o=JS(i);return new Aa({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const r=JS(i);return new Aa({user:t,providerId:r,_tokenResponse:i,operationType:n})}}function JS(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Wa{constructor(t,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,pp.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,r){return new pp(t,n,i,r)}}function lI(e,t,n,i){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pp._fromErrorAndOperation(e,s,t,i):s})}async function h7(e,t,n=!1){const i=await dh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Aa._forOperation(e,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(e,t,n=!1){const{auth:i}=e,r="reauthenticate";try{const s=await dh(e,lI(i,r,t,e),n);et(s.idToken,i,"internal-error");const o=V_(s.idToken);et(o,i,"internal-error");const{sub:a}=o;return et(e.uid===a,i,"user-mismatch"),Aa._forOperation(e,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sr(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(e,t,n=!1){const i="signIn",r=await lI(e,i,t),s=await Aa._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function f7(e,t){return cI(Tm(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(e,t,n){var i;et(((i=n.url)===null||i===void 0?void 0:i.length)>0,e,"invalid-continue-uri"),et(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(et(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(et(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(e,t,n){const i=on(e),r={requestType:"PASSWORD_RESET",email:t};n&&p7(i,r,n),await r7(i,r)}async function g7(e,t,n){const i=Tm(e),r=await u7(i,{returnSecureToken:!0,email:t,password:n}),s=await Aa._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function v7(e,t,n){return f7(on(e),Cc.credential(t,n))}function y7(e,t,n,i){return on(e).onAuthStateChanged(t,n,i)}function _7(e){return on(e).signOut()}const mp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mp,"1"),this.storage.removeItem(mp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b7(){const e=Cn();return U_(e)||Sm(e)}const w7=1e3,x7=10;class hI extends uI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=b7()&&Q9(),this.fallbackToPolling=sI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&t(n,r,i)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);J9()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,x7):r()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)})},w7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}hI.type="LOCAL";const E7=hI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI extends uI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}dI.type="SESSION";const fI=dI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(e){return Promise.all(e.map(async t=>{try{const n=await t;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(r=>r.isListeningto(t));if(n)return n;const i=new Mm(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await S7(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const r=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=W_("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(u){const d=u;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function M7(e){Wr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){return typeof Wr().WorkerGlobalScope!="undefined"&&typeof Wr().importScripts=="function"}async function A7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C7(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function I7(){return pI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebaseLocalStorageDb",R7=1,gp="firebaseLocalStorage",gI="fbase_key";class qh{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Am(e,t){return e.transaction([gp],t?"readwrite":"readonly").objectStore(gp)}function L7(){const e=indexedDB.deleteDatabase(mI);return new qh(e).toPromise()}function i0(){const e=indexedDB.open(mI,R7);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const i=e.result;try{i.createObjectStore(gp,{keyPath:gI})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const i=e.result;i.objectStoreNames.contains(gp)?t(i):(i.close(),await L7(),t(await i0()))})})}async function QS(e,t,n){const i=Am(e,!0).put({[gI]:t,value:n});return new qh(i).toPromise()}async function P7(e,t){const n=Am(e,!1).get(t),i=await new qh(n).toPromise();return i===void 0?null:i.value}function eT(e,t){const n=Am(e,!0).delete(t);return new qh(n).toPromise()}const N7=800,k7=3;class vI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await i0(),this.db)}async _withRetries(t){let n=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(n++>k7)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mm._getInstance(I7()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await A7(),!this.activeServiceWorker)return;this.sender=new T7(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);!i||((t=i[0])===null||t===void 0?void 0:t.fulfilled)&&((n=i[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||C7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await i0();return await QS(t,mp,"1"),await eT(t,mp),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>QS(i,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(i=>P7(i,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>eT(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const s=Am(r,!1).getAll();return new qh(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vI.type="LOCAL";const O7=vI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function F7(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=r=>{const s=Hr("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",D7().appendChild(i)})}function B7(e){return`__${e}${Math.floor(Math.random()*1e6)}`}new Gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(e,t){return t?gs(t):(et(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends z_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return $l(t,this._buildIdpRequest())}_linkToIdToken(t,n){return $l(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return $l(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function U7(e){return cI(e.auth,new G_(e),e.bypassAuthState)}function z7(e){const{auth:t,user:n}=e;return et(n,t,"internal-error"),d7(n,new G_(e),e.bypassAuthState)}async function H7(e){const{auth:t,user:n}=e;return et(n,t,"internal-error"),h7(n,new G_(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(t,n,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return U7;case"linkViaPopup":case"linkViaRedirect":return H7;case"reauthViaPopup":case"reauthViaRedirect":return z7;default:Sr(this.auth,"internal-error")}}resolve(t){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=new Gh(2e3,1e4);class Ol extends yI{constructor(t,n,i,r,s){super(t,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return et(t,this.auth,"internal-error"),t}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const t=W_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(t,W7.get())};t()}}Ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7="pendingRedirect",pv=new Map;class $7 extends yI{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=pv.get(this.auth._key());if(!t){try{const i=await j7(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(n){t=()=>Promise.reject(n)}pv.set(this.auth._key(),t)}return this.bypassAuthState||pv.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function j7(e,t){const n=K7(t),i=q7(e);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function q7(e){return gs(e._redirectPersistence)}function K7(e){return Sf(G7,e.config.apiKey,e.name)}async function X7(e,t,n=!1){const i=Tm(e),r=V7(i,t),o=await new $7(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y7=10*60*1e3;class Z7{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!J7(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!_I(t)){const r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Hr(this.auth,r))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Y7&&this.cachedEventUids.clear(),this.cachedEventUids.has(tT(t))}saveEventToCache(t){this.cachedEventUids.add(tT(t)),this.lastProcessedEventTime=Date.now()}}function tT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function _I({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function J7(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _I(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(e,t={}){return Ac(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tK=/^https?/;async function nK(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Q7(e);for(const n of t)try{if(iK(n))return}catch{}Sr(e,"unauthorized-domain")}function iK(e){const t=n0(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&i===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!tK.test(n))return!1;if(eK.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK=new Gh(3e4,6e4);function nT(){const e=Wr().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function sK(e){return new Promise((t,n)=>{var i,r,s;function o(){nT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nT(),n(Hr(e,"network-request-failed"))},timeout:rK.get()})}if(!((r=(i=Wr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Wr().gapi)===null||s===void 0)&&s.load)o();else{const a=B7("iframefcb");return Wr()[a]=()=>{gapi.load?o():n(Hr(e,"network-request-failed"))},F7(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw Tf=null,t})}let Tf=null;function oK(e){return Tf=Tf||sK(e),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK=new Gh(5e3,15e3),lK="__/auth/iframe",cK="emulator/auth/iframe",uK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dK(e){const t=e.config;et(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?B_(t,cK):`https://${e.config.authDomain}/${lK}`,i={apiKey:t.apiKey,appName:e.name,v:Wh},r=hK.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Hh(i).slice(1)}`}async function fK(e){const t=await oK(e),n=Wr().gapi;return et(n,e,"internal-error"),t.open({where:document.body,url:dK(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uK,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Hr(e,"network-request-failed"),a=Wr().setTimeout(()=>{s(o)},aK.get());function l(){Wr().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mK=500,gK=600,vK="_blank",yK="http://localhost";class iT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _K(e,t,n,i=mK,r=gK){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},pK),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Cn().toLowerCase();n&&(a=eI(c)?vK:n),QC(c)&&(t=t||yK,l.scrollbars="yes");const h=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(Z9(c)&&a!=="_self")return bK(t||"",a),new iT(null);const u=window.open(t||"",a,h);et(u,e,"popup-blocked");try{u.focus()}catch{}return new iT(u)}function bK(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wK="__/auth/handler",xK="emulator/auth/handler";function rT(e,t,n,i,r,s){et(e.config.authDomain,e,"auth-domain-config-required"),et(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Wh,eventId:r};if(t instanceof aI){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",j6(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(t instanceof jh){const l=t.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${EK(e)}?${Hh(a).slice(1)}`}function EK({config:e}){return e.emulator?B_(e,xK):`https://${e.authDomain}/${wK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="webStorageSupport";class SK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fI,this._completeRedirectFn=X7}async _openPopup(t,n,i,r){var s;Rs((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=rT(t,n,i,n0(),r);return _K(t,o,W_())}async _openRedirect(t,n,i,r){return await this._originValidation(t),M7(rT(t,n,i,n0(),r)),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Rs(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(t){const n=await fK(t),i=new Z7(t);return n.register("authEvent",r=>(et(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(mv,{type:mv},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[mv];o!==void 0&&n(!!o),Sr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nK(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return sI()||U_()||Sm()}}const TK=SK;var sT="@firebase/auth",oT="0.19.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(i=>{var r;t(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);!n||(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function CK(e){Er(new cr("auth",(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=i.options;return(o=>{et(r&&!r.includes(":"),"invalid-api-key",{appName:o.name}),et(!(s!=null&&s.includes(":")),"argument-error",{appName:o.name});const a={apiKey:r,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oI(e)},l=new e7(o,a);return k9(l,n),l})(i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,i)=>{t.getProvider("auth-internal").initialize()})),Er(new cr("auth-internal",t=>{const n=Tm(t.getProvider("auth").getImmediate());return(i=>new MK(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zi(sT,oT,AK(e)),zi(sT,oT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(e=xm()){const t=Po(e,"auth");return t.isInitialized()?t.getImmediate():N9(e,{popupRedirectResolver:TK,persistence:[O7,E7,fI]})}CK("Browser");var RK=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ue,$_=$_||{},ut=RK||self;function vp(){}function r0(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Kh(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function LK(e){return Object.prototype.hasOwnProperty.call(e,gv)&&e[gv]||(e[gv]=++PK)}var gv="closure_uid_"+(1e9*Math.random()>>>0),PK=0;function NK(e,t,n){return e.call.apply(e.bind,arguments)}function kK(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function Bn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Bn=NK:Bn=kK,Bn.apply(null,arguments)}function rf(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function zn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[r].apply(i,o)}}function No(){this.s=this.s,this.o=this.o}var OK=0,DK={};No.prototype.s=!1;No.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),OK!=0)){var e=LK(this);delete DK[e]}};No.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bI=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},wI=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,r=typeof e=="string"?e.split(""):e;for(let s=0;s<i;s++)s in r&&t.call(n,r[s],s,e)};function FK(e){e:{var t=CX;const n=e.length,i=typeof e=="string"?e.split(""):e;for(let r=0;r<n;r++)if(r in i&&t.call(void 0,i[r],r,e)){t=r;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function aT(e){return Array.prototype.concat.apply([],arguments)}function j_(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function yp(e){return/^[\s\xa0]*$/.test(e)}var lT=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ci(e,t){return e.indexOf(t)!=-1}function vv(e,t){return e<t?-1:e>t?1:0}var ui;e:{var cT=ut.navigator;if(cT){var uT=cT.userAgent;if(uT){ui=uT;break e}}ui=""}function q_(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function xI(e){const t={};for(const n in e)t[n]=e[n];return t}var hT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function EI(e,t){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)e[n]=i[n];for(let s=0;s<hT.length;s++)n=hT[s],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function K_(e){return K_[" "](e),e}K_[" "]=vp;function BK(e){var t=zK;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var VK=ci(ui,"Opera"),uc=ci(ui,"Trident")||ci(ui,"MSIE"),SI=ci(ui,"Edge"),s0=SI||uc,TI=ci(ui,"Gecko")&&!(ci(ui.toLowerCase(),"webkit")&&!ci(ui,"Edge"))&&!(ci(ui,"Trident")||ci(ui,"MSIE"))&&!ci(ui,"Edge"),UK=ci(ui.toLowerCase(),"webkit")&&!ci(ui,"Edge");function MI(){var e=ut.document;return e?e.documentMode:void 0}var _p;e:{var yv="",_v=function(){var e=ui;if(TI)return/rv:([^\);]+)(\)|;)/.exec(e);if(SI)return/Edge\/([\d\.]+)/.exec(e);if(uc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(UK)return/WebKit\/(\S+)/.exec(e);if(VK)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(_v&&(yv=_v?_v[1]:""),uc){var bv=MI();if(bv!=null&&bv>parseFloat(yv)){_p=String(bv);break e}}_p=yv}var zK={};function HK(){return BK(function(){let e=0;const t=lT(String(_p)).split("."),n=lT("9").split("."),i=Math.max(t.length,n.length);for(let o=0;e==0&&o<i;o++){var r=t[o]||"",s=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;e=vv(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||vv(r[2].length==0,s[2].length==0)||vv(r[2],s[2]),r=r[3],s=s[3]}while(e==0)}return 0<=e})}var o0;if(ut.document&&uc){var dT=MI();o0=dT||parseInt(_p,10)||void 0}else o0=void 0;var WK=o0,GK=function(){if(!ut.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ut.addEventListener("test",vp,t),ut.removeEventListener("test",vp,t)}catch{}return e}();function ei(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ei.prototype.h=function(){this.defaultPrevented=!0};function mh(e,t){if(ei.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(TI){e:{try{K_(t.nodeName);var r=!0;break e}catch{}r=!1}r||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:$K[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&mh.Z.h.call(this)}}zn(mh,ei);var $K={2:"touch",3:"pen",4:"mouse"};mh.prototype.h=function(){mh.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xh="closure_listenable_"+(1e6*Math.random()|0),jK=0;function qK(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=r,this.key=++jK,this.ca=this.fa=!1}function Cm(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Im(e){this.src=e,this.g={},this.h=0}Im.prototype.add=function(e,t,n,i,r){var s=e.toString();e=this.g[s],e||(e=this.g[s]=[],this.h++);var o=l0(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):(t=new qK(t,this.src,s,!!i,r),t.fa=n,e.push(t)),t};function a0(e,t){var n=t.type;if(n in e.g){var i=e.g[n],r=bI(i,t),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Cm(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function l0(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==i)return r}return-1}var X_="closure_lm_"+(1e6*Math.random()|0),wv={};function AI(e,t,n,i,r){if(i&&i.once)return II(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)AI(e,t[s],n,i,r);return null}return n=J_(n),e&&e[Xh]?e.N(t,n,Kh(i)?!!i.capture:!!i,r):CI(e,t,n,!1,i,r)}function CI(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=Kh(r)?!!r.capture:!!r,a=Z_(e);if(a||(e[X_]=a=new Im(e)),n=a.add(t,n,i,o,s),n.proxy)return n;if(i=KK(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)GK||(r=o),r===void 0&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(LI(t.toString()),i);else if(e.addListener&&e.removeListener)e.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function KK(){function e(n){return t.call(e.src,e.listener,n)}var t=XK;return e}function II(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)II(e,t[s],n,i,r);return null}return n=J_(n),e&&e[Xh]?e.O(t,n,Kh(i)?!!i.capture:!!i,r):CI(e,t,n,!0,i,r)}function RI(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)RI(e,t[s],n,i,r);else i=Kh(i)?!!i.capture:!!i,n=J_(n),e&&e[Xh]?(e=e.i,t=String(t).toString(),t in e.g&&(s=e.g[t],n=l0(s,n,i,r),-1<n&&(Cm(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.g[t],e.h--)))):e&&(e=Z_(e))&&(t=e.g[t.toString()],e=-1,t&&(e=l0(t,n,i,r)),(n=-1<e?t[e]:null)&&Y_(n))}function Y_(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[Xh])a0(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(LI(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Z_(t))?(a0(n,e),n.h==0&&(n.src=null,t[X_]=null)):Cm(e)}}}function LI(e){return e in wv?wv[e]:wv[e]="on"+e}function XK(e,t){if(e.ca)e=!0;else{t=new mh(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&Y_(e),e=n.call(i,t)}return e}function Z_(e){return e=e[X_],e instanceof Im?e:null}var xv="__closure_events_fn_"+(1e9*Math.random()>>>0);function J_(e){return typeof e=="function"?e:(e[xv]||(e[xv]=function(t){return e.handleEvent(t)}),e[xv])}function In(){No.call(this),this.i=new Im(this),this.P=this,this.I=null}zn(In,No);In.prototype[Xh]=!0;In.prototype.removeEventListener=function(e,t,n,i){RI(this,e,t,n,i)};function Vn(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,typeof t=="string")t=new ei(t,e);else if(t instanceof ei)t.target=t.target||e;else{var r=t;t=new ei(i,e),EI(t,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=sf(o,i,!0,t)&&r}if(o=t.g=e,r=sf(o,i,!0,t)&&r,r=sf(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)o=t.g=n[s],r=sf(o,i,!1,t)&&r}In.prototype.M=function(){if(In.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Cm(n[i]);delete e.g[t],e.h--}}this.I=null};In.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)};In.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};function sf(e,t,n,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&a0(e.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var Q_=ut.JSON.stringify;function YK(){var e=NI;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class ZK{constructor(){this.h=this.g=null}add(t,n){const i=PI.get();i.set(t,n),this.h?this.h.next=i:this.g=i,this.h=i}}var PI=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new JK,e=>e.reset());class JK{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function QK(e){ut.setTimeout(()=>{throw e},0)}function eb(e,t){c0||eX(),u0||(c0(),u0=!0),NI.add(e,t)}var c0;function eX(){var e=ut.Promise.resolve(void 0);c0=function(){e.then(tX)}}var u0=!1,NI=new ZK;function tX(){for(var e;e=YK();){try{e.h.call(e.g)}catch(n){QK(n)}var t=PI;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}u0=!1}function Rm(e,t){In.call(this),this.h=e||1,this.g=t||ut,this.j=Bn(this.kb,this),this.l=Date.now()}zn(Rm,In);Ue=Rm.prototype;Ue.da=!1;Ue.S=null;Ue.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vn(this,"tick"),this.da&&(tb(this),this.start()))}};Ue.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function tb(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}Ue.M=function(){Rm.Z.M.call(this),tb(this),delete this.g};function nb(e,t,n){if(typeof e=="function")n&&(e=Bn(e,n));else if(e&&typeof e.handleEvent=="function")e=Bn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:ut.setTimeout(e,t||0)}function kI(e){e.g=nb(()=>{e.g=null,e.i&&(e.i=!1,kI(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class nX extends No{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:kI(this)}M(){super.M(),this.g&&(ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gh(e){No.call(this),this.h=e,this.g={}}zn(gh,No);var fT=[];function OI(e,t,n,i){Array.isArray(n)||(n&&(fT[0]=n.toString()),n=fT);for(var r=0;r<n.length;r++){var s=AI(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function DI(e){q_(e.g,function(t,n){this.g.hasOwnProperty(n)&&Y_(t)},e),e.g={}}gh.prototype.M=function(){gh.Z.M.call(this),DI(this)};gh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lm(){this.g=!0}Lm.prototype.Aa=function(){this.g=!1};function iX(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var u=h.split("_");o=2<=u.length&&u[1]=="type"?o+(h+"="+c+"&"):o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+`
`+n+`
`+o})}function rX(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+`
`+n+`
`+s+" "+o})}function Dl(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+oX(e,n)+(i?" "+i:"")})}function sX(e,t){e.info(function(){return"TIMEOUT: "+t})}Lm.prototype.info=function(){};function oX(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Q_(n)}catch{return t}}var Ga={},pT=null;function Pm(){return pT=pT||new In}Ga.Ma="serverreachability";function FI(e){ei.call(this,Ga.Ma,e)}zn(FI,ei);function vh(e){const t=Pm();Vn(t,new FI(t,e))}Ga.STAT_EVENT="statevent";function BI(e,t){ei.call(this,Ga.STAT_EVENT,e),this.stat=t}zn(BI,ei);function fi(e){const t=Pm();Vn(t,new BI(t,e))}Ga.Na="timingevent";function VI(e,t){ei.call(this,Ga.Na,e),this.size=t}zn(VI,ei);function Yh(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return ut.setTimeout(function(){e()},t)}var Nm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},UI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ib(){}ib.prototype.h=null;function mT(e){return e.h||(e.h=e.i())}function zI(){}var Zh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rb(){ei.call(this,"d")}zn(rb,ei);function sb(){ei.call(this,"c")}zn(sb,ei);var h0;function km(){}zn(km,ib);km.prototype.g=function(){return new XMLHttpRequest};km.prototype.i=function(){return{}};h0=new km;function Jh(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new gh(this),this.P=aX,e=s0?125:void 0,this.W=new Rm(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new HI}function HI(){this.i=null,this.g="",this.h=!1}var aX=45e3,d0={},bp={};Ue=Jh.prototype;Ue.setTimeout=function(e){this.P=e};function f0(e,t,n){e.K=1,e.v=Dm(Ls(t)),e.s=n,e.U=!0,WI(e,null)}function WI(e,t){e.F=Date.now(),Qh(e),e.A=Ls(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),YI(n.h,"t",i),e.C=0,n=e.l.H,e.h=new HI,e.g=gR(e.l,n?t:null,!e.s),0<e.O&&(e.L=new nX(Bn(e.Ia,e,e.g),e.O)),OI(e.V,e.g,"readystatechange",e.gb),t=e.H?xI(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),vh(1),iX(e.j,e.u,e.A,e.m,e.X,e.s)}Ue.gb=function(e){e=e.target;const t=this.L;t&&vs(e)==3?t.l():this.Ia(e)};Ue.Ia=function(e){try{if(e==this.g)e:{const h=vs(this.g);var t=this.g.Da();const u=this.g.ba();if(!(3>h)&&(h!=3||s0||this.g&&(this.h.h||this.g.ga()||_T(this.g)))){this.I||h!=4||t==7||(t==8||0>=u?vh(3):vh(2)),Om(this);var n=this.g.ba();this.N=n;t:if(GI(this)){var i=_T(this.g);e="";var r=i.length,s=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){sa(this),Iu(this);var o="";break t}this.h.i=new ut.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=n==200,rX(this.j,this.u,this.A,this.m,this.X,h,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yp(a)){var c=a;break t}}c=null}if(n=c)Dl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,p0(this,n);else{this.i=!1,this.o=3,fi(12),sa(this),Iu(this);break e}}this.U?($I(this,h,o),s0&&this.i&&h==3&&(OI(this.V,this.W,"tick",this.fb),this.W.start())):(Dl(this.j,this.m,o,null),p0(this,o)),h==4&&sa(this),this.i&&!this.I&&(h==4?dR(this.l,this):(this.i=!1,Qh(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,fi(12)):(this.o=0,fi(13)),sa(this),Iu(this)}}}catch{}finally{}};function GI(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function $I(e,t,n){let i=!0,r;for(;!e.I&&e.C<n.length;)if(r=lX(e,n),r==bp){t==4&&(e.o=4,fi(14),i=!1),Dl(e.j,e.m,null,"[Incomplete Response]");break}else if(r==d0){e.o=4,fi(15),Dl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}else Dl(e.j,e.m,r,null),p0(e,r);GI(e)&&r!=bp&&r!=d0&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,fi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),pb(t),t.L=!0,fi(11))):(Dl(e.j,e.m,n,"[Invalid Chunked Response]"),sa(e),Iu(e))}Ue.fb=function(){if(this.g){var e=vs(this.g),t=this.g.ga();this.C<t.length&&(Om(this),$I(this,e,t),this.i&&e!=4&&Qh(this))}};function lX(e,t){var n=e.C,i=t.indexOf(`
`,n);return i==-1?bp:(n=Number(t.substring(n,i)),isNaN(n)?d0:(i+=1,i+n>t.length?bp:(t=t.substr(i,n),e.C=i+n,t)))}Ue.cancel=function(){this.I=!0,sa(this)};function Qh(e){e.Y=Date.now()+e.P,jI(e,e.P)}function jI(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=Yh(Bn(e.eb,e),t)}function Om(e){e.B&&(ut.clearTimeout(e.B),e.B=null)}Ue.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(sX(this.j,this.A),this.K!=2&&(vh(3),fi(17)),sa(this),this.o=2,Iu(this)):jI(this,this.Y-e)};function Iu(e){e.l.G==0||e.I||dR(e.l,e)}function sa(e){Om(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,tb(e.W),DI(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function p0(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||m0(n.i,e))){if(n.I=e.N,!e.J&&m0(n.i,e)&&n.G==3){try{var i=n.Ca.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Sp(n),Vm(n);else break e;fb(n),fi(18)}}else n.ta=r[1],0<n.ta-n.U&&37500>r[2]&&n.N&&n.A==0&&!n.v&&(n.v=Yh(Bn(n.ab,n),6e3));if(1>=QI(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else oa(n,11)}else if((e.J||n.g==e)&&Sp(n),!yp(t))for(r=n.Ca.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.U=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.J=c[1],n.la=c[2];const h=c[3];h!=null&&(n.ma=h,n.h.info("VER="+n.ma));const u=c[4];u!=null&&(n.za=u,n.h.info("SVER="+n.za));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=e.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;!s.g&&(ci(p,"spdy")||ci(p,"quic")||ci(p,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(lb(s,s.h),s.h=null))}if(i.D){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(i.sa=y,Qt(i.F,i.D,y))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),i=n;var o=e;if(i.oa=mR(i,i.H?i.la:null,i.W),o.J){eR(i.i,o);var a=o,l=i.K;l&&a.setTimeout(l),a.B&&(Om(a),Qh(a)),i.g=o}else uR(i);0<n.l.length&&Um(n)}else c[0]!="stop"&&c[0]!="close"||oa(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?oa(n,7):db(n):c[0]!="noop"&&n.j&&n.j.wa(c),n.A=0)}}vh(4)}catch{}}function cX(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(r0(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}t=[],n=0;for(i in e)t[n++]=e[i];return t}function ob(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(r0(e)||typeof e=="string")wI(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(r0(e)||typeof e=="string"){n=[];for(var i=e.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,e)n[i++]=r;i=cX(e),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}}function Ic(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof Ic)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}Ue=Ic.prototype;Ue.R=function(){ab(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};Ue.T=function(){return ab(this),this.g.concat()};function ab(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];Ca(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var r={};for(n=t=0;t<e.g.length;)i=e.g[t],Ca(r,i)||(e.g[n++]=i,r[i]=1),t++;e.g.length=n}}Ue.get=function(e,t){return Ca(this.h,e)?this.h[e]:t};Ue.set=function(e,t){Ca(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};Ue.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);e.call(t,s,r,this)}};function Ca(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var qI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uX(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ia(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ia){this.g=t!==void 0?t:e.g,wp(this,e.j),this.s=e.s,xp(this,e.i),Ep(this,e.m),this.l=e.l,t=e.h;var n=new yh;n.i=t.i,t.g&&(n.g=new Ic(t.g),n.h=t.h),gT(this,n),this.o=e.o}else e&&(n=String(e).match(qI))?(this.g=!!t,wp(this,n[1]||"",!0),this.s=Ru(n[2]||""),xp(this,n[3]||"",!0),Ep(this,n[4]),this.l=Ru(n[5]||"",!0),gT(this,n[6]||"",!0),this.o=Ru(n[7]||"")):(this.g=!!t,this.h=new yh(null,this.g))}Ia.prototype.toString=function(){var e=[],t=this.j;t&&e.push(cu(t,vT,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(cu(t,vT,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(cu(n,n.charAt(0)=="/"?mX:pX,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",cu(n,vX)),e.join("")};function Ls(e){return new Ia(e)}function wp(e,t,n){e.j=n?Ru(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xp(e,t,n){e.i=n?Ru(t,!0):t}function Ep(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function gT(e,t,n){t instanceof yh?(e.h=t,yX(e.h,e.g)):(n||(t=cu(t,gX)),e.h=new yh(t,e.g))}function Qt(e,t,n){e.h.set(t,n)}function Dm(e){return Qt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hX(e){return e instanceof Ia?Ls(e):new Ia(e,void 0)}function dX(e,t,n,i){var r=new Ia(null,void 0);return e&&wp(r,e),t&&xp(r,t),n&&Ep(r,n),i&&(r.l=i),r}function Ru(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function cu(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,fX),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fX(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var vT=/[#\/\?@]/g,pX=/[#\?:]/g,mX=/[#\?]/g,gX=/[#\?@]/g,vX=/#/g;function yh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ko(e){e.g||(e.g=new Ic,e.h=0,e.i&&uX(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}Ue=yh.prototype;Ue.add=function(e,t){ko(this),this.i=null,e=Rc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function KI(e,t){ko(e),t=Rc(e,t),Ca(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,Ca(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ab(e)))}function XI(e,t){return ko(e),t=Rc(e,t),Ca(e.g.h,t)}Ue.forEach=function(e,t){ko(this),this.g.forEach(function(n,i){wI(n,function(r){e.call(t,r,i,this)},this)},this)};Ue.T=function(){ko(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var r=e[i],s=0;s<r.length;s++)n.push(t[i]);return n};Ue.R=function(e){ko(this);var t=[];if(typeof e=="string")XI(this,e)&&(t=aT(t,this.g.get(Rc(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=aT(t,e[n])}return t};Ue.set=function(e,t){return ko(this),this.i=null,e=Rc(this,e),XI(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};Ue.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function YI(e,t,n){KI(e,t),0<n.length&&(e.i=null,e.g.set(Rc(e,t),j_(n)),e.h+=n.length)}Ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var o=r;i[s]!==""&&(o+="="+encodeURIComponent(String(i[s]))),e.push(o)}}return this.i=e.join("&")};function Rc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function yX(e,t){t&&!e.j&&(ko(e),e.i=null,e.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(KI(this,i),YI(this,r,n))},e)),e.j=t}var _X=class{constructor(e,t){this.h=e,this.g=t}};function ZI(e){this.l=e||bX,ut.PerformanceNavigationTiming?(e=ut.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(ut.g&&ut.g.Ea&&ut.g.Ea()&&ut.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bX=10;function JI(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function QI(e){return e.h?1:e.g?e.g.size:0}function m0(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function lb(e,t){e.g?e.g.add(t):e.h=t}function eR(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ZI.prototype.cancel=function(){if(this.i=tR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function tR(e){if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return j_(e.i)}function cb(){}cb.prototype.stringify=function(e){return ut.JSON.stringify(e,void 0)};cb.prototype.parse=function(e){return ut.JSON.parse(e,void 0)};function wX(){this.g=new cb}function xX(e,t,n){const i=n||"";try{ob(e,function(r,s){let o=r;Kh(r)&&(o=Q_(r)),t.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function EX(e,t){const n=new Lm;if(ut.Image){const i=new Image;i.onload=rf(of,n,i,"TestLoadImage: loaded",!0,t),i.onerror=rf(of,n,i,"TestLoadImage: error",!1,t),i.onabort=rf(of,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=rf(of,n,i,"TestLoadImage: timeout",!1,t),ut.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}function of(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function ed(e){this.l=e.$b||null,this.j=e.ib||!1}zn(ed,ib);ed.prototype.g=function(){return new Fm(this.l,this.j)};ed.prototype.i=function(e){return function(){return e}}({});function Fm(e,t){In.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ub,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zn(Fm,In);var ub=0;Ue=Fm.prototype;Ue.open=function(e,t){if(this.readyState!=ub)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_h(this)};Ue.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ut).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};Ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,td(this)),this.readyState=ub};Ue.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_h(this)),this.g&&(this.readyState=3,_h(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof ut.ReadableStream!="undefined"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nR(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function nR(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}Ue.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?td(this):_h(this),this.readyState==3&&nR(this)}};Ue.Ua=function(e){this.g&&(this.response=this.responseText=e,td(this))};Ue.Ta=function(e){this.g&&(this.response=e,td(this))};Ue.ha=function(){this.g&&td(this)};function td(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_h(e)}Ue.setRequestHeader=function(e,t){this.v.append(e,t)};Ue.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};Ue.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function _h(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Fm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var SX=ut.JSON.parse;function pn(e){In.call(this),this.headers=new Ic,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=iR,this.K=this.L=!1}zn(pn,In);var iR="",TX=/^https?$/i,MX=["POST","PUT"];Ue=pn.prototype;Ue.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():h0.g(),this.C=this.u?mT(this.u):mT(h0),this.g.onreadystatechange=Bn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){yT(this,s);return}e=n||"";const r=new Ic(this.headers);i&&ob(i,function(s,o){r.set(o,s)}),i=FK(r.T()),n=ut.FormData&&e instanceof ut.FormData,!(0<=bI(MX,t))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oR(this),0<this.B&&((this.K=AX(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bn(this.pa,this)):this.A=nb(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){yT(this,s)}};function AX(e){return uc&&HK()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function CX(e){return e.toLowerCase()=="content-type"}Ue.pa=function(){typeof $_!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vn(this,"timeout"),this.abort(8))};function yT(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,rR(e),Bm(e)}function rR(e){e.D||(e.D=!0,Vn(e,"complete"),Vn(e,"error"))}Ue.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Vn(this,"complete"),Vn(this,"abort"),Bm(this))};Ue.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bm(this,!0)),pn.Z.M.call(this)};Ue.Fa=function(){this.s||(this.F||this.v||this.l?sR(this):this.cb())};Ue.cb=function(){sR(this)};function sR(e){if(e.h&&typeof $_!="undefined"&&(!e.C[1]||vs(e)!=4||e.ba()!=2)){if(e.v&&vs(e)==4)nb(e.Fa,0,e);else if(Vn(e,"readystatechange"),vs(e)==4){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=a===0){var r=String(e.H).match(qI)[1]||null;if(!r&&ut.self&&ut.self.location){var s=ut.self.location.protocol;r=s.substr(0,s.length-1)}i=!TX.test(r?r.toLowerCase():"")}n=i}if(n)Vn(e,"complete"),Vn(e,"success");else{e.m=6;try{var o=2<vs(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.ba()+"]",rR(e)}}finally{Bm(e)}}}}function Bm(e,t){if(e.g){oR(e);const n=e.g,i=e.C[0]?vp:null;e.g=null,e.C=null,t||Vn(e,"ready");try{n.onreadystatechange=i}catch{}}}function oR(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ut.clearTimeout(e.A),e.A=null)}function vs(e){return e.g?e.g.readyState:0}Ue.ba=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}};Ue.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ue.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),SX(t)}};function _T(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case iR:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}Ue.Da=function(){return this.m};Ue.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function IX(e){let t="";return q_(e,function(n,i){t+=i,t+=":",t+=n,t+=`\r
`}),t}function hb(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=IX(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Qt(e,t,n))}function Qc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function aR(e){this.za=0,this.l=[],this.h=new Lm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qc("baseRetryDelayMs",5e3,e),this.$a=Qc("retryDelaySeedMs",1e4,e),this.Ya=Qc("forwardChannelMaxRetries",2,e),this.ra=Qc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ZI(e&&e.concurrentRequestLimit),this.Ca=new wX,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}Ue=aR.prototype;Ue.ma=8;Ue.G=1;function db(e){if(lR(e),e.G==3){var t=e.V++,n=Ls(e.F);Qt(n,"SID",e.J),Qt(n,"RID",t),Qt(n,"TYPE","terminate"),nd(e,n),t=new Jh(e,e.h,t,void 0),t.K=2,t.v=Dm(Ls(n)),n=!1,ut.navigator&&ut.navigator.sendBeacon&&(n=ut.navigator.sendBeacon(t.v.toString(),"")),!n&&ut.Image&&(new Image().src=t.v,n=!0),n||(t.g=gR(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Qh(t)}pR(e)}Ue.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function Vm(e){e.g&&(pb(e),e.g.cancel(),e.g=null)}function lR(e){Vm(e),e.u&&(ut.clearTimeout(e.u),e.u=null),Sp(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&ut.clearTimeout(e.m),e.m=null)}function Ev(e,t){e.l.push(new _X(e.Za++,t)),e.G==3&&Um(e)}function Um(e){JI(e.i)||e.m||(e.m=!0,eb(e.Ha,e),e.C=0)}function RX(e,t){return QI(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=Yh(Bn(e.Ha,e,t),fR(e,e.C)),e.C++,!0)}Ue.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Jh(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=xI(s),EI(s,this.P)):s=this.P),this.o===null&&(r.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){t:{var i=this.l[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(t+=i,4096<t){t=n;break e}if(t===4096||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=cR(this,r,t),n=Ls(this.F),Qt(n,"RID",e),Qt(n,"CVER",22),this.D&&Qt(n,"X-HTTP-Session-Id",this.D),nd(this,n),this.o&&s&&hb(n,this.o,s),lb(this.i,r),this.Ra&&Qt(n,"TYPE","init"),this.ja?(Qt(n,"$req",t),Qt(n,"SID","null"),r.$=!0,f0(r,n,null)):f0(r,n,t),this.G=2}}else this.G==3&&(e?bT(this,e):this.l.length==0||JI(this.i)||bT(this))};function bT(e,t){var n;t?n=t.m:n=e.V++;const i=Ls(e.F);Qt(i,"SID",e.J),Qt(i,"RID",n),Qt(i,"AID",e.U),nd(e,i),e.o&&e.s&&hb(i,e.o,e.s),n=new Jh(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=cR(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),lb(e.i,n),f0(n,i,t)}function nd(e,t){e.j&&ob({},function(n,i){Qt(t,i,n)})}function cR(e,t,n){n=Math.min(e.l.length,n);var i=e.j?Bn(e.j.Oa,e.j,e):null;e:{var r=e.l;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].h;const h=r[l].g;if(c-=s,0>c)s=Math.max(0,r[l].h-100),a=!1;else try{xX(h,o,"req"+c+"_")}catch{i&&i(h)}}if(a){i=o.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function uR(e){e.g||e.u||(e.Y=1,eb(e.Ga,e),e.A=0)}function fb(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=Yh(Bn(e.Ga,e),fR(e,e.A)),e.A++,!0)}Ue.Ga=function(){if(this.u=null,hR(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Yh(Bn(this.bb,this),e)}};Ue.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fi(10),Vm(this),hR(this))};function pb(e){e.B!=null&&(ut.clearTimeout(e.B),e.B=null)}function hR(e){e.g=new Jh(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Ls(e.oa);Qt(t,"RID","rpc"),Qt(t,"SID",e.J),Qt(t,"CI",e.N?"0":"1"),Qt(t,"AID",e.U),nd(e,t),Qt(t,"TYPE","xmlhttp"),e.o&&e.s&&hb(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Dm(Ls(t)),n.s=null,n.U=!0,WI(n,e)}Ue.ab=function(){this.v!=null&&(this.v=null,Vm(this),fb(this),fi(19))};function Sp(e){e.v!=null&&(ut.clearTimeout(e.v),e.v=null)}function dR(e,t){var n=null;if(e.g==t){Sp(e),pb(e),e.g=null;var i=2}else if(m0(e.i,t))n=t.D,eR(e.i,t),i=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(i==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var r=e.C;i=Pm(),Vn(i,new VI(i,n,t,r)),Um(e)}else uR(e);else if(r=t.o,r==3||r==0&&0<e.I||!(i==1&&RX(e,t)||i==2&&fb(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:oa(e,5);break;case 4:oa(e,10);break;case 3:oa(e,6);break;default:oa(e,2)}}}function fR(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function oa(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var i=Bn(e.jb,e);n||(n=new Ia("//www.google.com/images/cleardot.gif"),ut.location&&ut.location.protocol=="http"||wp(n,"https"),Dm(n)),EX(n.toString(),i)}else fi(2);e.G=0,e.j&&e.j.va(t),pR(e),lR(e)}Ue.jb=function(e){e?(this.h.info("Successfully pinged google.com"),fi(2)):(this.h.info("Failed to ping google.com"),fi(1))};function pR(e){e.G=0,e.I=-1,e.j&&((tR(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,j_(e.l),e.l.length=0),e.j.ua())}function mR(e,t,n){let i=hX(n);if(i.i!="")t&&xp(i,t+"."+i.i),Ep(i,i.m);else{const r=ut.location;i=dX(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,n)}return e.aa&&q_(e.aa,function(r,s){Qt(i,s,r)}),t=e.D,n=e.sa,t&&n&&Qt(i,t,n),Qt(i,"VER",e.ma),nd(e,i),i}function gR(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new pn(new ed({ib:!0})):new pn(e.qa),t.L=e.H,t}function vR(){}Ue=vR.prototype;Ue.xa=function(){};Ue.wa=function(){};Ue.va=function(){};Ue.ua=function(){};Ue.Oa=function(){};function Tp(){if(uc&&!(10<=Number(WK)))throw Error("Environmental error: no available transport.")}Tp.prototype.g=function(e,t){return new qi(e,t)};function qi(e,t){In.call(this),this.g=new aR(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!yp(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!yp(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Lc(this)}zn(qi,In);qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),eb(Bn(e.hb,e,t))),fi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=mR(e,null,e.W),Um(e)};qi.prototype.close=function(){db(this.g)};qi.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,Ev(this.g,t)}else this.v?(t={},t.__data__=Q_(e),Ev(this.g,t)):Ev(this.g,e)};qi.prototype.M=function(){this.g.j=null,delete this.j,db(this.g),delete this.g,qi.Z.M.call(this)};function yR(e){rb.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}zn(yR,rb);function _R(){sb.call(this),this.status=1}zn(_R,sb);function Lc(e){this.g=e}zn(Lc,vR);Lc.prototype.xa=function(){Vn(this.g,"a")};Lc.prototype.wa=function(e){Vn(this.g,new yR(e))};Lc.prototype.va=function(e){Vn(this.g,new _R(e))};Lc.prototype.ua=function(){Vn(this.g,"b")};Tp.prototype.createWebChannel=Tp.prototype.g;qi.prototype.send=qi.prototype.u;qi.prototype.open=qi.prototype.m;qi.prototype.close=qi.prototype.close;Nm.NO_ERROR=0;Nm.TIMEOUT=8;Nm.HTTP_ERROR=6;UI.COMPLETE="complete";zI.EventType=Zh;Zh.OPEN="a";Zh.CLOSE="b";Zh.ERROR="c";Zh.MESSAGE="d";In.prototype.listen=In.prototype.N;pn.prototype.listenOnce=pn.prototype.O;pn.prototype.getLastError=pn.prototype.La;pn.prototype.getLastErrorCode=pn.prototype.Da;pn.prototype.getStatus=pn.prototype.ba;pn.prototype.getResponseJson=pn.prototype.Qa;pn.prototype.getResponseText=pn.prototype.ga;pn.prototype.send=pn.prototype.ea;var LX=function(){return new Tp},PX=function(){return Pm()},Sv=Nm,NX=UI,kX=Ga,wT={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},OX=ed,af=zI,DX=pn;const xT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="9.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new wm("@firebase/firestore");function ET(){return Ra.logLevel}function qe(e,...t){if(Ra.logLevel<=Ct.DEBUG){const n=t.map(mb);Ra.debug(`Firestore (${Pc}): ${e}`,...n)}}function So(e,...t){if(Ra.logLevel<=Ct.ERROR){const n=t.map(mb);Ra.error(`Firestore (${Pc}): ${e}`,...n)}}function ST(e,...t){if(Ra.logLevel<=Ct.WARN){const n=t.map(mb);Ra.warn(`Firestore (${Pc}): ${e}`,...n)}}function mb(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(e="Unexpected state"){const t=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: `+e;throw So(t),new Error(t)}function zt(e,t){e||ft()}function pt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Error{constructor(t,n){super(n),this.code=t,this.message=n,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FX{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class BX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xi.UNAUTHENTICATED))}shutdown(){}}class VX{constructor(t){this.t=t,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _s,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _s)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(zt(typeof i.accessToken=="string"),new FX(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return zt(t===null||typeof t=="string"),new xi(t)}}class UX{constructor(t,n,i){this.type="FirstParty",this.user=xi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class zX{constructor(t,n,i){this.h=t,this.l=n,this.m=i}getToken(){return Promise.resolve(new UX(this.h,this.l,this.m))}start(t,n){t.enqueueRetryable(()=>n(xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HX{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WX{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,n){this.o=r=>{t.enqueueRetryable(()=>(s=>(s.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`),n(s.token)))(r))};const i=r=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.g.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.g.getImmediate({optional:!0});r?i(r):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(zt(typeof n.token=="string"),new HX(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.p(i),this.T=i=>n.writeSequenceNumber(i))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GX(e){const t=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gb.I=-1;class bR{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=GX(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%t.length))}return i}}function Nt(e,t){return e<t?-1:e>t?1:0}function hc(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ze(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ze(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ze(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Hi.fromMillis(Date.now())}static fromDate(t){return Hi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new Hi(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Pt(t)}static min(){return new Pt(new Hi(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $a(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function wR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(t,n,i){n===void 0?n=0:n>t.length&&ft(),i===void 0?i=t.length-n:i>t.length-n&&ft(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return bh.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof bh?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=t.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class en extends bh{construct(t,n,i){return new en(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new ze(Te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new en(n)}static emptyPath(){return new en([])}}const $X=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends bh{construct(t,n,i){return new Si(t,n,i)}static isValidIdentifier(t){return $X.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Si(["__name__"])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new ze(Te.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new ze(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ze(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new ze(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Si(n)}static emptyPath(){return new Si([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t){this.fields=t,t.sort(Si.comparator)}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return hc(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(t){this.binaryString=t}static fromBase64String(t){const n=atob(t);return new si(n)}static fromUint8Array(t){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new si(n)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}si.EMPTY_BYTE_STRING=new si("");const jX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function To(e){if(zt(!!e),typeof e=="string"){let t=0;const n=jX.exec(e);if(zt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:hn(e.seconds),nanos:hn(e.nanos)}}function hn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function dc(e){return typeof e=="string"?si.fromBase64String(e):si.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ER(e){const t=e.mapValue.fields.__previous_value__;return xR(t)?ER(t):t}function xh(e){const t=To(e.mapValue.fields.__local_write_time__.timestampValue);return new Hi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(e){return e==null}function Mp(e){return e===0&&1/e==-1/0}function qX(e){return typeof e=="number"&&Number.isInteger(e)&&!Mp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.path=t}static fromPath(t){return new at(en.fromString(t))}static fromName(t){return new at(en.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return t!==null&&en.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return en.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new at(new en(t.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xR(e)?4:10:ft()}function Yr(e,t){const n=La(e);if(n!==La(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xh(e).isEqual(xh(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=To(i.timestampValue),o=To(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return dc(i.bytesValue).isEqual(dc(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return hn(i.geoPointValue.latitude)===hn(r.geoPointValue.latitude)&&hn(i.geoPointValue.longitude)===hn(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return hn(i.integerValue)===hn(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=hn(i.doubleValue),o=hn(r.doubleValue);return s===o?Mp(s)===Mp(o):isNaN(s)&&isNaN(o)}return!1}(e,t);case 9:return hc(e.arrayValue.values||[],t.arrayValue.values||[],Yr);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(TT(s)!==TT(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!Yr(s[a],o[a])))return!1;return!0}(e,t);default:return ft()}}function Eh(e,t){return(e.values||[]).find(n=>Yr(n,t))!==void 0}function fc(e,t){const n=La(e),i=La(t);if(n!==i)return Nt(n,i);switch(n){case 0:return 0;case 1:return Nt(e.booleanValue,t.booleanValue);case 2:return function(r,s){const o=hn(r.integerValue||r.doubleValue),a=hn(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(e,t);case 3:return MT(e.timestampValue,t.timestampValue);case 4:return MT(xh(e),xh(t));case 5:return Nt(e.stringValue,t.stringValue);case 6:return function(r,s){const o=dc(r),a=dc(s);return o.compareTo(a)}(e.bytesValue,t.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=Nt(o[l],a[l]);if(c!==0)return c}return Nt(o.length,a.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,s){const o=Nt(hn(r.latitude),hn(s.latitude));return o!==0?o:Nt(hn(r.longitude),hn(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=fc(o[l],a[l]);if(c)return c}return Nt(o.length,a.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,s){const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let h=0;h<a.length&&h<c.length;++h){const u=Nt(a[h],c[h]);if(u!==0)return u;const d=fc(o[a[h]],l[c[h]]);if(d!==0)return d}return Nt(a.length,c.length)}(e.mapValue,t.mapValue);default:throw ft()}}function MT(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Nt(e,t);const n=To(e),i=To(t),r=Nt(n.seconds,i.seconds);return r!==0?r:Nt(n.nanos,i.nanos)}function vb(e){return g0(e)}function g0(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(i){const r=To(i);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?dc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,at.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=g0(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${g0(i.fields[a])}`;return s+"}"}(e.mapValue):ft();var t,n}function AT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function v0(e){return!!e&&"integerValue"in e}function yb(e){return!!e&&"arrayValue"in e}function CT(e){return!!e&&"nullValue"in e}function IT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Mf(e){return!!e&&"mapValue"in e}function Lu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $a(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Lu(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lu(e.arrayValue.values[n]);return t}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t){this.value=t}static empty(){return new Di({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Mf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Lu(n)}setAll(t){let n=Si.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=Lu(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());Mf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Yr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Mf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){$a(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Di(Lu(this.value))}}function SR(e){const t=[];return $a(e.fields,(n,i)=>{const r=new Si([n]);if(Mf(i)){const s=SR(i.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new wh(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t,n,i,r,s){this.key=t,this.documentType=n,this.version=i,this.data=r,this.documentState=s}static newInvalidDocument(t){return new qn(t,0,Pt.min(),Di.empty(),0)}static newFoundDocument(t,n,i){return new qn(t,1,n,i,0)}static newNoDocument(t,n){return new qn(t,2,n,Di.empty(),0)}static newUnknownDocument(t,n){return new qn(t,3,n,Di.empty(),2)}convertToFoundDocument(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof qn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new qn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.R=null}}function RT(e,t=null,n=[],i=[],r=null,s=null,o=null){return new KX(e,t,n,i,r,s,o)}function _b(e){const t=pt(e);if(t.R===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>YX(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Nc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ap(t.startAt)),t.endAt&&(n+="|ub:",n+=Ap(t.endAt)),t.R=n}return t.R}function XX(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(n=>{return`${(i=n).field.canonicalString()} ${i.op} ${vb(i.value)}`;var i}).join(", ")}]`),Nc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(n=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(n)).join(", ")}]`),e.startAt&&(t+=", startAt: "+Ap(e.startAt)),e.endAt&&(t+=", endAt: "+Ap(e.endAt)),`Target(${t})`}function bb(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!rY(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(n=e.filters[r],i=t.filters[r],n.op!==i.op||!n.field.isEqual(i.field)||!Yr(n.value,i.value))return!1;var n,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!PT(e.startAt,t.startAt)&&PT(e.endAt,t.endAt)}function y0(e){return at.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class pi extends class{}{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.P(t,n,i):new ZX(t,n,i):n==="array-contains"?new eY(t,i):n==="in"?new tY(t,i):n==="not-in"?new nY(t,i):n==="array-contains-any"?new iY(t,i):new pi(t,n,i)}static P(t,n,i){return n==="in"?new JX(t,i):new QX(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.v(fc(n,this.value)):n!==null&&La(this.value)===La(n)&&this.v(fc(n,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ft()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}function YX(e){return e.field.canonicalString()+e.op.toString()+vb(e.value)}class ZX extends pi{constructor(t,n,i){super(t,n,i),this.key=at.fromName(i.referenceValue)}matches(t){const n=at.comparator(t.key,this.key);return this.v(n)}}class JX extends pi{constructor(t,n){super(t,"in",n),this.keys=TR("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class QX extends pi{constructor(t,n){super(t,"not-in",n),this.keys=TR("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function TR(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>at.fromName(i.referenceValue))}class eY extends pi{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return yb(n)&&Eh(n.arrayValue,this.value)}}class tY extends pi{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Eh(this.value.arrayValue,n)}}class nY extends pi{constructor(t,n){super(t,"not-in",n)}matches(t){if(Eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Eh(this.value.arrayValue,n)}}class iY extends pi{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!yb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Eh(this.value.arrayValue,i))}}class _0{constructor(t,n){this.position=t,this.before=n}}function Ap(e){return`${e.before?"b":"a"}:${e.position.map(t=>vb(t)).join(",")}`}class jl{constructor(t,n="asc"){this.field=t,this.dir=n}}function rY(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function LT(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=at.comparator(at.fromName(o.referenceValue),n.key):i=fc(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return e.before?i<=0:i<0}function PT(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.S=null,this.D=null,this.startAt,this.endAt}}function sY(e,t,n,i,r,s,o,a){return new kc(e,t,n,i,r,s,o,a)}function zm(e){return new kc(e)}function Af(e){return!Nc(e.limit)&&e.limitType==="F"}function Cp(e){return!Nc(e.limit)&&e.limitType==="L"}function wb(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xb(e){for(const t of e.filters)if(t.V())return t.field;return null}function MR(e){return e.collectionGroup!==null}function Sh(e){const t=pt(e);if(t.S===null){t.S=[];const n=xb(t),i=wb(t);if(n!==null&&i===null)n.isKeyField()||t.S.push(new jl(n)),t.S.push(new jl(Si.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.S.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new jl(Si.keyField(),s))}}}return t.S}function Pa(e){const t=pt(e);if(!t.D)if(t.limitType==="F")t.D=RT(t.path,t.collectionGroup,Sh(t),t.filters,t.limit,t.startAt,t.endAt);else{const n=[];for(const s of Sh(t)){const o=s.dir==="desc"?"asc":"desc";n.push(new jl(s.field,o))}const i=t.endAt?new _0(t.endAt.position,!t.endAt.before):null,r=t.startAt?new _0(t.startAt.position,!t.startAt.before):null;t.D=RT(t.path,t.collectionGroup,n,t.filters,t.limit,i,r)}return t.D}function oY(e,t,n){return new kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hm(e,t){return bb(Pa(e),Pa(t))&&e.limitType===t.limitType}function AR(e){return`${_b(Pa(e))}|lt:${e.limitType}`}function b0(e){return`Query(target=${XX(Pa(e))}; limitType=${e.limitType})`}function Wm(e,t){return t.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):at.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(e,t)&&function(n,i){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(n,i){return!(n.startAt&&!LT(n.startAt,Sh(n),i)||n.endAt&&LT(n.endAt,Sh(n),i))}(e,t)}function CR(e){return(t,n)=>{let i=!1;for(const r of Sh(e)){const s=aY(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function aY(e,t,n){const i=e.field.isKeyField()?at.comparator(t.key,n.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?fc(a,l):ft()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mp(t)?"-0":t}}function RR(e){return{integerValue:""+e}}function lY(e,t){return qX(t)?RR(t):IR(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this._=void 0}}function cY(e,t,n){return e instanceof Th?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,t):e instanceof Mh?PR(e,t):e instanceof Ah?NR(e,t):function(i,r){const s=LR(i,r),o=NT(s)+NT(i.N);return v0(s)&&v0(i.N)?RR(o):IR(i.k,o)}(e,t)}function uY(e,t,n){return e instanceof Mh?PR(e,t):e instanceof Ah?NR(e,t):n}function LR(e,t){return e instanceof Ip?v0(n=t)||function(i){return!!i&&"doubleValue"in i}(n)?t:{integerValue:0}:null;var n}class Th extends Gm{}class Mh extends Gm{constructor(t){super(),this.elements=t}}function PR(e,t){const n=kR(t);for(const i of e.elements)n.some(r=>Yr(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ah extends Gm{constructor(t){super(),this.elements=t}}function NR(e,t){let n=kR(t);for(const i of e.elements)n=n.filter(r=>!Yr(r,i));return{arrayValue:{values:n}}}class Ip extends Gm{constructor(t,n){super(),this.k=t,this.N=n}}function NT(e){return hn(e.integerValue||e.doubleValue)}function kR(e){return yb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(t,n){this.field=t,this.transform=n}}function dY(e,t){return e.field.isEqual(t.field)&&function(n,i){return n instanceof Mh&&i instanceof Mh||n instanceof Ah&&i instanceof Ah?hc(n.elements,i.elements,Yr):n instanceof Ip&&i instanceof Ip?Yr(n.N,i.N):n instanceof Th&&i instanceof Th}(e.transform,t.transform)}class fY{constructor(t,n){this.version=t,this.transformResults=n}}class bs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new bs}static exists(t){return new bs(void 0,t)}static updateTime(t){return new bs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Cf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class $m{}function pY(e,t,n){e instanceof jm?function(i,r,s){const o=i.value.clone(),a=DT(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(e,t,n):e instanceof ja?function(i,r,s){if(!Cf(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=DT(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(OR(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function w0(e,t,n){e instanceof jm?function(i,r,s){if(!Cf(i.precondition,r))return;const o=i.value.clone(),a=FT(i.fieldTransforms,s,r);o.setAll(a),r.convertToFoundDocument(OT(r),o).setHasLocalMutations()}(e,t,n):e instanceof ja?function(i,r,s){if(!Cf(i.precondition,r))return;const o=FT(i.fieldTransforms,s,r),a=r.data;a.setAll(OR(i)),a.setAll(o),r.convertToFoundDocument(OT(r),a).setHasLocalMutations()}(e,t,n):function(i,r){Cf(i.precondition,r)&&r.convertToNoDocument(Pt.min())}(e,t)}function mY(e,t){let n=null;for(const i of e.fieldTransforms){const r=t.data.field(i.field),s=LR(i.transform,r||null);s!=null&&(n==null&&(n=Di.empty()),n.set(i.field,s))}return n||null}function kT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&hc(n,i,(r,s)=>dY(r,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function OT(e){return e.isFoundDocument()?e.version:Pt.min()}class jm extends $m{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}}class ja extends $m{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function OR(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function DT(e,t,n){const i=new Map;zt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,uY(o,a,n[r]))}return i}function FT(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,cY(s,o,t))}return i}class DR extends $m{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class gY extends $m{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(t){this.count=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un,Et;function yY(e){switch(e){default:return ft();case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0}}function FR(e){if(e===void 0)return So("GRPC error has no .code"),Te.UNKNOWN;switch(e){case un.OK:return Te.OK;case un.CANCELLED:return Te.CANCELLED;case un.UNKNOWN:return Te.UNKNOWN;case un.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case un.INTERNAL:return Te.INTERNAL;case un.UNAVAILABLE:return Te.UNAVAILABLE;case un.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case un.NOT_FOUND:return Te.NOT_FOUND;case un.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case un.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case un.ABORTED:return Te.ABORTED;case un.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case un.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case un.DATA_LOSS:return Te.DATA_LOSS;default:return ft()}}(Et=un||(un={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(t,n){this.comparator=t,this.root=n||kn.EMPTY}insert(t,n){return new oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(t){return new oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new lf(this.root,t,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new lf(this.root,t,this.comparator,!0)}}class lf{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class kn{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i!=null?i:kn.RED,this.left=r!=null?r:kn.EMPTY,this.right=s!=null?s:kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new kn(t!=null?t:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return kn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const t=this.left.check();if(t!==this.right.check())throw ft();return t+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(e,t,n,i,r){return this}insert(e,t,n){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t){this.comparator=t,this.data=new oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new BT(this.data.getIterator())}getIteratorFrom(t){return new BT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof Un)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Un(this.comparator);return n.data=t,n}}class BT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=new oi(at.comparator);function Na(){return _Y}const bY=new oi(at.comparator);function x0(){return bY}const wY=new oi(at.comparator);function xY(){return wY}const EY=new Un(at.comparator);function qt(...e){let t=EY;for(const n of e)t=t.add(n);return t}const SY=new Un(Nt);function BR(){return SY}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n){const i=new Map;return i.set(t,id.createSynthesizedTargetChangeForCurrentChange(t,n)),new qm(Pt.min(),i,BR(),Na(),qt())}}class id{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n){return new id(si.EMPTY_BYTE_STRING,n,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(t,n,i,r){this.$=t,this.removedTargetIds=n,this.key=i,this.F=r}}class VR{constructor(t,n){this.targetId=t,this.O=n}}class UR{constructor(t,n,i=si.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class VT{constructor(){this.M=0,this.L=zT(),this.B=si.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return this.M!==0}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=qt(),n=qt(),i=qt();return this.L.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ft()}}),new id(this.B,this.U,t,n,i)}H(){this.q=!1,this.L=zT()}J(t,n){this.q=!0,this.L=this.L.insert(t,n)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class TY{constructor(t){this.et=t,this.nt=new Map,this.st=Na(),this.it=UT(),this.rt=new Un(Nt)}ot(t){for(const n of t.$)t.F&&t.F.isFoundDocument()?this.at(n,t.F):this.ct(n,t.key,t.F);for(const n of t.removedTargetIds)this.ct(n,t.key,t.F)}ut(t){this.forEachTarget(t,n=>{const i=this.ht(n);switch(t.state){case 0:this.lt(n)&&i.W(t.resumeToken);break;case 1:i.Z(),i.K||i.H(),i.W(t.resumeToken);break;case 2:i.Z(),i.K||this.removeTarget(n);break;case 3:this.lt(n)&&(i.tt(),i.W(t.resumeToken));break;case 4:this.lt(n)&&(this.ft(n),i.W(t.resumeToken));break;default:ft()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.nt.forEach((i,r)=>{this.lt(r)&&n(r)})}dt(t){const n=t.targetId,i=t.O.count,r=this.wt(n);if(r){const s=r.target;if(y0(s))if(i===0){const o=new at(s.path);this.ct(n,o,qn.newNoDocument(o,Pt.min()))}else zt(i===1);else this._t(n)!==i&&(this.ft(n),this.rt=this.rt.add(n))}}gt(t){const n=new Map;this.nt.forEach((s,o)=>{const a=this.wt(o);if(a){if(s.current&&y0(a.target)){const l=new at(a.target.path);this.st.get(l)!==null||this.yt(o,l)||this.ct(o,l,qn.newNoDocument(l,t))}s.j&&(n.set(o,s.G()),s.H())}});let i=qt();this.it.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.wt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))});const r=new qm(t,n,this.rt,this.st,i);return this.st=Na(),this.it=UT(),this.rt=new Un(Nt),r}at(t,n){if(!this.lt(t))return;const i=this.yt(t,n.key)?2:0;this.ht(t).J(n.key,i),this.st=this.st.insert(n.key,n),this.it=this.it.insert(n.key,this.Tt(n.key).add(t))}ct(t,n,i){if(!this.lt(t))return;const r=this.ht(t);this.yt(t,n)?r.J(n,1):r.Y(n),this.it=this.it.insert(n,this.Tt(n).delete(t)),i&&(this.st=this.st.insert(n,i))}removeTarget(t){this.nt.delete(t)}_t(t){const n=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let n=this.nt.get(t);return n||(n=new VT,this.nt.set(t,n)),n}Tt(t){let n=this.it.get(t);return n||(n=new Un(Nt),this.it=this.it.insert(t,n)),n}lt(t){const n=this.wt(t)!==null;return n||qe("WatchChangeAggregator","Detected inactive target",t),n}wt(t){const n=this.nt.get(t);return n&&n.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new VT),this.et.getRemoteKeysForTarget(t).forEach(n=>{this.ct(t,n,null)})}yt(t,n){return this.et.getRemoteKeysForTarget(t).has(n)}}function UT(){return new oi(at.comparator)}function zT(){return new oi(at.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),AY=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class CY{constructor(t,n){this.databaseId=t,this.C=n}}function Rp(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zR(e,t){return e.C?t.toBase64():t.toUint8Array()}function IY(e,t){return Rp(e,t.toTimestamp())}function ws(e){return zt(!!e),Pt.fromTimestamp(function(t){const n=To(t);return new Hi(n.seconds,n.nanos)}(e))}function Eb(e,t){return function(n){return new en(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function HR(e){const t=en.fromString(e);return zt($R(t)),t}function E0(e,t){return Eb(e.databaseId,t.path)}function Tv(e,t){const n=HR(t);if(n.get(1)!==e.databaseId.projectId)throw new ze(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ze(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new at(WR(n))}function S0(e,t){return Eb(e.databaseId,t)}function RY(e){const t=HR(e);return t.length===4?en.emptyPath():WR(t)}function T0(e){return new en(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function WR(e){return zt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function HT(e,t,n){return{name:E0(e,t),fields:n.value.mapValue.fields}}function LY(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ft()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(l,c){return l.C?(zt(c===void 0||typeof c=="string"),si.fromBase64String(c||"")):(zt(c===void 0||c instanceof Uint8Array),si.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Te.UNKNOWN:FR(l.code);return new ze(c,l.message||"")}(o);n=new UR(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Tv(e,i.document.name),s=ws(i.document.updateTime),o=new Di({mapValue:{fields:i.document.fields}}),a=qn.newFoundDocument(r,s,o),l=i.targetIds||[],c=i.removedTargetIds||[];n=new If(l,c,a.key,a)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Tv(e,i.document),s=i.readTime?ws(i.readTime):Pt.min(),o=qn.newNoDocument(r,s),a=i.removedTargetIds||[];n=new If([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Tv(e,i.document),s=i.removedTargetIds||[];n=new If([],s,r,null)}else{if(!("filter"in t))return ft();{t.filter;const i=t.filter;i.targetId;const r=i.count||0,s=new vY(r),o=i.targetId;n=new VR(o,s)}}return n}function PY(e,t){let n;if(t instanceof jm)n={update:HT(e,t.key,t.value)};else if(t instanceof DR)n={delete:E0(e,t.key)};else if(t instanceof ja)n={update:HT(e,t.key,t.data),updateMask:HY(t.fieldMask)};else{if(!(t instanceof gY))return ft();n={verify:E0(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof Th)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Mh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ah)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ip)return{fieldPath:s.field.canonicalString(),increment:o.N};throw ft()}(0,i))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:IY(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ft()}(e,t.precondition)),n}function NY(e,t){return e&&e.length>0?(zt(t!==void 0),e.map(n=>function(i,r){let s=i.updateTime?ws(i.updateTime):ws(r);return s.isEqual(Pt.min())&&(s=ws(r)),new fY(s,i.transformResults||[])}(n,t))):[]}function kY(e,t){return{documents:[S0(e,t.path)]}}function OY(e,t){const n={structuredQuery:{}},i=t.path;t.collectionGroup!==null?(n.parent=S0(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=S0(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(a){if(a.length===0)return;const l=a.map(c=>function(h){if(h.op==="=="){if(IT(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NAN"}};if(CT(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(IT(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NOT_NAN"}};if(CT(h.value))return{unaryFilter:{field:gl(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(h.field),op:VY(h.op),value:h.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(t.filters);r&&(n.structuredQuery.where=r);const s=function(a){if(a.length!==0)return a.map(l=>function(c){return{field:gl(c.field),direction:BY(c.dir)}}(l))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(a,l){return a.C||Nc(l)?l:{value:l}}(e,t.limit);return o!==null&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=WT(t.startAt)),t.endAt&&(n.structuredQuery.endAt=WT(t.endAt)),n}function DY(e){let t=RY(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){zt(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];n.where&&(s=GR(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(h=>function(u){return new jl(Fl(u.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(u.direction))}(h)));let a=null;n.limit&&(a=function(h){let u;return u=typeof h=="object"?h.value:h,Nc(u)?null:u}(n.limit));let l=null;n.startAt&&(l=GT(n.startAt));let c=null;return n.endAt&&(c=GT(n.endAt)),sY(t,r,o,s,a,"F",l,c)}function FY(e,t){const n=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,t.purpose);return n==null?null:{"goog-listen-tags":n}}function GR(e){return e?e.unaryFilter!==void 0?[zY(e)]:e.fieldFilter!==void 0?[UY(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(t=>GR(t)).reduce((t,n)=>t.concat(n)):ft():[]}function WT(e){return{before:e.before,values:e.position}}function GT(e){const t=!!e.before,n=e.values||[];return new _0(n,t)}function BY(e){return MY[e]}function VY(e){return AY[e]}function gl(e){return{fieldPath:e.canonicalString()}}function Fl(e){return Si.fromServerFormat(e.fieldPath)}function UY(e){return pi.create(Fl(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value)}function zY(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fl(e.unaryFilter.field);return pi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fl(e.unaryFilter.field);return pi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Fl(e.unaryFilter.field);return pi.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Fl(e.unaryFilter.field);return pi.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function HY(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function $R(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}const WY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ve((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ve?n:Ve.resolve(n)}catch(n){return Ve.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ve.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ve.reject(n)}static resolve(t){return new Ve((n,i)=>{n(t)})}static reject(t){return new Ve((n,i)=>{i(t)})}static waitFor(t){return new Ve((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=Ve.resolve(!1);for(const i of t)n=n.next(r=>r?Ve.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}}function rd(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&pY(s,t,i[r])}}applyToLocalView(t){for(const n of this.baseMutations)n.key.isEqual(t.key)&&w0(n,t,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(t.key)&&w0(n,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(n=>{const i=t.get(n.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(Pt.min())})}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),qt())}isEqual(t){return this.batchId===t.batchId&&hc(this.mutations,t.mutations,(n,i)=>kT(n,i))&&hc(this.baseMutations,t.baseMutations,(n,i)=>kT(n,i))}}class Sb{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){zt(t.mutations.length===i.length);let r=xY();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Sb(t,n,i,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n,i,r,s=Pt.min(),o=Pt.min(),a=si.EMPTY_BYTE_STRING){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(t){return new fa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,n){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(t){this.Gt=t}}function qY(e){const t=DY({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?oY(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(){this.zt=new XY}addToCollectionParentIndex(t,n){return this.zt.add(n),Ve.resolve()}getCollectionParents(t,n){return Ve.resolve(this.zt.getEntries(n))}}class XY{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new Un(en.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Un(en.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new pc(0)}static re(){return new pc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sd(e){if(e.code!==Te.FAILED_PRECONDITION||e.message!==WY)throw e;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r!==void 0){for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n])}else this.inner[i]=[[t,n]]}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),!0;return!1}forEach(t){$a(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return wR(this.inner)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(){this.changes=new od(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}getReadTime(t){const n=this.changes.get(t);return n?n.readTime:Pt.min()}addEntry(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})}removeEntry(t,n=null){this.assertNotApplied(),this.changes.set(t,{document:qn.newInvalidDocument(t),readTime:n})}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Ve.resolve(i.document):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t,n,i){this.Je=t,this.An=n,this.Jt=i}Rn(t,n){return this.An.getAllMutationBatchesAffectingDocumentKey(t,n).next(i=>this.Pn(t,n,i))}Pn(t,n,i){return this.Je.getEntry(t,n).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}bn(t,n){t.forEach((i,r)=>{for(const s of n)s.applyToLocalView(r)})}vn(t,n){return this.Je.getEntries(t,n).next(i=>this.Vn(t,i).next(()=>i))}Vn(t,n){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,n).next(i=>this.bn(n,i))}getDocumentsMatchingQuery(t,n,i){return function(r){return at.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.Sn(t,n.path):MR(n)?this.Dn(t,n,i):this.Cn(t,n,i)}Sn(t,n){return this.Rn(t,new at(n)).next(i=>{let r=x0();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Dn(t,n,i){const r=n.collectionGroup;let s=x0();return this.Jt.getCollectionParents(t,r).next(o=>Ve.forEach(o,a=>{const l=function(c,h){return new kc(h,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.Cn(t,l,i).next(c=>{c.forEach((h,u)=>{s=s.insert(h,u)})})}).next(()=>s))}Cn(t,n,i){let r,s;return this.Je.getDocumentsMatchingQuery(t,n,i).next(o=>(r=o,this.An.getAllMutationBatchesAffectingQuery(t,n))).next(o=>(s=o,this.Nn(t,s,r).next(a=>{r=a;for(const l of s)for(const c of l.mutations){const h=c.key;let u=r.get(h);u==null&&(u=qn.newInvalidDocument(h),r=r.insert(h,u)),w0(c,u,l.localWriteTime),u.isFoundDocument()||(r=r.remove(h))}}))).next(()=>(r.forEach((o,a)=>{Wm(n,a)||(r=r.remove(o))}),r))}Nn(t,n,i){let r=qt();for(const o of n)for(const a of o.mutations)a instanceof ja&&i.get(a.key)===null&&(r=r.add(a.key));let s=i;return this.Je.getEntries(t,r).next(o=>(o.forEach((a,l)=>{l.isFoundDocument()&&(s=s.insert(a,l))}),s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.kn=i,this.xn=r}static $n(t,n){let i=qt(),r=qt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Tb(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{Fn(t){this.On=t}getDocumentsMatchingQuery(t,n,i,r){return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||i.isEqual(Pt.min())?this.Mn(t,n):this.On.vn(t,r).next(s=>{const o=this.Ln(n,s);return(Af(n)||Cp(n))&&this.Bn(n.limitType,o,r,i)?this.Mn(t,n):(ET()<=Ct.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),b0(n)),this.On.getDocumentsMatchingQuery(t,n,i).next(a=>(o.forEach(l=>{a=a.insert(l.key,l)}),a)))})}Ln(t,n){let i=new Un(CR(t));return n.forEach((r,s)=>{Wm(t,s)&&(i=i.add(s))}),i}Bn(t,n,i,r){if(i.size!==n.size)return!0;const s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mn(t,n){return ET()<=Ct.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",b0(n)),this.On.getDocumentsMatchingQuery(t,n,Pt.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(t,n,i,r){this.persistence=t,this.Un=n,this.k=r,this.qn=new oi(Nt),this.Kn=new od(s=>_b(s),bb),this.jn=Pt.min(),this.An=t.getMutationQueue(i),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new jR(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.qn))}}function QY(e,t,n,i){return new JY(e,t,n,i)}async function qR(e,t){const n=pt(e);let i=n.An,r=n.Wn;const s=await n.persistence.runTransaction("Handle user change","readonly",o=>{let a;return n.An.getAllMutationBatches(o).next(l=>(a=l,i=n.persistence.getMutationQueue(t),r=new jR(n.Qn,i,n.persistence.getIndexManager()),i.getAllMutationBatches(o))).next(l=>{const c=[],h=[];let u=qt();for(const d of a){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of l){h.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return r.vn(o,u).next(d=>({Gn:d,removedBatchIds:c,addedBatchIds:h}))})});return n.An=i,n.Wn=r,n.Un.Fn(n.Wn),s}function eZ(e,t){const n=pt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=n.Qn.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const h=l.batch,u=h.keys();let d=Ve.resolve();return u.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(p=>{const y=l.docVersions.get(f);zt(y!==null),p.version.compareTo(y)<0&&(h.applyToRemoteDocument(p,l),p.isValidDocument()&&c.addEntry(p,l.commitVersion))})}),d.next(()=>o.An.removeMutationBatch(a,h))}(n,i,t,s).next(()=>s.apply(i)).next(()=>n.An.performConsistencyCheck(i)).next(()=>n.Wn.vn(i,r))})}function KR(e){const t=pt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.He.getLastRemoteSnapshotVersion(n))}function tZ(e,t){const n=pt(e),i=t.snapshotVersion;let r=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Qn.newChangeBuffer({trackRemovals:!0});r=n.qn;const a=[];t.targetChanges.forEach((c,h)=>{const u=r.get(h);if(!u)return;a.push(n.He.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.He.addMatchingKeys(s,c.addedDocuments,h)));const d=c.resumeToken;if(d.approximateByteSize()>0){const f=u.withResumeToken(d,i).withSequenceNumber(s.currentSequenceNumber);r=r.insert(h,f),function(p,y,v){return zt(y.resumeToken.approximateByteSize()>0),p.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(u,f,c)&&a.push(n.He.updateTargetData(s,f))}});let l=Na();if(t.documentUpdates.forEach((c,h)=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(nZ(s,o,t.documentUpdates,i,void 0).next(c=>{l=c})),!i.isEqual(Pt.min())){const c=n.He.getLastRemoteSnapshotVersion(s).next(h=>n.He.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(c)}return Ve.waitFor(a).next(()=>o.apply(s)).next(()=>n.Wn.Vn(s,l)).next(()=>l)}).then(s=>(n.qn=r,s))}function nZ(e,t,n,i,r){let s=qt();return n.forEach(o=>s=s.add(o)),t.getEntries(e,s).next(o=>{let a=Na();return n.forEach((l,c)=>{const h=o.get(l),u=(r==null?void 0:r.get(l))||i;c.isNoDocument()&&c.version.isEqual(Pt.min())?(t.removeEntry(l,u),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c,u),a=a.insert(l,c)):qe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),a})}function iZ(e,t){const n=pt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.An.getNextMutationBatchAfterBatchId(i,t)))}function rZ(e,t){const n=pt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.He.getTargetData(i,t).next(s=>s?(r=s,Ve.resolve(r)):n.He.allocateTargetId(i).next(o=>(r=new fa(t,o,0,i.currentSequenceNumber),n.He.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.qn.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(i.targetId,i),n.Kn.set(t,i.targetId)),i})}async function M0(e,t,n){const i=pt(e),r=i.qn.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!rd(o))throw o;qe("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.qn=i.qn.remove(t),i.Kn.delete(r.target)}function $T(e,t,n){const i=pt(e);let r=Pt.min(),s=qt();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const h=pt(a),u=h.Kn.get(c);return u!==void 0?Ve.resolve(h.qn.get(u)):h.He.getTargetData(l,c)}(i,o,Pa(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.He.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Un.getDocumentsMatchingQuery(o,t,n?r:Pt.min(),n?s:qt())).next(a=>({documents:a,zn:s})))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,n){return Ve.resolve(this.Xn.get(n))}saveBundleMetadata(t,n){var i;return this.Xn.set(n.id,{id:(i=n).id,version:i.version,createTime:ws(i.createTime)}),Ve.resolve()}getNamedQuery(t,n){return Ve.resolve(this.Zn.get(n))}saveNamedQuery(t,n){return this.Zn.set(n.name,function(i){return{name:i.name,query:qY(i.bundledQuery),readTime:ws(i.readTime)}}(n)),Ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.ts=new Un(xn.es),this.ns=new Un(xn.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,n){const i=new xn(t,n);this.ts=this.ts.add(i),this.ns=this.ns.add(i)}rs(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.os(new xn(t,n))}cs(t,n){t.forEach(i=>this.removeReference(i,n))}us(t){const n=new at(new en([])),i=new xn(n,t),r=new xn(n,t+1),s=[];return this.ns.forEachInRange([i,r],o=>{this.os(o),s.push(o.key)}),s}hs(){this.ts.forEach(t=>this.os(t))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const n=new at(new en([])),i=new xn(n,t),r=new xn(n,t+1);let s=qt();return this.ns.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new xn(t,0),i=this.ts.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class xn{constructor(t,n){this.key=t,this.fs=n}static es(t,n){return at.comparator(t.key,n.key)||Nt(t.fs,n.fs)}static ss(t,n){return Nt(t.fs,n.fs)||at.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(t,n){this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Un(xn.es)}checkEmpty(t){return Ve.resolve(this.An.length===0)}addMutationBatch(t,n,i,r){const s=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const o=new $Y(s,n,i,r);this.An.push(o);for(const a of r)this.ws=this.ws.add(new xn(a.key,s)),this.Jt.addToCollectionParentIndex(t,a.key.path.popLast());return Ve.resolve(o)}lookupMutationBatch(t,n){return Ve.resolve(this._s(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.gs(i),s=r<0?0:r;return Ve.resolve(this.An.length>s?this.An[s]:null)}getHighestUnacknowledgedBatchId(){return Ve.resolve(this.An.length===0?-1:this.ds-1)}getAllMutationBatches(t){return Ve.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new xn(n,0),r=new xn(n,Number.POSITIVE_INFINITY),s=[];return this.ws.forEachInRange([i,r],o=>{const a=this._s(o.fs);s.push(a)}),Ve.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Un(Nt);return n.forEach(r=>{const s=new xn(r,0),o=new xn(r,Number.POSITIVE_INFINITY);this.ws.forEachInRange([s,o],a=>{i=i.add(a.fs)})}),Ve.resolve(this.ys(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;at.isDocumentKey(s)||(s=s.child(""));const o=new xn(new at(s),0);let a=new Un(Nt);return this.ws.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.fs)),!0)},o),Ve.resolve(this.ys(a))}ys(t){const n=[];return t.forEach(i=>{const r=this._s(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){zt(this.ps(n.batchId,"removed")===0),this.An.shift();let i=this.ws;return Ve.forEach(n.mutations,r=>{const s=new xn(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ws=i})}ee(t){}containsKey(t,n){const i=new xn(n,0),r=this.ws.firstAfterOrEqual(i);return Ve.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.An.length,Ve.resolve()}ps(t,n){return this.gs(t)}gs(t){return this.An.length===0?0:t-this.An[0].batchId}_s(t){const n=this.gs(t);return n<0||n>=this.An.length?null:this.An[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(t,n){this.Jt=t,this.Ts=n,this.docs=new oi(at.comparator),this.size=0}addEntry(t,n,i){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.Ts(n);return this.docs=this.docs.insert(r,{document:n.clone(),size:a,readTime:i}),this.size+=a-o,this.Jt.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return Ve.resolve(i?i.document.clone():qn.newInvalidDocument(n))}getEntries(t,n){let i=Na();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.clone():qn.newInvalidDocument(r))}),Ve.resolve(i)}getDocumentsMatchingQuery(t,n,i){let r=Na();const s=new at(n.path.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l,readTime:c}}=o.getNext();if(!n.path.isPrefixOf(a.path))break;c.compareTo(i)<=0||Wm(n,l)&&(r=r.insert(l.key,l.clone()))}return Ve.resolve(r)}Es(t,n){return Ve.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new lZ(this)}getSize(t){return Ve.resolve(this.size)}}class lZ extends YY{constructor(t){super(),this.De=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.document.isValidDocument()?n.push(this.De.addEntry(t,r.document,this.getReadTime(i))):this.De.removeEntry(i)}),Ve.waitFor(n)}getFromCache(t,n){return this.De.getEntry(t,n)}getAllFromCache(t,n){return this.De.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(t){this.persistence=t,this.Is=new od(n=>_b(n),bb),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.As=0,this.Rs=new Mb,this.targetCount=0,this.Ps=pc.ie()}forEachTarget(t,n){return this.Is.forEach((i,r)=>n(r)),Ve.resolve()}getLastRemoteSnapshotVersion(t){return Ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ve.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.Ps.next(),Ve.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.As&&(this.As=n),Ve.resolve()}ce(t){this.Is.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ps=new pc(n),this.highestTargetId=n),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,n){return this.ce(n),this.targetCount+=1,Ve.resolve()}updateTargetData(t,n){return this.ce(n),Ve.resolve()}removeTargetData(t,n){return this.Is.delete(n.target),this.Rs.us(n.targetId),this.targetCount-=1,Ve.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Is.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Is.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),Ve.waitFor(s).next(()=>r)}getTargetCount(t){return Ve.resolve(this.targetCount)}getTargetData(t,n){const i=this.Is.get(n)||null;return Ve.resolve(i)}addMatchingKeys(t,n,i){return this.Rs.rs(n,i),Ve.resolve()}removeMatchingKeys(t,n,i){this.Rs.cs(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),Ve.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Rs.us(n),Ve.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Rs.ls(n);return Ve.resolve(i)}containsKey(t,n){return Ve.resolve(this.Rs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{constructor(t,n){this.bs={},this.Be=new gb(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new cZ(this),this.Jt=new KY,this.Je=function(i,r){return new aZ(i,r)}(this.Jt,i=>this.referenceDelegate.vs(i)),this.k=new jY(n),this.Ye=new sZ(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let n=this.bs[t.toKey()];return n||(n=new oZ(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=n),n}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,n,i){qe("MemoryPersistence","Starting transaction:",t);const r=new hZ(this.Be.next());return this.referenceDelegate.Vs(),i(r).next(s=>this.referenceDelegate.Ss(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ds(t,n){return Ve.or(Object.values(this.bs).map(i=>()=>i.containsKey(t,n)))}}class hZ extends GY{constructor(t){super(),this.currentSequenceNumber=t}}class Ab{constructor(t){this.persistence=t,this.Cs=new Mb,this.Ns=null}static ks(t){return new Ab(t)}get xs(){if(this.Ns)return this.Ns;throw ft()}addReference(t,n,i){return this.Cs.addReference(i,n),this.xs.delete(i.toString()),Ve.resolve()}removeReference(t,n,i){return this.Cs.removeReference(i,n),this.xs.add(i.toString()),Ve.resolve()}markPotentiallyOrphaned(t,n){return this.xs.add(n.toString()),Ve.resolve()}removeTarget(t,n){this.Cs.us(n.targetId).forEach(r=>this.xs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.xs.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Vs(){this.Ns=new Set}Ss(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ve.forEach(this.xs,i=>{const r=at.fromPath(i);return this.$s(t,r).next(s=>{s||n.removeEntry(r)})}).next(()=>(this.Ns=null,n.apply(t)))}updateLimboDocument(t,n){return this.$s(t,n).next(i=>{i?this.xs.delete(n.toString()):this.xs.add(n.toString())})}vs(t){return 0}$s(t,n){return Ve.or([()=>Ve.resolve(this.Cs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ds(t,n)])}}class jT{constructor(){this.activeTargetIds=BR()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dZ{constructor(){this.pi=new jT,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,n,i){this.Ti[t]=n}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new jT,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{Ei(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Pi(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Fi(t){this.ki(t)}Oi(t){this.xi(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http";this.Mi=n+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,n,i,r,s){const o=this.Ui(t,n);qe("RestConnection","Sending: ",o,i);const a={};return this.qi(a,r,s),this.Ki(t,o,a,i).then(l=>(qe("RestConnection","Received: ",l),l),l=>{throw ST("RestConnection",`${t} failed with error: `,l,"url: ",o,"request:",i),l})}ji(t,n,i,r,s){return this.Bi(t,n,i,r,s)}qi(t,n,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Pc,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}Ui(t,n){const i=pZ[t];return`${this.Mi}/v1/${n}:${i}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,n,i,r){return new Promise((s,o)=>{const a=new DX;a.listenOnce(NX.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Sv.NO_ERROR:const c=a.getResponseJson();qe("Connection","XHR received:",JSON.stringify(c)),s(c);break;case Sv.TIMEOUT:qe("Connection",'RPC "'+t+'" timed out'),o(new ze(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Sv.HTTP_ERROR:const h=a.getStatus();if(qe("Connection",'RPC "'+t+'" failed with status:',h,"response text:",a.getResponseText()),h>0){const u=a.getResponseJson().error;if(u&&u.status&&u.message){const d=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(p)>=0?p:Te.UNKNOWN}(u.status);o(new ze(d,u.message))}else o(new ze(Te.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ze(Te.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{qe("Connection",'RPC "'+t+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,i,15)})}Qi(t,n,i){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=LX(),o=PX(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new OX({})),this.qi(a.initMessageHeaders,n,i),MC()||CC()||B6()||IC()||V6()||AC()||(a.httpHeadersOverwriteParam="$httpHeaders");const l=r.join("");qe("Connection","Creating WebChannel: "+l,a);const c=s.createWebChannel(l,a);let h=!1,u=!1;const d=new mZ({Vi:p=>{u?qe("Connection","Not sending because WebChannel is closed:",p):(h||(qe("Connection","Opening WebChannel transport."),c.open(),h=!0),qe("Connection","WebChannel sending:",p),c.send(p))},Si:()=>c.close()}),f=(p,y,v)=>{p.listen(y,m=>{try{v(m)}catch(g){setTimeout(()=>{throw g},0)}})};return f(c,af.EventType.OPEN,()=>{u||qe("Connection","WebChannel transport opened.")}),f(c,af.EventType.CLOSE,()=>{u||(u=!0,qe("Connection","WebChannel transport closed"),d.Fi())}),f(c,af.EventType.ERROR,p=>{u||(u=!0,ST("Connection","WebChannel transport errored:",p),d.Fi(new ze(Te.UNAVAILABLE,"The operation could not be completed")))}),f(c,af.EventType.MESSAGE,p=>{var y;if(!u){const v=p.data[0];zt(!!v);const m=v,g=m.error||((y=m[0])===null||y===void 0?void 0:y.error);if(g){qe("Connection","WebChannel received error:",g);const w=g.status;let b=function(S){const k=un[S];if(k!==void 0)return FR(k)}(w),E=g.message;b===void 0&&(b=Te.INTERNAL,E="Unknown error status: "+w+" with message "+g.message),u=!0,d.Fi(new ze(b,E)),c.close()}else qe("Connection","WebChannel received:",v),d.Oi(v)}}),f(o,kX.STAT_EVENT,p=>{p.stat===wT.PROXY?qe("Connection","Detected buffering proxy"):p.stat===wT.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.$i()},0),d}}function Mv(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(e){return new CY(e,!0)}class XR{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Oe=t,this.timerId=n,this.Wi=i,this.Gi=r,this.zi=s,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const n=Math.floor(this.Hi+this.tr()),i=Math.max(0,Date.now()-this.Yi),r=Math.max(0,n-i);r>0&&qe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),t())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){this.Ji!==null&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){this.Ji!==null&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(t,n,i,r,s,o,a,l){this.Oe=t,this.nr=i,this.sr=r,this.ir=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new XR(t,n)}hr(){return this.state===1||this.state===5||this.lr()}lr(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&this.ar===null&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(t){this.yr(),this.stream.send(t)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(t,n){this.yr(),this.pr(),this.ur.cancel(),this.rr++,t!==4?this.ur.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(So(n.toString()),So("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Tr(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ni(n)}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.rr===n&&this.Ir(i,r)},i=>{t(()=>{const r=new ze(Te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Ar(r)})})}Ir(t,n){const i=this.Er(this.rr);this.stream=this.Rr(t,n),this.stream.Di(()=>{i(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(r=>{i(()=>this.Ar(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(t){return qe("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return n=>{this.Oe.enqueueAndForget(()=>this.rr===t?n():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vZ extends YR{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.k=s}Rr(t,n){return this.ir.Qi("Listen",t,n)}onMessage(t){this.ur.reset();const n=LY(this.k,t),i=function(r){if(!("targetChange"in r))return Pt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Pt.min():s.readTime?ws(s.readTime):Pt.min()}(t);return this.listener.Pr(n,i)}br(t){const n={};n.database=T0(this.k),n.addTarget=function(r,s){let o;const a=s.target;return o=y0(a)?{documents:kY(r,a)}:{query:OY(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=zR(r,s.resumeToken):s.snapshotVersion.compareTo(Pt.min())>0&&(o.readTime=Rp(r,s.snapshotVersion.toTimestamp())),o}(this.k,t);const i=FY(this.k,t);i&&(n.labels=i),this.gr(n)}vr(t){const n={};n.database=T0(this.k),n.removeTarget=t,this.gr(n)}}class yZ extends YR{constructor(t,n,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.k=s,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,n){return this.ir.Qi("Write",t,n)}onMessage(t){if(zt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const n=NY(t.writeResults,t.commitTime),i=ws(t.commitTime);return this.listener.Cr(i,n)}return zt(!t.writeResults||t.writeResults.length===0),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=T0(this.k),this.gr(t)}Dr(t){const n={streamToken:this.lastStreamToken,writes:t.map(i=>PY(this.k,i))};this.gr(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z extends class{}{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.ir=i,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new ze(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,n,i){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.ir.Bi(t,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ze(Te.UNKNOWN,r.toString())})}ji(t,n,i){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.ir.ji(t,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ze(Te.UNKNOWN,r.toString())})}terminate(){this.$r=!0}}class bZ{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){this.Or===0&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(t){this.state==="Online"?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Or=0,t==="Online"&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(So(n),this.Lr=!1):qe("OnlineStateTracker",n)}jr(){this.Mr!==null&&(this.Mr.cancel(),this.Mr=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=s,this.Hr.Ei(o=>{i.enqueueAndForget(async()=>{qa(this)&&(qe("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=pt(a);l.Gr.add(4),await ad(l),l.Jr.set("Unknown"),l.Gr.delete(4),await Xm(l)}(this))})}),this.Jr=new bZ(i,r)}}async function Xm(e){if(qa(e))for(const t of e.zr)await t(!0)}async function ad(e){for(const t of e.zr)await t(!1)}function ZR(e,t){const n=pt(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Rb(n)?Ib(n):Oc(n).lr()&&Cb(n,t))}function JR(e,t){const n=pt(e),i=Oc(n);n.Wr.delete(t),i.lr()&&QR(n,t),n.Wr.size===0&&(i.lr()?i._r():qa(n)&&n.Jr.set("Unknown"))}function Cb(e,t){e.Yr.X(t.targetId),Oc(e).br(t)}function QR(e,t){e.Yr.X(t),Oc(e).vr(t)}function Ib(e){e.Yr=new TY({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),Oc(e).start(),e.Jr.Br()}function Rb(e){return qa(e)&&!Oc(e).hr()&&e.Wr.size>0}function qa(e){return pt(e).Gr.size===0}function eL(e){e.Yr=void 0}async function xZ(e){e.Wr.forEach((t,n)=>{Cb(e,t)})}async function EZ(e,t){eL(e),Rb(e)?(e.Jr.Kr(t),Ib(e)):e.Jr.set("Unknown")}async function SZ(e,t,n){if(e.Jr.set("Online"),t instanceof UR&&t.state===2&&t.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Wr.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Wr.delete(o),i.Yr.removeTarget(o))}(e,t)}catch(i){qe("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Lp(e,i)}else if(t instanceof If?e.Yr.ot(t):t instanceof VR?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(Pt.min()))try{const i=await KR(e.localStore);n.compareTo(i)>=0&&await function(r,s){const o=r.Yr.gt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Wr.get(l);c&&r.Wr.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=r.Wr.get(a);if(!l)return;r.Wr.set(a,l.withResumeToken(si.EMPTY_BYTE_STRING,l.snapshotVersion)),QR(r,a);const c=new fa(l.target,a,1,l.sequenceNumber);Cb(r,c)}),r.remoteSyncer.applyRemoteEvent(o)}(e,n)}catch(i){qe("RemoteStore","Failed to raise snapshot:",i),await Lp(e,i)}}async function Lp(e,t,n){if(!rd(t))throw t;e.Gr.add(1),await ad(e),e.Jr.set("Offline"),n||(n=()=>KR(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{qe("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await Xm(e)})}function tL(e,t){return t().catch(n=>Lp(e,n,t))}async function Ym(e){const t=pt(e),n=Mo(t);let i=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;TZ(t);)try{const r=await iZ(t.localStore,i);if(r===null){t.Qr.length===0&&n._r();break}i=r.batchId,MZ(t,r)}catch(r){await Lp(t,r)}nL(t)&&iL(t)}function TZ(e){return qa(e)&&e.Qr.length<10}function MZ(e,t){e.Qr.push(t);const n=Mo(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function nL(e){return qa(e)&&!Mo(e).hr()&&e.Qr.length>0}function iL(e){Mo(e).start()}async function AZ(e){Mo(e).kr()}async function CZ(e){const t=Mo(e);for(const n of e.Qr)t.Dr(n.mutations)}async function IZ(e,t,n){const i=e.Qr.shift(),r=Sb.from(i,t,n);await tL(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await Ym(e)}async function RZ(e,t){t&&Mo(e).Sr&&await async function(n,i){if(r=i.code,yY(r)&&r!==Te.ABORTED){const s=n.Qr.shift();Mo(n).wr(),await tL(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ym(n)}var r}(e,t),nL(e)&&iL(e)}async function LZ(e,t){const n=pt(e);t?(n.Gr.delete(2),await Xm(n)):t||(n.Gr.add(2),await ad(n),n.Jr.set("Unknown"))}function Oc(e){return e.Xr||(e.Xr=function(t,n,i){const r=pt(t);return r.Fr(),new vZ(n,r.ir,r.authCredentials,r.appCheckCredentials,r.k,i)}(e.datastore,e.asyncQueue,{Di:xZ.bind(null,e),Ni:EZ.bind(null,e),Pr:SZ.bind(null,e)}),e.zr.push(async t=>{t?(e.Xr.wr(),Rb(e)?Ib(e):e.Jr.set("Unknown")):(await e.Xr.stop(),eL(e))})),e.Xr}function Mo(e){return e.Zr||(e.Zr=function(t,n,i){const r=pt(t);return r.Fr(),new yZ(n,r.ir,r.authCredentials,r.appCheckCredentials,r.k,i)}(e.datastore,e.asyncQueue,{Di:AZ.bind(null,e),Ni:RZ.bind(null,e),Nr:CZ.bind(null,e),Cr:IZ.bind(null,e)}),e.zr.push(async t=>{t?(e.Zr.wr(),await Ym(e)):(await e.Zr.stop(),e.Qr.length>0&&(qe("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))})),e.Zr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new Lb(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Te.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pb(e,t){if(So("AsyncQueue",`${t}: ${e}`),rd(e))return new ze(Te.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t){this.comparator=t?(n,i)=>t(n,i)||at.comparator(n.key,i.key):(n,i)=>at.comparator(n.key,i.key),this.keyedMap=x0(),this.sortedSet=new oi(this.comparator)}static emptySet(t){return new ql(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ql)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new ql;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.eo=new oi(at.comparator)}track(t){const n=t.doc.key,i=this.eo.get(n);i?t.type!==0&&i.type===3?this.eo=this.eo.insert(n,t):t.type===3&&i.type!==1?this.eo=this.eo.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.eo=this.eo.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.eo=this.eo.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.eo=this.eo.remove(n):t.type===1&&i.type===2?this.eo=this.eo.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.eo=this.eo.insert(n,{type:2,doc:t.doc}):ft():this.eo=this.eo.insert(n,t)}no(){const t=[];return this.eo.inorderTraversal((n,i)=>{t.push(i)}),t}}class mc{constructor(t,n,i,r,s,o,a,l){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l}static fromInitialDocuments(t,n,i,r){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new mc(t,n,ql.emptySet(n),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(){this.so=void 0,this.listeners=[]}}class NZ{constructor(){this.queries=new od(t=>AR(t),Hm),this.onlineState="Unknown",this.io=new Set}}async function Nb(e,t){const n=pt(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new PZ),r)try{s.so=await n.onListen(i)}catch(o){const a=Pb(o,`Initialization of query '${b0(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.listeners.push(t),t.ro(n.onlineState),s.so&&t.oo(s.so)&&Ob(n)}async function kb(e,t){const n=pt(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function kZ(e,t){const n=pt(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.oo(r)&&(i=!0);o.so=r}}i&&Ob(n)}function OZ(e,t,n){const i=pt(e),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(t)}function Ob(e){e.io.forEach(t=>{t.next()})}class Db{constructor(t,n,i){this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=i||{}}oo(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new mc(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let n=!1;return this.co?this.ho(t)&&(this.ao.next(t),n=!0):this.lo(t,this.onlineState)&&(this.fo(t),n=!0),this.uo=t,n}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let n=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),n=!0),n}lo(t,n){if(!t.fromCache)return!0;const i=n!=="Offline";return(!this.options.wo||!i)&&(!t.docs.isEmpty()||n==="Offline")}ho(t){if(t.docChanges.length>0)return!0;const n=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}fo(t){t=mc.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(t){this.key=t}}class sL{constructor(t){this.key=t}}class DZ{constructor(t,n){this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=qt(),this.mutatedKeys=qt(),this.Ao=CR(t),this.Ro=new ql(this.Ao)}get Po(){return this.To}bo(t,n){const i=n?n.vo:new KT,r=n?n.Ro:this.Ro;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=Af(this.query)&&r.size===this.query.limit?r.last():null,c=Cp(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,u)=>{const d=r.get(h),f=Wm(this.query,u)?u:null,p=!!d&&this.mutatedKeys.has(d.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?p!==y&&(i.track({type:3,doc:f}),v=!0):this.Vo(d,f)||(i.track({type:2,doc:f}),v=!0,(l&&this.Ao(f,l)>0||c&&this.Ao(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),v=!0):d&&!f&&(i.track({type:1,doc:d}),v=!0,(l||c)&&(a=!0)),v&&(f?(o=o.add(f),s=y?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),Af(this.query)||Cp(this.query))for(;o.size>this.query.limit;){const h=Af(this.query)?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ro:o,vo:i,Bn:a,mutatedKeys:s}}Vo(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i){const r=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const s=t.vo.no();s.sort((c,h)=>function(u,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return f(u)-f(d)}(c.type,h.type)||this.Ao(c.doc,h.doc)),this.So(i);const o=n?this.Do():[],a=this.Io.size===0&&this.current?1:0,l=a!==this.Eo;return this.Eo=a,s.length!==0||l?{snapshot:new mc(this.query,t.Ro,r,s,t.mutatedKeys,a===0,l,!1),Co:o}:{Co:o}}ro(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new KT,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach(n=>this.To=this.To.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.To=this.To.delete(n)),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=qt(),this.Ro.forEach(i=>{this.No(i.key)&&(this.Io=this.Io.add(i.key))});const n=[];return t.forEach(i=>{this.Io.has(i)||n.push(new sL(i))}),this.Io.forEach(i=>{t.has(i)||n.push(new rL(i))}),n}ko(t){this.To=t.zn,this.Io=qt();const n=this.bo(t.documents);return this.applyChanges(n,!0)}xo(){return mc.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,this.Eo===0)}}class FZ{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class BZ{constructor(t){this.key=t,this.$o=!1}}class VZ{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Fo={},this.Oo=new od(a=>AR(a),Hm),this.Mo=new Map,this.Lo=new Set,this.Bo=new oi(at.comparator),this.Uo=new Map,this.qo=new Mb,this.Ko={},this.jo=new Map,this.Qo=pc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return this.Wo===!0}}async function UZ(e,t){const n=YZ(e);let i,r;const s=n.Oo.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.xo();else{const o=await rZ(n.localStore,Pa(t)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await zZ(n,t,i,a==="current"),n.isPrimaryClient&&ZR(n.remoteStore,o)}return r}async function zZ(e,t,n,i){e.Go=(h,u,d)=>async function(f,p,y,v){let m=p.view.bo(y);m.Bn&&(m=await $T(f.localStore,p.query,!1).then(({documents:b})=>p.view.bo(b,m)));const g=v&&v.targetChanges.get(p.targetId),w=p.view.applyChanges(m,f.isPrimaryClient,g);return YT(f,p.targetId,w.Co),w.snapshot}(e,h,u,d);const r=await $T(e.localStore,t,!0),s=new DZ(t,r.zn),o=s.bo(r.documents),a=id.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline"),l=s.applyChanges(o,e.isPrimaryClient,a);YT(e,n,l.Co);const c=new FZ(t,n,s);return e.Oo.set(t,c),e.Mo.has(n)?e.Mo.get(n).push(t):e.Mo.set(n,[t]),l.snapshot}async function HZ(e,t){const n=pt(e),i=n.Oo.get(t),r=n.Mo.get(i.targetId);if(r.length>1)return n.Mo.set(i.targetId,r.filter(s=>!Hm(s,t))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await M0(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),JR(n.remoteStore,i.targetId),A0(n,i.targetId)}).catch(sd)):(A0(n,i.targetId),await M0(n.localStore,i.targetId,!0))}async function WZ(e,t,n){const i=ZZ(e);try{const r=await function(s,o){const a=pt(s),l=Hi.now(),c=o.reduce((u,d)=>u.add(d.key),qt());let h;return a.persistence.runTransaction("Locally write mutations","readwrite",u=>a.Wn.vn(u,c).next(d=>{h=d;const f=[];for(const p of o){const y=mY(p,h.get(p.key));y!=null&&f.push(new ja(p.key,y,SR(y.value.mapValue),bs.exists(!0)))}return a.An.addMutationBatch(u,l,f,o)})).then(u=>(u.applyToLocalDocumentSet(h),{batchId:u.batchId,changes:h}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.Ko[s.currentUser.toKey()];l||(l=new oi(Nt)),l=l.insert(o,a),s.Ko[s.currentUser.toKey()]=l}(i,r.batchId,n),await ld(i,r.changes),await Ym(i.remoteStore)}catch(r){const s=Pb(r,"Failed to persist write");n.reject(s)}}async function oL(e,t){const n=pt(e);try{const i=await tZ(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Uo.get(s);o&&(zt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.$o=!0:r.modifiedDocuments.size>0?zt(o.$o):r.removedDocuments.size>0&&(zt(o.$o),o.$o=!1))}),await ld(n,i,t)}catch(i){await sd(i)}}function XT(e,t,n){const i=pt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Oo.forEach((s,o)=>{const a=o.view.ro(t);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=pt(s);a.onlineState=o;let l=!1;a.queries.forEach((c,h)=>{for(const u of h.listeners)u.ro(o)&&(l=!0)}),l&&Ob(a)}(i.eventManager,t),r.length&&i.Fo.Pr(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function GZ(e,t,n){const i=pt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Uo.get(t),s=r&&r.key;if(s){let o=new oi(at.comparator);o=o.insert(s,qn.newNoDocument(s,Pt.min()));const a=qt().add(s),l=new qm(Pt.min(),new Map,new Un(Nt),o,a);await oL(i,l),i.Bo=i.Bo.remove(s),i.Uo.delete(t),Fb(i)}else await M0(i.localStore,t,!1).then(()=>A0(i,t,n)).catch(sd)}async function $Z(e,t){const n=pt(e),i=t.batch.batchId;try{const r=await eZ(n.localStore,t);lL(n,i,null),aL(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ld(n,r)}catch(r){await sd(r)}}async function jZ(e,t,n){const i=pt(e);try{const r=await function(s,o){const a=pt(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.An.lookupMutationBatch(l,o).next(h=>(zt(h!==null),c=h.keys(),a.An.removeMutationBatch(l,h))).next(()=>a.An.performConsistencyCheck(l)).next(()=>a.Wn.vn(l,c))})}(i.localStore,t);lL(i,t,n),aL(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await ld(i,r)}catch(r){await sd(r)}}function aL(e,t){(e.jo.get(t)||[]).forEach(n=>{n.resolve()}),e.jo.delete(t)}function lL(e,t,n){const i=pt(e);let r=i.Ko[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(n?s.reject(n):s.resolve(),r=r.remove(t)),i.Ko[i.currentUser.toKey()]=r}}function A0(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Mo.get(t))e.Oo.delete(i),n&&e.Fo.zo(i,n);e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(i=>{e.qo.containsKey(i)||cL(e,i)})}function cL(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);n!==null&&(JR(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Fb(e))}function YT(e,t,n){for(const i of n)i instanceof rL?(e.qo.addReference(i.key,t),qZ(e,i)):i instanceof sL?(qe("SyncEngine","Document no longer in limbo: "+i.key),e.qo.removeReference(i.key,t),e.qo.containsKey(i.key)||cL(e,i.key)):ft()}function qZ(e,t){const n=t.key,i=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(i)||(qe("SyncEngine","New document in limbo: "+n),e.Lo.add(i),Fb(e))}function Fb(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new at(en.fromString(t)),i=e.Qo.next();e.Uo.set(i,new BZ(n)),e.Bo=e.Bo.insert(n,i),ZR(e.remoteStore,new fa(Pa(zm(n.path)),i,2,gb.I))}}async function ld(e,t,n){const i=pt(e),r=[],s=[],o=[];i.Oo.isEmpty()||(i.Oo.forEach((a,l)=>{o.push(i.Go(l,t,n).then(c=>{if(c){i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c.fromCache?"not-current":"current"),r.push(c);const h=Tb.$n(l.targetId,c);s.push(h)}}))}),await Promise.all(o),i.Fo.Pr(r),await async function(a,l){const c=pt(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ve.forEach(l,u=>Ve.forEach(u.kn,d=>c.persistence.referenceDelegate.addReference(h,u.targetId,d)).next(()=>Ve.forEach(u.xn,d=>c.persistence.referenceDelegate.removeReference(h,u.targetId,d)))))}catch(h){if(!rd(h))throw h;qe("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const u=h.targetId;if(!h.fromCache){const d=c.qn.get(u),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.qn=c.qn.insert(u,p)}}}(i.localStore,s))}async function KZ(e,t){const n=pt(e);if(!n.currentUser.isEqual(t)){qe("SyncEngine","User change. New user:",t.toKey());const i=await qR(n.localStore,t);n.currentUser=t,function(r,s){r.jo.forEach(o=>{o.forEach(a=>{a.reject(new ze(Te.CANCELLED,s))})}),r.jo.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await ld(n,i.Gn)}}function XZ(e,t){const n=pt(e),i=n.Uo.get(t);if(i&&i.$o)return qt().add(i.key);{let r=qt();const s=n.Mo.get(t);if(!s)return r;for(const o of s){const a=n.Oo.get(o);r=r.unionWith(a.view.Po)}return r}}function YZ(e){const t=pt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=oL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=XZ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GZ.bind(null,t),t.Fo.Pr=kZ.bind(null,t.eventManager),t.Fo.zo=OZ.bind(null,t.eventManager),t}function ZZ(e){const t=pt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$Z.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jZ.bind(null,t),t}class JZ{constructor(){this.synchronizeTabs=!1}async initialize(t){this.k=Km(t.databaseInfo.databaseId),this.sharedClientState=this.Jo(t),this.persistence=this.Yo(t),await this.persistence.start(),this.gcScheduler=this.Xo(t),this.localStore=this.Zo(t)}Xo(t){return null}Zo(t){return QY(this.persistence,new ZY,t.initialUser,this.k)}Yo(t){return new uZ(Ab.ks,this.k)}Jo(t){return new dZ}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class QZ{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KZ.bind(null,this.syncEngine),await LZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new NZ}createDatastore(t){const n=Km(t.databaseInfo.databaseId),i=(r=t.databaseInfo,new gZ(r));var r;return function(s,o,a,l){return new _Z(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return n=this.localStore,i=this.datastore,r=t.asyncQueue,s=a=>XT(this.syncEngine,a,0),o=qT.bt()?new qT:new fZ,new wZ(n,i,r,s,o);var n,i,r,s,o}createSyncEngine(t,n){return function(i,r,s,o,a,l,c){const h=new VZ(i,r,s,o,a,l);return c&&(h.Wo=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(t){const n=pt(t);qe("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),await ad(n),n.Hr.shutdown(),n.Jr.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(t,n,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=xi.UNAUTHENTICATED,this.clientId=bR.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{qe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,()=>Promise.resolve())}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ze(Te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=Pb(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function tJ(e,t){e.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await qR(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function nJ(e,t){e.asyncQueue.verifyOperationInProgress();const n=await iJ(e);qe("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener(r=>async function(s,o){const a=pt(s);a.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const l=qa(a);a.Gr.add(3),await ad(a),l&&a.Jr.set("Unknown"),await a.remoteSyncer.handleCredentialChange(o),a.Gr.delete(3),await Xm(a)}(t.remoteStore,r)),e.onlineComponents=t}async function iJ(e){return e.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),await tJ(e,new JZ)),e.offlineComponents}async function uL(e){return e.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),await nJ(e,new QZ)),e.onlineComponents}function rJ(e){return uL(e).then(t=>t.syncEngine)}async function Pp(e){const t=await uL(e),n=t.eventManager;return n.onListen=UZ.bind(null,t.syncEngine),n.onUnlisten=HZ.bind(null,t.syncEngine),n}function sJ(e,t,n={}){const i=new _s;return e.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new Bb({next:u=>{s.enqueueAndForget(()=>kb(r,h));const d=u.docs.has(o);!d&&u.fromCache?l.reject(new ze(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&u.fromCache&&a&&a.source==="server"?l.reject(new ze(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(u)},error:u=>l.reject(u)}),h=new Db(zm(o.path),c,{includeMetadataChanges:!0,wo:!0});return Nb(r,h)}(await Pp(e),e.asyncQueue,t,n,i)),i.promise}function oJ(e,t,n={}){const i=new _s;return e.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new Bb({next:u=>{s.enqueueAndForget(()=>kb(r,h)),u.fromCache&&a.source==="server"?l.reject(new ze(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(u)},error:u=>l.reject(u)}),h=new Db(o,c,{includeMetadataChanges:!0,wo:!0});return Nb(r,h)}(await Pp(e),e.asyncQueue,t,n,i)),i.promise}class aJ{constructor(t,n,i,r,s,o,a,l){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Ch{constructor(t,n){this.projectId=t,this.database=n||"(default)"}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Ch&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(e,t,n){if(!n)throw new ze(Te.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lJ(e,t,n,i){if(t===!0&&i===!0)throw new ze(Te.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function JT(e){if(!at.isDocumentKey(e))throw new ze(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function QT(e){if(at.isDocumentKey(e))throw new ze(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zm(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ft()}function Wi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ze(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zm(e);throw new ze(Te.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new ze(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ze(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,lJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t,n,i){this._authCredentials=n,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e1({}),this._settingsFrozen=!1,t instanceof Ch?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ze(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ch(r.options.projectId)}(t))}get app(){if(!this._app)throw new ze(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ze(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e1(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new BX;switch(n.type){case"gapi":const i=n.client;return zt(!(typeof i!="object"||i===null||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new zX(i,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new ze(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=ZT.get(t);n&&(qe("ComponentProvider","Removing Datastore"),ZT.delete(t),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ti(this.firestore,t,this._key)}}class Ka{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ka(this.firestore,t,this._query)}}class go extends Ka{constructor(t,n,i){super(t,n,zm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ti(this.firestore,null,new at(t))}withConverter(t){return new go(this.firestore,t,this._path)}}function Av(e,t,...n){if(e=on(e),hL("collection","path",t),e instanceof Vb){const i=en.fromString(t,...n);return QT(i),new go(e,null,i)}{if(!(e instanceof ti||e instanceof go))throw new ze(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(en.fromString(t,...n));return QT(i),new go(e.firestore,null,i)}}function Tl(e,t,...n){if(e=on(e),arguments.length===1&&(t=bR.A()),hL("doc","path",t),e instanceof Vb){const i=en.fromString(t,...n);return JT(i),new ti(e,null,new at(i))}{if(!(e instanceof ti||e instanceof go))throw new ze(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(en.fromString(t,...n));return JT(i),new ti(e.firestore,e instanceof go?e.converter:null,new at(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new XR(this,"async_queue_retry"),this.Ra=()=>{const n=Mv();n&&qe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ur.er()};const t=Mv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pa(),this.ba(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const n=Mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.Pa(),this.ya)return new Promise(()=>{});const n=new _s;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ga.push(t),this.va()))}async va(){if(this.ga.length!==0){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(t){if(!rd(t))throw t;qe("AsyncQueue","Operation failed with retryable error: "+t)}this.ga.length>0&&this.ur.Zi(()=>this.va())}}ba(t){const n=this.ma.then(()=>(this.Ea=!0,t().catch(i=>{this.Ta=i,this.Ea=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw So("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ea=!1,i))));return this.ma=n,n}enqueueAfterDelay(t,n,i){this.Pa(),this.Aa.indexOf(t)>-1&&(n=0);const r=Lb.createAndSchedule(this,t,n,i,s=>this.Va(s));return this.pa.push(r),r}Pa(){this.Ta&&ft()}verifyOperationInProgress(){}async Sa(){let t;do t=this.ma,await t;while(t!==this.ma)}Da(t){for(const n of this.pa)if(n.timerId===t)return!0;return!1}Ca(t){return this.Sa().then(()=>{this.pa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.pa)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Sa()})}Na(t){this.Aa.push(t)}Va(t){const n=this.pa.indexOf(t);this.pa.splice(n,1)}}function t1(e){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const r of n)if(r in i&&typeof i[r]=="function")return!0;return!1}(e,["next","error","complete"])}class Ps extends Vb{constructor(t,n,i){super(t,n,i),this.type="firestore",this._queue=new cJ,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||dL(this),this._firestoreClient.terminate()}}function uJ(e=xm()){return Po(e,"firestore").getImmediate()}function Jm(e){return e._firestoreClient||dL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dL(e){var t;const n=e._freezeSettings(),i=function(r,s,o,a){return new aJ(r,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new eJ(e._authCredentials,e._appCheckCredentials,e._queue,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ze(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(si.fromBase64String(t))}catch(n){throw new ze(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new gc(si.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ze(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ze(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hJ=/^__.*__$/;class dJ{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ja(t,this.data,this.fieldMask,n,this.fieldTransforms):new jm(t,this.data,n,this.fieldTransforms)}}class fL{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ja(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function pL(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class zb{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.k=i,this.ignoreUndefinedProperties=r,s===void 0&&this.ka(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(t){return new zb(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.$a({path:i,Oa:!1});return r.Ma(t),r}La(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.$a({path:i,Oa:!1});return r.ka(),r}Ba(t){return this.$a({path:void 0,Oa:!0})}Ua(t){return Np(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}ka(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}Ma(t){if(t.length===0)throw this.Ua("Document fields must not be empty");if(pL(this.xa)&&hJ.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}class fJ{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=i||Km(t)}ja(t,n,i,r=!1){return new zb({xa:t,methodName:n,Ka:i,path:Si.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function tg(e){const t=e._freezeSettings(),n=Km(e._databaseId);return new fJ(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mL(e,t,n,i,r,s={}){const o=e.ja(s.merge||s.mergeFields?2:0,t,n,r);Wb("Data must be an object, but it was:",o,i);const a=gL(i,o);let l,c;if(s.merge)l=new wh(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const u of s.mergeFields){const d=C0(t,u,n);if(!o.contains(d))throw new ze(Te.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);yL(h,d)||h.push(d)}l=new wh(h),c=o.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,c=o.fieldTransforms;return new dJ(new Di(a),l,c)}class ng extends eg{_toFieldTransform(t){if(t.xa!==2)throw t.xa===1?t.Ua(`${this._methodName}() can only appear at the top level of your update data`):t.Ua(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ng}}class Hb extends eg{_toFieldTransform(t){return new hY(t.path,new Th)}isEqual(t){return t instanceof Hb}}function pJ(e,t,n,i){const r=e.ja(1,t,n);Wb("Data must be an object, but it was:",r,i);const s=[],o=Di.empty();$a(i,(l,c)=>{const h=Gb(t,l,n);c=on(c);const u=r.La(h);if(c instanceof ng)s.push(h);else{const d=cd(c,u);d!=null&&(s.push(h),o.set(h,d))}});const a=new wh(s);return new fL(o,a,r.fieldTransforms)}function mJ(e,t,n,i,r,s){const o=e.ja(1,t,n),a=[C0(t,i,n)],l=[r];if(s.length%2!=0)throw new ze(Te.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(C0(t,s[d])),l.push(s[d+1]);const c=[],h=Di.empty();for(let d=a.length-1;d>=0;--d)if(!yL(c,a[d])){const f=a[d];let p=l[d];p=on(p);const y=o.La(f);if(p instanceof ng)c.push(f);else{const v=cd(p,y);v!=null&&(c.push(f),h.set(f,v))}}const u=new wh(c);return new fL(h,u,o.fieldTransforms)}function gJ(e,t,n,i=!1){return cd(n,e.ja(i?4:3,t))}function cd(e,t){if(vL(e=on(e)))return Wb("Unsupported field value:",t,e),gL(e,t);if(e instanceof eg)return function(n,i){if(!pL(i.xa))throw i.Ua(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Ua(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&t.xa!==4)throw t.Ua("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const o of n){let a=cd(o,i.Ba(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(e,t)}return function(n,i){if((n=on(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return lY(i.k,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Hi.fromDate(n);return{timestampValue:Rp(i.k,r)}}if(n instanceof Hi){const r=new Hi(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Rp(i.k,r)}}if(n instanceof Ub)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof gc)return{bytesValue:zR(i.k,n._byteString)};if(n instanceof ti){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i.Ua(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Eb(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.Ua(`Unsupported field value: ${Zm(n)}`)}(e,t)}function gL(e,t){const n={};return wR(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$a(e,(i,r)=>{const s=cd(r,t.Fa(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function vL(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Hi||e instanceof Ub||e instanceof gc||e instanceof ti||e instanceof eg)}function Wb(e,t,n){if(!vL(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Zm(n);throw i==="an object"?t.Ua(e+" a custom object"):t.Ua(e+" "+i)}}function C0(e,t,n){if((t=on(t))instanceof Qm)return t._internalPath;if(typeof t=="string")return Gb(e,t);throw Np("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const vJ=new RegExp("[~\\*/\\[\\]]");function Gb(e,t,n){if(t.search(vJ)>=0)throw Np(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Qm(...t.split("."))._internalPath}catch{throw Np(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Np(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new ze(Te.INVALID_ARGUMENT,a+e+l)}function yL(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yJ extends _L{data(){return super.data()}}function ig(e,t){return typeof t=="string"?Gb(e,t):t instanceof Qm?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bL extends _L{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(ig("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Rf extends bL{data(t={}){return super.data(t)}}class wL{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new uu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Rf(this._firestore,this._userDataWriter,i.key,i,new uu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new Rf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new uu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new Rf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new uu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:_J(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _J(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(e){if(Cp(e)&&e.explicitOrderBy.length===0)throw new ze(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EL{}function n1(e,...t){for(const n of t)e=n._apply(e);return e}class bJ extends EL{constructor(t,n,i){super(),this.Ga=t,this.za=n,this.Ha=i,this.type="where"}_apply(t){const n=tg(t.firestore),i=function(r,s,o,a,l,c,h){let u;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ze(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on FieldPath.documentId().`);if(c==="in"||c==="not-in"){r1(h,c);const f=[];for(const p of h)f.push(i1(a,r,p));u={arrayValue:{values:f}}}else u=i1(a,r,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||r1(h,c),u=gJ(o,s,h,c==="in"||c==="not-in");const d=pi.create(l,c,u);return function(f,p){if(p.V()){const v=xb(f);if(v!==null&&!v.isEqual(p.field))throw new ze(Te.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${v.toString()}' and '${p.field.toString()}'`);const m=wb(f);m!==null&&SL(f,p.field,m)}const y=function(v,m){for(const g of v.filters)if(m.indexOf(g.op)>=0)return g.op;return null}(f,function(v){switch(v){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(p.op));if(y!==null)throw y===p.op?new ze(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${p.op.toString()}' filter.`):new ze(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${p.op.toString()}' filters with '${y.toString()}' filters.`)}(r,d),d}(t._query,"where",n,t.firestore._databaseId,this.Ga,this.za,this.Ha);return new Ka(t.firestore,t.converter,function(r,s){const o=r.filters.concat([s]);return new kc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),o,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}function wJ(e,t,n){const i=t,r=ig("where",e);return new bJ(r,i,n)}class xJ extends EL{constructor(t,n){super(),this.Ga=t,this.Ja=n,this.type="orderBy"}_apply(t){const n=function(i,r,s){if(i.startAt!==null)throw new ze(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ze(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new jl(r,s);return function(a,l){if(wb(a)===null){const c=xb(a);c!==null&&SL(a,c,l.field)}}(i,o),o}(t._query,this.Ga,this.Ja);return new Ka(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new kc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function EJ(e,t="asc"){const n=t,i=ig("orderBy",e);return new xJ(i,n)}function i1(e,t,n){if(typeof(n=on(n))=="string"){if(n==="")throw new ze(Te.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!MR(t)&&n.indexOf("/")!==-1)throw new ze(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(en.fromString(n));if(!at.isDocumentKey(i))throw new ze(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return AT(e,new at(i))}if(n instanceof ti)return AT(e,n._key);throw new ze(Te.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zm(n)}.`)}function r1(e,t){if(!Array.isArray(e)||e.length===0)throw new ze(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new ze(Te.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function SL(e,t,n){if(!n.isEqual(t))throw new ze(Te.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{convertValue(t,n="none"){switch(La(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(dc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw ft()}}convertObject(t,n){const i={};return $a(t.fields,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(t){return new Ub(hn(t.latitude),hn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=ER(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(xh(t));default:return null}}convertTimestamp(t){const n=To(t);return new Hi(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=en.fromString(t);zt($R(i));const r=new Ch(i.get(1),i.get(3)),s=new at(i.popFirst(5));return r.isEqual(n)||So(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(e){e=Wi(e,ti);const t=Wi(e.firestore,Ps);return sJ(Jm(t),e._key).then(n=>ML(t,e,n))}class $b extends SJ{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ti(this.firestore,null,n)}}function MJ(e){e=Wi(e,Ka);const t=Wi(e.firestore,Ps),n=Jm(t),i=new $b(t);return xL(e._query),oJ(n,e._query).then(r=>new wL(t,i,e,r))}function AJ(e,t,n){e=Wi(e,ti);const i=Wi(e.firestore,Ps),r=TL(e.converter,t,n);return rg(i,[mL(tg(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,bs.none())])}function CJ(e,t,n,...i){e=Wi(e,ti);const r=Wi(e.firestore,Ps),s=tg(r);let o;return o=typeof(t=on(t))=="string"||t instanceof Qm?mJ(s,"updateDoc",e._key,t,n,i):pJ(s,"updateDoc",e._key,t),rg(r,[o.toMutation(e._key,bs.exists(!0))])}function IJ(e){return rg(Wi(e.firestore,Ps),[new DR(e._key,bs.none())])}function RJ(e,t){const n=Wi(e.firestore,Ps),i=Tl(e),r=TL(e.converter,t);return rg(n,[mL(tg(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,bs.exists(!1))]).then(()=>i)}function s1(e,...t){var n,i,r;e=on(e);let s={includeMetadataChanges:!1},o=0;typeof t[o]!="object"||t1(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(t1(t[o])){const u=t[o];t[o]=(n=u.next)===null||n===void 0?void 0:n.bind(u),t[o+1]=(i=u.error)===null||i===void 0?void 0:i.bind(u),t[o+2]=(r=u.complete)===null||r===void 0?void 0:r.bind(u)}let l,c,h;if(e instanceof ti)c=Wi(e.firestore,Ps),h=zm(e._key.path),l={next:u=>{t[o]&&t[o](ML(c,e,u))},error:t[o+1],complete:t[o+2]};else{const u=Wi(e,Ka);c=Wi(u.firestore,Ps),h=u._query;const d=new $b(c);l={next:f=>{t[o]&&t[o](new wL(c,d,u,f))},error:t[o+1],complete:t[o+2]},xL(e._query)}return function(u,d,f,p){const y=new Bb(p),v=new Db(d,y,f);return u.asyncQueue.enqueueAndForget(async()=>Nb(await Pp(u),v)),()=>{y.na(),u.asyncQueue.enqueueAndForget(async()=>kb(await Pp(u),v))}}(Jm(c),h,a,l)}function rg(e,t){return function(n,i){const r=new _s;return n.asyncQueue.enqueueAndForget(async()=>WZ(await rJ(n),i,r)),r.promise}(Jm(e),t)}function ML(e,t,n){const i=n.docs.get(t._key),r=new $b(e);return new bL(e,r,t._key,i,new uu(n.hasPendingWrites,n.fromCache),t.converter)}function LJ(){return new Hb("serverTimestamp")}(function(e,t=!0){(function(n){Pc=n})(Wh),Er(new cr("firestore",(n,{options:i})=>{const r=n.getProvider("app").getImmediate(),s=new Ps(r,new VX(n.getProvider("auth-internal")),new WX(n.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),zi(xT,"3.4.1",e),zi(xT,"3.4.1","esm2017")})();function PJ(e){return Array.prototype.slice.call(e)}function AL(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function sg(e,t,n){var i,r=new Promise(function(s,o){i=e[t].apply(e,n),AL(i).then(s,o)});return r.request=i,r}function NJ(e,t,n){var i=sg(e,t,n);return i.then(function(r){if(!!r)return new Ih(r,i.request)})}function Dc(e,t,n){n.forEach(function(i){Object.defineProperty(e.prototype,i,{get:function(){return this[t][i]},set:function(r){this[t][i]=r}})})}function jb(e,t,n,i){i.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return sg(this[t],r,arguments)})})}function og(e,t,n,i){i.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function CL(e,t,n,i){i.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return NJ(this[t],r,arguments)})})}function Xa(e){this._index=e}Dc(Xa,"_index",["name","keyPath","multiEntry","unique"]);jb(Xa,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);CL(Xa,"_index",IDBIndex,["openCursor","openKeyCursor"]);function Ih(e,t){this._cursor=e,this._request=t}Dc(Ih,"_cursor",["direction","key","primaryKey","value"]);jb(Ih,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(Ih.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),AL(t._request).then(function(i){if(!!i)return new Ih(i,t._request)})})})});function Zr(e){this._store=e}Zr.prototype.createIndex=function(){return new Xa(this._store.createIndex.apply(this._store,arguments))};Zr.prototype.index=function(){return new Xa(this._store.index.apply(this._store,arguments))};Dc(Zr,"_store",["name","keyPath","indexNames","autoIncrement"]);jb(Zr,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);CL(Zr,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);og(Zr,"_store",IDBObjectStore,["deleteIndex"]);function ud(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}ud.prototype.objectStore=function(){return new Zr(this._tx.objectStore.apply(this._tx,arguments))};Dc(ud,"_tx",["objectStoreNames","mode"]);og(ud,"_tx",IDBTransaction,["abort"]);function ag(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new ud(n)}ag.prototype.createObjectStore=function(){return new Zr(this._db.createObjectStore.apply(this._db,arguments))};Dc(ag,"_db",["name","version","objectStoreNames"]);og(ag,"_db",IDBDatabase,["deleteObjectStore","close"]);function lg(e){this._db=e}lg.prototype.transaction=function(){return new ud(this._db.transaction.apply(this._db,arguments))};Dc(lg,"_db",["name","version","objectStoreNames"]);og(lg,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[Zr,Xa].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=PJ(arguments),i=n[n.length-1],r=this._store||this._index,s=r[e].apply(r,n.slice(0,-1));s.onsuccess=function(){i(s.result)}})})});[Xa,Zr].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var i=this,r=[];return new Promise(function(s){i.iterateCursor(t,function(o){if(!o){s(r);return}if(r.push(o.value),n!==void 0&&r.length==n){s(r);return}o.continue()})})})});function qb(e,t,n){var i=sg(indexedDB,"open",[e,t]),r=i.request;return r&&(r.onupgradeneeded=function(s){n&&n(new ag(r.result,s.oldVersion,r.transaction))}),i.then(function(s){return new lg(s)})}function Cv(e){return sg(indexedDB,"deleteDatabase",[e])}const IL="@firebase/installations",Kb="0.5.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=1e4,LL=`w:${Kb}`,PL="FIS_v2",kJ="https://firebaseinstallations.googleapis.com/v1",OJ=60*60*1e3,DJ="installations",FJ="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},ka=new Lo(DJ,FJ,BJ);function NL(e){return e instanceof Wa&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL({projectId:e}){return`${kJ}/projects/${e}/installations`}function OL(e){return{token:e.token,requestStatus:2,expiresIn:UJ(e.expiresIn),creationTime:Date.now()}}async function DL(e,t){const i=(await t.json()).error;return ka.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function FL({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function VJ(e,{refreshToken:t}){const n=FL(e);return n.append("Authorization",zJ(t)),n}async function BL(e){const t=await e();return t.status>=500&&t.status<600?e():t}function UJ(e){return Number(e.replace("s","000"))}function zJ(e){return`${PL} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HJ(e,{fid:t}){const n=kL(e),i=FL(e),r={fid:t,authVersion:PL,appId:e.appId,sdkVersion:LL},s={method:"POST",headers:i,body:JSON.stringify(r)},o=await BL(()=>fetch(n,s));if(o.ok){const a=await o.json();return{fid:a.fid||t,registrationStatus:2,refreshToken:a.refreshToken,authToken:OL(a.authToken)}}else throw await DL("Create Installation",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJ(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GJ=/^[cdef][\w-]{21}$/,I0="";function $J(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=jJ(e);return GJ.test(n)?n:I0}catch{return I0}}function jJ(e){return WJ(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Map;function zL(e,t){const n=cg(e);HL(n,t),qJ(n,t)}function HL(e,t){const n=UL.get(e);if(!!n)for(const i of n)i(t)}function qJ(e,t){const n=KJ();n&&n.postMessage({key:e,fid:t}),XJ()}let aa=null;function KJ(){return!aa&&"BroadcastChannel"in self&&(aa=new BroadcastChannel("[Firebase] FID Change"),aa.onmessage=e=>{HL(e.data.key,e.data.fid)}),aa}function XJ(){UL.size===0&&aa&&(aa.close(),aa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ="firebase-installations-database",ZJ=1,Oa="firebase-installations-store";let Iv=null;function Xb(){return Iv||(Iv=qb(YJ,ZJ,e=>{switch(e.oldVersion){case 0:e.createObjectStore(Oa)}})),Iv}async function kp(e,t){const n=cg(e),r=(await Xb()).transaction(Oa,"readwrite"),s=r.objectStore(Oa),o=await s.get(n);return await s.put(t,n),await r.complete,(!o||o.fid!==t.fid)&&zL(e,t.fid),t}async function WL(e){const t=cg(e),i=(await Xb()).transaction(Oa,"readwrite");await i.objectStore(Oa).delete(t),await i.complete}async function ug(e,t){const n=cg(e),r=(await Xb()).transaction(Oa,"readwrite"),s=r.objectStore(Oa),o=await s.get(n),a=t(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.complete,a&&(!o||o.fid!==a.fid)&&zL(e,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(e){let t;const n=await ug(e,i=>{const r=JJ(i),s=QJ(e,r);return t=s.registrationPromise,s.installationEntry});return n.fid===I0?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function JJ(e){const t=e||{fid:$J(),registrationStatus:0};return GL(t)}function QJ(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ka.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=eQ(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:tQ(e)}:{installationEntry:t}}async function eQ(e,t){try{const n=await HJ(e,t);return kp(e,n)}catch(n){throw NL(n)&&n.customData.serverCode===409?await WL(e):await kp(e,{fid:t.fid,registrationStatus:0}),n}}async function tQ(e){let t=await o1(e);for(;t.registrationStatus===1;)await VL(100),t=await o1(e);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Yb(e);return i||n}return t}function o1(e){return ug(e,t=>{if(!t)throw ka.create("installation-not-found");return GL(t)})}function GL(e){return nQ(e)?{fid:e.fid,registrationStatus:0}:e}function nQ(e){return e.registrationStatus===1&&e.registrationTime+RL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iQ({appConfig:e,platformLoggerProvider:t},n){const i=rQ(e,n),r=VJ(e,n),s=t.getImmediate({optional:!0});s&&r.append("x-firebase-client",s.getPlatformInfoString());const o={installation:{sdkVersion:LL}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await BL(()=>fetch(i,a));if(l.ok){const c=await l.json();return OL(c)}else throw await DL("Generate Auth Token",l)}function rQ(e,{fid:t}){return`${kL(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(e,t=!1){let n;const i=await ug(e.appConfig,s=>{if(!$L(s))throw ka.create("not-registered");const o=s.authToken;if(!t&&aQ(o))return s;if(o.requestStatus===1)return n=sQ(e,t),s;{if(!navigator.onLine)throw ka.create("app-offline");const a=cQ(s);return n=oQ(e,a),a}});return n?await n:i.authToken}async function sQ(e,t){let n=await a1(e.appConfig);for(;n.authToken.requestStatus===1;)await VL(100),n=await a1(e.appConfig);const i=n.authToken;return i.requestStatus===0?Zb(e,t):i}function a1(e){return ug(e,t=>{if(!$L(t))throw ka.create("not-registered");const n=t.authToken;return uQ(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function oQ(e,t){try{const n=await iQ(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await kp(e.appConfig,i),n}catch(n){if(NL(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await WL(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await kp(e.appConfig,i)}throw n}}function $L(e){return e!==void 0&&e.registrationStatus===2}function aQ(e){return e.requestStatus===2&&!lQ(e)}function lQ(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+OJ}function cQ(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function uQ(e){return e.requestStatus===1&&e.requestTime+RL<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hQ(e){const t=e,{installationEntry:n,registrationPromise:i}=await Yb(t.appConfig);return i?i.catch(console.error):Zb(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dQ(e,t=!1){const n=e;return await fQ(n.appConfig),(await Zb(n,t)).token}async function fQ(e){const{registrationPromise:t}=await Yb(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pQ(e){if(!e||!e.options)throw Rv("App Configuration");if(!e.name)throw Rv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Rv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Rv(e){return ka.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="installations",mQ="installations-internal",gQ=e=>{const t=e.getProvider("app").getImmediate(),n=pQ(t),i=Po(t,"platform-logger");return{app:t,appConfig:n,platformLoggerProvider:i,_delete:()=>Promise.resolve()}},vQ=e=>{const t=e.getProvider("app").getImmediate(),n=Po(t,jL).getImmediate();return{getId:()=>hQ(n),getToken:r=>dQ(n,r)}};function yQ(){Er(new cr(jL,gQ,"PUBLIC")),Er(new cr(mQ,vQ,"PRIVATE"))}yQ();zi(IL,Kb);zi(IL,Kb,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q="/firebase-messaging-sw.js",bQ="/firebase-cloud-messaging-push-scope",qL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wQ="https://fcmregistrations.googleapis.com/v1",KL="google.c.a.c_id",xQ="google.c.a.c_l",EQ="google.c.a.ts",SQ="google.c.a.e";var l1;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(l1||(l1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Rh;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Rh||(Rh={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function TQ(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="fcm_token_details_db",MQ=5,c1="fcm_token_object_Store";async function AQ(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(Lv))return null;let t=null;return(await qb(Lv,MQ,async i=>{var r;if(i.oldVersion<2||!i.objectStoreNames.contains(c1))return;const s=i.transaction.objectStore(c1),o=await s.index("fcmSenderId").get(e);if(await s.clear(),!!o){if(i.oldVersion===2){const a=o;if(!a.auth||!a.p256dh||!a.endpoint)return;t={token:a.fcmToken,createTime:(r=a.createTime)!==null&&r!==void 0?r:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:typeof a.vapidKey=="string"?a.vapidKey:us(a.vapidKey)}}}else if(i.oldVersion===3){const a=o;t={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:us(a.auth),p256dh:us(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:us(a.vapidKey)}}}else if(i.oldVersion===4){const a=o;t={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:us(a.auth),p256dh:us(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:us(a.vapidKey)}}}}})).close(),await Cv(Lv),await Cv("fcm_vapid_details_db"),await Cv("undefined"),CQ(t)?t:null}function CQ(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ="firebase-messaging-database",RQ=1,Da="firebase-messaging-store";let Pv=null;function Jb(){return Pv||(Pv=qb(IQ,RQ,e=>{switch(e.oldVersion){case 0:e.createObjectStore(Da)}})),Pv}async function XL(e){const t=ew(e),i=await(await Jb()).transaction(Da).objectStore(Da).get(t);if(i)return i;{const r=await AQ(e.appConfig.senderId);if(r)return await Qb(e,r),r}}async function Qb(e,t){const n=ew(e),r=(await Jb()).transaction(Da,"readwrite");return await r.objectStore(Da).put(t,n),await r.complete,t}async function LQ(e){const t=ew(e),i=(await Jb()).transaction(Da,"readwrite");await i.objectStore(Da).delete(t),await i.complete}function ew({appConfig:e}){return e.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQ={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["only-available-in-window"]:"This method is available in a Window context.",["only-available-in-sw"]:"This method is available in a service worker context.",["permission-default"]:"The notification permission was not granted and dismissed instead.",["permission-blocked"]:"The notification permission was not granted and blocked instead.",["unsupported-browser"]:"This browser doesn't support the API's required to use the Firebase SDK.",["indexed-db-unsupported"]:"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)",["failed-service-worker-registration"]:"We are unable to register the default service worker. {$browserErrorMessage}",["token-subscribe-failed"]:"A problem occurred while subscribing the user to FCM: {$errorInfo}",["token-subscribe-no-token"]:"FCM returned no token when subscribing the user to push.",["token-unsubscribe-failed"]:"A problem occurred while unsubscribing the user from FCM: {$errorInfo}",["token-update-failed"]:"A problem occurred while updating the user from FCM: {$errorInfo}",["token-update-no-token"]:"FCM returned no token when updating the user to push.",["use-sw-after-get-token"]:"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",["invalid-sw-registration"]:"The input to useServiceWorker() must be a ServiceWorkerRegistration.",["invalid-bg-handler"]:"The input to setBackgroundMessageHandler() must be a function.",["invalid-vapid-key"]:"The public VAPID key must be a string.",["use-vapid-key-after-get-token"]:"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ni=new Lo("messaging","Messaging",PQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NQ(e,t){const n=await nw(e),i=ZL(t),r={method:"POST",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(tw(e.appConfig),r)).json()}catch(o){throw ni.create("token-subscribe-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw ni.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw ni.create("token-subscribe-no-token");return s.token}async function kQ(e,t){const n=await nw(e),i=ZL(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)};let s;try{s=await(await fetch(`${tw(e.appConfig)}/${t.token}`,r)).json()}catch(o){throw ni.create("token-update-failed",{errorInfo:o})}if(s.error){const o=s.error.message;throw ni.create("token-update-failed",{errorInfo:o})}if(!s.token)throw ni.create("token-update-no-token");return s.token}async function YL(e,t){const n=await nw(e),i={method:"DELETE",headers:n};try{const s=await(await fetch(`${tw(e.appConfig)}/${t}`,i)).json();if(s.error){const o=s.error.message;throw ni.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw ni.create("token-unsubscribe-failed",{errorInfo:r})}}function tw({projectId:e}){return`${wQ}/projects/${e}/registrations`}async function nw({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function ZL({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const r={web:{endpoint:n,auth:t,p256dh:e}};return i!==qL&&(r.web.applicationPubKey=i),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OQ=7*24*60*60*1e3;async function DQ(e){const t=await VQ(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:us(t.getKey("auth")),p256dh:us(t.getKey("p256dh"))},i=await XL(e.firebaseDependencies);if(i){if(UQ(i.subscriptionOptions,n))return Date.now()>=i.createTime+OQ?BQ(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{await YL(e.firebaseDependencies,i.token)}catch(r){console.warn(r)}return u1(e.firebaseDependencies,n)}else return u1(e.firebaseDependencies,n)}async function FQ(e){const t=await XL(e.firebaseDependencies);t&&(await YL(e.firebaseDependencies,t.token),await LQ(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0}async function BQ(e,t){try{const n=await kQ(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await Qb(e.firebaseDependencies,i),n}catch(n){throw await FQ(e),n}}async function u1(e,t){const i={token:await NQ(e,t),createTime:Date.now(),subscriptionOptions:t};return await Qb(e,i),i.token}async function VQ(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:TQ(t)})}function UQ(e,t){const n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,r=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&i&&r&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return zQ(t,e),HQ(t,e),WQ(t,e),t}function zQ(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const i=t.notification.body;i&&(e.notification.body=i);const r=t.notification.image;r&&(e.notification.image=r)}function HQ(e,t){!t.data||(e.data=t.data)}function WQ(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const i=t.fcmOptions.analytics_label;i&&(e.fcmOptions.analyticsLabel=i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GQ(e){return typeof e=="object"&&!!e&&KL in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */JL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");JL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function JL(e,t){const n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Q(e){if(!e||!e.options)throw Nv("App Configuration Object");if(!e.name)throw Nv("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const i of t)if(!n[i])throw Nv(i);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Nv(e){return ni.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQ{constructor(t,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=$Q(t);this.firebaseDependencies={app:t,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qQ(e){try{e.swRegistration=await navigator.serviceWorker.register(_Q,{scope:bQ}),e.swRegistration.update().catch(()=>{})}catch(t){throw ni.create("failed-service-worker-registration",{browserErrorMessage:t.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KQ(e,t){if(!t&&!e.swRegistration&&await qQ(e),!(!t&&!!e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw ni.create("invalid-sw-registration");e.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XQ(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=qL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(e,t){if(!navigator)throw ni.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ni.create("permission-blocked");return await XQ(e,t==null?void 0:t.vapidKey),await KQ(e,t==null?void 0:t.serviceWorkerRegistration),DQ(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YQ(e,t,n){const i=ZQ(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[KL],message_name:n[xQ],message_time:n[EQ],message_device_time:Math.floor(Date.now()/1e3)})}function ZQ(e){switch(e){case Rh.NOTIFICATION_CLICKED:return"notification_open";case Rh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JQ(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===Rh.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(h1(n)):e.onMessageHandler.next(h1(n)));const i=n.data;GQ(i)&&i[SQ]==="1"&&await YQ(e,n.messageType,i)}const d1="@firebase/messaging",f1="0.9.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=e=>{const t=new jQ(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>JQ(t,n)),t},eee=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:i=>QL(t,i)}};function tee(){Er(new cr("messaging",QQ,"PUBLIC")),Er(new cr("messaging-internal",eee,"PRIVATE")),zi(d1,f1),zi(d1,f1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nee(){return typeof window!="undefined"&&N_()&&await U6()&&z6()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iee(e,t){if(!navigator)throw ni.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ree(e=xm()){return nee().then(t=>{if(!t)throw ni.create("unsupported-browser")},t=>{throw ni.create("indexed-db-unsupported")}),Po(on(e),"messaging").getImmediate()}async function see(e,t){return e=on(e),QL(e,t)}function oee(e,t){return e=on(e),iee(e,t)}tee();const hg=U8(nU);A9(hg,{provider:new O_("6Ldqzq0gAAAAABHoCK54m-Rrx9Kd4r8Ct5qiu7i3"),isTokenAutoRefreshEnabled:!0});const Qs=uJ(hg),vl=IK(hg),p1=ree(hg),aee="BIwtm0L_X0w1n9ASc0gfWuj1Oy7S-v8OuYPGpSVtELyQOgK6wuEwGUo__9RfWgImagJqUw6HfC6S5IM2ooE1oLM",kv={auth:{getCurrentUser:()=>vl.currentUser,watchAuthState:e=>y7(vl,e),signIn:(e,t)=>v7(vl,e,t),signUp:(e,t)=>g7(vl,e,t),signOut:()=>_7(vl),resetPassword:e=>m7(vl,e)},db:{tables:{USERS:"users",POSTS:"posts",COMMENTS:"comments",LIKES:"likes",PLANNER:"planner"},getRecordData:e=>e.data(),doesRecordExist:e=>e.exists(),getRecord:(e,t)=>TJ(Tl(Qs,e,t)),setRecord:(e,t,n)=>AJ(Tl(Qs,e,t),n),addRecord:(e,t)=>RJ(Av(Qs,e),t),updateRecord:(e,t,n)=>CJ(Tl(Qs,e,t),n),getRecords:(e,t={})=>MJ(n1(Av(Qs,e),...m1(t))),deleteRecord:(e,t)=>IJ(Tl(Qs,e,t)),watchRecord:(e,t,n)=>s1(Tl(Qs,e,t),n),watchRecords:(e,t,n={})=>s1(n1(Av(Qs,e),...m1(n)),t),getDate:e=>e.toDate(),getServerTime:()=>LJ()},msg:{getToken:async()=>see(p1,{vapidKey:aee,serviceWorkerRegistration:await lee()}),onMessage:e=>oee(p1,t=>e(t))}};function m1(e){const t=[];return e.where&&e.where.length&&t.push(wJ(...e.where)),e.order&&e.order.length&&t.push(EJ(...e.order)),t}function lee(){return navigator.serviceWorker.getRegistration()}var R0=sn({install:e=>{e.config.globalProperties[tU]=kv,e.provide(OA,kv)}},kv);const Lf=UD({history:nD("/"),routes:[...DV,...sz,...oH,...Vq,...f6,...y6,...x6,...k6]});Lf.beforeEach((e,t)=>{if(e.matched.some(i=>i.meta.requiresAuth)&&(!R0.auth.getCurrentUser()||!Ku.state.auth.user.id))Ku.commit("auth/PURGE_AUTH"),Lf.push({name:"auth"});else if(Object.keys(e.query).length===0&&Object.keys(t.query).length!==0)Lf.push(Fo(sn({},e),{query:t.query}));else return!0});var cee={"auth.cs":{email:e=>{const{normalize:t}=e;return t(["e-mail"])},username:e=>{const{normalize:t}=e;return t(["u\u017Eivatelsk\xE9 jm\xE9no"])},password:e=>{const{normalize:t}=e;return t(["heslo"])}},"auth.en":{email:e=>{const{normalize:t}=e;return t(["e-mail"])},username:e=>{const{normalize:t}=e;return t(["username"])},password:e=>{const{normalize:t}=e;return t(["password"])}},"navigation.cs":{home:e=>{const{normalize:t}=e;return t(["Bude Doupo?"])},chat:e=>{const{normalize:t}=e;return t(["Nakej koment?"])},auth:e=>{const{normalize:t}=e;return t(["M\xE1\u0161 \xFA\u010Det?"])},playground:e=>{const{normalize:t}=e;return t(["H\u0159i\u0161t\u011B"])},"playground ts":e=>{const{normalize:t}=e;return t(["TS Pokusy"])}},"navigation.en":{home:e=>{const{normalize:t}=e;return t(["Any Doupo?"])},chat:e=>{const{normalize:t}=e;return t(["Some Chat?"])},auth:e=>{const{normalize:t}=e;return t(["Log in maybe?"])},playground:e=>{const{normalize:t}=e;return t(["Playground"])},"playground ts":e=>{const{normalize:t}=e;return t(["TS TESTS"])}},"planner.cs":{closed:e=>{const{normalize:t}=e;return t(["uzav\u0159eno"])},"doupo confirmed":e=>{const{normalize:t}=e;return t(["BUDE"])},from:e=>{const{normalize:t}=e;return t(["od"])},"this weekend":e=>{const{normalize:t}=e;return t(["tendle v\xEDkend"])},"next weekend":e=>{const{normalize:t}=e;return t(["p\u0159\xED\u0161t\xED v\xEDkend"])},"past weekend":e=>{const{normalize:t}=e;return t(["minulej v\xEDkend"])},"I can play offline":e=>{const{normalize:t}=e;return t(["m\u016F\u017Eu hr\xE1t na\u017Eivo"])},"I can DM offline":e=>{const{normalize:t}=e;return t(["m\u016F\u017Eu DM na\u017Eivo"])},"I have place":e=>{const{normalize:t}=e;return t(["mam m\xEDsto"])},"I can play online":e=>{const{normalize:t}=e;return t(["m\u016F\u017Eu hr\xE1t online"])},"I can DM online":e=>{const{normalize:t}=e;return t(["m\u016F\u017Eu DM online"])}},"planner.en":{closed:e=>{const{normalize:t}=e;return t(["closed"])},"doupo confirmed":e=>{const{normalize:t}=e;return t(["CONFIRMED"])},from:e=>{const{normalize:t}=e;return t(["from"])},"this weekend":e=>{const{normalize:t}=e;return t(["this weekend"])},"next weekend":e=>{const{normalize:t}=e;return t(["next weekend"])},"past weekend":e=>{const{normalize:t}=e;return t(["past weekend"])},"I can play offline":e=>{const{normalize:t}=e;return t(["I can play offline"])},"I can DM offline":e=>{const{normalize:t}=e;return t(["I can DM offline"])},"I have place":e=>{const{normalize:t}=e;return t(["I have place"])},"I can play online":e=>{const{normalize:t}=e;return t(["I can play online"])},"I can DM online":e=>{const{normalize:t}=e;return t(["I can DM online"])}},"playground.cs":{username:e=>{const{normalize:t}=e;return t(["u\u017Eivatelsk\xE9 jm\xE9no"])},password:e=>{const{normalize:t}=e;return t(["heslo"])}},"playground.en":{username:e=>{const{normalize:t}=e;return t(["username"])},password:e=>{const{normalize:t}=e;return t(["password"])}},"requests.cs":{"planner fetched":e=>{const{normalize:t}=e;return t(["Pl\xE1nova\u010D je ready!"])},"error while fetching planner":e=>{const{normalize:t}=e;return t(["Fuj, chyba b\u011Bhem na\u010D\xEDt\xE1n\xED pl\xE1nova\u010De."])},"planner saved":e=>{const{normalize:t}=e;return t(["Ulo\u017Eeno!"])},"error while saving planner":e=>{const{normalize:t}=e;return t(["Fuj, chyba b\u011Bhem ukl\xE1d\xE1n\xED pl\xE1nova\u010De."])},"error while fetching post":e=>{const{normalize:t}=e;return t(["B\u011Bhem na\u010D\xEDt\xE1n\xED p\u0159\xEDsp\u011Bvk\u016F nastala chyba."])},"error while fetching posts":e=>{const{normalize:t}=e;return t(["B\u011Bhem na\u010D\xEDt\xE1n\xED p\u0159\xEDsp\u011Bvku nastala chyba."])},"error while fetching comments":e=>{const{normalize:t}=e;return t(["B\u011Bhem na\u010D\xEDt\xE1n\xED koment\xE1\u0159\u016F nastala chyba."])},"error while creating post":e=>{const{normalize:t}=e;return t(["B\u011Bhem p\u0159id\xE1v\xE1n\xED lajku nastala chyba."])},"post created":e=>{const{normalize:t}=e;return t(["P\u0159\xEDsp\u011Bvek odesl\xE1n!"])},"successful sign in":e=>{const{normalize:t}=e;return t(["\xDAsp\u011B\u0161n\u011B p\u0159ihl\xE1\u0161eno."])},"error while signing in":e=>{const{normalize:t}=e;return t(["B\u011Bhem p\u0159ihla\u0161ov\xE1n\xED nastala chyba."])},"successful sign up":e=>{const{normalize:t}=e;return t(["U\u017Eivatel byl \xFAsp\u011B\u0161n\u011B vytvo\u0159en."])},"error while signing up":e=>{const{normalize:t}=e;return t(["B\u011Bhem vytv\xE1\u0159en\xED u\u017Eivatele nastala chyba."])},"successful sign out":e=>{const{normalize:t}=e;return t(["\xDAsp\u011B\u0161n\xE9 odhl\xE1\u0161en\xED"])},"error while signing out":e=>{const{normalize:t}=e;return t(["B\u011Bhem odhla\u0161ov\xE1n\xED nastala chyba."])},"check your mail":e=>{const{normalize:t}=e;return t(["Odkaz pro obnovu hesla byl zasl\xE1n na e-mail."])},"error while reseting password":e=>{const{normalize:t}=e;return t(["B\u011Bhem obnovov\xE1n\xED hesla nastala chyba."])}},"requests.en":{"planner fetched":e=>{const{normalize:t}=e;return t(["Planner fetched successfully."])},"error while fetching planner":e=>{const{normalize:t}=e;return t(["Error while fetching planner."])},"planner saved":e=>{const{normalize:t}=e;return t(["Planner saved successfully."])},"error while saving planner":e=>{const{normalize:t}=e;return t(["Error while saving planner."])},"error while fetching post":e=>{const{normalize:t}=e;return t(["B\u011Bhem na\u010D\xEDt\xE1n\xED p\u0159\xEDsp\u011Bvk\u016F nastala chyba."])},"error while fetching posts":e=>{const{normalize:t}=e;return t(["B\u011Bhem na\u010D\xEDt\xE1n\xED p\u0159\xEDsp\u011Bvku nastala chyba."])},"error while fetching comments":e=>{const{normalize:t}=e;return t(["B\u011Bhem na\u010D\xEDt\xE1n\xED koment\xE1\u0159\u016F nastala chyba."])},"error while creating post":e=>{const{normalize:t}=e;return t(["B\u011Bhem p\u0159id\xE1v\xE1n\xED lajku nastala chyba."])},"post created":e=>{const{normalize:t}=e;return t(["P\u0159\xEDsp\u011Bvek odesl\xE1n!"])},"successful sign in":e=>{const{normalize:t}=e;return t(["Sign in successful."])},"error while signing in":e=>{const{normalize:t}=e;return t(["Error while signing in."])},"successful sign up":e=>{const{normalize:t}=e;return t(["Sign up successful."])},"error while signing up":e=>{const{normalize:t}=e;return t(["Error while signing up."])},"successful sign out":e=>{const{normalize:t}=e;return t(["Sign out successful."])},"error while signing out":e=>{const{normalize:t}=e;return t(["Error while signing out."])},"check your mail":e=>{const{normalize:t}=e;return t(["Password recovery link was sent to your e-mail."])},"error while reseting password":e=>{const{normalize:t}=e;return t(["Error while reseting password."])}}},uee={datetimeFormats:{cs:{default:{year:"numeric",month:"short",day:"numeric"},short:{month:"short",day:"numeric"},planner:{day:"numeric",month:"numeric",weekday:"long"},time:{hour:"numeric",minute:"numeric",second:"numeric"}},en:{default:{year:"numeric",month:"short",day:"numeric"},short:{month:"short",day:"numeric"},planner:{day:"numeric",month:"numeric",weekday:"long"},time:{hour:"numeric",minute:"numeric",second:"numeric"}}}};function hee(e,t){const n=Object.entries(cee).reduce((r,[s,o])=>{const[a,l]=s.split(".");return r[l]||(r[l]={}),r[l][a]=o,r},{}),i=lF({legacy:!1,globalInjection:!0,locale:t,fallbackLocale:"en",datetimeFormats:uee.datetimeFormats,messages:n});e.use(i)}const Gn={STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter"},g1={ripple:!1,inputStyle:"outlined",locale:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",emptyMessage:"No available options"},filterMatchModeOptions:{text:[Gn.STARTS_WITH,Gn.CONTAINS,Gn.NOT_CONTAINS,Gn.ENDS_WITH,Gn.EQUALS,Gn.NOT_EQUALS],numeric:[Gn.EQUALS,Gn.NOT_EQUALS,Gn.LESS_THAN,Gn.LESS_THAN_OR_EQUAL_TO,Gn.GREATER_THAN,Gn.GREATER_THAN_OR_EQUAL_TO],date:[Gn.DATE_IS,Gn.DATE_IS_NOT,Gn.DATE_BEFORE,Gn.DATE_AFTER]},zIndex:{modal:1100,overlay:1e3,menu:1e3,tooltip:1100}},dee=Symbol();var fee={install:(e,t)=>{let n=t?sn(sn({},g1),t):sn({},g1);const i={config:ur(n)};e.config.globalProperties.$primevue=i,e.provide(dee,i)}},ds=UV(),pee={install:e=>{const t={add:n=>{ds.emit("add",n)},removeGroup:n=>{ds.emit("remove-group",n)},removeAllGroups:()=>{ds.emit("remove-all-groups")}};e.config.globalProperties.$toast=t,e.provide(NA,t)}};function mee(e){e.$_ptooltipModifiers.focus?(e.addEventListener("focus",nP),e.addEventListener("blur",iP)):(e.addEventListener("mouseenter",eP),e.addEventListener("mouseleave",tP),e.addEventListener("click",rP))}function gee(e){e.$_ptooltipModifiers.focus?(e.removeEventListener("focus",nP),e.removeEventListener("blur",iP)):(e.removeEventListener("mouseenter",eP),e.removeEventListener("mouseleave",tP),e.removeEventListener("click",rP))}function vee(e){e.$_ptooltipScrollHandler||(e.$_ptooltipScrollHandler=new FV(e,function(){hd(e)})),e.$_ptooltipScrollHandler.bindScrollListener()}function yee(e){e.$_ptooltipScrollHandler&&e.$_ptooltipScrollHandler.unbindScrollListener()}function eP(e){sP(e.currentTarget)}function tP(e){hd(e.currentTarget)}function nP(e){sP(e.currentTarget)}function iP(e){hd(e.currentTarget)}function rP(e){hd(e.currentTarget)}function sP(e){if(e.$_ptooltipDisabled)return;let t=_ee(e);bee(e),He.fadeIn(t,250),window.addEventListener("resize",function n(){He.isAndroid()||hd(e),this.removeEventListener("resize",n)}),vee(e),_r.set("tooltip",t,e.$_ptooltipZIndex)}function hd(e){oP(e),yee(e),_r.clear(e)}function Ya(e){return document.getElementById(e.$_ptooltipId)}function _ee(e){const t=qu()+"_tooltip";e.$_ptooltipId=t;let n=document.createElement("div");n.id=t;let i=document.createElement("div");i.className="p-tooltip-arrow",n.appendChild(i);let r=document.createElement("div");return r.className="p-tooltip-text",e.$_ptooltipEscape?r.innerHTML=e.$_ptooltipValue:(r.innerHTML="",r.appendChild(document.createTextNode(e.$_ptooltipValue))),n.appendChild(r),document.body.appendChild(n),n.style.display="inline-block",n}function oP(e){if(e){let t=Ya(e);t&&t.parentElement&&document.body.removeChild(t),e.$_ptooltipId=null}}function bee(e){const t=e.$_ptooltipModifiers;t.top?(eu(e),er(e)&&(tu(e),er(e)&&eu(e))):t.left?(Dv(e),er(e)&&(Ov(e),er(e)&&(eu(e),er(e)&&(tu(e),er(e)&&Dv(e))))):t.bottom?(tu(e),er(e)&&(eu(e),er(e)&&tu(e))):(Ov(e),er(e)&&(Dv(e),er(e)&&(eu(e),er(e)&&(tu(e),er(e)&&Ov(e)))))}function dg(e){let t=e.getBoundingClientRect(),n=t.left+He.getWindowScrollLeft(),i=t.top+He.getWindowScrollTop();return{left:n,top:i}}function Ov(e){fg(e,"right");let t=Ya(e),n=dg(e),i=n.left+He.getOuterWidth(e),r=n.top+(He.getOuterHeight(e)-He.getOuterHeight(t))/2;t.style.left=i+"px",t.style.top=r+"px"}function Dv(e){fg(e,"left");let t=Ya(e),n=dg(e),i=n.left-He.getOuterWidth(t),r=n.top+(He.getOuterHeight(e)-He.getOuterHeight(t))/2;t.style.left=i+"px",t.style.top=r+"px"}function eu(e){fg(e,"top");let t=Ya(e),n=dg(e),i=n.left+(He.getOuterWidth(e)-He.getOuterWidth(t))/2,r=n.top-He.getOuterHeight(t);t.style.left=i+"px",t.style.top=r+"px"}function tu(e){fg(e,"bottom");let t=Ya(e),n=dg(e),i=n.left+(He.getOuterWidth(e)-He.getOuterWidth(t))/2,r=n.top+He.getOuterHeight(e);t.style.left=i+"px",t.style.top=r+"px"}function fg(e,t){let n=Ya(e);n.style.left=-999+"px",n.style.top=-999+"px",n.className=`p-tooltip p-component p-tooltip-${t} ${e.$_ptooltipClass||""}`}function er(e){let t=Ya(e),n=t.getBoundingClientRect(),i=n.top,r=n.left,s=He.getOuterWidth(t),o=He.getOuterHeight(t),a=He.getViewport();return r+s>a.width||r<0||i<0||i+o>a.height}function Fv(e){return He.hasClass(e,"p-inputwrapper")?He.findSingle(e,"input"):e}function v1(e){return e.modifiers&&Object.keys(e.modifiers).length?e.modifiers:e.arg&&typeof e.arg=="object"?Object.entries(e.arg).reduce((t,[n,i])=>((n==="event"||n==="position")&&(t[i]=!0),t),{}):{}}const wee={beforeMount(e,t){let n=Fv(e);if(n.$_ptooltipModifiers=v1(t),t.value)typeof t.value=="string"?(n.$_ptooltipValue=t.value,n.$_ptooltipDisabled=!1,n.$_ptooltipEscape=!1,n.$_ptooltipClass=null):(n.$_ptooltipValue=t.value.value,n.$_ptooltipDisabled=t.value.disabled||!1,n.$_ptooltipEscape=t.value.escape||!1,n.$_ptooltipClass=t.value.class);else return;n.$_ptooltipZIndex=t.instance.$primevue&&t.instance.$primevue.config&&t.instance.$primevue.config.zIndex.tooltip,mee(n)},unmounted(e){let t=Fv(e);oP(t),gee(t),t.$_ptooltipScrollHandler&&(t.$_ptooltipScrollHandler.destroy(),t.$_ptooltipScrollHandler=null),_r.clear(e)},updated(e,t){let n=Fv(e);n.$_ptooltipModifiers=v1(t),t.value&&(typeof t.value=="string"?(n.$_ptooltipValue=t.value,n.$_ptooltipDisabled=!1,n.$_ptooltipEscape=!1,n.$_ptooltipClass=null):(n.$_ptooltipValue=t.value.value,n.$_ptooltipDisabled=t.value.disabled||!1,n.$_ptooltipEscape=t.value.escape||!1,n.$_ptooltipClass=t.value.class))}},xee={beforeMount(e,t){const n=qu()+"_badge";e.$_pbadgeId=n;let i=document.createElement("span");i.id=n,i.className="p-badge p-component";for(let r in t.modifiers)He.addClass(i,"p-badge-"+r);t.value!=null?(i.appendChild(document.createTextNode(t.value)),String(t.value).length===1&&He.addClass(i,"p-badge-no-gutter")):He.addClass(i,"p-badge-dot"),He.addClass(e,"p-overlay-badge"),e.appendChild(i)},updated(e,t){if(He.addClass(e,"p-overlay-badge"),t.oldValue!==t.value){let n=document.getElementById(e.$_pbadgeId);t.value?(He.hasClass(n,"p-badge-dot")&&He.removeClass(n,"p-badge-dot"),String(t.value).length===1?He.addClass(n,"p-badge-no-gutter"):He.removeClass(n,"p-badge-no-gutter")):!t.value&&!He.hasClass(n,"p-badge-dot")&&He.addClass(n,"p-badge-dot"),n.innerHTML="",n.appendChild(document.createTextNode(t.value))}}};var Eee={cs:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Ano",reject:"Ne",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["Leden","\xDAnor","B\u0159ezen","Duben","Kv\u011Bten","\u010Cerven","\u010Cervenec","Srpen","Z\xE1\u0159\xED","\u0158\xEDjen","Listopad","Prosinec"],monthNamesShort:["Jan","Feb","Mar","Apr","Kv\u011Bten","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"dd. mm. yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",emptyMessage:"No available options"},en:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No results found",emptyMessage:"No available options"}};function See(e,t){e.use(fee,{locale:Eee[t]}),e.use(pee),e.directive("tooltip",wee),e.directive("badge",xee)}/**
  * vee-validate v4.5.7
  * (c) 2021 Abdelrahman Awad
  * @license MIT
  */function Fa(e){return typeof e=="function"}function Op(e){return e==null}const vc=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function aP(e){return Number(e)>=0}function Tee(e){const t=parseFloat(e);return isNaN(t)?e:t}const lP={};function y1(e,t){Aee(e,t),lP[e]=t}function Mee(e){return lP[e]}function Aee(e,t){if(!Fa(t))throw new Error(`Extension Error: The validator '${e}' must be a function.`)}const Za=Symbol("vee-validate-form"),Cee=Symbol("vee-validate-field-instance"),Pf=Symbol("Default empty value");function L0(e){return Fa(e)&&!!e.__locatorRef}function Iee(e){return["input","textarea","select"].includes(e)}function Ree(e,t){return Iee(e)&&t.type==="file"}function Pu(e){return!!e&&Fa(e.validate)}function Lh(e){return e==="checkbox"||e==="radio"}function Lee(e){return vc(e)||Array.isArray(e)}function Pee(e){return Array.isArray(e)?e.length===0:vc(e)&&Object.keys(e).length===0}function pg(e){return/^\[.+\]$/i.test(e)}function Nee(e){return cP(e)&&e.multiple}function cP(e){return e.tagName==="SELECT"}function kee(e,t){const n=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return e==="select"&&"multiple"in t&&n}function Oee(e,t){return kee(e,t)||Ree(e,t)}function Dee(e){return iw(e)&&e.target&&"submit"in e.target}function iw(e){return e?!!(typeof Event!="undefined"&&Fa(Event)&&e instanceof Event||e&&e.srcElement):!1}function P0(e,t){return t in e&&e[t]!==Pf}function rw(e){return pg(e)?e.replace(/\[|\]/gi,""):e}function En(e,t,n){return e?pg(t)?e[rw(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((r,s)=>Lee(r)&&s in r?r[s]:n,e):n}function Ml(e,t,n){if(pg(t)){e[rw(t)]=n;return}const i=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let s=0;s<i.length;s++){if(s===i.length-1){r[i[s]]=n;return}(!(i[s]in r)||Op(r[i[s]]))&&(r[i[s]]=aP(i[s+1])?[]:{}),r=r[i[s]]}}function Bv(e,t){if(Array.isArray(e)&&aP(t)){e.splice(Number(t),1);return}vc(e)&&delete e[t]}function Vv(e,t){if(pg(t)){delete e[rw(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let s=0;s<n.length;s++){if(s===n.length-1){Bv(i,n[s]);break}if(!(n[s]in i)||Op(i[n[s]]))break;i=i[n[s]]}const r=n.map((s,o)=>En(e,n.slice(0,o).join(".")));for(let s=r.length-1;s>=0;s--)if(!!Pee(r[s])){if(s===0){Bv(e,n[0]);continue}Bv(r[s-1],n[s-1])}}function jn(e){return Object.keys(e)}function dd(e,t=void 0){const n=ks();return(n==null?void 0:n.provides[e])||Jn(e,t)}function _1(e){q1(`[vee-validate]: ${e}`)}function N0(e,t,n){if(Array.isArray(e)){const i=[...e],r=i.indexOf(t);return r>=0?i.splice(r,1):i.push(t),i}return e===t?n:t}function Fee(e,t=0){let n=null,i=[];return function(...r){return n&&window.clearTimeout(n),n=window.setTimeout(()=>{const s=e(...r);i.forEach(o=>o(s)),i=[]},t),new Promise(s=>i.push(s))}}const mg=(e,t,n)=>t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var i,r;return(r=(i=t.slots).default)===null||r===void 0?void 0:r.call(i,n())}}:t.slots.default;function Uv(e){if(uP(e))return e._value}function uP(e){return"_value"in e}function sw(e){if(!iw(e))return e;const t=e.target;if(Lh(t.type)&&uP(t))return Uv(t);if(t.type==="file"&&t.files)return Array.from(t.files);if(Nee(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(Uv);if(cP(t)){const n=Array.from(t.options).find(i=>i.selected);return n?Uv(n):t.value}return t.value}function hP(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?vc(e)&&e._$$isNormalized?e:vc(e)?Object.keys(e).reduce((n,i)=>{const r=Bee(e[i]);return e[i]!==!1&&(n[i]=b1(r)),n},t):typeof e!="string"?t:e.split("|").reduce((n,i)=>{const r=Vee(i);return r.name&&(n[r.name]=b1(r.params)),n},t):t}function Bee(e){return e===!0?[]:Array.isArray(e)||vc(e)?e:[e]}function b1(e){const t=n=>typeof n=="string"&&n[0]==="@"?Uee(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,i)=>(n[i]=t(e[i]),n),{})}const Vee=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function Uee(e){const t=n=>En(n,e)||n[e];return t.__locatorRef=e,t}function zee(e){return Array.isArray(e)?e.filter(L0):jn(e).filter(t=>L0(e[t])).map(t=>e[t])}const Hee={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let k0=Object.assign({},Hee);const ow=()=>k0,Wee=e=>{k0=Object.assign(Object.assign({},k0),e)},Gee=Wee;async function dP(e,t,n={}){const i=n==null?void 0:n.bails,r={name:(n==null?void 0:n.name)||"{field}",rules:t,bails:i!=null?i:!0,formData:(n==null?void 0:n.values)||{}},o=(await $ee(r,e)).errors;return{errors:o,valid:!o.length}}async function $ee(e,t){if(Pu(e.rules))return jee(t,e.rules,{bails:e.bails});if(Fa(e.rules)){const o={field:e.name,form:e.formData,value:t},a=await e.rules(t,o),l=typeof a!="string"&&a,c=typeof a=="string"?a:fP(o);return{errors:l?[]:[c]}}const n=Object.assign(Object.assign({},e),{rules:hP(e.rules)}),i=[],r=Object.keys(n.rules),s=r.length;for(let o=0;o<s;o++){const a=r[o],l=await qee(n,t,{name:a,params:n.rules[a]});if(l.error&&(i.push(l.error),e.bails))return{errors:i}}return{errors:i}}async function jee(e,t,n){var i;return{errors:await t.validate(e,{abortEarly:(i=n.bails)!==null&&i!==void 0?i:!0}).then(()=>[]).catch(s=>{if(s.name==="ValidationError")return s.errors;throw s})}}async function qee(e,t,n){const i=Mee(n.name);if(!i)throw new Error(`No such validator '${n.name}' exists.`);const r=Kee(n.params,e.formData),s={field:e.name,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:r})},o=await i(t,r,s);return typeof o=="string"?{error:o}:{error:o?void 0:fP(s)}}function fP(e){const t=ow().generateMessage;return t?t(e):"Field is invalid"}function Kee(e,t){const n=i=>L0(i)?i(t):i;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((i,r)=>(i[r]=n(e[r]),i),{})}async function Xee(e,t){const n=await e.validate(t,{abortEarly:!1}).then(()=>[]).catch(s=>{if(s.name!=="ValidationError")throw s;return s.inner||[]}),i={},r={};for(const s of n){const o=s.errors;i[s.path]={valid:!o.length,errors:o},o.length&&(r[s.path]=o[0])}return{valid:!n.length,results:i,errors:r}}async function Yee(e,t,n){const r=jn(e).map(async c=>{var h,u,d;const f=await dP(En(t,c),e[c],{name:((h=n==null?void 0:n.names)===null||h===void 0?void 0:h[c])||c,values:t,bails:(d=(u=n==null?void 0:n.bailsMap)===null||u===void 0?void 0:u[c])!==null&&d!==void 0?d:!0});return Object.assign(Object.assign({},f),{path:c})});let s=!0;const o=await Promise.all(r),a={},l={};for(const c of o)a[c.path]={valid:c.valid,errors:c.errors},c.valid||(s=!1,l[c.path]=c.errors[0]);return{valid:s,results:a,errors:l}}function w1(e,t,n){typeof n.value=="object"&&(n.value=gn(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function gn(e){if(typeof e!="object")return e;var t=0,n,i,r,s=Object.prototype.toString.call(e);if(s==="[object Object]"?r=Object.create(e.__proto__||null):s==="[object Array]"?r=Array(e.length):s==="[object Set]"?(r=new Set,e.forEach(function(o){r.add(gn(o))})):s==="[object Map]"?(r=new Map,e.forEach(function(o,a){r.set(gn(a),gn(o))})):s==="[object Date]"?r=new Date(+e):s==="[object RegExp]"?r=new RegExp(e.source,e.flags):s==="[object DataView]"?r=new e.constructor(gn(e.buffer)):s==="[object ArrayBuffer]"?r=e.slice(0):s.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)w1(r,i[t],Object.getOwnPropertyDescriptor(e,i[t]));for(t=0,i=Object.getOwnPropertyNames(e);t<i.length;t++)Object.hasOwnProperty.call(r,n=i[t])&&r[n]===e[n]||w1(r,n,Object.getOwnPropertyDescriptor(e,n))}return r||e}var Dp=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),i=s.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;r--!==0;){var o=s[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};let x1=0;function Zee(e,t){const{value:n,initialValue:i,setInitialValue:r}=Jee(e,t.modelValue,!t.standalone),{errorMessage:s,errors:o,setErrors:a}=ete(e,!t.standalone),l=Qee(n,i,o),c=x1>=Number.MAX_SAFE_INTEGER?0:++x1;function h(u){var d;"value"in u&&(n.value=u.value),"errors"in u&&a(u.errors),"touched"in u&&(l.touched=(d=u.touched)!==null&&d!==void 0?d:l.touched),"initialValue"in u&&r(u.initialValue)}return{id:c,path:e,value:n,initialValue:i,meta:l,errors:o,errorMessage:s,setState:h}}function Jee(e,t,n){const i=n?dd(Za,void 0):void 0,r=st($e(t));function s(){return i?En(i.meta.value.initialValues,$e(e),$e(r)):$e(r)}function o(h){if(!i){r.value=h;return}i.setFieldInitialValue($e(e),h)}const a=Qe(s);if(!i)return{value:st(s()),initialValue:a,setInitialValue:o};const l=t?$e(t):En(i.values,$e(e),$e(a));return i.stageInitialValue($e(e),l),{value:Qe({get(){return En(i.values,$e(e))},set(h){i.setFieldValue($e(e),h)}}),initialValue:a,setInitialValue:o}}function Qee(e,t,n){const i=ur({touched:!1,pending:!1,valid:!0,validated:!!$e(n).length,initialValue:Qe(()=>$e(t)),dirty:Qe(()=>!Dp($e(e),$e(t)))});return dn(n,r=>{i.valid=!r.length},{immediate:!0,flush:"sync"}),i}function ete(e,t){const n=t?dd(Za,void 0):void 0;function i(s){return s?Array.isArray(s)?s:[s]:[]}if(!n){const s=st([]);return{errors:s,errorMessage:Qe(()=>s.value[0]),setErrors:o=>{s.value=i(o)}}}const r=Qe(()=>n.errorBag.value[$e(e)]||[]);return{errors:r,errorMessage:Qe(()=>r.value[0]),setErrors:s=>{n.setFieldErrorBag($e(e),i(s))}}}function pP(e,t,n){return Lh(n==null?void 0:n.type)?ite(e,t,n):mP(e,t,n)}function mP(e,t,n){const{initialValue:i,validateOnMount:r,bails:s,type:o,checkedValue:a,label:l,validateOnValueUpdate:c,uncheckedValue:h,standalone:u}=tte($e(e),n),d=u?void 0:dd(Za),{id:f,value:p,initialValue:y,meta:v,setState:m,errors:g,errorMessage:w}=Zee(e,{modelValue:i,standalone:u}),b=()=>{v.touched=!0},E=Qe(()=>{let te=$e(t);const ae=$e(d==null?void 0:d.schema);return ae&&!Pu(ae)&&(te=nte(ae,$e(e))||te),Pu(te)||Fa(te)?te:hP(te)});async function S(te){var ae,G;return d!=null&&d.validateSchema?(ae=(await d.validateSchema(te)).results[$e(e)])!==null&&ae!==void 0?ae:{valid:!0,errors:[]}:dP(p.value,E.value,{name:$e(l)||$e(e),values:(G=d==null?void 0:d.values)!==null&&G!==void 0?G:{},bails:s})}async function k(){v.pending=!0,v.validated=!0;const te=await S("validated-only");return m({errors:te.errors}),v.pending=!1,te}async function O(){const te=await S("silent");return v.valid=te.valid,te}function W(te){return!(te!=null&&te.mode)||(te==null?void 0:te.mode)==="force"||(te==null?void 0:te.mode)==="validated-only"?k():O()}const U=(te,ae=!0)=>{const G=sw(te);p.value=G,!c&&ae&&k()};Tr(()=>{if(r)return k();(!d||!d.validateSchema)&&O()});function L(te){v.touched=te}let D;function V(){D=dn(p,c?k:O,{deep:!0})}V();function ee(te){var ae;D==null||D();const G=te&&"value"in te?te.value:y.value;m({value:gn(G),initialValue:gn(G),touched:(ae=te==null?void 0:te.touched)!==null&&ae!==void 0?ae:!1,errors:(te==null?void 0:te.errors)||[]}),v.pending=!1,v.validated=!1,O(),ia(()=>{V()})}function K(te){p.value=te}function Z(te){m({errors:Array.isArray(te)?te:[te]})}const H={id:f,name:e,label:l,value:p,meta:v,errors:g,errorMessage:w,type:o,checkedValue:a,uncheckedValue:h,bails:s,resetField:ee,handleReset:()=>ee(),validate:W,handleChange:U,handleBlur:b,setState:m,setTouched:L,setErrors:Z,setValue:K};if(zl(Cee,H),tn(t)&&typeof $e(t)!="function"&&dn(t,(te,ae)=>{Dp(te,ae)||(v.validated?k():O())},{deep:!0}),!d)return H;d.register(H),Ph(()=>{d.unregister(H)});const B=Qe(()=>{const te=E.value;return!te||Fa(te)||Pu(te)?{}:Object.keys(te).reduce((ae,G)=>{const le=zee(te[G]).map(X=>X.__locatorRef).reduce((X,J)=>{const T=En(d.values,J)||d.values[J];return T!==void 0&&(X[J]=T),X},{});return Object.assign(ae,le),ae},{})});return dn(B,(te,ae)=>{if(!Object.keys(te).length)return;!Dp(te,ae)&&(v.validated?k():O())}),H}function tte(e,t){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0,standalone:!1});if(!t)return n();const i="valueProp"in t?t.valueProp:t.checkedValue;return Object.assign(Object.assign(Object.assign({},n()),t||{}),{checkedValue:i})}function nte(e,t){if(!!e)return e[t]}function ite(e,t,n){const i=n!=null&&n.standalone?void 0:dd(Za),r=n==null?void 0:n.checkedValue,s=n==null?void 0:n.uncheckedValue;function o(a){const l=a.handleChange,c=Qe(()=>{const u=$e(a.value),d=$e(r);return Array.isArray(u)?u.includes(d):d===u});function h(u,d=!0){var f,p;if(c.value===((p=(f=u)===null||f===void 0?void 0:f.target)===null||p===void 0?void 0:p.checked))return;let y=sw(u);i||(y=N0($e(a.value),$e(r),$e(s))),l(y,d)}return Ph(()=>{c.value&&h($e(r),!1)}),Object.assign(Object.assign({},a),{checked:c,checkedValue:r,uncheckedValue:s,handleChange:h})}return o(mP(e,t,n))}Ao({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>ow().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Pf},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1}},setup(e,t){const n=fs(e,"rules"),i=fs(e,"name"),r=fs(e,"label"),s=fs(e,"uncheckedValue"),o=P0(e,"onUpdate:modelValue"),{errors:a,value:l,errorMessage:c,validate:h,handleChange:u,handleBlur:d,setTouched:f,resetField:p,handleReset:y,meta:v,checked:m,setErrors:g}=pP(i,n,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:ote(e,t),checkedValue:t.attrs.value,uncheckedValue:s,label:r,validateOnValueUpdate:!1}),w=o?function(U,L=!0){u(U,L),t.emit("update:modelValue",l.value)}:u,b=W=>{Lh(t.attrs.type)||(l.value=sw(W))},E=o?function(U){b(U),t.emit("update:modelValue",l.value)}:b,S=Qe(()=>{const{validateOnInput:W,validateOnChange:U,validateOnBlur:L,validateOnModelUpdate:D}=rte(e),V=[d,t.attrs.onBlur,L?h:void 0].filter(Boolean),ee=[B=>w(B,W),t.attrs.onInput].filter(Boolean),K=[B=>w(B,U),t.attrs.onChange].filter(Boolean),Z={name:e.name,onBlur:V,onInput:ee,onChange:K};Z["onUpdate:modelValue"]=B=>w(B,D),Lh(t.attrs.type)&&m?Z.checked=m.value:Z.value=l.value;const H=E1(e,t);return Oee(H,t.attrs)&&delete Z.value,Z}),k=fs(e,"modelValue");dn(k,W=>{W===Pf&&l.value===void 0||W!==ste(l.value,e.modelModifiers)&&(l.value=W===Pf?void 0:W,h())});function O(){return{field:S.value,value:l.value,meta:v,errors:a.value,errorMessage:c.value,validate:h,resetField:p,handleChange:w,handleInput:E,handleReset:y,handleBlur:d,setTouched:f,setErrors:g}}return t.expose({setErrors:g,setTouched:f,reset:p,validate:h,handleChange:u}),()=>{const W=Es(E1(e,t)),U=mg(W,t,O);return W?Qn(W,Object.assign(Object.assign({},t.attrs),S.value),U):U}}});function E1(e,t){let n=e.as||"";return!e.as&&!t.slots.default&&(n="input"),n}function rte(e){var t,n,i,r;const{validateOnInput:s,validateOnChange:o,validateOnBlur:a,validateOnModelUpdate:l}=ow();return{validateOnInput:(t=e.validateOnInput)!==null&&t!==void 0?t:s,validateOnChange:(n=e.validateOnChange)!==null&&n!==void 0?n:o,validateOnBlur:(i=e.validateOnBlur)!==null&&i!==void 0?i:a,validateOnModelUpdate:(r=e.validateOnModelUpdate)!==null&&r!==void 0?r:l}}function ste(e,t){return t.number?Tee(e):e}function ote(e,t){return Lh(t.attrs.type)?P0(e,"modelValue")?e.modelValue:void 0:P0(e,"modelValue")?e.modelValue:t.attrs.value}let ate=0;function gP(e){const t=ate++;let n=!1;const i=st({}),r=st(!1),s=st(0),o={},a=ur(gn($e(e==null?void 0:e.initialValues)||{})),{errorBag:l,setErrorBag:c,setFieldErrorBag:h}=ute(e==null?void 0:e.initialErrors),u=Qe(()=>jn(l.value).reduce(($,A)=>{const P=l.value[A];return P&&P.length&&($[A]=P[0]),$},{}));function d($){const A=i.value[$];return Array.isArray(A)?A[0]:A}function f($){return!!i.value[$]}const p=Qe(()=>jn(i.value).reduce(($,A)=>{const P=d(A);return P&&($[A]=$e(P.label||P.name)||""),$},{})),y=Qe(()=>jn(i.value).reduce(($,A)=>{var P;const x=d(A);return x&&($[A]=(P=x.bails)!==null&&P!==void 0?P:!0),$},{})),v=Object.assign({},(e==null?void 0:e.initialErrors)||{}),{initialValues:m,originalInitialValues:g,setInitialValues:w}=cte(i,a,e==null?void 0:e.initialValues),b=lte(i,a,m,u),E=e==null?void 0:e.validationSchema,S={formId:t,fieldsByPath:i,values:a,errorBag:l,errors:u,schema:E,submitCount:s,meta:b,isSubmitting:r,fieldArraysLookup:o,validateSchema:$e(E)?oe:void 0,validate:ae,register:B,unregister:te,setFieldErrorBag:h,validateField:G,setFieldValue:L,setValues:D,setErrors:U,setFieldError:W,setFieldTouched:V,setTouched:ee,resetForm:K,handleSubmit:le,stageInitialValue:T,unsetInitialValue:J,setFieldInitialValue:X};function k($){return Array.isArray($)}function O($,A){return Array.isArray($)?$.forEach(A):A($)}function W($,A){h($,A)}function U($){c($)}function L($,A,{force:P}={force:!1}){var x;const M=i.value[$],N=gn(A);if(!M){Ml(a,$,N);return}if(k(M)&&((x=M[0])===null||x===void 0?void 0:x.type)==="checkbox"&&!Array.isArray(A)){const R=gn(N0(En(a,$)||[],A,void 0));Ml(a,$,R);return}let F=A;!k(M)&&M.type==="checkbox"&&!P&&!n&&(F=gn(N0(En(a,$),A,$e(M.uncheckedValue)))),Ml(a,$,F)}function D($){jn(a).forEach(A=>{delete a[A]}),jn($).forEach(A=>{L(A,$[A])}),Object.values(o).forEach(A=>A&&A.reset())}function V($,A){const P=i.value[$];P&&O(P,x=>x.setTouched(A))}function ee($){jn($).forEach(A=>{V(A,!!$[A])})}function K($){n=!0,$!=null&&$.values?(w($.values),D($==null?void 0:$.values)):(w(g.value),D(g.value)),Object.values(i.value).forEach(A=>{!A||O(A,P=>P.resetField())}),$!=null&&$.touched&&ee($.touched),U(($==null?void 0:$.errors)||{}),s.value=($==null?void 0:$.submitCount)||0,ia(()=>{n=!1})}function Z($,A){const P=ca($),x=A;if(!i.value[x]){i.value[x]=P;return}const M=i.value[x];M&&!Array.isArray(M)&&(i.value[x]=[M]),i.value[x]=[...i.value[x],P]}function H($,A){const P=A,x=i.value[P];if(!!x){if(!k(x)&&$.id===x.id){delete i.value[P];return}if(k(x)){const M=x.findIndex(N=>N.id===$.id);if(M===-1)return;if(x.splice(M,1),x.length===1){i.value[P]=x[0];return}x.length||delete i.value[P]}}}function B($){const A=$e($.name);Z($,A),tn($.name)&&dn($.name,async(x,M)=>{await ia(),H($,M),Z($,x),(u.value[M]||u.value[x])&&G(x),await ia(),f(M)||Vv(a,M)});const P=$e($.errorMessage);P&&(v==null?void 0:v[A])!==P&&G(A),delete v[A]}function te($){const A=$e($.name);H($,A),ia(()=>{f(A)||(W(A,void 0),Vv(a,A))})}async function ae($){if(S.validateSchema)return S.validateSchema(($==null?void 0:$.mode)||"force");const A=await Promise.all(Object.values(i.value).map(M=>{const N=Array.isArray(M)?M[0]:M;return N?N.validate($).then(F=>({key:$e(N.name),valid:F.valid,errors:F.errors})):Promise.resolve({key:"",valid:!0,errors:[]})})),P={},x={};for(const M of A)P[M.key]={valid:M.valid,errors:M.errors},M.errors.length&&(x[M.key]=M.errors[0]);return{valid:A.every(M=>M.valid),results:P,errors:x}}async function G($){const A=i.value[$];return A?Array.isArray(A)?A.map(P=>P.validate())[0]:A.validate():(q1(`field with name ${$} was not found`),Promise.resolve({errors:[],valid:!0}))}function le($,A){return function(x){return x instanceof Event&&(x.preventDefault(),x.stopPropagation()),ee(jn(i.value).reduce((M,N)=>(M[N]=!0,M),{})),r.value=!0,s.value++,ae().then(M=>{if(M.valid&&typeof $=="function")return $(gn(a),{evt:x,setErrors:U,setFieldError:W,setTouched:ee,setFieldTouched:V,setValues:D,setFieldValue:L,resetForm:K});!M.valid&&typeof A=="function"&&A({values:gn(a),evt:x,errors:M.errors,results:M.results})}).then(M=>(r.value=!1,M),M=>{throw r.value=!1,M})}}function X($,A){Ml(m.value,$,gn(A))}function J($){Vv(m.value,$)}function T($,A){Ml(a,$,A),X($,A)}async function ne(){const $=$e(E);return $?Pu($)?await Xee($,a):await Yee($,a,{names:p.value,bailsMap:y.value}):{valid:!0,results:{},errors:{}}}const Q=Fee(ne,5);async function oe($){const A=await Q(),P=S.fieldsByPath.value||{},x=jn(S.errorBag.value);return[...new Set([...jn(A.results),...jn(P),...x])].reduce((N,F)=>{const R=P[F],C=(A.results[F]||{errors:[]}).errors,ce={errors:C,valid:!C.length};if(N.results[F]=ce,ce.valid||(N.errors[F]=ce.errors[0]),!R)return W(F,C),N;if(O(R,I=>I.meta.valid=ce.valid),$==="silent")return N;const Y=Array.isArray(R)?R.some(I=>I.meta.validated):R.meta.validated;return $==="validated-only"&&!Y||O(R,I=>I.setState({errors:ce.errors})),N},{valid:A.valid,results:{},errors:{}})}const ie=le(($,{evt:A})=>{Dee(A)&&A.target.submit()});return Tr(()=>{if(e!=null&&e.initialErrors&&U(e.initialErrors),e!=null&&e.initialTouched&&ee(e.initialTouched),e!=null&&e.validateOnMount){ae();return}S.validateSchema&&S.validateSchema("silent")}),tn(E)&&dn(E,()=>{var $;($=S.validateSchema)===null||$===void 0||$.call(S,"validated-only")}),zl(Za,S),{errors:u,meta:b,values:a,isSubmitting:r,submitCount:s,validate:ae,validateField:G,handleReset:()=>K(),resetForm:K,handleSubmit:le,submitForm:ie,setFieldError:W,setErrors:U,setFieldValue:L,setValues:D,setFieldTouched:V,setTouched:ee}}function lte(e,t,n,i){const r={touched:"some",pending:"some",valid:"every"},s=Qe(()=>!Dp(t,$e(n)));function o(){const l=Object.values(e.value).flat(1).filter(Boolean);return jn(r).reduce((c,h)=>{const u=r[h];return c[h]=l[u](d=>d.meta[h]),c},{})}const a=ur(o());return _c(()=>{const l=o();a.touched=l.touched,a.valid=l.valid,a.pending=l.pending}),Qe(()=>Object.assign(Object.assign({initialValues:$e(n)},a),{valid:a.valid&&!jn(i.value).length,dirty:s.value}))}function cte(e,t,n){const i=st(gn($e(n))||{}),r=st(gn($e(n))||{});function s(o,a=!1){i.value=gn(o),r.value=gn(o),a&&jn(e.value).forEach(l=>{const c=e.value[l],h=Array.isArray(c)?c.some(d=>d.meta.touched):c==null?void 0:c.meta.touched;if(!c||h)return;const u=En(i.value,l);Ml(t,l,gn(u))})}return tn(n)&&dn(n,o=>{s(o,!0)},{deep:!0}),{initialValues:i,originalInitialValues:r,setInitialValues:s}}function ute(e){const t=st({});function n(s){return Array.isArray(s)?s:s?[s]:[]}function i(s,o){if(!o){delete t.value[s];return}t.value[s]=n(o)}function r(s){t.value=jn(s).reduce((o,a)=>{const l=s[a];return l&&(o[a]=n(l)),o},{})}return e&&r(e),{errorBag:t,setErrorBag:r,setFieldErrorBag:i}}Ao({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0}},setup(e,t){const n=fs(e,"initialValues"),i=fs(e,"validationSchema"),{errors:r,values:s,meta:o,isSubmitting:a,submitCount:l,validate:c,validateField:h,handleReset:u,resetForm:d,handleSubmit:f,submitForm:p,setErrors:y,setFieldError:v,setFieldValue:m,setValues:g,setFieldTouched:w,setTouched:b}=gP({validationSchema:i.value?i:void 0,initialValues:n,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount}),E=e.onSubmit?f(e.onSubmit,e.onInvalidSubmit):p;function S(W){iw(W)&&W.preventDefault(),u(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function k(W,U){return f(typeof W=="function"&&!U?W:U,e.onInvalidSubmit)(W)}function O(){return{meta:o.value,errors:r.value,values:s,isSubmitting:a.value,submitCount:l.value,validate:c,validateField:h,handleSubmit:k,handleReset:u,submitForm:p,setErrors:y,setFieldError:v,setFieldValue:m,setValues:g,setFieldTouched:w,setTouched:b,resetForm:d}}return t.expose({setFieldError:v,setErrors:y,setFieldValue:m,setValues:g,setFieldTouched:w,setTouched:b,resetForm:d,validate:c,validateField:h}),function(){const U=e.as==="form"?e.as:Es(e.as),L=mg(U,t,O);if(!e.as)return L;const D=e.as==="form"?{novalidate:!0}:{};return Qn(U,Object.assign(Object.assign(Object.assign({},D),t.attrs),{onSubmit:E,onReset:S}),L)}}});let hte=0;function dte(e){const t=hte++,n=dd(Za,void 0),i=st([]),r=()=>{},s={fields:Of(i),remove:r,push:r,swap:r,insert:r,update:r,replace:r,prepend:r};if(!n)return _1("FieldArray requires being a child of `<Form/>` or `useForm` being called before it. Array fields may not work correctly"),s;if(!$e(e))return _1("FieldArray requires a field path to be provided, did you forget to pass the `name` prop?"),s;let o=0;function a(){const m=En(n==null?void 0:n.values,$e(e),[]);i.value=m.map(c),l()}a();function l(){const m=i.value.length;for(let g=0;g<m;g++){const w=i.value[g];w.isFirst=g===0,w.isLast=g===m-1}}function c(m){const g=o++;return{key:g,value:Qe(()=>{const b=En(n==null?void 0:n.values,$e(e),[]),E=i.value.findIndex(S=>S.key===g);return E===-1?m:b[E]}),isFirst:!1,isLast:!1}}function h(m){const g=$e(e),w=En(n==null?void 0:n.values,g);if(!w||!Array.isArray(w))return;const b=[...w];b.splice(m,1),n==null||n.unsetInitialValue(g+`[${m}]`),n==null||n.setFieldValue(g,b),i.value.splice(m,1),l()}function u(m){const g=$e(e),w=En(n==null?void 0:n.values,g),b=Op(w)?[]:w;if(!Array.isArray(b))return;const E=[...b];E.push(m),n==null||n.stageInitialValue(g+`[${E.length-1}]`,m),n==null||n.setFieldValue(g,E),i.value.push(c(m)),l()}function d(m,g){const w=$e(e),b=En(n==null?void 0:n.values,w);if(!Array.isArray(b)||!b[m]||!b[g])return;const E=[...b],S=[...i.value],k=E[m];E[m]=E[g],E[g]=k;const O=S[m];S[m]=S[g],S[g]=O,n==null||n.setFieldValue(w,E),i.value=S,l()}function f(m,g){const w=$e(e),b=En(n==null?void 0:n.values,w);if(!Array.isArray(b)||b.length<m)return;const E=[...b],S=[...i.value];E.splice(m,0,g),S.splice(m,0,c(g)),n==null||n.setFieldValue(w,E),i.value=S,l()}function p(m){const g=$e(e);n==null||n.setFieldValue(g,m),a()}function y(m,g){const w=$e(e),b=En(n==null?void 0:n.values,w);!Array.isArray(b)||b.length-1<m||n==null||n.setFieldValue(`${w}[${m}]`,g)}function v(m){const g=$e(e),w=En(n==null?void 0:n.values,g),b=Op(w)?[]:w;if(!Array.isArray(b))return;const E=[m,...b];n==null||n.stageInitialValue(g+`[${E.length-1}]`,m),n==null||n.setFieldValue(g,E),i.value.unshift(c(m)),l()}return n.fieldArraysLookup[t]={reset:a},Ph(()=>{delete n.fieldArraysLookup[t]}),{fields:Of(i),remove:h,push:u,swap:d,insert:f,update:y,replace:p,prepend:v}}Ao({name:"FieldArray",inheritAttrs:!1,props:{name:{type:String,required:!0}},setup(e,t){const{push:n,remove:i,swap:r,insert:s,replace:o,update:a,prepend:l,fields:c}=dte(fs(e,"name"));function h(){return{fields:c.value,push:n,remove:i,swap:r,insert:s,update:a,replace:o,prepend:l}}return t.expose({push:n,remove:i,swap:r,insert:s,update:a,replace:o,prepend:l}),()=>mg(void 0,t,h)}});Ao({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){const n=Jn(Za,void 0),i=Qe(()=>n==null?void 0:n.errors.value[e.name]);function r(){return{message:i.value}}return()=>{if(!i.value)return;const s=e.as?Es(e.as):e.as,o=mg(s,t,r),a=Object.assign({role:"alert"},t.attrs);return!s&&(Array.isArray(o)||!o)&&(o==null?void 0:o.length)?o:(Array.isArray(o)||!o)&&!(o!=null&&o.length)?Qn(s||"span",a,i.value):Qn(s,a,o)}}});const fte={props:{modelValue:{type:Object,default:()=>{}},fieldOptions:{type:Array,default:()=>[]},isValid:{type:Boolean,default:!1}},emits:["update:isValid"],setup(e,{emit:t,slots:n}){const{meta:i,validate:r,setValues:s}=gP(),o=Qe(()=>e.modelValue&&Object.keys(e.modelValue).length>0),a=Qe(()=>o.value?e.modelValue:n.default().reduce((c,h)=>Fo(sn({},c),{[h.props.name]:h.props.modelValue}),{})),l=(c,{included:h=!1}={})=>Object.keys(c).filter(u=>["name","field","label","rules"].includes(u)===h).reduce((u,d)=>(u[d]=c[d],u),{});return dn(a,c=>s(c)),_c(()=>t("update:isValid",i.value.valid)),{isProgrammaticForm:o,formFieldValues:a,filterDeepProps:l,validate:r}}};function pte(e,t,n,i,r,s){const o=nt("dope-form-field");return we(),De("div",null,[i.isProgrammaticForm?(we(!0),De(It,{key:0},Ur(n.fieldOptions,a=>(we(),bt(o,Co({key:a.name,modelValue:i.formFieldValues[a.name],"onUpdate:modelValue":l=>i.formFieldValues[a.name]=l},i.filterDeepProps(a,{included:!0}),{"deep-props":i.filterDeepProps(a,{included:!1})}),null,16,["modelValue","onUpdate:modelValue","deep-props"]))),128)):On(e.$slots,"default",{key:1})])}var mte=Ht(fte,[["render",pte]]),Fp={name:"InputText",emits:["update:modelValue"],props:{modelValue:null},methods:{onInput(e){this.$emit("update:modelValue",e.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}};const gte=["value"];function vte(e,t,n,i,r,s){return we(),De("input",Co({class:["p-inputtext p-component",{"p-filled":s.filled}],value:n.modelValue,onInput:t[0]||(t[0]=(...o)=>s.onInput&&s.onInput(...o))},e.$attrs),null,16,gte)}Fp.render=vte;var vP={name:"Textarea",emits:["update:modelValue"],props:{modelValue:null,autoResize:Boolean},mounted(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize(){const e=window.getComputedStyle(this.$el);this.$el.style.height="auto",this.$el.style.height=`calc(${e.borderTopWidth} + ${e.borderBottomWidth} + ${this.$el.scrollHeight}px)`,parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput(e){this.autoResize&&this.resize(),this.$emit("update:modelValue",e.target.value)}},computed:{filled(){return this.modelValue!=null&&this.modelValue.toString().length>0}}};const yte=["value"];function _te(e,t,n,i,r,s){return we(),De("textarea",Co({class:["p-inputtextarea p-inputtext p-component",{"p-filled":s.filled,"p-inputtextarea-resizable ":n.autoResize}]},e.$attrs,{value:n.modelValue,onInput:t[0]||(t[0]=(...o)=>s.onInput&&s.onInput(...o))}),null,16,yte)}function bte(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var wte=`
.p-inputtextarea-resizable {
    overflow: hidden;
    resize: none;
}
.p-fluid .p-inputtextarea {
    width: 100%;
}
`;bte(wte);vP.render=_te;const xte={props:{modelValue:{type:String,default:null},name:{type:String,required:!0},field:{type:String,default:"input"},label:{type:String,default:null},rules:{type:String,default:null},deepProps:{type:Object,default:()=>{}},showError:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e){const t=st(),n=Qe(()=>{switch(e.field){case"input":return Fp;case"textarea":return vP;default:return Fp}}),{errorMessage:i,value:r}=pP(e.name,e.rules,{initialValue:e.modelValue});return{value:r,errorMessage:i,inputComponent:n,fieldWrapper:t}}},Ete={ref:"fieldWrapper",class:"p-field"},Ste=["for"],Tte=["id"];function Mte(e,t,n,i,r,s){return we(),De("div",Ete,[n.label?(we(),De("label",{key:0,for:n.name,class:"p-label"},Je(n.label),9,Ste)):_t("",!0),Ee("div",null,[(we(),bt(Es(i.inputComponent),Co({id:n.name,modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),modelModifiers:{trim:!0},name:n.name},n.deepProps,{class:{"p-invalid":i.errorMessage},"aria-describedby":"help-input-"+n.name,onInput:t[1]||(t[1]=o=>e.$emit("update:modelValue",o.target.value))}),null,16,["id","modelValue","name","class","aria-describedby"])),n.showError?(we(),De("small",{key:0,id:"help-input-"+n.name,class:"p-error"},Je(i.errorMessage),9,Tte)):_t("",!0)])],512)}var Ate=Ht(xte,[["render",Mte],["__scopeId","data-v-3a07f998"]]),yP={name:"ToastMessage",emits:["close"],props:{message:null,template:null},closeTimeout:null,mounted(){this.message.life&&(this.closeTimeout=setTimeout(()=>{this.close()},this.message.life))},beforeUnmount(){this.clearCloseTimeout()},methods:{close(){this.$emit("close",this.message)},onCloseClick(){this.clearCloseTimeout(),this.close()},clearCloseTimeout(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)}},computed:{containerClass(){return["p-toast-message",this.message.styleClass,{"p-toast-message-info":this.message.severity==="info","p-toast-message-warn":this.message.severity==="warn","p-toast-message-error":this.message.severity==="error","p-toast-message-success":this.message.severity==="success"}]},iconClass(){return["p-toast-message-icon pi",{"pi-info-circle":this.message.severity==="info","pi-exclamation-triangle":this.message.severity==="warn","pi-times":this.message.severity==="error","pi-check":this.message.severity==="success"}]}},directives:{ripple:Fh}};const Cte={class:"p-toast-message-text"},Ite={class:"p-toast-summary"},Rte={class:"p-toast-detail"},Lte=Ee("span",{class:"p-toast-icon-close-icon pi pi-times"},null,-1),Pte=[Lte];function Nte(e,t,n,i,r,s){const o=Nh("ripple");return we(),De("div",{class:kt(s.containerClass),role:"alert","aria-live":"assertive","aria-atomic":"true"},[Ee("div",{class:kt(["p-toast-message-content",n.message.contentStyleClass])},[n.template?(we(),bt(Es(n.template),{key:1,message:n.message},null,8,["message"])):(we(),De(It,{key:0},[Ee("span",{class:kt(s.iconClass)},null,2),Ee("div",Cte,[Ee("span",Ite,Je(n.message.summary),1),Ee("div",Rte,Je(n.message.detail),1)])],64)),n.message.closable!==!1?Mi((we(),De("button",{key:2,class:"p-toast-icon-close p-link",onClick:t[0]||(t[0]=(...a)=>s.onCloseClick&&s.onCloseClick(...a)),type:"button"},Pte)),[[o]]):_t("",!0)],2)],2)}yP.render=Nte;var kte=0,_P={name:"Toast",inheritAttrs:!1,props:{group:{type:String,default:null},position:{type:String,default:"top-right"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},breakpoints:{type:Object,default:null}},data(){return{messages:[]}},styleElement:null,mounted(){ds.on("add",this.onAdd),ds.on("remove-group",this.onRemoveGroup),ds.on("remove-all-groups",this.onRemoveAllGroups),this.breakpoints&&this.createStyle()},beforeUnmount(){this.destroyStyle(),this.$refs.container&&this.autoZIndex&&_r.clear(this.$refs.container),ds.off("add",this.onAdd),ds.off("remove-group",this.onRemoveGroup),ds.off("remove-all-groups",this.onRemoveAllGroups)},methods:{add(e){e.id==null&&(e.id=kte++),this.messages=[...this.messages,e]},remove(e){let t=-1;for(let n=0;n<this.messages.length;n++)if(this.messages[n]===e){t=n;break}this.messages.splice(t,1)},onAdd(e){this.group==e.group&&this.add(e)},onRemoveGroup(e){this.group===e&&(this.messages=[])},onRemoveAllGroups(){this.messages=[]},onEnter(){this.$refs.container.setAttribute(this.attributeSelector,""),this.autoZIndex&&_r.set("modal",this.$refs.container,this.baseZIndex||this.$primevue.config.zIndex.modal)},onLeave(){this.$refs.container&&this.autoZIndex&&BV.isEmpty(this.messages)&&_r.clear(this.$refs.container)},createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let t in this.breakpoints){let n="";for(let i in this.breakpoints[t])n+=i+":"+this.breakpoints[t][i]+"!important;";e+=`
                        @media screen and (max-width: ${t}) {
                            .p-toast[${this.attributeSelector}] {
                                ${n}
                            }
                        }
                    `}this.styleElement.innerHTML=e}},destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}},components:{ToastMessage:yP},computed:{containerClass(){return["p-toast p-component p-toast-"+this.position,{"p-input-filled":this.$primevue.config.inputStyle==="filled","p-ripple-disabled":this.$primevue.config.ripple===!1}]},attributeSelector(){return qu()}}};function Ote(e,t,n,i,r,s){const o=nt("ToastMessage");return we(),bt(Yp,{to:"body"},[Ee("div",Co({ref:"container",class:s.containerClass},e.$attrs),[tt(bO,{name:"p-toast-message",tag:"div",onEnter:s.onEnter,onLeave:s.onLeave},{default:Rt(()=>[(we(!0),De(It,null,Ur(r.messages,a=>(we(),bt(o,{key:a.id,message:a,onClose:t[0]||(t[0]=l=>s.remove(l)),template:e.$slots.message},null,8,["message","template"]))),128))]),_:1},8,["onEnter","onLeave"])],16)])}function Dte(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var Fte=`
.p-toast {
    position: fixed;
    width: 25rem;
}
.p-toast-message-content {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: start;
        -ms-flex-align: start;
            align-items: flex-start;
}
.p-toast-message-text {
    -webkit-box-flex: 1;
        -ms-flex: 1 1 auto;
            flex: 1 1 auto;
}
.p-toast-top-right {
	top: 20px;
	right: 20px;
}
.p-toast-top-left {
	top: 20px;
	left: 20px;
}
.p-toast-bottom-left {
	bottom: 20px;
	left: 20px;
}
.p-toast-bottom-right {
	bottom: 20px;
	right: 20px;
}
.p-toast-top-center {
	top: 20px;
    left: 50%;
    -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
}
.p-toast-bottom-center {
	bottom: 20px;
    left: 50%;
    -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
}
.p-toast-center {
	left: 50%;
	top: 50%;
    min-width: 20vw;
    -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
}
.p-toast-icon-close {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    overflow: hidden;
    position: relative;
}
.p-toast-icon-close.p-link {
	cursor: pointer;
}

/* Animations */
.p-toast-message-enter-from {
    opacity: 0;
    -webkit-transform: translateY(50%);
    transform: translateY(50%);
}
.p-toast-message-leave-from {
    max-height: 1000px;
}
.p-toast .p-toast-message.p-toast-message-leave-to {
    max-height: 0;
    opacity: 0;
    margin-bottom: 0;
    overflow: hidden;
}
.p-toast-message-enter-active {
    -webkit-transition: transform .3s, opacity .3s;
    -webkit-transition: opacity .3s, -webkit-transform .3s;
    transition: opacity .3s, -webkit-transform .3s;
    transition: transform .3s, opacity .3s;
    transition: transform .3s, opacity .3s, -webkit-transform .3s;
}
.p-toast-message-leave-active {
    -webkit-transition: max-height .45s cubic-bezier(0, 1, 0, 1), opacity .3s, margin-bottom .3s;
    transition: max-height .45s cubic-bezier(0, 1, 0, 1), opacity .3s, margin-bottom .3s;
}
`;Dte(Fte);_P.render=Ote;var bP={name:"Card"};const Bte={class:"p-card p-component"},Vte={key:0,class:"p-card-header"},Ute={class:"p-card-body"},zte={key:0,class:"p-card-title"},Hte={key:1,class:"p-card-subtitle"},Wte={class:"p-card-content"},Gte={key:2,class:"p-card-footer"};function $te(e,t,n,i,r,s){return we(),De("div",Bte,[e.$slots.header?(we(),De("div",Vte,[On(e.$slots,"header")])):_t("",!0),Ee("div",Ute,[e.$slots.title?(we(),De("div",zte,[On(e.$slots,"title")])):_t("",!0),e.$slots.subtitle?(we(),De("div",Hte,[On(e.$slots,"subtitle")])):_t("",!0),Ee("div",Wte,[On(e.$slots,"content")]),e.$slots.footer?(we(),De("div",Gte,[On(e.$slots,"footer")])):_t("",!0)])])}function jte(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var qte=`
.p-card-header img {
    width: 100%;
}
`;jte(qte);bP.render=$te;var wP={name:"Button",props:{label:{type:String},icon:{type:String},iconPos:{type:String,default:"left"},badge:{type:String},badgeClass:{type:String,default:null},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:"pi pi-spinner pi-spin"}},computed:{buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":this.icon&&!this.label,"p-button-vertical":(this.iconPos==="top"||this.iconPos==="bottom")&&this.label,"p-disabled":this.$attrs.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label}},iconClass(){return[this.loading?"p-button-loading-icon "+this.loadingIcon:this.icon,"p-button-icon",{"p-button-icon-left":this.iconPos==="left"&&this.label,"p-button-icon-right":this.iconPos==="right"&&this.label,"p-button-icon-top":this.iconPos==="top"&&this.label,"p-button-icon-bottom":this.iconPos==="bottom"&&this.label}]},badgeStyleClass(){return["p-badge p-component",this.badgeClass,{"p-badge-no-gutter":this.badge&&String(this.badge).length===1}]},disabled(){return this.$attrs.disabled||this.loading}},directives:{ripple:Fh}};const Kte=["disabled"],Xte={class:"p-button-label"};function Yte(e,t,n,i,r,s){const o=Nh("ripple");return Mi((we(),De("button",{class:kt(s.buttonClass),type:"button",disabled:s.disabled},[On(e.$slots,"default",{},()=>[n.loading&&!n.icon?(we(),De("span",{key:0,class:kt(s.iconClass)},null,2)):_t("",!0),n.icon?(we(),De("span",{key:1,class:kt(s.iconClass)},null,2)):_t("",!0),Ee("span",Xte,Je(n.label||"\xA0"),1),n.badge?(we(),De("span",{key:2,class:kt(s.badgeStyleClass)},Je(n.badge),3)):_t("",!0)])],10,Kte)),[[o]])}wP.render=Yte;var xP={name:"BlockUI",emits:["block","unblock"],props:{blocked:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0}},mask:null,mounted(){this.blocked&&this.block()},watch:{blocked(e){e===!0?this.block():this.unblock()}},methods:{block(){let e="p-blockui p-component-overlay p-component-overlay-enter";this.fullScreen?(e+=" p-blockui-document",this.mask=document.createElement("div"),this.mask.setAttribute("class",e),document.body.appendChild(this.mask),He.addClass(document.body,"p-overflow-hidden"),document.activeElement.blur()):(this.mask=document.createElement("div"),this.mask.setAttribute("class",e),this.$refs.container.appendChild(this.mask)),this.autoZIndex&&_r.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal),this.$emit("block")},unblock(){He.addClass(this.mask,"p-component-overlay-leave"),this.mask.addEventListener("animationend",()=>{this.removeMask()})},removeMask(){_r.clear(this.mask),this.fullScreen?(document.body.removeChild(this.mask),He.removeClass(document.body,"p-overflow-hidden")):this.$refs.container.removeChild(this.mask),this.$emit("unblock")}}};function Zte(e,t,n,i,r,s){return we(),De("div",Co({ref:"container",class:"p-blockui-container"},e.$attrs),[On(e.$slots,"default")],16)}function Jte(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var Qte=`
.p-blockui-container {
    position: relative;
}
.p-blockui {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.p-blockui.p-component-overlay {
    position: absolute;
}
.p-blockui-document.p-component-overlay {
    position: fixed;
}
`;Jte(Qte);xP.render=Zte;var EP={name:"ProgressSpinner",props:{strokeWidth:{type:String,default:"2"},fill:{type:String,default:"none"},animationDuration:{type:String,default:"2s"}},computed:{svgStyle(){return{"animation-duration":this.animationDuration}}}};const ene={class:"p-progress-spinner",role:"alert","aria-busy":"true"},tne=["fill","stroke-width"];function nne(e,t,n,i,r,s){return we(),De("div",ene,[(we(),De("svg",{class:"p-progress-spinner-svg",viewBox:"25 25 50 50",style:Ba(s.svgStyle)},[Ee("circle",{class:"p-progress-spinner-circle",cx:"50",cy:"50",r:"20",fill:n.fill,"stroke-width":n.strokeWidth,strokeMiterlimit:"10"},null,8,tne)],4))])}function ine(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var rne=`
.p-progress-spinner {
    position: relative;
    margin: 0 auto;
    width: 100px;
    height: 100px;
    display: inline-block;
}
.p-progress-spinner::before {
     content: '';
     display: block;
     padding-top: 100%;
}
.p-progress-spinner-svg {
    -webkit-animation: p-progress-spinner-rotate 2s linear infinite;
            animation: p-progress-spinner-rotate 2s linear infinite;
    height: 100%;
    -webkit-transform-origin: center center;
            transform-origin: center center;
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}
.p-progress-spinner-circle {
    stroke-dasharray: 89, 200;
    stroke-dashoffset: 0;
    stroke: #d62d20;
    -webkit-animation: p-progress-spinner-dash 1.5s ease-in-out infinite, p-progress-spinner-color 6s ease-in-out infinite;
            animation: p-progress-spinner-dash 1.5s ease-in-out infinite, p-progress-spinner-color 6s ease-in-out infinite;
    stroke-linecap: round;
}
@-webkit-keyframes p-progress-spinner-rotate {
100% {
        -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
}
}
@keyframes p-progress-spinner-rotate {
100% {
        -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
}
}
@-webkit-keyframes p-progress-spinner-dash {
0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
}
50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
}
100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
}
}
@keyframes p-progress-spinner-dash {
0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
}
50% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -35px;
}
100% {
        stroke-dasharray: 89, 200;
        stroke-dashoffset: -124px;
}
}
@-webkit-keyframes p-progress-spinner-color {
100%,
    0% {
        stroke: #d62d20;
}
40% {
        stroke: #0057e7;
}
66% {
        stroke: #008744;
}
80%,
    90% {
        stroke: #ffa700;
}
}
@keyframes p-progress-spinner-color {
100%,
    0% {
        stroke: #d62d20;
}
40% {
        stroke: #0057e7;
}
66% {
        stroke: #008744;
}
80%,
    90% {
        stroke: #ffa700;
}
}
`;ine(rne);EP.render=nne;var SP={name:"ProgressBar",props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},computed:{containerClass(){return["p-progressbar p-component",{"p-progressbar-determinate":this.determinate,"p-progressbar-indeterminate":this.indeterminate}]},progressStyle(){return{width:this.value+"%",display:"flex"}},indeterminate(){return this.mode==="indeterminate"},determinate(){return this.mode==="determinate"}}};const sne=["aria-valuenow"],one={key:0,class:"p-progressbar-label"},ane={key:1,class:"p-progressbar-indeterminate-container"},lne=Ee("div",{class:"p-progressbar-value p-progressbar-value-animate"},null,-1),cne=[lne];function une(e,t,n,i,r,s){return we(),De("div",{role:"progressbar",class:kt(s.containerClass),"aria-valuemin":"0","aria-valuenow":n.value,"aria-valuemax":"100"},[s.determinate?(we(),De("div",{key:0,class:"p-progressbar-value p-progressbar-value-animate",style:Ba(s.progressStyle)},[n.value!=null&&n.value!==0&&n.showValue?(we(),De("div",one,[On(e.$slots,"default",{},()=>[Ki(Je(n.value+"%"),1)])])):_t("",!0)],4)):_t("",!0),s.indeterminate?(we(),De("div",ane,cne)):_t("",!0)],10,sne)}function hne(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var dne=`
.p-progressbar {
    position: relative;
    overflow: hidden;
}
.p-progressbar-determinate .p-progressbar-value {
    height: 100%;
    width: 0%;
    position: absolute;
    display: none;
    border: 0 none;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    overflow: hidden;
}
.p-progressbar-determinate .p-progressbar-label {
    display: -webkit-inline-box;
    display: -ms-inline-flexbox;
    display: inline-flex;
}
.p-progressbar-determinate .p-progressbar-value-animate {
    -webkit-transition: width 1s ease-in-out;
    transition: width 1s ease-in-out;
}
.p-progressbar-indeterminate .p-progressbar-value::before {
      content: '';
      position: absolute;
      background-color: inherit;
      top: 0;
      left: 0;
      bottom: 0;
      will-change: left, right;
      -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
              animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
}
.p-progressbar-indeterminate .p-progressbar-value::after {
    content: '';
    position: absolute;
    background-color: inherit;
    top: 0;
    left: 0;
    bottom: 0;
    will-change: left, right;
    -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
            animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
    -webkit-animation-delay: 1.15s;
            animation-delay: 1.15s;
}
@-webkit-keyframes p-progressbar-indeterminate-anim {
0% {
    left: -35%;
    right: 100%;
}
60% {
    left: 100%;
    right: -90%;
}
100% {
    left: 100%;
    right: -90%;
}
}
@keyframes p-progressbar-indeterminate-anim {
0% {
    left: -35%;
    right: 100%;
}
60% {
    left: 100%;
    right: -90%;
}
100% {
    left: 100%;
    right: -90%;
}
}
@-webkit-keyframes p-progressbar-indeterminate-anim-short {
0% {
    left: -200%;
    right: 100%;
}
60% {
    left: 107%;
    right: -8%;
}
100% {
    left: 107%;
    right: -8%;
}
}
@keyframes p-progressbar-indeterminate-anim-short {
0% {
    left: -200%;
    right: 100%;
}
60% {
    left: 107%;
    right: -8%;
}
100% {
    left: 107%;
    right: -8%;
}
}
`;hne(dne);SP.render=une;var TP={name:"Divider",props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},computed:{containerClass(){return["p-divider p-component","p-divider-"+this.layout,"p-divider-"+this.type,{"p-divider-left":this.layout==="horizontal"&&(!this.align||this.align==="left")},{"p-divider-center":this.layout==="horizontal"&&this.align==="center"},{"p-divider-right":this.layout==="horizontal"&&this.align==="right"},{"p-divider-top":this.layout==="vertical"&&this.align==="top"},{"p-divider-center":this.layout==="vertical"&&(!this.align||this.align==="center")},{"p-divider-bottom":this.layout==="vertical"&&this.align==="bottom"}]}}};const fne={key:0,class:"p-divider-content"};function pne(e,t,n,i,r,s){return we(),De("div",{class:kt(s.containerClass),role:"separator"},[e.$slots.default?(we(),De("div",fne,[On(e.$slots,"default")])):_t("",!0)],2)}function mne(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document=="undefined")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}var gne=`
.p-divider-horizontal {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    width: 100%;
    position: relative;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
}
.p-divider-horizontal:before {
    position: absolute;
    display: block;
    top: 50%;
    left: 0;
    width: 100%;
    content: "";
}
.p-divider-horizontal.p-divider-left {
    -webkit-box-pack: start;
        -ms-flex-pack: start;
            justify-content: flex-start;
}
.p-divider-horizontal.p-divider-right {
    -webkit-box-pack: end;
        -ms-flex-pack: end;
            justify-content: flex-end;
}
.p-divider-horizontal.p-divider-center {
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
}
.p-divider-content {
    z-index: 1;
}
.p-divider-vertical {
    min-height: 100%;
    margin: 0 1rem;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    position: relative;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
}
.p-divider-vertical:before {
    position: absolute;
    display: block;
    top: 0;
    left: 50%;
    height: 100%;
    content: "";
}
.p-divider-vertical.p-divider-top {
    -webkit-box-align: start;
        -ms-flex-align: start;
            align-items: flex-start;
}
.p-divider-vertical.p-divider-center {
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
}
.p-divider-vertical.p-divider-bottom {
    -webkit-box-align: end;
        -ms-flex-align: end;
            align-items: flex-end;
}
.p-divider-solid.p-divider-horizontal:before {
    border-top-style: solid;
}
.p-divider-solid.p-divider-vertical:before {
    border-left-style: solid;
}
.p-divider-dashed.p-divider-horizontal:before {
    border-top-style: dashed;
}
.p-divider-dashed.p-divider-vertical:before {
    border-left-style: dashed;
}
.p-divider-dotted.p-divider-horizontal:before {
    border-top-style: dotted;
}
.p-divider-dotted.p-divider-horizontal:before {
    border-left-style: dotted;
}
`;mne(gne);TP.render=pne;function vne(e){e.component("DopeForm",mte),e.component("DopeFormField",Ate),e.component("PrimeToast",_P),e.component("PrimeCard",bP),e.component("PrimeButton",wP),e.component("PrimeBlockUi",xP),e.component("PrimeProgressSpinner",EP),e.component("PrimeProgressBar",SP),e.component("PrimeDivider",TP),e.component("PrimeInputText",Fp)}/**
  * vee-validate v4.5.7
  * (c) 2021 Abdelrahman Awad
  * @license MIT
  */const cf={en:/^[A-Z]*$/i,cs:/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]*$/i,da:/^[A-ZÆØÅ]*$/i,de:/^[A-ZÄÖÜß]*$/i,es:/^[A-ZÁÉÍÑÓÚÜ]*$/i,fr:/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]*$/i,it:/^[A-Z\xC0-\xFF]*$/i,lt:/^[A-ZĄČĘĖĮŠŲŪŽ]*$/i,nl:/^[A-ZÉËÏÓÖÜ]*$/i,hu:/^[A-ZÁÉÍÓÖŐÚÜŰ]*$/i,pl:/^[A-ZĄĆĘŚŁŃÓŻŹ]*$/i,pt:/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]*$/i,ru:/^[А-ЯЁ]*$/i,sk:/^[A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ]*$/i,sr:/^[A-ZČĆŽŠĐ]*$/i,sv:/^[A-ZÅÄÖ]*$/i,tr:/^[A-ZÇĞİıÖŞÜ]*$/i,uk:/^[А-ЩЬЮЯЄІЇҐ]*$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]*$/,az:/^[A-ZÇƏĞİıÖŞÜ]*$/i,ug:/^[A-Zچۋېرتيۇڭوپھسداەىقكلزشغۈبنمژفگخجۆئ]*$/i},uf={en:/^[A-Z\s]*$/i,cs:/^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ\s]*$/i,da:/^[A-ZÆØÅ\s]*$/i,de:/^[A-ZÄÖÜß\s]*$/i,es:/^[A-ZÁÉÍÑÓÚÜ\s]*$/i,fr:/^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ\s]*$/i,it:/^[A-Z\xC0-\xFF\s]*$/i,lt:/^[A-ZĄČĘĖĮŠŲŪŽ\s]*$/i,nl:/^[A-ZÉËÏÓÖÜ\s]*$/i,hu:/^[A-ZÁÉÍÓÖŐÚÜŰ\s]*$/i,pl:/^[A-ZĄĆĘŚŁŃÓŻŹ\s]*$/i,pt:/^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ\s]*$/i,ru:/^[А-ЯЁ\s]*$/i,sk:/^[A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ\s]*$/i,sr:/^[A-ZČĆŽŠĐ\s]*$/i,sv:/^[A-ZÅÄÖ\s]*$/i,tr:/^[A-ZÇĞİıÖŞÜ\s]*$/i,uk:/^[А-ЩЬЮЯЄІЇҐ\s]*$/i,ar:/^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ\s]*$/,az:/^[A-ZÇƏĞİıÖŞÜ\s]*$/i,ug:/^[A-Zچۋېرتيۇڭوپھسداەىقكلزشغۈبنمژفگخجۆئ\s]*$/i},hf={en:/^[0-9A-Z]*$/i,cs:/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]*$/i,da:/^[0-9A-ZÆØÅ]$/i,de:/^[0-9A-ZÄÖÜß]*$/i,es:/^[0-9A-ZÁÉÍÑÓÚÜ]*$/i,fr:/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]*$/i,it:/^[0-9A-Z\xC0-\xFF]*$/i,lt:/^[0-9A-ZĄČĘĖĮŠŲŪŽ]*$/i,hu:/^[0-9A-ZÁÉÍÓÖŐÚÜŰ]*$/i,nl:/^[0-9A-ZÉËÏÓÖÜ]*$/i,pl:/^[0-9A-ZĄĆĘŚŁŃÓŻŹ]*$/i,pt:/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]*$/i,ru:/^[0-9А-ЯЁ]*$/i,sk:/^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ]*$/i,sr:/^[0-9A-ZČĆŽŠĐ]*$/i,sv:/^[0-9A-ZÅÄÖ]*$/i,tr:/^[0-9A-ZÇĞİıÖŞÜ]*$/i,uk:/^[0-9А-ЩЬЮЯЄІЇҐ]*$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]*$/,az:/^[0-9A-ZÇƏĞİıÖŞÜ]*$/i,ug:/^[0-9A-Zچۋېرتيۇڭوپھسداەىقكلزشغۈبنمژفگخجۆئ]*$/i},df={en:/^[0-9A-Z_-]*$/i,cs:/^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ_-]*$/i,da:/^[0-9A-ZÆØÅ_-]*$/i,de:/^[0-9A-ZÄÖÜß_-]*$/i,es:/^[0-9A-ZÁÉÍÑÓÚÜ_-]*$/i,fr:/^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ_-]*$/i,it:/^[0-9A-Z\xC0-\xFF_-]*$/i,lt:/^[0-9A-ZĄČĘĖĮŠŲŪŽ_-]*$/i,nl:/^[0-9A-ZÉËÏÓÖÜ_-]*$/i,hu:/^[0-9A-ZÁÉÍÓÖŐÚÜŰ_-]*$/i,pl:/^[0-9A-ZĄĆĘŚŁŃÓŻŹ_-]*$/i,pt:/^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ_-]*$/i,ru:/^[0-9А-ЯЁ_-]*$/i,sk:/^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ_-]*$/i,sr:/^[0-9A-ZČĆŽŠĐ_-]*$/i,sv:/^[0-9A-ZÅÄÖ_-]*$/i,tr:/^[0-9A-ZÇĞİıÖŞÜ_-]*$/i,uk:/^[0-9А-ЩЬЮЯЄІЇҐ_-]*$/i,ar:/^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ_-]*$/,az:/^[0-9A-ZÇƏĞİıÖŞÜ_-]*$/i,ug:/^[0-9A-Zچۋېرتيۇڭوپھسداەىقكلزشغۈبنمژفگخجۆئ_-]*$/i},gg=e=>{if(!!e)return Array.isArray(e)?e[0]:e.locale};function hr(e,t){return Array.isArray(e)?e[0]:e[t]}function an(e){return!!(e==null||e===""||Array.isArray(e)&&e.length===0)}const aw=(e,t)=>{if(an(e))return!0;const n=gg(t);if(Array.isArray(e))return e.every(r=>aw(r,{locale:n}));const i=String(e);return n?(cf[n]||cf.en).test(i):Object.keys(cf).some(r=>cf[r].test(i))},lw=(e,t)=>{if(an(e))return!0;const n=gg(t);if(Array.isArray(e))return e.every(r=>lw(r,{locale:n}));const i=String(e);return n?(df[n]||df.en).test(i):Object.keys(df).some(r=>df[r].test(i))},cw=(e,t)=>{if(an(e))return!0;const n=gg(t);if(Array.isArray(e))return e.every(r=>cw(r,{locale:n}));const i=String(e);return n?(hf[n]||hf.en).test(i):Object.keys(hf).some(r=>hf[r].test(i))},uw=(e,t)=>{if(an(e))return!0;const n=gg(t);if(Array.isArray(e))return e.every(r=>uw(r,{locale:n}));const i=String(e);return n?(uf[n]||uf.en).test(i):Object.keys(uf).some(r=>uf[r].test(i))};function yne(e){return e?Array.isArray(e)?{min:e[0],max:e[1]}:e:{min:0,max:0}}const hw=(e,t)=>{if(an(e))return!0;const{min:n,max:i}=yne(t);if(Array.isArray(e))return e.every(s=>!!hw(s,{min:n,max:i}));const r=Number(e);return Number(n)<=r&&Number(i)>=r},MP=(e,t)=>{const n=hr(t,"target");return String(e)===String(n)},dw=(e,t)=>{if(an(e))return!0;const n=hr(t,"length");if(Array.isArray(e))return e.every(r=>dw(r,{length:n}));const i=String(e);return/^[0-9]*$/.test(i)&&i.length===Number(n)},_ne=(e,t,n)=>{const i=window.URL||window.webkitURL;return new Promise(r=>{const s=new Image;s.onerror=()=>r(!1),s.onload=()=>r(s.width===t&&s.height===n),s.src=i.createObjectURL(e)})};function bne(e){return e?Array.isArray(e)?{width:Number(e[0]),height:Number(e[1])}:{width:Number(e.width),height:Number(e.height)}:{width:0,height:0}}const AP=(e,t)=>{if(an(e))return!0;const{width:n,height:i}=bne(t),r=[],s=Array.isArray(e)?e:[e];for(let o=0;o<s.length;o++){if(!/\.(jpg|svg|jpeg|png|bmp|gif)$/i.test(s[o].name))return Promise.resolve(!1);r.push(s[o])}return Promise.all(r.map(o=>_ne(o,n,i))).then(o=>o.every(a=>a))},CP=e=>{if(an(e))return!0;const t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return Array.isArray(e)?e.every(n=>t.test(String(n))):t.test(String(e))},IP=(e,t)=>{if(an(e))return!0;t||(t=[]);const n=new RegExp(`.(${t.join("|")})$`,"i");return Array.isArray(e)?e.every(i=>n.test(i.name)):n.test(e.name)},RP=e=>{if(an(e))return!0;const t=/\.(jpg|svg|jpeg|png|bmp|gif|webp)$/i;return Array.isArray(e)?e.every(n=>t.test(n.name)):t.test(e.name)},LP=e=>an(e)?!0:Array.isArray(e)?e.every(t=>/^-?[0-9]+$/.test(String(t))):/^-?[0-9]+$/.test(String(e)),PP=(e,t)=>{const n=hr(t,"other");return e===n},NP=(e,t)=>{const n=hr(t,"other");return e!==n};function kP(e){return e==null}function wne(e){return Array.isArray(e)&&e.length===0}const OP=(e,t)=>{const n=hr(t,"length");return kP(e)?!1:(typeof e=="number"&&(e=String(e)),e.length||(e=Array.from(e)),e.length===Number(n))},fw=(e,t)=>{if(an(e))return!0;const n=hr(t,"length");return Array.isArray(e)?e.every(i=>fw(i,{length:n})):String(e).length<=Number(n)},pw=(e,t)=>{if(an(e))return!0;const n=hr(t,"max");return Array.isArray(e)?e.length>0&&e.every(i=>pw(i,{max:n})):Number(e)<=Number(n)},DP=(e,t)=>{if(an(e))return!0;t||(t=[]);const n=new RegExp(`${t.join("|").replace("*",".+")}$`,"i");return Array.isArray(e)?e.every(i=>n.test(i.type)):n.test(e.type)},mw=(e,t)=>{if(an(e))return!0;const n=hr(t,"length");return Array.isArray(e)?e.every(i=>mw(i,{length:n})):String(e).length>=Number(n)},gw=(e,t)=>{if(an(e))return!0;const n=hr(t,"min");return Array.isArray(e)?e.length>0&&e.every(i=>gw(i,{min:n})):Number(e)>=Number(n)},vg=(e,t)=>an(e)?!0:Array.isArray(e)?e.every(n=>vg(n,t)):Array.from(t).some(n=>n==e),FP=(e,t)=>an(e)?!0:!vg(e,t),xne=/^[٠١٢٣٤٥٦٧٨٩]+$/,Ene=/^[0-9]+$/,BP=e=>{if(an(e))return!0;const t=n=>{const i=String(n);return Ene.test(i)||xne.test(i)};return Array.isArray(e)?e.every(t):t(e)},vw=(e,t)=>{if(an(e))return!0;let n=hr(t,"regex");return typeof n=="string"&&(n=new RegExp(n)),Array.isArray(e)?e.every(i=>vw(i,{regex:n})):n.test(String(e))},VP=e=>kP(e)||wne(e)||e===!1?!1:!!String(e).trim().length,UP=(e,t)=>{if(an(e))return!0;let n=hr(t,"size");if(n=Number(n),isNaN(n))return!1;const i=n*1024;if(!Array.isArray(e))return e.size<=i;for(let r=0;r<e.length;r++)if(e[r].size>i)return!1;return!0},zP=(e,t)=>{var n;if(an(e))return!0;let i=hr(t,"pattern");typeof i=="string"&&(i=new RegExp(i));try{new URL(e)}catch{return!1}return(n=i==null?void 0:i.test(e))!==null&&n!==void 0?n:!0},Sne={alpha_dash:lw,alpha_num:cw,alpha_spaces:uw,alpha:aw,between:hw,confirmed:MP,digits:dw,dimensions:AP,email:CP,ext:IP,image:RP,integer:LP,is_not:NP,is:PP,length:OP,max_value:pw,max:fw,mimes:DP,min_value:gw,min:mw,not_one_of:FP,numeric:BP,one_of:vg,regex:vw,required:VP,size:UP,url:zP};var zv=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",alpha:aw,alpha_dash:lw,alpha_num:cw,alpha_spaces:uw,between:hw,confirmed:MP,default:Sne,digits:dw,dimensions:AP,email:CP,ext:IP,image:RP,integer:LP,is:PP,is_not:NP,length:OP,max:fw,max_value:pw,mimes:DP,min:mw,min_value:gw,not_one_of:FP,numeric:BP,one_of:vg,regex:vw,required:VP,size:UP,url:zP});/**
  * vee-validate v4.5.7
  * (c) 2021 Abdelrahman Awad
  * @license MIT
  */function S1(e){return typeof e=="function"}const Tne=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function T1(e,t){return e.replace(/(\d:)?{([^}]+)}/g,function(n,i,r){if(!i||!t.params)return r in t?t[r]:t.params&&r in t.params?t.params[r]:`{${r}}`;if(!Array.isArray(t.params))return r in t.params?t.params[r]:`{${r}}`;const s=Number(i.replace(":",""));return s in t.params?t.params[s]:`${i}{${r}}`})}function HP(e,t){return Object.keys(t).forEach(n=>{if(Tne(t[n])){e[n]||(e[n]={}),HP(e[n],t[n]);return}e[n]=t[n]}),e}class Mne{constructor(t,n){this.container={},this.locale=t,this.merge(n)}resolve(t){return this.format(this.locale,t)}getLocaleDefault(t,n){var i,r,s,o,a;return((s=(r=(i=this.container[t])===null||i===void 0?void 0:i.fields)===null||r===void 0?void 0:r[n])===null||s===void 0?void 0:s._default)||((a=(o=this.container[t])===null||o===void 0?void 0:o.messages)===null||a===void 0?void 0:a._default)}format(t,n){var i,r,s,o,a,l,c,h;let u;const{field:d,rule:f,form:p}=n,y=(s=(r=(i=this.container[t])===null||i===void 0?void 0:i.names)===null||r===void 0?void 0:r[d])!==null&&s!==void 0?s:d;return f?(u=((l=(a=(o=this.container[t])===null||o===void 0?void 0:o.fields)===null||a===void 0?void 0:a[d])===null||l===void 0?void 0:l[f.name])||((h=(c=this.container[t])===null||c===void 0?void 0:c.messages)===null||h===void 0?void 0:h[f.name]),u||(u=this.getLocaleDefault(t,d)||`${y} is not valid`),S1(u)?u(n):T1(u,Object.assign(Object.assign({},p),{field:y,params:f.params}))):(u=this.getLocaleDefault(t,d)||`${y} is not valid`,S1(u)?u(n):T1(u,Object.assign(Object.assign({},p),{field:y})))}merge(t){HP(this.container,t)}}let ea;function Ane(e,t){ea||(ea=new Mne("en",{}));const n=i=>ea.resolve(i);return typeof e=="string"?(ea.locale=e,t&&ea.merge({[e]:t}),n):(ea.merge(e),n)}function Cne(e){ea.locale=e}const Ine="en",Rne={_default:"The {field} is not valid",alpha:"The {field} field may only contain alphabetic characters",alpha_num:"The {field} field may only contain alpha-numeric characters",alpha_dash:"The {field} field may contain alpha-numeric characters as well as dashes and underscores",alpha_spaces:"The {field} field may only contain alphabetic characters as well as spaces",between:"The {field} field must be between 0:{min} and 1:{max}",confirmed:"The {field} field confirmation does not match",digits:"The {field} field must be numeric and exactly contain 0:{length} digits",dimensions:"The {field} field must be 0:{width} pixels by 1:{height} pixels",email:"The {field} field must be a valid email",excluded:"The {field} field is not a valid value",ext:"The {field} field is not a valid file",image:"The {field} field must be an image",integer:"The {field} field must be an integer",length:"The {field} field must be 0:{length} long",max_value:"The {field} field must be 0:{max} or less",max:"The {field} field may not be greater than 0:{length} characters",mimes:"The {field} field must have a valid file type",min_value:"The {field} field must be 0:{min} or more",min:"The {field} field must be at least 0:{length} characters",numeric:"The {field} field may only contain numeric characters",one_of:"The {field} field is not a valid value",regex:"The {field} field format is invalid",required_if:"The {field} field is required",required:"The {field} field is required",size:"The {field} field size must be less than 0:{size}KB",url:"The {field} field is not a valid URL"};var Lne={code:Ine,messages:Rne};const Pne="cs",Nne={alpha:"Pole {field} m\u016F\u017Ee obsahovat pouze p\xEDsmena",alpha_num:"Pole {field} m\u016F\u017Ee obsahovat pouze alfanumerick\xE9 znaky",alpha_dash:"Pole {field} m\u016F\u017Ee obsahovat pouze alfanumerick\xE9 znaky, poml\u010Dky nebo podtr\u017E\xEDtka",alpha_spaces:"Pole {field} m\u016F\u017Ee obsahovat pouze alfanumerick\xE9 znaky a mezery",between:"Pole {field} mus\xED b\xFDt mezi 0:{min} a 1:{max}",confirmed:"Kontrola pole {field} se neshoduje",digits:"Pole {field} mus\xED b\xFDt \u010D\xEDslo a mus\xED obshovat p\u0159esn\u011B 0:{length} \u010D\xEDslic",dimensions:"{field} mus\xED m\xEDt 0:{width} pixel\u016F na 1:{height} pixel\u016F",email:"Pole {field} mus\xED b\xFDt validn\xED email",excluded:"{field} mus\xED b\xFDt spr\xE1vn\xE1 hodnota",ext:"{field} mus\xED b\xFDt validn\xED soubor",image:"{field} mus\xED b\xFDt obr\xE1zek",max_value:"Pole {field} mus\xED b\xFDt 0:{max}, nebo mens\xED",max:"{field} nesm\xED b\xFDt del\u0161\xED ne\u017E 0:{length} znak\u016F",mimes:"Pole {field} mus\xED b\xFDt spr\xE1vn\xFD typ souboru",min_value:"Pole {field} mus\xED b\xFDt 0:{min}, nebo v\xEDce",min:"Pole {field} mus\xED obsahovat alespo\u0148 0:{length} znak\u016F",numeric:"Pole {field} m\u016F\u017Ee obsahovat pouze \u010D\xEDslice",one_of:"{field} mus\xED b\xFDt spr\xE1vn\xE1 hodnota",regex:"Pole {field} nen\xED vypln\u011Bno spr\xE1vn\u011B",required:"Pole {field} je povinn\xE9",required_if:"Pole {field} je povinn\xE9",size:"{field} mus\xED b\xFDt men\u0161\xED ne\u017E 0:{size}"};var kne={code:Pne,messages:Nne},M1={cs:{name:"n\xE1zev",description:"popis"},en:{name:"name",description:"description"}};function One(e){Object.keys(zv).forEach(t=>{typeof zv[t]=="function"&&y1(t,zv[t])}),y1("confirmed",(t,[n],i)=>{if(t===i.form[n])return!0}),Gee({validateOnInput:!0,generateMessage:Ane({en:sn(sn({},Lne),M1.en),cs:sn(sn({},kne),M1.cs)})}),Cne(e)}let Pr;const Hv=Ku.state.locale.lang;R0.auth.watchAuthState(()=>{Pr||(Pr=RO(IV),Pr.use(R0),Pr.use(Lf),Pr.use(Ku),Pr.use(DF()),hee(Pr,Hv),See(Pr,Hv),vne(Pr),One(Hv),Pr.mount("#app"))});
